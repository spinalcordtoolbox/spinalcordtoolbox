#!/usr/bin/env python

# This script creates from scratch all the necessary data to be used for the creation of the template T2.

import commands, sys, os

# Get path of the toolbox
path_sct = os.environ.get("SCT_DIR", os.path.dirname(os.path.dirname(__file__)))
# Append path that contains scripts, to be able to load modules
sys.path.append(os.path.join(path_sct, "scripts"))
sys.path.append(path_sct + '/dev/tamag')

import sct_utils as sct

##Commands to generate label and txt files

path_results ='/Users/tamag/data/data_template/info/test'

if not os.path.isdir(path_results +'/' + 'T1'):
	os.makedirs(path_results +'/' + 'T1')

if not os.path.isdir(path_results +'/' + 'T2'):
	os.makedirs(path_results +'/' + 'T2')


#Preprocessing for subject errsm_02
os.makedirs(path_results + '/T2/errsm_02')
os.chdir(path_results + '/T2/errsm_02')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_02/22-SPINE_T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 25,63,169,20:26,58,200,19:25,54,229,18:25,53,256,17:25,52,282,16:25,52,307,15:24,55,333,14:23,58,356,13:24,63,379,12:27,69,400,11:29,76,421,10:29,86,440,9:30,96,458,8:31,101,474,7:31,103,489,6:31,105,505,5:29,107,521,4:26,108,538,3:26,114,594,2:22,122,617,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  100 -end 620 ')
f_crop = open('crop.txt', 'w')
f_crop.write('100,620,0,475')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 23,63,0,1:23,63,1,1:23,62,2,1:23,62,3,1:23,62,4,1:23,62,5,1:23,61,6,1:23,61,7,1:22,61,8,1:22,61,9,1:22,60,10,1:22,60,11,1:22,60,12,1:22,60,13,1:22,59,14,1:22,59,15,1:22,59,16,1:22,59,17,1:22,58,18,1:22,58,19,1:22,58,20,1:22,58,21,1:22,58,22,1:22,57,23,1:22,57,24,1:22,57,25,1:22,57,26,1:22,57,27,1:22,56,28,1:22,56,29,1:22,56,30,1:22,56,31,1:22,56,32,1:22,55,33,1:22,55,34,1:22,55,35,1:22,55,36,1:22,55,37,1:22,54,38,1:22,54,39,1:22,54,40,1:22,54,41,1:23,54,42,1:23,54,43,1:23,53,44,1:23,53,45,1:23,53,46,1:23,53,47,1:23,53,48,1:23,53,49,1:23,52,50,1:23,52,51,1:23,52,52,1:23,52,53,1:23,52,54,1:23,52,55,1:23,52,56,1:23,51,57,1:23,51,58,1:23,51,59,1:23,51,60,1:23,51,61,1:23,51,62,1:23,51,63,1:23,50,64,1:23,50,65,1:23,50,66,1:23,50,67,1:23,50,68,1:23,50,69,1:23,50,70,1:23,50,71,1:23,49,72,1:23,49,73,1:23,49,74,1:23,49,75,1:23,49,76,1:23,49,77,1:23,49,78,1:23,49,79,1:23,49,80,1:23,48,81,1:23,48,82,1:23,48,83,1:23,48,84,1:23,48,85,1:23,48,86,1:23,48,87,1:23,48,88,1:24,48,89,1:24,48,90,1:24,47,91,1:24,47,92,1:24,47,93,1:24,47,94,1:24,47,95,1:24,47,96,1:24,47,97,1:24,47,98,1:24,47,99,1:24,47,100,1:24,47,101,1:24,47,102,1:24,46,103,1:24,46,104,1:24,46,105,1:24,46,106,1:24,46,107,1:24,46,108,1:24,46,109,1:24,46,110,1:24,46,111,1:24,46,112,1:24,46,113,1:24,46,114,1:24,46,115,1:24,45,116,1:24,45,117,1:24,45,118,1:24,45,119,1:24,45,120,1:24,45,121,1:24,45,122,1:24,45,123,1:24,45,124,1:24,45,125,1:24,45,126,1:24,45,127,1:24,45,128,1:24,45,129,1:24,45,130,1:24,44,131,1:24,44,132,1:24,44,133,1:24,44,134,1:24,44,135,1:24,44,136,1:24,44,137,1:24,44,138,1:24,44,139,1:24,44,140,1:24,44,141,1:24,44,142,1:24,44,143,1:24,44,144,1:24,44,145,1:24,44,146,1:24,44,147,1:24,44,148,1:24,44,149,1:24,43,150,1:24,43,151,1:24,43,152,1:24,43,153,1:24,43,154,1:24,43,155,1:24,43,156,1:24,43,157,1:24,43,158,1:24,43,159,1:24,43,160,1:24,43,161,1:24,43,162,1:24,43,163,1:24,43,164,1:24,43,165,1:24,43,166,1:24,43,167,1:24,43,168,1:24,43,169,1:24,43,170,1:24,43,171,1:24,43,172,1:25,43,173,1:25,43,174,1:25,43,175,1:25,43,176,1:25,43,177,1:25,43,178,1:25,43,179,1:25,43,180,1:25,43,181,1:25,43,182,1:25,43,183,1:25,43,184,1:25,43,185,1:25,43,186,1:25,43,187,1:25,43,188,1:25,43,189,1:25,43,190,1:25,43,191,1:25,43,192,1:25,43,193,1:25,43,194,1:25,43,195,1:25,43,196,1:25,43,197,1:25,43,198,1:25,43,199,1:25,43,200,1:25,43,201,1:25,43,202,1:25,43,203,1:25,44,204,1:25,44,205,1:25,44,206,1:26,44,207,1:26,44,208,1:26,44,209,1:26,44,210,1:26,44,211,1:26,44,212,1:26,44,213,1:26,45,214,1:26,45,215,1:26,45,216,1:26,45,217,1:26,45,218,1:26,45,219,1:26,45,220,1:26,46,221,1:26,46,222,1:26,46,223,1:26,46,224,1:26,46,225,1:26,46,226,1:26,47,227,1:26,47,228,1:26,47,229,1:26,47,230,1:26,47,231,1:26,47,232,1:26,48,233,1:26,48,234,1:27,48,235,1:27,48,236,1:27,48,237,1:27,49,238,1:27,49,239,1:27,49,240,1:27,49,241,1:27,50,242,1:27,50,243,1:27,50,244,1:27,50,245,1:27,50,246,1:27,51,247,1:27,51,248,1:27,51,249,1:27,51,250,1:27,52,251,1:27,52,252,1:27,52,253,1:27,52,254,1:27,52,255,1:27,53,256,1:27,53,257,1:27,53,258,1:27,53,259,1:27,54,260,1:27,54,261,1:27,54,262,1:27,54,263,1:27,55,264,1:27,55,265,1:26,55,266,1:26,55,267,1:26,56,268,1:26,56,269,1:26,56,270,1:26,56,271,1:26,57,272,1:26,57,273,1:26,57,274,1:26,57,275,1:26,58,276,1:26,58,277,1:26,58,278,1:26,58,279,1:26,59,280,1:26,59,281,1:26,59,282,1:26,59,283,1:26,60,284,1:25,60,285,1:25,60,286,1:25,61,287,1:25,61,288,1:25,61,289,1:25,61,290,1:25,62,291,1:25,62,292,1:25,62,293,1:25,63,294,1:25,63,295,1:25,63,296,1:25,63,297,1:25,64,298,1:24,64,299,1:24,64,300,1:24,65,301,1:24,65,302,1:24,65,303,1:24,66,304,1:24,66,305,1:24,66,306,1:24,67,307,1:24,67,308,1:24,67,309,1:24,68,310,1:23,68,311,1:23,68,312,1:23,69,313,1:23,69,314,1:23,70,315,1:23,70,316,1:23,70,317,1:23,71,318,1:23,71,319,1:23,71,320,1:23,72,321,1:23,72,322,1:22,73,323,1:22,73,324,1:22,73,325,1:22,74,326,1:22,74,327,1:22,75,328,1:22,75,329,1:22,75,330,1:22,76,331,1:22,76,332,1:22,77,333,1:22,77,334,1:21,77,335,1:21,78,336,1:21,78,337,1:21,79,338,1:21,79,339,1:21,79,340,1:21,80,341,1:21,80,342,1:21,81,343,1:21,81,344,1:21,81,345,1:21,82,346,1:21,82,347,1:21,83,348,1:21,83,349,1:20,83,350,1:20,84,351,1:20,84,352,1:20,84,353,1:20,85,354,1:20,85,355,1:20,85,356,1:20,86,357,1:20,86,358,1:20,86,359,1:20,87,360,1:20,87,361,1:20,87,362,1:20,88,363,1:20,88,364,1:20,88,365,1:20,89,366,1:20,89,367,1:20,89,368,1:20,89,369,1:20,90,370,1:20,90,371,1:20,90,372,1:20,90,373,1:19,91,374,1:19,91,375,1:19,91,376,1:19,91,377,1:19,92,378,1:19,92,379,1:19,92,380,1:19,92,381,1:19,92,382,1:19,93,383,1:19,93,384,1:19,93,385,1:19,93,386,1:19,93,387,1:19,93,388,1:19,94,389,1:19,94,390,1:19,94,391,1:19,94,392,1:19,94,393,1:19,94,394,1:19,95,395,1:19,95,396,1:19,95,397,1:19,95,398,1:19,95,399,1:19,95,400,1:19,95,401,1:19,95,402,1:19,96,403,1:19,96,404,1:20,96,405,1:20,96,406,1:20,96,407,1:20,96,408,1:20,96,409,1:20,96,410,1:20,96,411,1:20,96,412,1:20,97,413,1:20,97,414,1:20,97,415,1:20,97,416,1:20,97,417,1:20,97,418,1:20,97,419,1:20,97,420,1:20,97,421,1:20,97,422,1:20,97,423,1:20,97,424,1:20,97,425,1:20,98,426,1:20,98,427,1:20,98,428,1:20,98,429,1:20,98,430,1:20,98,431,1:20,98,432,1:20,98,433,1:21,98,434,1:21,98,435,1:21,98,436,1:21,98,437,1:21,98,438,1:21,98,439,1:21,98,440,1:21,98,441,1:21,98,442,1:21,98,443,1:21,98,444,1:21,98,445,1:21,98,446,1:21,98,447,1:21,99,448,1:21,99,449,1:21,99,450,1:22,99,451,1:22,99,452,1:22,99,453,1:22,99,454,1:22,99,455,1:22,99,456,1:22,99,457,1:22,99,458,1:22,99,459,1:22,99,460,1:22,99,461,1:22,99,462,1:22,99,463,1:22,99,464,1:22,99,465,1:23,99,466,1:23,99,467,1:23,99,468,1:23,99,469,1:23,99,470,1:23,99,471,1:23,99,472,1:23,99,473,1:23,99,474,1:23,99,475,1:23,99,476,1:23,99,477,1:23,99,478,1:24,99,479,1:24,99,480,1:24,99,481,1:24,99,482,1:24,99,483,1:24,99,484,1:24,99,485,1:24,99,486,1:24,99,487,1:24,100,488,1:24,100,489,1:24,100,490,1:25,100,491,1:25,100,492,1:25,100,493,1:25,100,494,1:25,100,495,1:25,100,496,1:25,100,497,1:25,100,498,1:25,100,499,1:25,100,500,1:25,100,501,1:25,100,502,1:26,100,503,1:26,100,504,1:26,100,505,1:26,100,506,1:26,100,507,1:26,100,508,1:26,100,509,1:26,100,510,1:26,100,511,1:26,100,512,1:26,100,513,1:27,100,514,1:27,101,515,1:27,101,516,1:27,101,517,1:27,101,518,1:27,101,519,1:27,101,520,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 28,65,0,1:28,63,9,1:27,58,30,1:26,53,48,1:27,51,66,1:26,49,84,1:27,47,107,1:26,46,126,1:26,46,146,1:25,46,165,1:25,46,189,1:24,47,212,1:28,81,345,1:31,88,366,1:31,94,389,1:31,96,404,1:30,98,424,1:30,98,444,1:28,99,464,1:26,106,486,1:24,116,501,1:23,121,513,1:23,119,520,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_04
os.makedirs(path_results + '/T2/errsm_04')
os.chdir(path_results + '/T2/errsm_04')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_04/16-SPINE_memprage/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 34,144,77,20:33,140,108,19:34,137,138,18:33,136,166,17:33,135,192,16:33,135,218,15:34,137,244,14:33,143,267,13:34,150,290,12:35,160,311,11:37,169,331,10:38,178,350,9:38,187,368,8:38,192,385,7:37,192,402,6:35,193,418,5:35,195,435,4:35,198,452,3:35,202,508,2:36,208,531,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  73 -end 549 ')
f_crop = open('crop.txt', 'w')
f_crop.write('73,549,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 38,131,0,1:38,131,1,1:38,131,2,1:38,131,3,1:38,131,4,1:38,131,5,1:38,131,6,1:38,131,7,1:38,130,8,1:38,130,9,1:38,130,10,1:38,130,11,1:38,130,12,1:38,130,13,1:38,130,14,1:38,130,15,1:38,130,16,1:38,130,17,1:38,130,18,1:38,130,19,1:38,130,20,1:38,130,21,1:38,129,22,1:38,129,23,1:38,129,24,1:38,129,25,1:38,129,26,1:38,129,27,1:38,129,28,1:38,129,29,1:38,129,30,1:38,129,31,1:38,129,32,1:38,129,33,1:38,129,34,1:38,129,35,1:38,129,36,1:38,129,37,1:38,129,38,1:38,129,39,1:38,129,40,1:38,129,41,1:38,129,42,1:38,129,43,1:38,129,44,1:38,129,45,1:38,129,46,1:38,128,47,1:38,128,48,1:38,128,49,1:38,128,50,1:38,128,51,1:38,128,52,1:38,128,53,1:38,128,54,1:38,128,55,1:38,128,56,1:38,128,57,1:38,128,58,1:38,128,59,1:38,128,60,1:38,128,61,1:38,128,62,1:38,128,63,1:38,128,64,1:38,128,65,1:38,128,66,1:38,128,67,1:38,128,68,1:38,128,69,1:38,128,70,1:38,128,71,1:38,128,72,1:38,128,73,1:38,128,74,1:38,128,75,1:38,128,76,1:38,128,77,1:38,128,78,1:38,128,79,1:38,128,80,1:38,128,81,1:38,128,82,1:38,128,83,1:38,128,84,1:38,128,85,1:38,128,86,1:38,128,87,1:38,128,88,1:38,128,89,1:38,128,90,1:38,128,91,1:38,128,92,1:38,128,93,1:38,128,94,1:38,128,95,1:38,128,96,1:38,128,97,1:38,128,98,1:38,128,99,1:38,128,100,1:38,128,101,1:38,128,102,1:38,128,103,1:38,128,104,1:38,128,105,1:38,128,106,1:38,128,107,1:38,128,108,1:38,128,109,1:38,128,110,1:38,128,111,1:38,128,112,1:38,128,113,1:38,128,114,1:38,128,115,1:38,128,116,1:38,128,117,1:38,128,118,1:38,128,119,1:38,128,120,1:38,128,121,1:38,128,122,1:38,128,123,1:38,128,124,1:38,128,125,1:38,128,126,1:38,128,127,1:38,128,128,1:38,128,129,1:38,128,130,1:38,128,131,1:38,128,132,1:38,128,133,1:38,128,134,1:38,128,135,1:38,128,136,1:38,128,137,1:38,129,138,1:38,129,139,1:38,129,140,1:38,129,141,1:38,129,142,1:38,129,143,1:38,129,144,1:38,129,145,1:38,129,146,1:38,129,147,1:38,129,148,1:38,129,149,1:38,129,150,1:38,129,151,1:38,129,152,1:38,130,153,1:38,130,154,1:38,130,155,1:38,130,156,1:38,130,157,1:38,130,158,1:38,130,159,1:38,130,160,1:38,130,161,1:38,131,162,1:38,131,163,1:38,131,164,1:38,131,165,1:38,131,166,1:38,131,167,1:38,131,168,1:38,132,169,1:38,132,170,1:38,132,171,1:38,132,172,1:38,132,173,1:38,132,174,1:38,133,175,1:38,133,176,1:38,133,177,1:38,133,178,1:38,133,179,1:38,133,180,1:38,134,181,1:38,134,182,1:38,134,183,1:38,134,184,1:38,135,185,1:38,135,186,1:38,135,187,1:38,135,188,1:38,136,189,1:38,136,190,1:38,136,191,1:38,136,192,1:38,137,193,1:38,137,194,1:38,137,195,1:38,137,196,1:38,138,197,1:38,138,198,1:38,138,199,1:38,139,200,1:38,139,201,1:38,139,202,1:38,139,203,1:38,140,204,1:38,140,205,1:38,140,206,1:38,141,207,1:38,141,208,1:38,141,209,1:38,142,210,1:38,142,211,1:38,142,212,1:37,143,213,1:37,143,214,1:37,144,215,1:37,144,216,1:37,144,217,1:37,145,218,1:37,145,219,1:37,145,220,1:37,146,221,1:37,146,222,1:37,147,223,1:37,147,224,1:37,147,225,1:37,148,226,1:37,148,227,1:37,149,228,1:37,149,229,1:37,149,230,1:37,150,231,1:37,150,232,1:37,151,233,1:37,151,234,1:37,151,235,1:37,152,236,1:37,152,237,1:37,153,238,1:37,153,239,1:36,153,240,1:36,154,241,1:36,154,242,1:36,155,243,1:36,155,244,1:36,156,245,1:36,156,246,1:36,156,247,1:36,157,248,1:36,157,249,1:36,158,250,1:36,158,251,1:36,159,252,1:36,159,253,1:36,159,254,1:36,160,255,1:36,160,256,1:36,161,257,1:36,161,258,1:36,162,259,1:36,162,260,1:36,162,261,1:36,163,262,1:36,163,263,1:36,164,264,1:36,164,265,1:36,165,266,1:36,165,267,1:36,165,268,1:35,166,269,1:35,166,270,1:35,167,271,1:35,167,272,1:35,167,273,1:35,168,274,1:35,168,275,1:35,169,276,1:35,169,277,1:35,169,278,1:35,170,279,1:35,170,280,1:35,170,281,1:35,171,282,1:35,171,283,1:35,172,284,1:35,172,285,1:35,172,286,1:35,173,287,1:35,173,288,1:35,173,289,1:35,174,290,1:35,174,291,1:35,174,292,1:35,175,293,1:35,175,294,1:35,175,295,1:35,176,296,1:35,176,297,1:35,176,298,1:35,176,299,1:35,177,300,1:35,177,301,1:35,177,302,1:35,178,303,1:35,178,304,1:34,178,305,1:34,178,306,1:34,179,307,1:34,179,308,1:34,179,309,1:34,179,310,1:34,180,311,1:34,180,312,1:34,180,313,1:34,180,314,1:34,180,315,1:34,181,316,1:34,181,317,1:34,181,318,1:34,181,319,1:34,181,320,1:34,182,321,1:34,182,322,1:34,182,323,1:34,182,324,1:34,182,325,1:34,182,326,1:34,183,327,1:34,183,328,1:34,183,329,1:34,183,330,1:34,183,331,1:34,183,332,1:34,184,333,1:34,184,334,1:34,184,335,1:34,184,336,1:34,184,337,1:34,184,338,1:34,184,339,1:34,184,340,1:34,184,341,1:34,185,342,1:34,185,343,1:34,185,344,1:34,185,345,1:34,185,346,1:34,185,347,1:34,185,348,1:34,185,349,1:34,185,350,1:34,185,351,1:34,185,352,1:34,185,353,1:34,185,354,1:34,186,355,1:34,186,356,1:34,186,357,1:34,186,358,1:34,186,359,1:34,186,360,1:34,186,361,1:34,186,362,1:34,186,363,1:35,186,364,1:35,186,365,1:35,186,366,1:35,186,367,1:35,186,368,1:35,187,369,1:35,187,370,1:35,187,371,1:35,187,372,1:35,187,373,1:35,187,374,1:35,187,375,1:35,187,376,1:35,187,377,1:35,187,378,1:35,188,379,1:35,188,380,1:35,188,381,1:35,188,382,1:35,188,383,1:35,188,384,1:35,188,385,1:35,188,386,1:35,189,387,1:35,189,388,1:35,189,389,1:35,189,390,1:35,189,391,1:35,189,392,1:35,190,393,1:35,190,394,1:35,190,395,1:35,190,396,1:35,190,397,1:35,191,398,1:35,191,399,1:35,191,400,1:35,191,401,1:35,191,402,1:35,192,403,1:35,192,404,1:35,192,405,1:35,192,406,1:35,192,407,1:35,193,408,1:35,193,409,1:35,193,410,1:35,193,411,1:35,193,412,1:35,193,413,1:35,194,414,1:35,194,415,1:35,194,416,1:35,194,417,1:35,194,418,1:35,195,419,1:35,195,420,1:35,195,421,1:35,195,422,1:35,195,423,1:35,195,424,1:35,196,425,1:35,196,426,1:35,196,427,1:35,196,428,1:35,196,429,1:35,196,430,1:35,196,431,1:35,196,432,1:35,196,433,1:35,197,434,1:35,197,435,1:35,197,436,1:35,197,437,1:35,197,438,1:35,197,439,1:35,197,440,1:35,197,441,1:35,197,442,1:35,197,443,1:35,197,444,1:35,197,445,1:35,197,446,1:35,197,447,1:35,197,448,1:35,197,449,1:35,197,450,1:35,197,451,1:35,197,452,1:35,197,453,1:35,197,454,1:35,196,455,1:35,196,456,1:35,196,457,1:35,196,458,1:35,196,459,1:35,196,460,1:35,195,461,1:35,195,462,1:35,195,463,1:35,195,464,1:35,194,465,1:35,194,466,1:35,194,467,1:35,194,468,1:35,193,469,1:35,193,470,1:35,193,471,1:35,192,472,1:35,192,473,1:35,191,474,1:35,191,475,1:35,191,476,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 33,136,0,1:36,190,400,1:36,192,422,1:36,205,444,1:36,206,462,1:36,209,476,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_05
os.makedirs(path_results + '/T2/errsm_05')
os.chdir(path_results + '/T2/errsm_05')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_05/23-SPINE_MEMPRAGE/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 24,140,105,20:24,133,135,19:25,126,161,18:25,120,184,17:23,116,206,16:25,112,229,15:24,113,250,14:24,116,272,13:24,121,292,12:25,128,312,11:27,139,329,10:26,151,344,9:28,162,360,8:28,170,375,7:28,176,388,6:28,181,402,5:27,184,416,4:27,186,431,3:24,186,488,2:24,190,514,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  35 -end 528 ')
f_crop = open('crop.txt', 'w')
f_crop.write('35,528,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 29,136,0,1:29,136,1,1:29,135,2,1:29,135,3,1:29,135,4,1:29,135,5,1:29,135,6,1:29,135,7,1:29,134,8,1:29,134,9,1:29,134,10,1:29,134,11,1:29,134,12,1:29,134,13,1:29,134,14,1:29,133,15,1:29,133,16,1:29,133,17,1:29,133,18,1:29,133,19,1:29,133,20,1:29,133,21,1:29,133,22,1:29,132,23,1:29,132,24,1:29,132,25,1:29,132,26,1:29,132,27,1:29,132,28,1:29,132,29,1:29,132,30,1:29,131,31,1:29,131,32,1:29,131,33,1:29,131,34,1:29,131,35,1:29,131,36,1:29,131,37,1:29,131,38,1:28,130,39,1:28,130,40,1:28,130,41,1:28,130,42,1:28,130,43,1:28,130,44,1:28,130,45,1:28,130,46,1:28,130,47,1:28,129,48,1:28,129,49,1:28,129,50,1:28,129,51,1:28,129,52,1:28,129,53,1:28,129,54,1:28,129,55,1:28,128,56,1:28,128,57,1:28,128,58,1:28,128,59,1:28,128,60,1:28,128,61,1:28,128,62,1:28,128,63,1:28,128,64,1:28,127,65,1:28,127,66,1:28,127,67,1:28,127,68,1:28,127,69,1:27,127,70,1:27,127,71,1:27,127,72,1:27,126,73,1:27,126,74,1:27,126,75,1:27,126,76,1:27,126,77,1:27,126,78,1:27,126,79,1:27,125,80,1:27,125,81,1:27,125,82,1:27,125,83,1:27,125,84,1:27,125,85,1:27,125,86,1:27,125,87,1:27,124,88,1:27,124,89,1:27,124,90,1:27,124,91,1:27,124,92,1:27,124,93,1:27,124,94,1:27,123,95,1:27,123,96,1:27,123,97,1:27,123,98,1:27,123,99,1:27,123,100,1:27,122,101,1:27,122,102,1:27,122,103,1:27,122,104,1:27,122,105,1:27,122,106,1:27,121,107,1:27,121,108,1:27,121,109,1:26,121,110,1:26,121,111,1:26,121,112,1:26,120,113,1:26,120,114,1:26,120,115,1:26,120,116,1:26,120,117,1:26,119,118,1:26,119,119,1:26,119,120,1:26,119,121,1:26,119,122,1:26,118,123,1:26,118,124,1:26,118,125,1:26,118,126,1:26,118,127,1:26,117,128,1:26,117,129,1:26,117,130,1:26,117,131,1:26,117,132,1:26,116,133,1:26,116,134,1:26,116,135,1:26,116,136,1:26,116,137,1:26,115,138,1:26,115,139,1:26,115,140,1:26,115,141,1:26,115,142,1:26,114,143,1:26,114,144,1:26,114,145,1:26,114,146,1:26,113,147,1:26,113,148,1:26,113,149,1:26,113,150,1:26,113,151,1:26,112,152,1:26,112,153,1:26,112,154,1:26,112,155,1:26,112,156,1:26,111,157,1:26,111,158,1:26,111,159,1:26,111,160,1:26,111,161,1:26,110,162,1:26,110,163,1:26,110,164,1:26,110,165,1:26,110,166,1:26,109,167,1:26,109,168,1:26,109,169,1:26,109,170,1:26,109,171,1:26,108,172,1:26,108,173,1:26,108,174,1:26,108,175,1:26,108,176,1:26,108,177,1:26,107,178,1:26,107,179,1:26,107,180,1:26,107,181,1:26,107,182,1:26,107,183,1:26,107,184,1:26,106,185,1:26,106,186,1:26,106,187,1:26,106,188,1:26,106,189,1:26,106,190,1:26,106,191,1:26,106,192,1:26,106,193,1:26,106,194,1:26,106,195,1:26,106,196,1:26,106,197,1:26,106,198,1:26,106,199,1:26,106,200,1:26,106,201,1:26,106,202,1:26,106,203,1:26,106,204,1:26,106,205,1:26,106,206,1:26,106,207,1:26,106,208,1:26,106,209,1:26,106,210,1:26,106,211,1:26,106,212,1:26,106,213,1:26,106,214,1:26,106,215,1:26,106,216,1:26,106,217,1:26,107,218,1:26,107,219,1:26,107,220,1:26,107,221,1:26,107,222,1:26,107,223,1:26,107,224,1:26,108,225,1:26,108,226,1:26,108,227,1:26,108,228,1:26,108,229,1:26,108,230,1:26,109,231,1:26,109,232,1:26,109,233,1:26,109,234,1:26,109,235,1:26,110,236,1:26,110,237,1:26,110,238,1:26,110,239,1:26,111,240,1:26,111,241,1:26,111,242,1:26,111,243,1:26,112,244,1:26,112,245,1:26,112,246,1:26,113,247,1:26,113,248,1:26,113,249,1:26,113,250,1:26,114,251,1:26,114,252,1:26,114,253,1:26,115,254,1:26,115,255,1:26,115,256,1:26,116,257,1:26,116,258,1:26,116,259,1:26,117,260,1:26,117,261,1:26,117,262,1:26,118,263,1:26,118,264,1:26,119,265,1:26,119,266,1:26,119,267,1:26,120,268,1:26,120,269,1:26,121,270,1:26,121,271,1:26,121,272,1:26,122,273,1:26,122,274,1:26,123,275,1:26,123,276,1:26,124,277,1:26,124,278,1:26,125,279,1:25,125,280,1:25,126,281,1:25,126,282,1:25,127,283,1:25,127,284,1:25,128,285,1:25,128,286,1:25,129,287,1:25,129,288,1:25,130,289,1:25,130,290,1:25,131,291,1:25,131,292,1:25,132,293,1:25,133,294,1:25,133,295,1:25,134,296,1:25,134,297,1:25,135,298,1:25,136,299,1:24,136,300,1:24,137,301,1:24,138,302,1:24,138,303,1:24,139,304,1:24,139,305,1:24,140,306,1:24,141,307,1:24,141,308,1:24,142,309,1:24,143,310,1:24,143,311,1:24,144,312,1:24,145,313,1:24,145,314,1:23,146,315,1:23,147,316,1:23,147,317,1:23,148,318,1:23,149,319,1:23,149,320,1:23,150,321,1:23,151,322,1:23,151,323,1:23,152,324,1:23,152,325,1:23,153,326,1:23,154,327,1:23,154,328,1:23,155,329,1:22,155,330,1:22,156,331,1:22,157,332,1:22,157,333,1:22,158,334,1:22,158,335,1:22,159,336,1:22,159,337,1:22,160,338,1:22,160,339,1:22,161,340,1:22,161,341,1:22,162,342,1:22,162,343,1:22,163,344,1:22,163,345,1:22,164,346,1:22,164,347,1:22,164,348,1:22,165,349,1:22,165,350,1:22,166,351,1:21,166,352,1:21,166,353,1:21,167,354,1:21,167,355,1:21,167,356,1:21,168,357,1:21,168,358,1:21,168,359,1:21,169,360,1:21,169,361,1:21,169,362,1:21,169,363,1:21,170,364,1:21,170,365,1:21,170,366,1:21,170,367,1:21,171,368,1:21,171,369,1:21,171,370,1:21,171,371,1:21,171,372,1:21,172,373,1:21,172,374,1:21,172,375,1:21,172,376,1:21,172,377,1:21,173,378,1:22,173,379,1:22,173,380,1:22,173,381,1:22,173,382,1:22,174,383,1:22,174,384,1:22,174,385,1:22,174,386,1:22,174,387,1:22,174,388,1:22,175,389,1:22,175,390,1:22,175,391,1:22,175,392,1:22,175,393,1:22,175,394,1:22,176,395,1:22,176,396,1:23,176,397,1:23,176,398,1:23,176,399,1:23,177,400,1:23,177,401,1:23,177,402,1:23,177,403,1:23,177,404,1:23,177,405,1:23,178,406,1:23,178,407,1:24,178,408,1:24,178,409,1:24,178,410,1:24,178,411,1:24,179,412,1:24,179,413,1:24,179,414,1:24,179,415,1:24,179,416,1:24,179,417,1:25,180,418,1:25,180,419,1:25,180,420,1:25,180,421,1:25,180,422,1:25,180,423,1:25,180,424,1:25,181,425,1:25,181,426,1:25,181,427,1:25,181,428,1:25,181,429,1:25,181,430,1:25,181,431,1:25,181,432,1:25,181,433,1:25,181,434,1:26,182,435,1:26,182,436,1:26,182,437,1:26,182,438,1:26,182,439,1:26,182,440,1:26,182,441,1:26,182,442,1:26,182,443,1:26,182,444,1:25,182,445,1:25,182,446,1:25,182,447,1:25,182,448,1:25,182,449,1:25,182,450,1:25,182,451,1:25,182,452,1:25,182,453,1:25,182,454,1:25,182,455,1:25,182,456,1:25,182,457,1:25,182,458,1:25,182,459,1:25,182,460,1:25,182,461,1:25,182,462,1:25,181,463,1:25,181,464,1:25,181,465,1:24,181,466,1:24,181,467,1:24,181,468,1:24,181,469,1:24,181,470,1:24,181,471,1:24,181,472,1:24,181,473,1:24,181,474,1:24,181,475,1:25,181,476,1:25,181,477,1:25,181,478,1:25,181,479,1:25,181,480,1:25,181,481,1:25,181,482,1:25,181,483,1:25,181,484,1:25,181,485,1:26,181,486,1:26,182,487,1:26,182,488,1:26,182,489,1:26,182,490,1:27,182,491,1:27,182,492,1:27,182,493,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 23,135,0,1:23,135,4,1:23,134,8,1:22,133,14,1:22,133,18,1:26,176,401,1:26,176,416,1:24,178,434,1:24,182,448,1:23,186,459,1:24,189,472,1:23,187,483,1:22,194,493,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_09
os.makedirs(path_results + '/T2/errsm_09')
os.chdir(path_results + '/T2/errsm_09')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_09/34-SPINE_MEMPRAGE2/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 22,139,117,20:22,136,144,19:23,134,169,18:23,134,191,17:24,133,213,16:24,134,235,15:25,136,256,14:25,139,276,13:25,144,295,12:26,151,313,11:27,158,331,10:27,167,348,9:26,175,364,8:26,180,381,7:26,182,398,6:27,183,413,5:27,185,430,4:28,188,446,3:29,192,503,2:29,202,525,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  52 -end 540 ')
f_crop = open('crop.txt', 'w')
f_crop.write('52,540,56,305')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 34,134,0,1:34,134,1,1:34,134,2,1:34,134,3,1:34,134,4,1:34,134,5,1:34,134,6,1:34,134,7,1:34,134,8,1:34,134,9,1:34,134,10,1:33,133,11,1:33,133,12,1:33,133,13,1:33,133,14,1:33,133,15,1:33,133,16,1:33,133,17,1:33,133,18,1:33,133,19,1:33,133,20,1:33,133,21,1:33,133,22,1:33,133,23,1:33,132,24,1:33,132,25,1:33,132,26,1:33,132,27,1:33,132,28,1:33,132,29,1:33,132,30,1:33,132,31,1:33,132,32,1:33,132,33,1:33,132,34,1:33,132,35,1:33,131,36,1:33,131,37,1:33,131,38,1:33,131,39,1:33,131,40,1:33,131,41,1:32,131,42,1:32,131,43,1:32,131,44,1:32,131,45,1:32,131,46,1:32,131,47,1:32,130,48,1:32,130,49,1:32,130,50,1:32,130,51,1:32,130,52,1:32,130,53,1:32,130,54,1:32,130,55,1:32,130,56,1:32,130,57,1:32,130,58,1:32,130,59,1:32,130,60,1:32,129,61,1:32,129,62,1:32,129,63,1:32,129,64,1:32,129,65,1:32,129,66,1:32,129,67,1:31,129,68,1:31,129,69,1:31,129,70,1:31,129,71,1:31,129,72,1:31,129,73,1:31,129,74,1:31,128,75,1:31,128,76,1:31,128,77,1:31,128,78,1:31,128,79,1:31,128,80,1:31,128,81,1:31,128,82,1:31,128,83,1:31,128,84,1:31,128,85,1:31,128,86,1:31,128,87,1:31,128,88,1:31,128,89,1:31,128,90,1:31,128,91,1:31,128,92,1:30,127,93,1:30,127,94,1:30,127,95,1:30,127,96,1:30,127,97,1:30,127,98,1:30,127,99,1:30,127,100,1:30,127,101,1:30,127,102,1:30,127,103,1:30,127,104,1:30,127,105,1:30,127,106,1:30,127,107,1:30,127,108,1:30,127,109,1:30,127,110,1:30,127,111,1:30,127,112,1:30,127,113,1:30,127,114,1:30,127,115,1:30,127,116,1:30,127,117,1:30,127,118,1:30,127,119,1:30,127,120,1:30,127,121,1:29,127,122,1:29,127,123,1:29,127,124,1:29,127,125,1:29,127,126,1:29,127,127,1:29,127,128,1:29,127,129,1:29,127,130,1:29,127,131,1:29,127,132,1:29,127,133,1:29,127,134,1:29,127,135,1:29,127,136,1:29,127,137,1:29,127,138,1:29,127,139,1:29,127,140,1:29,127,141,1:29,127,142,1:29,127,143,1:29,127,144,1:29,127,145,1:29,127,146,1:29,127,147,1:29,127,148,1:29,127,149,1:29,127,150,1:29,127,151,1:29,127,152,1:29,127,153,1:29,127,154,1:29,127,155,1:29,127,156,1:29,127,157,1:28,127,158,1:28,127,159,1:28,127,160,1:28,127,161,1:28,127,162,1:28,127,163,1:28,127,164,1:28,127,165,1:28,127,166,1:28,127,167,1:28,127,168,1:28,127,169,1:28,127,170,1:28,127,171,1:28,127,172,1:28,127,173,1:28,127,174,1:28,127,175,1:28,127,176,1:28,127,177,1:28,127,178,1:28,127,179,1:28,127,180,1:28,127,181,1:28,127,182,1:28,128,183,1:28,128,184,1:28,128,185,1:28,128,186,1:28,128,187,1:28,128,188,1:28,128,189,1:28,128,190,1:28,128,191,1:28,128,192,1:28,128,193,1:28,128,194,1:28,128,195,1:28,128,196,1:28,129,197,1:28,129,198,1:28,129,199,1:28,129,200,1:27,129,201,1:27,129,202,1:27,129,203,1:27,129,204,1:27,129,205,1:27,130,206,1:27,130,207,1:27,130,208,1:27,130,209,1:27,130,210,1:27,130,211,1:27,131,212,1:27,131,213,1:27,131,214,1:27,131,215,1:27,131,216,1:27,131,217,1:27,132,218,1:27,132,219,1:27,132,220,1:27,132,221,1:27,132,222,1:27,133,223,1:27,133,224,1:27,133,225,1:27,133,226,1:27,133,227,1:27,134,228,1:27,134,229,1:27,134,230,1:27,134,231,1:27,135,232,1:27,135,233,1:26,135,234,1:26,135,235,1:26,136,236,1:26,136,237,1:26,136,238,1:26,136,239,1:26,137,240,1:26,137,241,1:26,137,242,1:26,137,243,1:26,138,244,1:26,138,245,1:26,138,246,1:26,139,247,1:26,139,248,1:26,139,249,1:26,140,250,1:26,140,251,1:26,140,252,1:26,141,253,1:26,141,254,1:26,141,255,1:26,142,256,1:26,142,257,1:26,142,258,1:26,143,259,1:25,143,260,1:25,143,261,1:25,144,262,1:25,144,263,1:25,144,264,1:25,145,265,1:25,145,266,1:25,145,267,1:25,146,268,1:25,146,269,1:25,147,270,1:25,147,271,1:25,147,272,1:25,148,273,1:25,148,274,1:25,148,275,1:25,149,276,1:25,149,277,1:25,150,278,1:25,150,279,1:25,150,280,1:25,151,281,1:25,151,282,1:25,152,283,1:25,152,284,1:25,152,285,1:25,153,286,1:25,153,287,1:25,154,288,1:25,154,289,1:25,154,290,1:25,155,291,1:25,155,292,1:25,156,293,1:25,156,294,1:25,157,295,1:25,157,296,1:25,157,297,1:25,158,298,1:25,158,299,1:25,159,300,1:25,159,301,1:25,160,302,1:25,160,303,1:25,160,304,1:25,161,305,1:25,161,306,1:25,162,307,1:25,162,308,1:25,162,309,1:25,163,310,1:25,163,311,1:25,164,312,1:25,164,313,1:25,164,314,1:25,165,315,1:25,165,316,1:25,166,317,1:25,166,318,1:25,166,319,1:25,167,320,1:25,167,321,1:25,168,322,1:25,168,323,1:25,168,324,1:25,169,325,1:25,169,326,1:25,169,327,1:25,170,328,1:25,170,329,1:25,170,330,1:25,171,331,1:25,171,332,1:25,171,333,1:25,172,334,1:25,172,335,1:25,172,336,1:25,172,337,1:25,173,338,1:25,173,339,1:25,173,340,1:25,173,341,1:25,174,342,1:25,174,343,1:25,174,344,1:25,174,345,1:25,174,346,1:25,175,347,1:25,175,348,1:25,175,349,1:25,175,350,1:25,175,351,1:25,175,352,1:25,176,353,1:25,176,354,1:25,176,355,1:25,176,356,1:25,176,357,1:25,176,358,1:25,176,359,1:25,176,360,1:25,176,361,1:25,177,362,1:25,177,363,1:25,177,364,1:25,177,365,1:25,177,366,1:25,177,367,1:25,177,368,1:25,177,369,1:25,177,370,1:25,177,371,1:25,177,372,1:25,177,373,1:25,177,374,1:25,177,375,1:25,177,376,1:25,178,377,1:25,178,378,1:24,178,379,1:24,178,380,1:24,178,381,1:24,178,382,1:24,178,383,1:24,178,384,1:24,178,385,1:24,178,386,1:24,178,387,1:24,178,388,1:24,178,389,1:24,178,390,1:24,178,391,1:24,178,392,1:24,179,393,1:24,179,394,1:24,179,395,1:24,179,396,1:24,179,397,1:24,179,398,1:24,179,399,1:24,179,400,1:24,179,401,1:24,179,402,1:24,179,403,1:24,180,404,1:24,180,405,1:24,180,406,1:24,180,407,1:24,180,408,1:24,180,409,1:24,180,410,1:24,180,411,1:24,181,412,1:24,181,413,1:24,181,414,1:24,181,415,1:24,181,416,1:24,181,417,1:24,181,418,1:24,182,419,1:23,182,420,1:23,182,421,1:23,182,422,1:23,182,423,1:23,182,424,1:23,182,425,1:23,183,426,1:23,183,427,1:23,183,428,1:23,183,429,1:23,183,430,1:23,183,431,1:23,184,432,1:23,184,433,1:23,184,434,1:23,184,435,1:23,184,436,1:23,184,437,1:23,185,438,1:23,185,439,1:23,185,440,1:23,185,441,1:23,185,442,1:23,185,443,1:23,185,444,1:23,186,445,1:23,186,446,1:23,186,447,1:23,186,448,1:24,186,449,1:24,186,450,1:24,186,451,1:24,187,452,1:24,187,453,1:24,187,454,1:24,187,455,1:24,187,456,1:24,187,457,1:24,187,458,1:24,188,459,1:24,188,460,1:24,188,461,1:24,188,462,1:24,188,463,1:24,188,464,1:24,188,465,1:24,188,466,1:24,188,467,1:24,189,468,1:24,189,469,1:24,189,470,1:24,189,471,1:25,189,472,1:25,189,473,1:25,189,474,1:25,189,475,1:25,189,476,1:25,189,477,1:25,189,478,1:25,190,479,1:25,190,480,1:25,190,481,1:25,190,482,1:26,190,483,1:26,190,484,1:26,190,485,1:26,190,486,1:26,190,487,1:26,190,488,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 18,135,0,1:18,134,7,1:18,131,15,1:18,132,23,1:19,131,31,1:19,131,38,1:19,130,45,1:19,130,51,1:19,129,57,1:20,129,61,1:27,161,305,1:27,166,315,1:27,169,325,1:27,171,334,1:26,174,342,1:26,175,350,1:27,176,361,1:27,178,372,1:27,178,385,1:27,179,396,1:27,179,406,1:28,179,417,1:28,181,430,1:28,185,441,1:28,190,449,1:27,194,457,1:29,200,468,1:28,203,478,1:28,208,488,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_10
os.makedirs(path_results + '/T2/errsm_10')
os.chdir(path_results + '/T2/errsm_10')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_10/13-SPINE_MEMPRAGE/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 24,176,99,20:24,167,130,19:24,159,161,18:24,156,188,17:24,154,214,16:23,154,238,15:24,158,262,14:24,164,285,13:23,171,307,12:23,180,326,11:23,189,345,10:24,198,364,9:24,207,383,8:27,213,401,7:28,216,418,6:28,218,435,5:28,221,452,4:28,222,470,3:28,222,533,2:28,228,554,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  23 -end 568 ')
f_crop = open('crop.txt', 'w')
f_crop.write('23,568,80,486')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 32,176,0,1:32,175,9,1:30,172,28,1:28,168,48,1:27,166,63,1:25,163,76,1:26,206,390,1:27,208,401,1:27,211,415,1:28,212,430,1:28,212,444,1:28,213,458,1:28,212,473,1:28,213,488,1:28,217,501,1:29,221,513,1:28,225,524,1:29,224,533,1:28,227,545,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_11
os.makedirs(path_results + '/T2/errsm_11')
os.chdir(path_results + '/T2/errsm_11')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_11/24-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 28,137,90,20:26,130,120,19:22,123,151,18:21,119,179,17:19,117,205,16:19,118,231,15:19,118,257,14:20,121,282,13:20,130,304,12:20,140,326,11:18,154,345,10:18,170,363,9:22,184,378,8:21,193,393,7:22,198,408,6:22,201,424,5:23,202,441,4:22,202,459,3:23,194,522,2:23,199,543,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  17 -end 557 ')
f_crop = open('crop.txt', 'w')
f_crop.write('17,557,40,540')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 19,136,0,1:19,136,1,1:20,136,2,1:20,136,3,1:20,135,4,1:20,135,5,1:20,135,6,1:20,135,7,1:20,134,8,1:20,134,9,1:20,134,10,1:20,134,11,1:20,133,12,1:20,133,13,1:20,133,14,1:20,133,15,1:20,133,16,1:20,132,17,1:20,132,18,1:20,132,19,1:20,132,20,1:21,132,21,1:21,131,22,1:21,131,23,1:21,131,24,1:21,131,25,1:21,131,26,1:21,131,27,1:21,130,28,1:21,130,29,1:21,130,30,1:21,130,31,1:21,130,32,1:21,130,33,1:21,130,34,1:21,129,35,1:21,129,36,1:21,129,37,1:21,129,38,1:21,129,39,1:21,129,40,1:21,129,41,1:21,128,42,1:21,128,43,1:21,128,44,1:21,128,45,1:21,128,46,1:21,128,47,1:21,128,48,1:21,128,49,1:21,127,50,1:21,127,51,1:21,127,52,1:21,127,53,1:21,127,54,1:21,127,55,1:21,127,56,1:21,127,57,1:21,126,58,1:21,126,59,1:21,126,60,1:21,126,61,1:21,126,62,1:21,126,63,1:21,126,64,1:21,126,65,1:21,126,66,1:21,126,67,1:21,125,68,1:21,125,69,1:21,125,70,1:22,125,71,1:22,125,72,1:22,125,73,1:22,125,74,1:22,125,75,1:22,125,76,1:22,124,77,1:22,124,78,1:22,124,79,1:22,124,80,1:22,124,81,1:22,124,82,1:22,124,83,1:22,124,84,1:22,124,85,1:22,124,86,1:22,123,87,1:22,123,88,1:22,123,89,1:22,123,90,1:22,123,91,1:22,123,92,1:22,123,93,1:22,123,94,1:22,123,95,1:22,122,96,1:22,122,97,1:22,122,98,1:22,122,99,1:22,122,100,1:22,122,101,1:22,122,102,1:22,122,103,1:22,121,104,1:22,121,105,1:22,121,106,1:22,121,107,1:22,121,108,1:22,121,109,1:23,121,110,1:23,120,111,1:23,120,112,1:23,120,113,1:23,120,114,1:23,120,115,1:23,120,116,1:23,120,117,1:23,119,118,1:23,119,119,1:23,119,120,1:23,119,121,1:23,119,122,1:23,119,123,1:23,118,124,1:23,118,125,1:23,118,126,1:23,118,127,1:24,118,128,1:24,118,129,1:24,117,130,1:24,117,131,1:24,117,132,1:24,117,133,1:24,117,134,1:24,117,135,1:24,117,136,1:24,116,137,1:24,116,138,1:24,116,139,1:24,116,140,1:24,116,141,1:25,116,142,1:25,115,143,1:25,115,144,1:25,115,145,1:25,115,146,1:25,115,147,1:25,115,148,1:25,115,149,1:25,114,150,1:25,114,151,1:25,114,152,1:25,114,153,1:26,114,154,1:26,114,155,1:26,114,156,1:26,114,157,1:26,113,158,1:26,113,159,1:26,113,160,1:26,113,161,1:26,113,162,1:26,113,163,1:26,113,164,1:26,113,165,1:27,113,166,1:27,112,167,1:27,112,168,1:27,112,169,1:27,112,170,1:27,112,171,1:27,112,172,1:27,112,173,1:27,112,174,1:27,112,175,1:27,112,176,1:27,112,177,1:28,112,178,1:28,112,179,1:28,112,180,1:28,112,181,1:28,112,182,1:28,111,183,1:28,111,184,1:28,111,185,1:28,111,186,1:28,111,187,1:28,111,188,1:28,111,189,1:29,111,190,1:29,111,191,1:29,111,192,1:29,111,193,1:29,111,194,1:29,111,195,1:29,111,196,1:29,111,197,1:29,111,198,1:29,111,199,1:29,111,200,1:29,111,201,1:29,111,202,1:29,111,203,1:29,111,204,1:30,111,205,1:30,111,206,1:30,111,207,1:30,111,208,1:30,111,209,1:30,111,210,1:30,111,211,1:30,111,212,1:30,111,213,1:30,111,214,1:30,111,215,1:30,111,216,1:30,111,217,1:30,112,218,1:30,112,219,1:30,112,220,1:30,112,221,1:30,112,222,1:30,112,223,1:30,112,224,1:30,112,225,1:30,112,226,1:30,112,227,1:30,112,228,1:30,112,229,1:30,112,230,1:30,112,231,1:30,112,232,1:30,112,233,1:30,112,234,1:30,112,235,1:30,112,236,1:30,113,237,1:30,113,238,1:30,113,239,1:30,113,240,1:30,113,241,1:30,113,242,1:30,113,243,1:30,113,244,1:30,113,245,1:30,113,246,1:30,114,247,1:30,114,248,1:30,114,249,1:30,114,250,1:30,114,251,1:30,114,252,1:30,114,253,1:30,115,254,1:30,115,255,1:30,115,256,1:30,115,257,1:30,115,258,1:30,116,259,1:30,116,260,1:30,116,261,1:30,116,262,1:30,116,263,1:30,117,264,1:30,117,265,1:30,117,266,1:30,117,267,1:30,118,268,1:30,118,269,1:30,118,270,1:30,119,271,1:30,119,272,1:30,119,273,1:30,119,274,1:30,120,275,1:30,120,276,1:30,120,277,1:30,121,278,1:30,121,279,1:30,121,280,1:30,122,281,1:30,122,282,1:30,123,283,1:30,123,284,1:30,123,285,1:30,124,286,1:30,124,287,1:30,125,288,1:30,125,289,1:30,126,290,1:30,126,291,1:30,126,292,1:30,127,293,1:30,127,294,1:30,128,295,1:30,128,296,1:30,129,297,1:30,129,298,1:30,130,299,1:30,130,300,1:30,131,301,1:30,131,302,1:30,132,303,1:30,132,304,1:30,133,305,1:30,134,306,1:30,134,307,1:30,135,308,1:30,135,309,1:30,136,310,1:30,137,311,1:31,137,312,1:31,138,313,1:31,138,314,1:31,139,315,1:31,140,316,1:31,140,317,1:31,141,318,1:31,142,319,1:31,142,320,1:31,143,321,1:31,144,322,1:31,144,323,1:31,145,324,1:31,146,325,1:31,146,326,1:31,147,327,1:31,148,328,1:31,149,329,1:31,149,330,1:31,150,331,1:31,151,332,1:31,152,333,1:31,152,334,1:31,153,335,1:31,154,336,1:31,155,337,1:31,155,338,1:31,156,339,1:31,157,340,1:31,158,341,1:31,158,342,1:31,159,343,1:31,160,344,1:31,161,345,1:31,162,346,1:31,162,347,1:31,163,348,1:31,164,349,1:31,165,350,1:31,165,351,1:31,166,352,1:31,167,353,1:31,168,354,1:31,168,355,1:31,169,356,1:31,170,357,1:31,170,358,1:31,171,359,1:31,172,360,1:31,173,361,1:31,173,362,1:31,174,363,1:31,175,364,1:31,175,365,1:31,176,366,1:31,177,367,1:31,177,368,1:31,178,369,1:31,178,370,1:31,179,371,1:31,180,372,1:31,180,373,1:31,181,374,1:30,181,375,1:30,182,376,1:30,182,377,1:30,183,378,1:30,183,379,1:30,184,380,1:30,184,381,1:30,185,382,1:30,185,383,1:30,185,384,1:30,186,385,1:30,186,386,1:30,187,387,1:30,187,388,1:30,187,389,1:30,188,390,1:30,188,391,1:30,188,392,1:29,189,393,1:29,189,394,1:29,189,395,1:29,189,396,1:29,190,397,1:29,190,398,1:29,190,399,1:29,190,400,1:29,191,401,1:29,191,402,1:29,191,403,1:29,191,404,1:29,191,405,1:29,191,406,1:29,192,407,1:28,192,408,1:28,192,409,1:28,192,410,1:28,192,411,1:28,192,412,1:28,192,413,1:28,192,414,1:28,193,415,1:28,193,416,1:28,193,417,1:28,193,418,1:28,193,419,1:28,193,420,1:28,193,421,1:27,193,422,1:27,193,423,1:27,193,424,1:27,193,425,1:27,193,426,1:27,193,427,1:27,193,428,1:27,193,429,1:27,193,430,1:27,193,431,1:27,193,432,1:27,193,433,1:27,193,434,1:27,193,435,1:27,193,436,1:27,193,437,1:27,193,438,1:27,193,439,1:27,193,440,1:27,193,441,1:27,193,442,1:27,193,443,1:27,193,444,1:27,193,445,1:26,193,446,1:26,193,447,1:26,193,448,1:26,193,449,1:26,193,450,1:26,193,451,1:26,193,452,1:26,193,453,1:26,193,454,1:26,193,455,1:26,193,456,1:26,193,457,1:26,193,458,1:26,193,459,1:26,193,460,1:26,193,461,1:26,193,462,1:26,193,463,1:26,192,464,1:26,192,465,1:26,192,466,1:26,192,467,1:26,192,468,1:26,192,469,1:26,192,470,1:26,192,471,1:26,192,472,1:26,192,473,1:26,192,474,1:26,191,475,1:26,191,476,1:26,191,477,1:26,191,478,1:26,191,479,1:26,191,480,1:26,191,481,1:26,191,482,1:26,190,483,1:26,190,484,1:26,190,485,1:26,190,486,1:26,190,487,1:26,190,488,1:26,190,489,1:26,189,490,1:26,189,491,1:26,189,492,1:26,189,493,1:26,189,494,1:26,188,495,1:26,188,496,1:26,188,497,1:26,188,498,1:26,188,499,1:26,188,500,1:26,187,501,1:26,187,502,1:26,187,503,1:26,187,504,1:26,186,505,1:26,186,506,1:26,186,507,1:26,186,508,1:26,186,509,1:26,185,510,1:26,185,511,1:26,185,512,1:26,185,513,1:26,184,514,1:26,184,515,1:26,184,516,1:26,183,517,1:26,183,518,1:26,183,519,1:26,183,520,1:26,182,521,1:25,182,522,1:25,182,523,1:25,181,524,1:25,181,525,1:25,181,526,1:25,181,527,1:25,180,528,1:25,180,529,1:25,180,530,1:25,179,531,1:25,179,532,1:25,179,533,1:25,178,534,1:25,178,535,1:25,177,536,1:25,177,537,1:24,177,538,1:24,176,539,1:24,176,540,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 31,135,0,1:30,134,10,1:29,131,25,1:29,126,41,1:29,125,57,1:28,123,77,1:28,123,93,1:27,120,108,1:23,191,460,1:24,190,473,1:23,189,487,1:23,191,500,1:24,193,512,1:23,198,521,1:24,194,531,1:23,197,540,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_12
os.makedirs(path_results + '/T2/errsm_12')
os.chdir(path_results + '/T2/errsm_12')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_12/19-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 26,136,181,20:28,128,210,19:28,123,237,18:28,120,261,17:28,119,284,16:28,120,306,15:28,123,329,14:27,127,350,13:27,133,370,12:24,140,388,11:24,147,406,10:22,155,423,9:22,159,441,8:22,163,458,7:22,165,473,6:22,168,488,5:22,171,504,4:21,176,521,3:23,191,575,2:23,195,597,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  115 -end 610 ')
f_crop = open('crop.txt', 'w')
f_crop.write('115,610,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 27,139,0,1:27,138,1,1:27,138,2,1:27,138,3,1:27,138,4,1:27,137,5,1:27,137,6,1:27,137,7,1:27,137,8,1:27,136,9,1:27,136,10,1:27,136,11,1:27,136,12,1:27,135,13,1:27,135,14,1:27,135,15,1:27,135,16,1:27,134,17,1:27,134,18,1:27,134,19,1:27,134,20,1:27,133,21,1:26,133,22,1:26,133,23,1:26,133,24,1:26,132,25,1:26,132,26,1:26,132,27,1:26,132,28,1:26,131,29,1:26,131,30,1:26,131,31,1:26,131,32,1:26,130,33,1:26,130,34,1:26,130,35,1:26,130,36,1:26,129,37,1:26,129,38,1:26,129,39,1:26,129,40,1:26,128,41,1:26,128,42,1:26,128,43,1:25,128,44,1:25,127,45,1:25,127,46,1:25,127,47,1:25,127,48,1:25,127,49,1:25,126,50,1:25,126,51,1:25,126,52,1:25,126,53,1:25,125,54,1:25,125,55,1:25,125,56,1:25,125,57,1:25,124,58,1:25,124,59,1:25,124,60,1:25,124,61,1:25,124,62,1:25,123,63,1:25,123,64,1:25,123,65,1:24,123,66,1:24,122,67,1:24,122,68,1:24,122,69,1:24,122,70,1:24,122,71,1:24,121,72,1:24,121,73,1:24,121,74,1:24,121,75,1:24,121,76,1:24,120,77,1:24,120,78,1:24,120,79,1:24,120,80,1:24,120,81,1:24,119,82,1:24,119,83,1:24,119,84,1:24,119,85,1:24,119,86,1:24,119,87,1:24,118,88,1:24,118,89,1:24,118,90,1:24,118,91,1:24,118,92,1:23,118,93,1:23,117,94,1:23,117,95,1:23,117,96,1:23,117,97,1:23,117,98,1:23,117,99,1:23,117,100,1:23,116,101,1:23,116,102,1:23,116,103,1:23,116,104,1:23,116,105,1:23,116,106,1:23,116,107,1:23,115,108,1:23,115,109,1:23,115,110,1:23,115,111,1:23,115,112,1:23,115,113,1:23,115,114,1:23,115,115,1:23,115,116,1:23,115,117,1:23,114,118,1:23,114,119,1:23,114,120,1:23,114,121,1:23,114,122,1:23,114,123,1:23,114,124,1:23,114,125,1:23,114,126,1:23,114,127,1:23,114,128,1:23,114,129,1:23,113,130,1:23,113,131,1:23,113,132,1:23,113,133,1:23,113,134,1:23,113,135,1:23,113,136,1:23,113,137,1:23,113,138,1:23,113,139,1:23,113,140,1:23,113,141,1:23,113,142,1:23,113,143,1:23,113,144,1:23,113,145,1:23,113,146,1:23,112,147,1:23,112,148,1:23,112,149,1:23,112,150,1:23,112,151,1:23,112,152,1:23,112,153,1:23,112,154,1:23,112,155,1:23,112,156,1:23,112,157,1:23,112,158,1:23,112,159,1:23,112,160,1:23,112,161,1:23,112,162,1:23,112,163,1:23,112,164,1:23,112,165,1:23,112,166,1:23,112,167,1:23,112,168,1:23,112,169,1:23,112,170,1:23,112,171,1:23,112,172,1:23,112,173,1:23,112,174,1:23,112,175,1:23,112,176,1:23,112,177,1:23,112,178,1:23,112,179,1:23,112,180,1:23,112,181,1:23,112,182,1:23,112,183,1:23,112,184,1:23,112,185,1:23,112,186,1:23,112,187,1:23,112,188,1:24,112,189,1:24,113,190,1:24,113,191,1:24,113,192,1:24,113,193,1:24,113,194,1:24,113,195,1:24,113,196,1:24,113,197,1:24,113,198,1:24,113,199,1:24,113,200,1:24,114,201,1:24,114,202,1:24,114,203,1:24,114,204,1:24,114,205,1:24,114,206,1:24,114,207,1:24,115,208,1:24,115,209,1:24,115,210,1:24,115,211,1:24,115,212,1:24,115,213,1:24,116,214,1:24,116,215,1:24,116,216,1:24,116,217,1:24,116,218,1:24,117,219,1:24,117,220,1:24,117,221,1:24,117,222,1:24,117,223,1:24,118,224,1:24,118,225,1:24,118,226,1:24,118,227,1:24,119,228,1:24,119,229,1:24,119,230,1:24,119,231,1:24,120,232,1:24,120,233,1:24,120,234,1:24,120,235,1:24,121,236,1:24,121,237,1:24,121,238,1:24,121,239,1:24,122,240,1:24,122,241,1:24,122,242,1:24,122,243,1:24,123,244,1:24,123,245,1:24,123,246,1:24,124,247,1:24,124,248,1:24,124,249,1:24,124,250,1:24,125,251,1:24,125,252,1:25,125,253,1:25,126,254,1:25,126,255,1:25,126,256,1:25,126,257,1:25,127,258,1:25,127,259,1:25,127,260,1:25,128,261,1:25,128,262,1:25,128,263,1:25,129,264,1:25,129,265,1:25,129,266,1:25,129,267,1:25,130,268,1:25,130,269,1:25,130,270,1:25,131,271,1:25,131,272,1:25,131,273,1:25,132,274,1:25,132,275,1:25,132,276,1:25,133,277,1:25,133,278,1:25,133,279,1:25,134,280,1:25,134,281,1:25,134,282,1:25,135,283,1:25,135,284,1:25,135,285,1:25,136,286,1:25,136,287,1:26,136,288,1:26,137,289,1:26,137,290,1:26,137,291,1:26,138,292,1:26,138,293,1:26,138,294,1:26,139,295,1:26,139,296,1:26,139,297,1:26,140,298,1:26,140,299,1:26,140,300,1:26,140,301,1:26,141,302,1:26,141,303,1:26,141,304,1:26,142,305,1:26,142,306,1:26,142,307,1:26,143,308,1:26,143,309,1:26,143,310,1:26,144,311,1:26,144,312,1:26,144,313,1:26,145,314,1:26,145,315,1:27,145,316,1:27,146,317,1:27,146,318,1:27,146,319,1:27,147,320,1:27,147,321,1:27,147,322,1:27,148,323,1:27,148,324,1:27,148,325,1:27,149,326,1:27,149,327,1:27,149,328,1:27,150,329,1:27,150,330,1:27,150,331,1:27,150,332,1:27,151,333,1:27,151,334,1:27,151,335,1:27,152,336,1:27,152,337,1:27,152,338,1:27,153,339,1:27,153,340,1:27,153,341,1:28,153,342,1:28,154,343,1:28,154,344,1:28,154,345,1:28,154,346,1:28,155,347,1:28,155,348,1:28,155,349,1:28,156,350,1:28,156,351,1:28,156,352,1:28,156,353,1:28,157,354,1:28,157,355,1:28,157,356,1:28,157,357,1:28,158,358,1:28,158,359,1:28,158,360,1:28,158,361,1:28,159,362,1:28,159,363,1:28,159,364,1:28,159,365,1:28,159,366,1:28,160,367,1:28,160,368,1:29,160,369,1:29,160,370,1:29,161,371,1:29,161,372,1:29,161,373,1:29,161,374,1:29,161,375,1:29,162,376,1:29,162,377,1:29,162,378,1:29,162,379,1:29,163,380,1:29,163,381,1:29,163,382,1:29,163,383,1:29,163,384,1:29,164,385,1:29,164,386,1:29,164,387,1:29,164,388,1:29,165,389,1:29,165,390,1:29,165,391,1:29,165,392,1:29,166,393,1:29,166,394,1:29,166,395,1:29,166,396,1:29,166,397,1:29,167,398,1:29,167,399,1:29,167,400,1:29,167,401,1:29,168,402,1:29,168,403,1:29,168,404,1:29,168,405,1:29,169,406,1:29,169,407,1:29,169,408,1:29,169,409,1:29,170,410,1:29,170,411,1:29,170,412,1:29,171,413,1:29,171,414,1:29,171,415,1:29,171,416,1:29,172,417,1:29,172,418,1:29,172,419,1:28,172,420,1:28,173,421,1:28,173,422,1:28,173,423,1:28,173,424,1:28,174,425,1:28,174,426,1:28,174,427,1:28,174,428,1:28,175,429,1:28,175,430,1:28,175,431,1:28,175,432,1:28,176,433,1:28,176,434,1:28,176,435,1:28,176,436,1:28,177,437,1:28,177,438,1:28,177,439,1:28,177,440,1:28,178,441,1:28,178,442,1:28,178,443,1:28,178,444,1:28,179,445,1:28,179,446,1:28,179,447,1:27,179,448,1:27,179,449,1:27,180,450,1:27,180,451,1:27,180,452,1:27,180,453,1:27,180,454,1:27,181,455,1:27,181,456,1:27,181,457,1:27,181,458,1:27,181,459,1:27,181,460,1:27,182,461,1:27,182,462,1:27,182,463,1:27,182,464,1:27,182,465,1:27,182,466,1:27,182,467,1:27,182,468,1:27,183,469,1:27,183,470,1:27,183,471,1:27,183,472,1:27,183,473,1:27,183,474,1:27,183,475,1:27,183,476,1:27,183,477,1:27,183,478,1:28,183,479,1:28,183,480,1:28,183,481,1:28,183,482,1:28,183,483,1:28,183,484,1:28,183,485,1:28,183,486,1:28,183,487,1:28,183,488,1:28,183,489,1:28,183,490,1:28,183,491,1:28,183,492,1:28,183,493,1:28,183,494,1:29,183,495,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 23,139,0,1:23,138,7,1:24,135,17,1:24,133,25,1:22,176,437,1:22,178,446,1:23,183,457,1:23,188,468,1:24,195,477,1:23,194,491,1:22,199,495,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_13
os.makedirs(path_results + '/T2/errsm_13')
os.chdir(path_results + '/T2/errsm_13')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_13/33-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 36,126,102,20:32,122,135,19:27,120,166,18:24,120,195,17:24,121,222,16:24,123,249,15:24,129,276,14:24,135,301,13:25,142,326,12:26,149,349,11:26,158,372,10:26,166,393,9:24,173,413,8:24,177,432,7:25,180,451,6:26,184,470,5:26,187,488,4:27,187,509,3:27,187,578,2:29,192,603,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  21 -end 618 ')
f_crop = open('crop.txt', 'w')
f_crop.write('21,618,82,527')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 39,123,0,1:38,122,6,1:38,121,14,1:37,119,24,1:36,118,39,1:36,117,47,1:35,117,56,1:35,116,63,1:35,115,71,1:35,115,77,1:34,115,83,1:34,115,87,1:26,175,520,1:26,176,526,1:26,177,533,1:26,178,539,1:26,181,548,1:26,184,557,1:27,190,570,1:27,190,578,1:28,188,585,1:27,192,592,1:27,191,597,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_14
os.makedirs(path_results + '/T2/errsm_14')
os.chdir(path_results + '/T2/errsm_14')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_14/5002-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 25,159,102,20:25,150,127,19:25,142,151,18:24,140,174,17:24,139,196,16:23,138,218,15:23,138,238,14:23,139,258,13:23,141,278,12:23,144,296,11:23,147,314,10:23,152,331,9:23,157,348,8:23,161,364,7:24,165,378,6:24,169,392,5:24,171,407,4:23,173,422,3:26,187,477,2:27,195,500,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  42 -end 515 ')
f_crop = open('crop.txt', 'w')
f_crop.write('42,515,25,422')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 22,159,0,1:22,159,1,1:22,159,2,1:22,159,3,1:22,159,4,1:22,159,5,1:23,159,6,1:23,158,7,1:23,158,8,1:23,158,9,1:23,158,10,1:23,158,11,1:23,158,12,1:23,157,13,1:23,157,14,1:23,157,15,1:23,157,16,1:23,157,17,1:23,157,18,1:23,156,19,1:23,156,20,1:23,156,21,1:23,156,22,1:23,155,23,1:23,155,24,1:23,155,25,1:23,155,26,1:23,155,27,1:23,154,28,1:23,154,29,1:24,154,30,1:24,154,31,1:24,153,32,1:24,153,33,1:24,153,34,1:24,153,35,1:24,152,36,1:24,152,37,1:24,152,38,1:24,152,39,1:24,151,40,1:24,151,41,1:24,151,42,1:24,151,43,1:24,150,44,1:24,150,45,1:24,150,46,1:24,150,47,1:24,149,48,1:24,149,49,1:24,149,50,1:24,148,51,1:24,148,52,1:24,148,53,1:24,148,54,1:24,147,55,1:24,147,56,1:24,147,57,1:24,147,58,1:24,146,59,1:24,146,60,1:24,146,61,1:24,146,62,1:24,145,63,1:25,145,64,1:25,145,65,1:25,144,66,1:25,144,67,1:25,144,68,1:25,144,69,1:25,143,70,1:25,143,71,1:25,143,72,1:25,143,73,1:25,142,74,1:25,142,75,1:25,142,76,1:25,142,77,1:25,141,78,1:25,141,79,1:25,141,80,1:25,141,81,1:25,140,82,1:25,140,83,1:25,140,84,1:25,140,85,1:25,140,86,1:25,139,87,1:25,139,88,1:25,139,89,1:25,139,90,1:25,138,91,1:25,138,92,1:25,138,93,1:25,138,94,1:25,138,95,1:25,138,96,1:25,137,97,1:25,137,98,1:25,137,99,1:25,137,100,1:25,137,101,1:25,137,102,1:25,136,103,1:25,136,104,1:25,136,105,1:25,136,106,1:26,136,107,1:26,136,108,1:26,136,109,1:26,135,110,1:26,135,111,1:26,135,112,1:26,135,113,1:26,135,114,1:26,135,115,1:26,135,116,1:26,135,117,1:26,134,118,1:26,134,119,1:26,134,120,1:26,134,121,1:26,134,122,1:26,134,123,1:26,134,124,1:26,134,125,1:26,134,126,1:26,134,127,1:26,134,128,1:26,133,129,1:26,133,130,1:26,133,131,1:26,133,132,1:26,133,133,1:26,133,134,1:26,133,135,1:26,133,136,1:26,133,137,1:26,133,138,1:26,133,139,1:26,133,140,1:26,133,141,1:26,133,142,1:26,133,143,1:26,132,144,1:26,132,145,1:26,132,146,1:26,132,147,1:26,132,148,1:26,132,149,1:27,132,150,1:27,132,151,1:27,132,152,1:27,132,153,1:27,132,154,1:27,132,155,1:27,132,156,1:27,132,157,1:27,132,158,1:27,132,159,1:27,132,160,1:27,132,161,1:27,132,162,1:27,132,163,1:27,132,164,1:27,132,165,1:27,132,166,1:27,132,167,1:27,132,168,1:27,132,169,1:27,132,170,1:27,132,171,1:27,132,172,1:27,132,173,1:27,132,174,1:27,132,175,1:27,131,176,1:27,131,177,1:27,131,178,1:27,131,179,1:27,131,180,1:27,131,181,1:27,131,182,1:27,131,183,1:27,131,184,1:27,131,185,1:27,132,186,1:27,132,187,1:27,132,188,1:27,132,189,1:27,132,190,1:27,132,191,1:27,132,192,1:27,132,193,1:27,132,194,1:27,132,195,1:27,132,196,1:27,132,197,1:27,132,198,1:27,132,199,1:27,132,200,1:27,132,201,1:27,132,202,1:27,132,203,1:27,132,204,1:27,132,205,1:27,132,206,1:27,132,207,1:27,132,208,1:27,132,209,1:27,132,210,1:27,132,211,1:27,132,212,1:27,132,213,1:27,133,214,1:27,133,215,1:27,133,216,1:27,133,217,1:27,133,218,1:27,133,219,1:27,133,220,1:27,133,221,1:27,133,222,1:27,133,223,1:27,133,224,1:27,133,225,1:27,134,226,1:27,134,227,1:27,134,228,1:27,134,229,1:27,134,230,1:27,134,231,1:27,134,232,1:27,134,233,1:27,134,234,1:27,135,235,1:27,135,236,1:27,135,237,1:27,135,238,1:27,135,239,1:27,135,240,1:27,135,241,1:27,136,242,1:27,136,243,1:27,136,244,1:27,136,245,1:27,136,246,1:27,136,247,1:27,136,248,1:27,137,249,1:27,137,250,1:27,137,251,1:27,137,252,1:27,137,253,1:27,138,254,1:27,138,255,1:27,138,256,1:27,138,257,1:27,138,258,1:27,138,259,1:27,139,260,1:27,139,261,1:27,139,262,1:27,139,263,1:27,139,264,1:27,140,265,1:27,140,266,1:27,140,267,1:27,140,268,1:27,141,269,1:27,141,270,1:27,141,271,1:27,141,272,1:27,141,273,1:27,142,274,1:27,142,275,1:27,142,276,1:27,142,277,1:27,143,278,1:27,143,279,1:27,143,280,1:27,143,281,1:27,144,282,1:27,144,283,1:27,144,284,1:27,144,285,1:27,145,286,1:27,145,287,1:27,145,288,1:27,145,289,1:27,146,290,1:27,146,291,1:27,146,292,1:27,146,293,1:27,147,294,1:27,147,295,1:27,147,296,1:27,147,297,1:27,148,298,1:27,148,299,1:27,148,300,1:27,148,301,1:27,149,302,1:27,149,303,1:27,149,304,1:27,149,305,1:27,150,306,1:27,150,307,1:27,150,308,1:27,150,309,1:27,151,310,1:27,151,311,1:27,151,312,1:27,151,313,1:27,152,314,1:27,152,315,1:27,152,316,1:27,152,317,1:27,153,318,1:27,153,319,1:27,153,320,1:27,153,321,1:27,154,322,1:27,154,323,1:27,154,324,1:27,154,325,1:27,155,326,1:27,155,327,1:27,155,328,1:27,155,329,1:27,155,330,1:27,156,331,1:27,156,332,1:27,156,333,1:27,156,334,1:27,156,335,1:27,157,336,1:27,157,337,1:27,157,338,1:27,157,339,1:27,157,340,1:27,158,341,1:27,158,342,1:27,158,343,1:27,158,344,1:27,158,345,1:27,159,346,1:27,159,347,1:27,159,348,1:27,159,349,1:27,159,350,1:27,160,351,1:27,160,352,1:27,160,353,1:27,160,354,1:27,160,355,1:27,161,356,1:27,161,357,1:27,161,358,1:27,161,359,1:27,161,360,1:27,161,361,1:27,162,362,1:27,162,363,1:27,162,364,1:27,162,365,1:27,162,366,1:27,163,367,1:27,163,368,1:27,163,369,1:27,163,370,1:27,163,371,1:27,163,372,1:27,164,373,1:27,164,374,1:27,164,375,1:27,164,376,1:27,164,377,1:27,165,378,1:27,165,379,1:27,165,380,1:27,165,381,1:27,165,382,1:26,166,383,1:26,166,384,1:26,166,385,1:26,166,386,1:26,166,387,1:26,167,388,1:26,167,389,1:26,167,390,1:26,167,391,1:26,167,392,1:26,168,393,1:26,168,394,1:26,168,395,1:26,168,396,1:26,168,397,1:26,168,398,1:26,169,399,1:26,169,400,1:26,169,401,1:26,169,402,1:26,169,403,1:26,170,404,1:26,170,405,1:26,170,406,1:26,170,407,1:26,170,408,1:25,170,409,1:25,170,410,1:25,171,411,1:25,171,412,1:25,171,413,1:25,171,414,1:25,171,415,1:25,171,416,1:25,171,417,1:25,172,418,1:25,172,419,1:25,172,420,1:25,172,421,1:25,172,422,1:25,172,423,1:25,172,424,1:25,172,425,1:25,172,426,1:25,172,427,1:25,172,428,1:25,173,429,1:25,173,430,1:25,173,431,1:25,173,432,1:25,173,433,1:25,173,434,1:25,173,435,1:25,173,436,1:25,173,437,1:25,173,438,1:25,173,439,1:25,173,440,1:25,173,441,1:25,173,442,1:25,173,443,1:25,173,444,1:25,173,445,1:25,173,446,1:25,173,447,1:25,173,448,1:25,173,449,1:25,173,450,1:25,173,451,1:25,173,452,1:25,173,453,1:25,173,454,1:25,173,455,1:25,173,456,1:25,173,457,1:25,173,458,1:25,173,459,1:25,173,460,1:25,173,461,1:25,173,462,1:25,173,463,1:25,173,464,1:25,173,465,1:24,173,466,1:24,173,467,1:24,173,468,1:24,173,469,1:24,173,470,1:24,173,471,1:24,173,472,1:24,173,473,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 28,159,0,1:28,159,8,1:28,158,19,1:27,156,29,1:26,153,41,1:26,148,51,1:26,146,62,1:25,142,74,1:25,174,420,1:26,179,431,1:27,186,441,1:27,193,452,1:27,193,464,1:28,199,473,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_16
os.makedirs(path_results + '/T2/errsm_16')
os.chdir(path_results + '/T2/errsm_16')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_16/23-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 28,135,179,20:25,127,206,19:23,120,232,18:21,118,255,17:20,117,279,16:18,117,301,15:18,118,324,14:18,121,345,13:19,126,365,12:21,130,385,11:22,138,403,10:23,145,421,9:23,151,439,8:23,154,456,7:24,156,472,6:24,159,490,5:25,163,506,4:25,168,524,3:26,175,583,2:25,183,605,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  114 -end 618 ')
f_crop = open('crop.txt', 'w')
f_crop.write('114,618,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 17,137,0,1:17,137,1,1:17,136,2,1:17,136,3,1:17,136,4,1:17,136,5,1:17,136,6,1:17,136,7,1:17,135,8,1:17,135,9,1:17,135,10,1:17,135,11,1:17,135,12,1:17,135,13,1:17,134,14,1:17,134,15,1:17,134,16,1:17,134,17,1:18,134,18,1:18,134,19,1:18,133,20,1:18,133,21,1:18,133,22,1:18,133,23,1:18,133,24,1:18,132,25,1:18,132,26,1:18,132,27,1:18,132,28,1:18,132,29,1:18,132,30,1:18,131,31,1:18,131,32,1:19,131,33,1:19,131,34,1:19,131,35,1:19,130,36,1:19,130,37,1:19,130,38,1:19,130,39,1:19,130,40,1:19,129,41,1:19,129,42,1:19,129,43,1:19,129,44,1:19,129,45,1:20,128,46,1:20,128,47,1:20,128,48,1:20,128,49,1:20,128,50,1:20,127,51,1:20,127,52,1:20,127,53,1:20,127,54,1:20,127,55,1:20,126,56,1:20,126,57,1:21,126,58,1:21,126,59,1:21,126,60,1:21,125,61,1:21,125,62,1:21,125,63,1:21,125,64,1:21,125,65,1:21,124,66,1:21,124,67,1:21,124,68,1:22,124,69,1:22,124,70,1:22,123,71,1:22,123,72,1:22,123,73,1:22,123,74,1:22,123,75,1:22,123,76,1:22,122,77,1:22,122,78,1:23,122,79,1:23,122,80,1:23,122,81,1:23,121,82,1:23,121,83,1:23,121,84,1:23,121,85,1:23,121,86,1:23,121,87,1:24,120,88,1:24,120,89,1:24,120,90,1:24,120,91,1:24,120,92,1:24,119,93,1:24,119,94,1:24,119,95,1:24,119,96,1:25,119,97,1:25,119,98,1:25,118,99,1:25,118,100,1:25,118,101,1:25,118,102,1:25,118,103,1:25,118,104,1:26,118,105,1:26,117,106,1:26,117,107,1:26,117,108,1:26,117,109,1:26,117,110,1:26,117,111,1:26,117,112,1:27,116,113,1:27,116,114,1:27,116,115,1:27,116,116,1:27,116,117,1:27,116,118,1:27,116,119,1:27,115,120,1:28,115,121,1:28,115,122,1:28,115,123,1:28,115,124,1:28,115,125,1:28,115,126,1:28,115,127,1:28,115,128,1:29,114,129,1:29,114,130,1:29,114,131,1:29,114,132,1:29,114,133,1:29,114,134,1:29,114,135,1:29,114,136,1:30,114,137,1:30,114,138,1:30,113,139,1:30,113,140,1:30,113,141,1:30,113,142,1:30,113,143,1:30,113,144,1:30,113,145,1:31,113,146,1:31,113,147,1:31,113,148,1:31,113,149,1:31,113,150,1:31,112,151,1:31,112,152,1:31,112,153,1:31,112,154,1:31,112,155,1:31,112,156,1:32,112,157,1:32,112,158,1:32,112,159,1:32,112,160,1:32,112,161,1:32,112,162,1:32,112,163,1:32,112,164,1:32,112,165,1:32,112,166,1:32,112,167,1:32,112,168,1:32,112,169,1:32,112,170,1:32,112,171,1:33,112,172,1:33,112,173,1:33,112,174,1:33,112,175,1:33,112,176,1:33,112,177,1:33,112,178,1:33,112,179,1:33,112,180,1:33,112,181,1:33,112,182,1:33,112,183,1:33,112,184,1:33,112,185,1:33,112,186,1:33,112,187,1:33,112,188,1:33,112,189,1:33,112,190,1:33,112,191,1:33,112,192,1:33,112,193,1:33,112,194,1:33,112,195,1:33,112,196,1:33,112,197,1:33,112,198,1:33,112,199,1:33,112,200,1:33,112,201,1:33,112,202,1:33,112,203,1:33,112,204,1:33,112,205,1:33,113,206,1:33,113,207,1:33,113,208,1:33,113,209,1:33,113,210,1:33,113,211,1:33,113,212,1:33,113,213,1:33,113,214,1:33,113,215,1:33,113,216,1:33,114,217,1:33,114,218,1:33,114,219,1:33,114,220,1:33,114,221,1:33,114,222,1:32,114,223,1:32,115,224,1:32,115,225,1:32,115,226,1:32,115,227,1:32,115,228,1:32,115,229,1:32,115,230,1:32,116,231,1:32,116,232,1:32,116,233,1:32,116,234,1:32,116,235,1:32,116,236,1:32,117,237,1:32,117,238,1:32,117,239,1:32,117,240,1:31,117,241,1:31,118,242,1:31,118,243,1:31,118,244,1:31,118,245,1:31,118,246,1:31,119,247,1:31,119,248,1:31,119,249,1:31,119,250,1:31,120,251,1:31,120,252,1:31,120,253,1:31,120,254,1:30,121,255,1:30,121,256,1:30,121,257,1:30,121,258,1:30,122,259,1:30,122,260,1:30,122,261,1:30,123,262,1:30,123,263,1:30,123,264,1:30,123,265,1:30,124,266,1:30,124,267,1:29,124,268,1:29,125,269,1:29,125,270,1:29,125,271,1:29,125,272,1:29,126,273,1:29,126,274,1:29,126,275,1:29,127,276,1:29,127,277,1:29,127,278,1:29,128,279,1:29,128,280,1:28,128,281,1:28,129,282,1:28,129,283,1:28,129,284,1:28,130,285,1:28,130,286,1:28,130,287,1:28,130,288,1:28,131,289,1:28,131,290,1:28,131,291,1:28,132,292,1:28,132,293,1:28,132,294,1:28,133,295,1:28,133,296,1:27,133,297,1:27,134,298,1:27,134,299,1:27,134,300,1:27,135,301,1:27,135,302,1:27,135,303,1:27,135,304,1:27,136,305,1:27,136,306,1:27,136,307,1:27,137,308,1:27,137,309,1:27,137,310,1:27,137,311,1:27,138,312,1:27,138,313,1:27,138,314,1:27,139,315,1:27,139,316,1:27,139,317,1:27,139,318,1:27,140,319,1:27,140,320,1:27,140,321,1:27,140,322,1:27,141,323,1:27,141,324,1:27,141,325,1:27,142,326,1:27,142,327,1:27,142,328,1:27,142,329,1:27,143,330,1:27,143,331,1:27,143,332,1:27,143,333,1:27,144,334,1:26,144,335,1:26,144,336,1:26,144,337,1:26,144,338,1:26,145,339,1:26,145,340,1:26,145,341,1:26,145,342,1:26,146,343,1:26,146,344,1:26,146,345,1:26,146,346,1:26,147,347,1:26,147,348,1:26,147,349,1:26,147,350,1:26,147,351,1:26,148,352,1:26,148,353,1:26,148,354,1:26,148,355,1:26,149,356,1:26,149,357,1:26,149,358,1:26,149,359,1:26,149,360,1:26,150,361,1:26,150,362,1:26,150,363,1:26,150,364,1:26,151,365,1:26,151,366,1:26,151,367,1:26,151,368,1:26,151,369,1:26,152,370,1:26,152,371,1:26,152,372,1:26,152,373,1:26,152,374,1:26,153,375,1:26,153,376,1:26,153,377,1:26,153,378,1:26,153,379,1:26,154,380,1:26,154,381,1:26,154,382,1:26,154,383,1:26,154,384,1:26,155,385,1:26,155,386,1:26,155,387,1:26,155,388,1:26,155,389,1:26,156,390,1:26,156,391,1:26,156,392,1:26,156,393,1:26,156,394,1:25,157,395,1:25,157,396,1:25,157,397,1:25,157,398,1:25,157,399,1:25,158,400,1:25,158,401,1:25,158,402,1:25,158,403,1:25,158,404,1:25,158,405,1:25,159,406,1:25,159,407,1:25,159,408,1:25,159,409,1:25,159,410,1:25,159,411,1:25,160,412,1:25,160,413,1:25,160,414,1:25,160,415,1:25,160,416,1:25,160,417,1:25,161,418,1:25,161,419,1:25,161,420,1:25,161,421,1:25,161,422,1:25,161,423,1:25,162,424,1:25,162,425,1:25,162,426,1:25,162,427,1:25,162,428,1:25,162,429,1:25,163,430,1:25,163,431,1:25,163,432,1:25,163,433,1:25,163,434,1:25,163,435,1:25,163,436,1:25,164,437,1:25,164,438,1:25,164,439,1:25,164,440,1:25,164,441,1:25,164,442,1:25,164,443,1:25,165,444,1:25,165,445,1:25,165,446,1:25,165,447,1:25,165,448,1:25,165,449,1:25,165,450,1:25,165,451,1:25,166,452,1:25,166,453,1:25,166,454,1:25,166,455,1:25,166,456,1:25,166,457,1:25,166,458,1:25,166,459,1:25,167,460,1:25,167,461,1:25,167,462,1:25,167,463,1:25,167,464,1:25,167,465,1:25,167,466,1:25,167,467,1:25,168,468,1:25,168,469,1:25,168,470,1:25,168,471,1:25,168,472,1:25,168,473,1:25,168,474,1:25,168,475,1:25,168,476,1:25,168,477,1:25,169,478,1:25,169,479,1:25,169,480,1:25,169,481,1:25,169,482,1:25,169,483,1:25,169,484,1:25,169,485,1:25,169,486,1:25,169,487,1:25,170,488,1:25,170,489,1:25,170,490,1:25,170,491,1:25,170,492,1:25,170,493,1:25,170,494,1:25,170,495,1:25,170,496,1:25,170,497,1:25,170,498,1:25,171,499,1:25,171,500,1:25,171,501,1:26,171,502,1:26,171,503,1:26,171,504,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 33,137,0,1:34,135,8,1:33,134,18,1:33,131,27,1:32,129,36,1:26,163,442,1:26,165,453,1:25,169,468,1:26,176,477,1:25,180,488,1:25,183,499,1:25,185,504,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_17
os.makedirs(path_results + '/T2/errsm_17')
os.chdir(path_results + '/T2/errsm_17')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_17/41-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 22,140,156,20:25,134,183,19:26,126,211,18:28,121,236,17:28,119,259,16:28,118,282,15:29,120,305,14:30,123,326,13:31,127,347,12:31,133,367,11:31,141,385,10:32,151,402,9:32,158,419,8:31,163,435,7:31,166,451,6:30,168,467,5:30,170,484,4:29,172,500,3:24,172,558,2:23,181,581,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  86 -end 595 ')
f_crop = open('crop.txt', 'w')
f_crop.write('86,595,37,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 27,145,0,1:27,145,1,1:27,145,2,1:27,144,3,1:27,144,4,1:27,144,5,1:27,143,6,1:27,143,7,1:27,143,8,1:27,143,9,1:27,142,10,1:27,142,11,1:27,142,12,1:27,141,13,1:27,141,14,1:27,141,15,1:27,141,16,1:27,140,17,1:27,140,18,1:27,140,19,1:27,139,20,1:27,139,21,1:27,139,22,1:27,139,23,1:27,138,24,1:27,138,25,1:27,138,26,1:27,138,27,1:27,137,28,1:27,137,29,1:27,137,30,1:27,137,31,1:27,136,32,1:27,136,33,1:27,136,34,1:27,136,35,1:27,135,36,1:27,135,37,1:27,135,38,1:27,135,39,1:27,135,40,1:27,134,41,1:27,134,42,1:27,134,43,1:27,134,44,1:27,134,45,1:27,133,46,1:27,133,47,1:27,133,48,1:27,133,49,1:27,133,50,1:27,132,51,1:27,132,52,1:27,132,53,1:27,132,54,1:27,132,55,1:27,131,56,1:27,131,57,1:27,131,58,1:27,131,59,1:27,131,60,1:26,130,61,1:26,130,62,1:26,130,63,1:26,130,64,1:26,130,65,1:26,130,66,1:26,129,67,1:26,129,68,1:26,129,69,1:26,129,70,1:26,129,71,1:26,129,72,1:26,128,73,1:26,128,74,1:26,128,75,1:26,128,76,1:26,128,77,1:26,128,78,1:26,127,79,1:26,127,80,1:26,127,81,1:26,127,82,1:26,127,83,1:26,127,84,1:26,126,85,1:26,126,86,1:26,126,87,1:26,126,88,1:26,126,89,1:26,126,90,1:26,125,91,1:26,125,92,1:26,125,93,1:25,125,94,1:25,125,95,1:25,125,96,1:25,124,97,1:25,124,98,1:25,124,99,1:25,124,100,1:25,124,101,1:25,124,102,1:25,124,103,1:25,123,104,1:25,123,105,1:25,123,106,1:25,123,107,1:25,123,108,1:25,123,109,1:25,122,110,1:25,122,111,1:25,122,112,1:25,122,113,1:25,122,114,1:25,122,115,1:25,121,116,1:25,121,117,1:25,121,118,1:24,121,119,1:24,121,120,1:24,121,121,1:24,121,122,1:24,120,123,1:24,120,124,1:24,120,125,1:24,120,126,1:24,120,127,1:24,120,128,1:24,119,129,1:24,119,130,1:24,119,131,1:24,119,132,1:24,119,133,1:24,119,134,1:24,119,135,1:24,118,136,1:24,118,137,1:24,118,138,1:24,118,139,1:24,118,140,1:23,118,141,1:23,118,142,1:23,117,143,1:23,117,144,1:23,117,145,1:23,117,146,1:23,117,147,1:23,117,148,1:23,117,149,1:23,117,150,1:23,116,151,1:23,116,152,1:23,116,153,1:23,116,154,1:23,116,155,1:23,116,156,1:23,116,157,1:23,116,158,1:23,116,159,1:23,115,160,1:23,115,161,1:23,115,162,1:23,115,163,1:22,115,164,1:22,115,165,1:22,115,166,1:22,115,167,1:22,115,168,1:22,115,169,1:22,115,170,1:22,114,171,1:22,114,172,1:22,114,173,1:22,114,174,1:22,114,175,1:22,114,176,1:22,114,177,1:22,114,178,1:22,114,179,1:22,114,180,1:22,114,181,1:22,114,182,1:22,114,183,1:22,114,184,1:22,114,185,1:22,114,186,1:22,114,187,1:22,114,188,1:22,114,189,1:22,114,190,1:21,114,191,1:21,114,192,1:21,114,193,1:21,114,194,1:21,114,195,1:21,114,196,1:21,114,197,1:21,114,198,1:21,114,199,1:21,114,200,1:21,114,201,1:21,114,202,1:21,114,203,1:21,114,204,1:21,114,205,1:21,114,206,1:21,114,207,1:21,114,208,1:21,114,209,1:21,114,210,1:21,114,211,1:21,114,212,1:21,115,213,1:21,115,214,1:21,115,215,1:21,115,216,1:21,115,217,1:21,115,218,1:21,115,219,1:21,115,220,1:21,115,221,1:21,116,222,1:20,116,223,1:20,116,224,1:20,116,225,1:20,116,226,1:20,116,227,1:20,116,228,1:20,117,229,1:20,117,230,1:20,117,231,1:20,117,232,1:20,117,233,1:20,117,234,1:20,118,235,1:20,118,236,1:20,118,237,1:20,118,238,1:20,118,239,1:20,119,240,1:20,119,241,1:20,119,242,1:20,119,243,1:20,119,244,1:20,120,245,1:20,120,246,1:20,120,247,1:20,120,248,1:20,120,249,1:20,121,250,1:20,121,251,1:20,121,252,1:20,121,253,1:20,122,254,1:20,122,255,1:20,122,256,1:20,122,257,1:19,123,258,1:19,123,259,1:19,123,260,1:19,123,261,1:19,124,262,1:19,124,263,1:19,124,264,1:19,124,265,1:19,125,266,1:19,125,267,1:19,125,268,1:19,126,269,1:19,126,270,1:19,126,271,1:19,126,272,1:19,127,273,1:19,127,274,1:19,127,275,1:19,128,276,1:19,128,277,1:19,128,278,1:19,129,279,1:19,129,280,1:19,129,281,1:19,129,282,1:19,130,283,1:19,130,284,1:19,130,285,1:19,131,286,1:19,131,287,1:19,131,288,1:19,132,289,1:18,132,290,1:18,132,291,1:18,133,292,1:18,133,293,1:18,134,294,1:18,134,295,1:18,134,296,1:18,135,297,1:18,135,298,1:18,135,299,1:18,136,300,1:18,136,301,1:18,136,302,1:18,137,303,1:18,137,304,1:18,138,305,1:18,138,306,1:18,138,307,1:18,139,308,1:18,139,309,1:18,139,310,1:18,140,311,1:18,140,312,1:18,141,313,1:18,141,314,1:18,141,315,1:18,142,316,1:18,142,317,1:18,143,318,1:18,143,319,1:18,143,320,1:18,144,321,1:18,144,322,1:18,145,323,1:18,145,324,1:18,145,325,1:18,146,326,1:18,146,327,1:18,146,328,1:18,147,329,1:18,147,330,1:18,148,331,1:18,148,332,1:18,148,333,1:18,149,334,1:18,149,335,1:18,150,336,1:18,150,337,1:18,150,338,1:18,151,339,1:18,151,340,1:18,151,341,1:18,152,342,1:18,152,343,1:18,152,344,1:18,153,345,1:18,153,346,1:18,153,347,1:18,154,348,1:18,154,349,1:18,154,350,1:18,155,351,1:18,155,352,1:18,155,353,1:18,155,354,1:18,156,355,1:18,156,356,1:18,156,357,1:18,157,358,1:18,157,359,1:18,157,360,1:18,157,361,1:18,158,362,1:18,158,363,1:18,158,364,1:18,158,365,1:18,158,366,1:18,159,367,1:19,159,368,1:19,159,369,1:19,159,370,1:19,159,371,1:19,160,372,1:19,160,373,1:19,160,374,1:19,160,375,1:19,160,376,1:19,160,377,1:19,161,378,1:19,161,379,1:19,161,380,1:19,161,381,1:19,161,382,1:19,161,383,1:20,161,384,1:20,161,385,1:20,162,386,1:20,162,387,1:20,162,388,1:20,162,389,1:20,162,390,1:20,162,391,1:20,162,392,1:20,162,393,1:20,162,394,1:20,162,395,1:20,162,396,1:21,162,397,1:21,163,398,1:21,163,399,1:21,163,400,1:21,163,401,1:21,163,402,1:21,163,403,1:21,163,404,1:21,163,405,1:21,163,406,1:21,163,407,1:21,163,408,1:22,163,409,1:22,163,410,1:22,163,411,1:22,163,412,1:22,163,413,1:22,163,414,1:22,163,415,1:22,163,416,1:22,163,417,1:22,163,418,1:22,163,419,1:22,163,420,1:23,163,421,1:23,163,422,1:23,163,423,1:23,163,424,1:23,163,425,1:23,163,426,1:23,163,427,1:23,163,428,1:23,163,429,1:23,163,430,1:23,163,431,1:23,163,432,1:24,163,433,1:24,163,434,1:24,163,435,1:24,163,436,1:24,163,437,1:24,163,438,1:24,163,439,1:24,163,440,1:24,163,441,1:24,164,442,1:24,164,443,1:24,164,444,1:25,164,445,1:25,164,446,1:25,164,447,1:25,164,448,1:25,164,449,1:25,164,450,1:25,164,451,1:25,164,452,1:25,164,453,1:25,164,454,1:25,164,455,1:25,164,456,1:25,164,457,1:25,164,458,1:26,164,459,1:26,164,460,1:26,164,461,1:26,164,462,1:26,164,463,1:26,164,464,1:26,164,465,1:26,164,466,1:26,164,467,1:26,164,468,1:26,164,469,1:26,164,470,1:26,164,471,1:26,164,472,1:27,164,473,1:27,164,474,1:27,165,475,1:27,165,476,1:27,165,477,1:27,165,478,1:27,165,479,1:27,165,480,1:27,165,481,1:27,165,482,1:27,165,483,1:27,165,484,1:27,165,485,1:27,166,486,1:27,166,487,1:27,166,488,1:27,166,489,1:27,166,490,1:28,166,491,1:28,166,492,1:28,166,493,1:28,167,494,1:28,167,495,1:28,167,496,1:28,167,497,1:28,167,498,1:28,167,499,1:28,168,500,1:28,168,501,1:28,168,502,1:28,168,503,1:28,168,504,1:28,169,505,1:28,169,506,1:28,169,507,1:28,169,508,1:28,169,509,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 23,145,0,1:23,144,4,1:23,141,17,1:23,137,31,1:23,133,51,1:23,129,70,1:25,125,90,1:26,163,445,1:24,166,463,1:24,172,475,1:23,178,485,1:23,176,495,1:22,184,507,1:22,183,509,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_18
os.makedirs(path_results + '/T2/errsm_18')
os.chdir(path_results + '/T2/errsm_18')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_18/36-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 24,151,88,20:24,145,119,19:24,141,150,18:24,140,176,17:23,137,203,16:23,135,230,15:22,135,254,14:24,137,278,13:24,142,301,12:25,148,324,11:26,155,344,10:24,163,363,9:23,171,383,8:22,175,401,7:23,178,417,6:22,182,434,5:23,187,453,4:24,192,472,3:23,199,533,2:24,204,555,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  15 -end 568 ')
f_crop = open('crop.txt', 'w')
f_crop.write('15,568,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 26,159,0,1:26,159,1,1:26,158,2,1:26,158,3,1:26,157,4,1:26,157,5,1:26,157,6,1:26,156,7,1:26,156,8,1:26,155,9,1:26,155,10,1:26,155,11,1:26,154,12,1:26,154,13,1:26,154,14,1:26,153,15,1:26,153,16,1:26,153,17,1:26,152,18,1:26,152,19,1:26,152,20,1:26,151,21,1:26,151,22,1:26,151,23,1:26,150,24,1:26,150,25,1:26,150,26,1:26,149,27,1:26,149,28,1:26,149,29,1:26,149,30,1:26,148,31,1:26,148,32,1:26,148,33,1:26,148,34,1:26,147,35,1:26,147,36,1:26,147,37,1:26,146,38,1:26,146,39,1:26,146,40,1:26,146,41,1:26,146,42,1:26,145,43,1:26,145,44,1:26,145,45,1:26,145,46,1:26,144,47,1:26,144,48,1:26,144,49,1:26,144,50,1:26,144,51,1:26,143,52,1:26,143,53,1:26,143,54,1:26,143,55,1:26,143,56,1:26,142,57,1:26,142,58,1:26,142,59,1:26,142,60,1:26,142,61,1:26,142,62,1:26,141,63,1:26,141,64,1:26,141,65,1:26,141,66,1:26,141,67,1:26,141,68,1:26,140,69,1:26,140,70,1:26,140,71,1:26,140,72,1:26,140,73,1:26,140,74,1:26,140,75,1:26,139,76,1:26,139,77,1:26,139,78,1:26,139,79,1:26,139,80,1:26,139,81,1:26,139,82,1:26,139,83,1:26,138,84,1:26,138,85,1:26,138,86,1:26,138,87,1:26,138,88,1:26,138,89,1:26,138,90,1:26,138,91,1:26,138,92,1:26,137,93,1:26,137,94,1:26,137,95,1:26,137,96,1:26,137,97,1:26,137,98,1:26,137,99,1:26,137,100,1:26,137,101,1:26,137,102,1:26,136,103,1:26,136,104,1:26,136,105,1:26,136,106,1:26,136,107,1:26,136,108,1:26,136,109,1:26,136,110,1:26,136,111,1:26,136,112,1:26,136,113,1:26,135,114,1:26,135,115,1:26,135,116,1:26,135,117,1:26,135,118,1:26,135,119,1:26,135,120,1:26,135,121,1:26,135,122,1:26,135,123,1:26,135,124,1:26,135,125,1:26,134,126,1:26,134,127,1:26,134,128,1:26,134,129,1:26,134,130,1:26,134,131,1:26,134,132,1:26,134,133,1:26,134,134,1:26,134,135,1:26,134,136,1:26,134,137,1:26,134,138,1:26,133,139,1:26,133,140,1:26,133,141,1:26,133,142,1:26,133,143,1:26,133,144,1:26,133,145,1:26,133,146,1:26,133,147,1:26,133,148,1:26,133,149,1:26,133,150,1:26,133,151,1:26,132,152,1:26,132,153,1:26,132,154,1:26,132,155,1:26,132,156,1:26,132,157,1:27,132,158,1:27,132,159,1:27,132,160,1:27,132,161,1:27,132,162,1:27,132,163,1:27,132,164,1:27,132,165,1:27,131,166,1:27,131,167,1:27,131,168,1:27,131,169,1:27,131,170,1:27,131,171,1:27,131,172,1:27,131,173,1:27,131,174,1:27,131,175,1:27,131,176,1:27,131,177,1:27,131,178,1:27,131,179,1:27,131,180,1:27,130,181,1:27,130,182,1:27,130,183,1:27,130,184,1:27,130,185,1:27,130,186,1:27,130,187,1:27,130,188,1:27,130,189,1:27,130,190,1:27,130,191,1:27,130,192,1:27,130,193,1:27,130,194,1:27,130,195,1:27,130,196,1:27,130,197,1:27,129,198,1:27,129,199,1:27,129,200,1:27,129,201,1:27,129,202,1:27,129,203,1:27,129,204,1:27,129,205,1:27,129,206,1:27,129,207,1:27,129,208,1:27,129,209,1:27,129,210,1:27,129,211,1:27,129,212,1:27,129,213,1:27,129,214,1:27,129,215,1:27,129,216,1:27,129,217,1:27,129,218,1:27,129,219,1:27,129,220,1:27,129,221,1:27,129,222,1:27,129,223,1:27,129,224,1:27,129,225,1:27,129,226,1:27,129,227,1:27,129,228,1:27,129,229,1:27,129,230,1:27,129,231,1:27,129,232,1:27,129,233,1:27,129,234,1:27,129,235,1:27,129,236,1:27,129,237,1:27,129,238,1:27,129,239,1:27,129,240,1:27,129,241,1:27,129,242,1:27,129,243,1:27,129,244,1:27,129,245,1:27,129,246,1:27,129,247,1:27,130,248,1:27,130,249,1:27,130,250,1:27,130,251,1:27,130,252,1:27,130,253,1:27,130,254,1:27,130,255,1:27,130,256,1:27,130,257,1:27,130,258,1:27,131,259,1:27,131,260,1:27,131,261,1:27,131,262,1:27,131,263,1:27,131,264,1:27,131,265,1:27,132,266,1:27,132,267,1:27,132,268,1:27,132,269,1:27,132,270,1:27,132,271,1:27,133,272,1:27,133,273,1:27,133,274,1:27,133,275,1:27,133,276,1:26,134,277,1:26,134,278,1:26,134,279,1:26,134,280,1:26,134,281,1:26,135,282,1:26,135,283,1:26,135,284,1:26,135,285,1:26,135,286,1:26,136,287,1:26,136,288,1:26,136,289,1:26,136,290,1:26,137,291,1:26,137,292,1:26,137,293,1:26,137,294,1:26,138,295,1:26,138,296,1:26,138,297,1:26,138,298,1:26,139,299,1:26,139,300,1:26,139,301,1:26,139,302,1:26,140,303,1:26,140,304,1:26,140,305,1:26,141,306,1:26,141,307,1:26,141,308,1:26,141,309,1:26,142,310,1:26,142,311,1:26,142,312,1:26,143,313,1:26,143,314,1:26,143,315,1:26,143,316,1:26,144,317,1:26,144,318,1:26,144,319,1:26,145,320,1:26,145,321,1:26,145,322,1:26,146,323,1:26,146,324,1:26,146,325,1:26,146,326,1:26,147,327,1:26,147,328,1:26,147,329,1:26,148,330,1:26,148,331,1:26,148,332,1:26,149,333,1:26,149,334,1:26,149,335,1:26,150,336,1:26,150,337,1:27,150,338,1:27,151,339,1:27,151,340,1:27,151,341,1:27,152,342,1:27,152,343,1:27,152,344,1:27,153,345,1:27,153,346,1:27,153,347,1:27,154,348,1:27,154,349,1:27,154,350,1:27,155,351,1:27,155,352,1:27,155,353,1:27,156,354,1:27,156,355,1:27,156,356,1:27,157,357,1:27,157,358,1:27,157,359,1:27,157,360,1:27,158,361,1:27,158,362,1:27,158,363,1:27,159,364,1:27,159,365,1:27,159,366,1:27,160,367,1:27,160,368,1:27,160,369,1:27,161,370,1:27,161,371,1:27,161,372,1:27,162,373,1:27,162,374,1:27,162,375,1:27,163,376,1:27,163,377,1:27,163,378,1:27,164,379,1:27,164,380,1:27,164,381,1:27,164,382,1:27,165,383,1:27,165,384,1:27,165,385,1:27,166,386,1:27,166,387,1:27,166,388,1:27,166,389,1:27,167,390,1:27,167,391,1:27,167,392,1:27,168,393,1:27,168,394,1:27,168,395,1:27,168,396,1:27,169,397,1:27,169,398,1:27,169,399,1:27,170,400,1:27,170,401,1:27,170,402,1:27,170,403,1:27,171,404,1:27,171,405,1:27,171,406,1:27,171,407,1:27,172,408,1:27,172,409,1:27,172,410,1:27,172,411,1:27,173,412,1:27,173,413,1:27,173,414,1:27,173,415,1:27,174,416,1:27,174,417,1:27,174,418,1:27,174,419,1:27,175,420,1:27,175,421,1:27,175,422,1:27,175,423,1:27,175,424,1:27,176,425,1:27,176,426,1:27,176,427,1:27,176,428,1:27,176,429,1:27,177,430,1:27,177,431,1:27,177,432,1:27,177,433,1:27,177,434,1:27,178,435,1:27,178,436,1:27,178,437,1:27,178,438,1:27,178,439,1:27,179,440,1:27,179,441,1:27,179,442,1:27,179,443,1:27,179,444,1:27,180,445,1:27,180,446,1:27,180,447,1:27,180,448,1:26,180,449,1:26,180,450,1:26,180,451,1:26,181,452,1:26,181,453,1:26,181,454,1:26,181,455,1:26,181,456,1:26,181,457,1:26,182,458,1:26,182,459,1:26,182,460,1:26,182,461,1:26,182,462,1:26,182,463,1:26,182,464,1:26,182,465,1:26,183,466,1:26,183,467,1:26,183,468,1:26,183,469,1:26,183,470,1:26,183,471,1:26,183,472,1:26,183,473,1:26,184,474,1:26,184,475,1:26,184,476,1:26,184,477,1:26,184,478,1:26,184,479,1:26,184,480,1:26,184,481,1:26,184,482,1:26,184,483,1:26,184,484,1:26,185,485,1:26,185,486,1:26,185,487,1:26,185,488,1:26,185,489,1:26,185,490,1:26,185,491,1:26,185,492,1:26,185,493,1:26,185,494,1:26,185,495,1:26,185,496,1:26,185,497,1:26,186,498,1:26,186,499,1:26,186,500,1:26,186,501,1:26,186,502,1:26,186,503,1:26,186,504,1:26,186,505,1:26,186,506,1:26,186,507,1:26,186,508,1:26,186,509,1:26,186,510,1:26,186,511,1:26,186,512,1:26,186,513,1:26,186,514,1:26,186,515,1:26,186,516,1:26,186,517,1:26,187,518,1:26,187,519,1:26,187,520,1:26,187,521,1:26,187,522,1:26,187,523,1:26,187,524,1:26,187,525,1:26,187,526,1:26,187,527,1:26,187,528,1:26,187,529,1:26,187,530,1:26,187,531,1:26,187,532,1:26,187,533,1:26,187,534,1:26,187,535,1:26,187,536,1:26,187,537,1:26,187,538,1:26,187,539,1:26,187,540,1:26,187,541,1:26,187,542,1:26,187,543,1:26,187,544,1:26,187,545,1:26,187,546,1:26,187,547,1:26,187,548,1:26,187,549,1:26,187,550,1:26,187,551,1:26,187,552,1:26,187,553,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 24,156,0,1:24,152,14,1:24,147,30,1:25,144,49,1:24,140,68,1:24,137,87,1:24,136,105,1:24,135,122,1:24,183,471,1:25,186,484,1:25,191,502,1:24,196,512,1:23,200,522,1:24,204,535,1:24,200,546,1:24,203,553,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_21
os.makedirs(path_results + '/T2/errsm_21')
os.chdir(path_results + '/T2/errsm_21')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_21/27-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 21,127,121,20:19,121,151,19:19,118,181,18:18,117,207,17:18,118,233,16:18,119,259,15:18,122,284,14:18,127,307,13:18,134,328,12:19,142,349,11:19,152,368,10:22,164,385,9:24,175,403,8:27,181,421,7:28,181,438,6:28,179,454,5:28,176,472,4:27,176,492,3:24,176,551,2:23,175,577,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  48 -end 591 ')
f_crop = open('crop.txt', 'w')
f_crop.write('48,591,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 20,126,0,1:21,126,1,1:21,126,2,1:21,126,3,1:21,126,4,1:21,125,5,1:21,125,6,1:21,125,7,1:21,125,8,1:21,125,9,1:21,125,10,1:21,124,11,1:21,124,12,1:21,124,13,1:21,124,14,1:21,124,15,1:22,124,16,1:22,123,17,1:22,123,18,1:22,123,19,1:22,123,20,1:22,123,21,1:22,123,22,1:22,122,23,1:22,122,24,1:22,122,25,1:22,122,26,1:22,122,27,1:22,122,28,1:22,121,29,1:22,121,30,1:22,121,31,1:22,121,32,1:22,121,33,1:22,121,34,1:22,120,35,1:22,120,36,1:22,120,37,1:22,120,38,1:22,120,39,1:22,120,40,1:22,120,41,1:22,119,42,1:22,119,43,1:23,119,44,1:23,119,45,1:23,119,46,1:23,119,47,1:23,119,48,1:23,118,49,1:23,118,50,1:23,118,51,1:23,118,52,1:23,118,53,1:23,118,54,1:23,118,55,1:23,117,56,1:23,117,57,1:23,117,58,1:23,117,59,1:23,117,60,1:23,117,61,1:23,117,62,1:23,117,63,1:23,116,64,1:23,116,65,1:23,116,66,1:23,116,67,1:23,116,68,1:23,116,69,1:23,116,70,1:23,116,71,1:23,115,72,1:23,115,73,1:23,115,74,1:23,115,75,1:23,115,76,1:23,115,77,1:23,115,78,1:23,115,79,1:23,115,80,1:23,114,81,1:23,114,82,1:23,114,83,1:23,114,84,1:23,114,85,1:23,114,86,1:23,114,87,1:23,114,88,1:23,114,89,1:23,114,90,1:23,113,91,1:23,113,92,1:23,113,93,1:23,113,94,1:23,113,95,1:23,113,96,1:23,113,97,1:23,113,98,1:23,113,99,1:23,113,100,1:23,113,101,1:23,113,102,1:23,112,103,1:23,112,104,1:23,112,105,1:23,112,106,1:23,112,107,1:23,112,108,1:23,112,109,1:23,112,110,1:23,112,111,1:23,112,112,1:23,112,113,1:23,112,114,1:23,112,115,1:23,112,116,1:23,112,117,1:23,111,118,1:23,111,119,1:23,111,120,1:23,111,121,1:23,111,122,1:23,111,123,1:23,111,124,1:23,111,125,1:23,111,126,1:23,111,127,1:23,111,128,1:23,111,129,1:23,111,130,1:23,111,131,1:23,111,132,1:24,111,133,1:24,111,134,1:24,111,135,1:24,111,136,1:24,111,137,1:24,111,138,1:24,111,139,1:24,111,140,1:24,111,141,1:24,111,142,1:24,111,143,1:24,111,144,1:24,111,145,1:24,111,146,1:24,111,147,1:24,111,148,1:24,111,149,1:24,111,150,1:24,111,151,1:24,111,152,1:24,111,153,1:24,111,154,1:24,111,155,1:24,111,156,1:24,111,157,1:24,111,158,1:24,111,159,1:24,111,160,1:24,111,161,1:24,111,162,1:24,111,163,1:24,111,164,1:24,111,165,1:24,111,166,1:24,111,167,1:24,111,168,1:24,111,169,1:24,111,170,1:24,111,171,1:24,111,172,1:24,111,173,1:24,111,174,1:24,111,175,1:24,111,176,1:25,111,177,1:25,111,178,1:25,111,179,1:25,111,180,1:25,111,181,1:25,111,182,1:25,111,183,1:25,111,184,1:25,111,185,1:25,111,186,1:25,111,187,1:25,111,188,1:25,111,189,1:25,111,190,1:25,111,191,1:25,111,192,1:25,111,193,1:25,112,194,1:25,112,195,1:25,112,196,1:25,112,197,1:25,112,198,1:25,112,199,1:25,112,200,1:25,112,201,1:25,112,202,1:25,112,203,1:25,112,204,1:25,112,205,1:25,112,206,1:25,112,207,1:25,112,208,1:25,113,209,1:25,113,210,1:25,113,211,1:25,113,212,1:25,113,213,1:25,113,214,1:25,113,215,1:25,113,216,1:25,113,217,1:25,113,218,1:25,114,219,1:25,114,220,1:25,114,221,1:25,114,222,1:25,114,223,1:25,114,224,1:25,114,225,1:25,114,226,1:25,114,227,1:25,115,228,1:25,115,229,1:25,115,230,1:25,115,231,1:25,115,232,1:25,115,233,1:25,115,234,1:25,116,235,1:25,116,236,1:25,116,237,1:25,116,238,1:25,116,239,1:25,116,240,1:25,116,241,1:25,117,242,1:25,117,243,1:25,117,244,1:25,117,245,1:25,117,246,1:25,118,247,1:25,118,248,1:25,118,249,1:25,118,250,1:25,118,251,1:25,119,252,1:25,119,253,1:25,119,254,1:25,119,255,1:24,120,256,1:24,120,257,1:24,120,258,1:24,120,259,1:24,121,260,1:24,121,261,1:24,121,262,1:24,121,263,1:24,122,264,1:24,122,265,1:24,122,266,1:24,122,267,1:24,123,268,1:24,123,269,1:24,123,270,1:24,124,271,1:24,124,272,1:24,124,273,1:24,125,274,1:24,125,275,1:24,125,276,1:24,126,277,1:24,126,278,1:24,126,279,1:24,127,280,1:24,127,281,1:24,127,282,1:24,128,283,1:24,128,284,1:24,129,285,1:24,129,286,1:24,129,287,1:24,130,288,1:24,130,289,1:24,131,290,1:24,131,291,1:24,131,292,1:23,132,293,1:23,132,294,1:23,133,295,1:23,133,296,1:23,133,297,1:23,134,298,1:23,134,299,1:23,135,300,1:23,135,301,1:23,136,302,1:23,136,303,1:23,137,304,1:23,137,305,1:23,138,306,1:23,138,307,1:23,139,308,1:23,139,309,1:23,139,310,1:23,140,311,1:23,140,312,1:22,141,313,1:22,141,314,1:22,142,315,1:22,142,316,1:22,143,317,1:22,143,318,1:22,144,319,1:22,144,320,1:22,145,321,1:22,145,322,1:22,146,323,1:22,147,324,1:21,147,325,1:21,148,326,1:21,148,327,1:21,149,328,1:21,149,329,1:21,150,330,1:21,150,331,1:21,151,332,1:21,151,333,1:21,152,334,1:20,152,335,1:20,153,336,1:20,153,337,1:20,154,338,1:20,155,339,1:20,155,340,1:20,156,341,1:20,156,342,1:20,157,343,1:19,157,344,1:19,158,345,1:19,158,346,1:19,159,347,1:19,159,348,1:19,160,349,1:19,160,350,1:19,161,351,1:18,161,352,1:18,162,353,1:18,162,354,1:18,162,355,1:18,163,356,1:18,163,357,1:18,164,358,1:18,164,359,1:18,165,360,1:17,165,361,1:17,165,362,1:17,166,363,1:17,166,364,1:17,166,365,1:17,167,366,1:17,167,367,1:17,168,368,1:17,168,369,1:17,168,370,1:16,168,371,1:16,169,372,1:16,169,373,1:16,169,374,1:16,169,375,1:16,170,376,1:16,170,377,1:16,170,378,1:16,170,379,1:16,171,380,1:16,171,381,1:16,171,382,1:16,171,383,1:16,171,384,1:16,171,385,1:15,171,386,1:15,171,387,1:15,171,388,1:15,171,389,1:15,172,390,1:15,172,391,1:15,172,392,1:15,172,393,1:15,172,394,1:15,172,395,1:15,172,396,1:15,172,397,1:15,172,398,1:15,172,399,1:15,171,400,1:15,171,401,1:15,171,402,1:15,171,403,1:15,171,404,1:15,171,405,1:15,171,406,1:15,171,407,1:15,171,408,1:15,171,409,1:15,171,410,1:15,171,411,1:15,171,412,1:15,170,413,1:15,170,414,1:15,170,415,1:15,170,416,1:15,170,417,1:15,170,418,1:15,170,419,1:15,170,420,1:15,169,421,1:15,169,422,1:15,169,423,1:15,169,424,1:15,169,425,1:15,169,426,1:15,169,427,1:15,169,428,1:15,169,429,1:15,168,430,1:15,168,431,1:15,168,432,1:15,168,433,1:15,168,434,1:15,168,435,1:15,168,436,1:15,168,437,1:15,168,438,1:15,168,439,1:15,168,440,1:15,168,441,1:15,167,442,1:15,167,443,1:15,167,444,1:15,167,445,1:15,167,446,1:15,167,447,1:15,167,448,1:16,167,449,1:16,167,450,1:16,167,451,1:16,167,452,1:16,167,453,1:16,167,454,1:16,167,455,1:16,167,456,1:16,167,457,1:16,167,458,1:16,167,459,1:16,167,460,1:16,167,461,1:16,167,462,1:16,167,463,1:16,167,464,1:16,167,465,1:16,167,466,1:16,167,467,1:16,167,468,1:16,167,469,1:16,167,470,1:16,167,471,1:16,167,472,1:16,167,473,1:17,167,474,1:17,167,475,1:17,168,476,1:17,168,477,1:17,168,478,1:17,168,479,1:17,168,480,1:17,168,481,1:17,168,482,1:17,168,483,1:17,168,484,1:17,168,485,1:17,168,486,1:18,168,487,1:18,168,488,1:18,169,489,1:18,169,490,1:18,169,491,1:18,169,492,1:18,169,493,1:18,169,494,1:18,169,495,1:18,169,496,1:19,169,497,1:19,170,498,1:19,170,499,1:19,170,500,1:19,170,501,1:19,170,502,1:19,170,503,1:19,170,504,1:19,170,505,1:19,170,506,1:20,171,507,1:20,171,508,1:20,171,509,1:20,171,510,1:20,171,511,1:20,171,512,1:20,171,513,1:20,171,514,1:20,171,515,1:20,172,516,1:20,172,517,1:20,172,518,1:20,172,519,1:21,172,520,1:21,172,521,1:21,172,522,1:21,172,523,1:21,172,524,1:21,172,525,1:21,173,526,1:21,173,527,1:21,173,528,1:21,173,529,1:21,173,530,1:21,173,531,1:21,173,532,1:21,173,533,1:21,173,534,1:20,173,535,1:20,173,536,1:20,173,537,1:20,173,538,1:20,173,539,1:20,173,540,1:20,173,541,1:20,173,542,1:20,173,543,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 22,126,0,1:22,126,3,1:21,124,13,1:21,121,27,1:20,117,46,1:27,166,465,1:26,167,478,1:25,169,495,1:24,173,509,1:24,174,522,1:23,172,536,1:22,176,543,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_22
os.makedirs(path_results + '/T2/errsm_22')
os.chdir(path_results + '/T2/errsm_22')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_22/29-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 23,123,140,20:23,121,171,19:23,120,198,18:23,118,224,17:22,116,247,16:22,115,269,15:22,115,292,14:22,117,313,13:23,121,334,12:23,128,354,11:23,135,373,10:23,143,390,9:24,150,407,8:24,150,424,7:24,149,441,6:24,151,458,5:23,153,474,4:21,157,492,3:23,162,547,2:25,171,569,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  65 -end 582 ')
f_crop = open('crop.txt', 'w')
f_crop.write('65,582,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 30,122,0,1:30,122,1,1:30,121,2,1:30,121,3,1:30,121,4,1:30,121,5,1:30,121,6,1:30,120,7,1:30,120,8,1:30,120,9,1:30,120,10,1:30,120,11,1:30,119,12,1:30,119,13,1:30,119,14,1:30,119,15,1:30,119,16,1:30,118,17,1:30,118,18,1:30,118,19,1:30,118,20,1:30,118,21,1:30,118,22,1:30,117,23,1:30,117,24,1:30,117,25,1:30,117,26,1:30,117,27,1:30,117,28,1:30,117,29,1:30,116,30,1:30,116,31,1:30,116,32,1:30,116,33,1:30,116,34,1:30,116,35,1:30,116,36,1:30,115,37,1:30,115,38,1:30,115,39,1:30,115,40,1:30,115,41,1:30,115,42,1:30,115,43,1:30,115,44,1:30,115,45,1:30,115,46,1:30,114,47,1:30,114,48,1:30,114,49,1:30,114,50,1:30,114,51,1:30,114,52,1:30,114,53,1:30,114,54,1:30,114,55,1:30,114,56,1:29,114,57,1:29,113,58,1:29,113,59,1:29,113,60,1:29,113,61,1:29,113,62,1:29,113,63,1:29,113,64,1:29,113,65,1:29,113,66,1:29,113,67,1:29,113,68,1:29,113,69,1:29,113,70,1:29,113,71,1:29,113,72,1:29,112,73,1:29,112,74,1:29,112,75,1:29,112,76,1:29,112,77,1:29,112,78,1:28,112,79,1:28,112,80,1:28,112,81,1:28,112,82,1:28,112,83,1:28,112,84,1:28,112,85,1:28,112,86,1:28,112,87,1:28,112,88,1:28,112,89,1:28,112,90,1:28,112,91,1:28,112,92,1:28,112,93,1:28,112,94,1:28,112,95,1:28,112,96,1:28,112,97,1:28,111,98,1:28,111,99,1:28,111,100,1:28,111,101,1:27,111,102,1:27,111,103,1:27,111,104,1:27,111,105,1:27,111,106,1:27,111,107,1:27,111,108,1:27,111,109,1:27,111,110,1:27,111,111,1:27,111,112,1:27,111,113,1:27,111,114,1:27,111,115,1:27,111,116,1:27,111,117,1:27,111,118,1:27,111,119,1:27,111,120,1:27,111,121,1:27,111,122,1:27,111,123,1:27,111,124,1:27,111,125,1:27,111,126,1:27,111,127,1:27,111,128,1:27,111,129,1:27,111,130,1:27,111,131,1:27,111,132,1:27,111,133,1:27,111,134,1:27,111,135,1:27,111,136,1:27,111,137,1:27,111,138,1:27,111,139,1:27,111,140,1:27,111,141,1:27,110,142,1:27,110,143,1:27,110,144,1:27,110,145,1:27,110,146,1:27,110,147,1:27,110,148,1:27,110,149,1:27,110,150,1:27,110,151,1:27,110,152,1:27,110,153,1:27,110,154,1:27,110,155,1:27,110,156,1:27,110,157,1:27,110,158,1:27,110,159,1:27,110,160,1:27,110,161,1:27,110,162,1:27,110,163,1:27,110,164,1:27,110,165,1:27,110,166,1:27,110,167,1:27,110,168,1:27,110,169,1:27,110,170,1:27,110,171,1:27,110,172,1:27,110,173,1:27,110,174,1:27,110,175,1:27,110,176,1:27,110,177,1:27,110,178,1:27,110,179,1:27,110,180,1:27,110,181,1:27,110,182,1:27,110,183,1:27,110,184,1:27,110,185,1:28,110,186,1:28,110,187,1:28,110,188,1:28,110,189,1:28,110,190,1:28,110,191,1:28,110,192,1:28,110,193,1:28,109,194,1:28,109,195,1:28,109,196,1:28,109,197,1:28,109,198,1:28,109,199,1:28,109,200,1:28,109,201,1:28,109,202,1:28,109,203,1:28,109,204,1:28,109,205,1:28,109,206,1:28,109,207,1:28,109,208,1:28,109,209,1:28,109,210,1:28,109,211,1:28,109,212,1:28,109,213,1:28,110,214,1:28,110,215,1:28,110,216,1:28,110,217,1:28,110,218,1:28,110,219,1:28,110,220,1:28,110,221,1:28,110,222,1:28,110,223,1:28,110,224,1:28,110,225,1:28,110,226,1:28,110,227,1:28,110,228,1:28,110,229,1:28,110,230,1:28,110,231,1:28,110,232,1:28,110,233,1:28,110,234,1:28,110,235,1:28,110,236,1:28,111,237,1:28,111,238,1:28,111,239,1:28,111,240,1:28,111,241,1:28,111,242,1:28,111,243,1:28,111,244,1:28,111,245,1:28,112,246,1:28,112,247,1:28,112,248,1:28,112,249,1:28,112,250,1:28,112,251,1:28,112,252,1:28,113,253,1:28,113,254,1:28,113,255,1:28,113,256,1:28,113,257,1:28,114,258,1:28,114,259,1:28,114,260,1:28,114,261,1:28,114,262,1:28,115,263,1:28,115,264,1:28,115,265,1:28,115,266,1:28,116,267,1:28,116,268,1:28,116,269,1:28,116,270,1:28,117,271,1:28,117,272,1:28,117,273,1:28,118,274,1:28,118,275,1:28,118,276,1:28,119,277,1:28,119,278,1:28,119,279,1:28,119,280,1:28,120,281,1:28,120,282,1:28,120,283,1:28,121,284,1:28,121,285,1:28,121,286,1:28,122,287,1:28,122,288,1:27,122,289,1:27,123,290,1:27,123,291,1:27,124,292,1:27,124,293,1:27,124,294,1:27,125,295,1:27,125,296,1:27,125,297,1:27,126,298,1:27,126,299,1:27,126,300,1:27,127,301,1:27,127,302,1:27,127,303,1:27,128,304,1:27,128,305,1:27,128,306,1:27,129,307,1:27,129,308,1:27,129,309,1:27,130,310,1:27,130,311,1:27,130,312,1:27,131,313,1:27,131,314,1:27,131,315,1:27,132,316,1:27,132,317,1:27,132,318,1:27,133,319,1:27,133,320,1:27,133,321,1:27,134,322,1:27,134,323,1:27,134,324,1:27,134,325,1:27,135,326,1:27,135,327,1:27,135,328,1:27,136,329,1:27,136,330,1:27,136,331,1:27,136,332,1:27,137,333,1:27,137,334,1:26,137,335,1:26,137,336,1:26,138,337,1:26,138,338,1:26,138,339,1:26,138,340,1:26,139,341,1:26,139,342,1:26,139,343,1:26,139,344,1:26,140,345,1:26,140,346,1:26,140,347,1:26,140,348,1:26,140,349,1:26,141,350,1:26,141,351,1:26,141,352,1:26,141,353,1:26,141,354,1:26,141,355,1:26,142,356,1:26,142,357,1:26,142,358,1:26,142,359,1:26,142,360,1:26,142,361,1:26,143,362,1:26,143,363,1:26,143,364,1:26,143,365,1:26,143,366,1:26,143,367,1:26,143,368,1:26,143,369,1:26,143,370,1:26,144,371,1:26,144,372,1:27,144,373,1:27,144,374,1:27,144,375,1:27,144,376,1:27,144,377,1:27,144,378,1:27,144,379,1:27,144,380,1:27,144,381,1:27,144,382,1:27,144,383,1:27,145,384,1:27,145,385,1:27,145,386,1:27,145,387,1:27,145,388,1:27,145,389,1:27,145,390,1:27,145,391,1:27,145,392,1:27,145,393,1:27,145,394,1:27,145,395,1:28,145,396,1:28,145,397,1:28,145,398,1:28,145,399,1:28,145,400,1:28,145,401,1:28,145,402,1:28,145,403,1:28,145,404,1:28,146,405,1:28,146,406,1:28,146,407,1:28,146,408,1:28,146,409,1:28,146,410,1:28,146,411,1:28,146,412,1:28,146,413,1:28,146,414,1:29,146,415,1:29,146,416,1:29,146,417,1:29,146,418,1:29,146,419,1:29,146,420,1:29,147,421,1:29,147,422,1:29,147,423,1:29,147,424,1:29,147,425,1:29,147,426,1:29,147,427,1:29,147,428,1:29,147,429,1:29,147,430,1:29,148,431,1:29,148,432,1:29,148,433,1:29,148,434,1:29,148,435,1:29,148,436,1:29,148,437,1:30,148,438,1:30,149,439,1:30,149,440,1:30,149,441,1:30,149,442,1:30,149,443,1:30,149,444,1:30,149,445,1:30,149,446,1:30,150,447,1:30,150,448,1:30,150,449,1:30,150,450,1:30,150,451,1:30,150,452,1:30,150,453,1:30,150,454,1:30,151,455,1:30,151,456,1:30,151,457,1:30,151,458,1:30,151,459,1:30,151,460,1:30,151,461,1:30,151,462,1:30,152,463,1:30,152,464,1:30,152,465,1:30,152,466,1:30,152,467,1:30,152,468,1:30,152,469,1:30,152,470,1:30,153,471,1:30,153,472,1:30,153,473,1:30,153,474,1:30,153,475,1:30,153,476,1:30,153,477,1:30,153,478,1:30,153,479,1:30,153,480,1:30,154,481,1:30,154,482,1:30,154,483,1:30,154,484,1:30,154,485,1:30,154,486,1:30,154,487,1:30,154,488,1:30,154,489,1:30,154,490,1:30,154,491,1:30,154,492,1:29,154,493,1:29,154,494,1:29,154,495,1:29,155,496,1:29,155,497,1:29,155,498,1:29,155,499,1:29,155,500,1:29,155,501,1:29,155,502,1:29,155,503,1:29,155,504,1:29,155,505,1:29,155,506,1:29,155,507,1:29,155,508,1:29,155,509,1:28,155,510,1:28,155,511,1:28,155,512,1:28,155,513,1:28,155,514,1:28,155,515,1:28,154,516,1:28,154,517,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 20,121,0,1:21,119,11,1:20,115,28,1:21,114,43,1:21,113,59,1:21,112,72,1:24,143,376,1:23,144,390,1:22,146,410,1:21,148,428,1:20,150,447,1:19,152,465,1:23,159,483,1:24,166,496,1:24,166,507,1:25,175,517,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_23
os.makedirs(path_results + '/T2/errsm_23')
os.chdir(path_results + '/T2/errsm_23')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_23/29-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 17,143,136,20:19,140,165,19:19,138,192,18:19,136,216,17:22,135,239,16:22,134,262,15:23,135,286,14:25,137,307,13:25,141,327,12:22,145,346,11:20,149,365,10:20,154,384,9:20,158,402,8:20,159,419,7:21,157,436,6:21,157,453,5:22,161,470,4:22,166,486,3:21,173,542,2:23,182,563,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  62 -end 582 ')
f_crop = open('crop.txt', 'w')
f_crop.write('62,582,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 35,141,0,1:35,140,1,1:35,140,2,1:35,140,3,1:35,140,4,1:35,140,5,1:35,140,6,1:35,140,7,1:35,139,8,1:35,139,9,1:35,139,10,1:35,139,11,1:35,139,12,1:35,139,13,1:35,139,14,1:35,138,15,1:35,138,16,1:35,138,17,1:35,138,18,1:35,138,19,1:35,138,20,1:35,138,21,1:35,138,22,1:35,137,23,1:35,137,24,1:35,137,25,1:35,137,26,1:35,137,27,1:35,137,28,1:35,137,29,1:35,137,30,1:35,137,31,1:35,136,32,1:35,136,33,1:35,136,34,1:35,136,35,1:35,136,36,1:35,136,37,1:35,136,38,1:35,136,39,1:35,136,40,1:35,136,41,1:35,135,42,1:35,135,43,1:35,135,44,1:35,135,45,1:35,135,46,1:35,135,47,1:35,135,48,1:35,135,49,1:35,135,50,1:35,135,51,1:35,135,52,1:35,134,53,1:35,134,54,1:35,134,55,1:34,134,56,1:34,134,57,1:34,134,58,1:34,134,59,1:34,134,60,1:34,134,61,1:34,134,62,1:34,134,63,1:34,134,64,1:34,134,65,1:34,133,66,1:34,133,67,1:34,133,68,1:34,133,69,1:34,133,70,1:34,133,71,1:34,133,72,1:34,133,73,1:34,133,74,1:34,133,75,1:34,133,76,1:34,133,77,1:34,133,78,1:34,133,79,1:34,133,80,1:34,132,81,1:34,132,82,1:34,132,83,1:34,132,84,1:33,132,85,1:33,132,86,1:33,132,87,1:33,132,88,1:33,132,89,1:33,132,90,1:33,132,91,1:33,132,92,1:33,132,93,1:33,132,94,1:33,132,95,1:33,132,96,1:33,132,97,1:33,131,98,1:33,131,99,1:33,131,100,1:33,131,101,1:33,131,102,1:33,131,103,1:33,131,104,1:33,131,105,1:33,131,106,1:33,131,107,1:33,131,108,1:32,131,109,1:32,131,110,1:32,131,111,1:32,131,112,1:32,131,113,1:32,131,114,1:32,131,115,1:32,131,116,1:32,130,117,1:32,130,118,1:32,130,119,1:32,130,120,1:32,130,121,1:32,130,122,1:32,130,123,1:32,130,124,1:32,130,125,1:32,130,126,1:32,130,127,1:32,130,128,1:32,130,129,1:32,130,130,1:32,130,131,1:32,130,132,1:32,130,133,1:32,130,134,1:31,130,135,1:31,130,136,1:31,130,137,1:31,130,138,1:31,129,139,1:31,129,140,1:31,129,141,1:31,129,142,1:31,129,143,1:31,129,144,1:31,129,145,1:31,129,146,1:31,129,147,1:31,129,148,1:31,129,149,1:31,129,150,1:31,129,151,1:31,129,152,1:31,129,153,1:31,129,154,1:31,129,155,1:31,129,156,1:31,129,157,1:31,129,158,1:31,129,159,1:31,129,160,1:31,129,161,1:31,129,162,1:31,129,163,1:31,129,164,1:31,129,165,1:31,129,166,1:31,129,167,1:31,129,168,1:30,129,169,1:30,129,170,1:30,129,171,1:30,129,172,1:30,129,173,1:30,129,174,1:30,128,175,1:30,128,176,1:30,128,177,1:30,128,178,1:30,128,179,1:30,128,180,1:30,128,181,1:30,128,182,1:30,128,183,1:30,128,184,1:30,128,185,1:30,128,186,1:30,128,187,1:30,128,188,1:30,128,189,1:30,128,190,1:30,128,191,1:30,128,192,1:30,129,193,1:30,129,194,1:30,129,195,1:30,129,196,1:30,129,197,1:30,129,198,1:30,129,199,1:30,129,200,1:30,129,201,1:30,129,202,1:30,129,203,1:29,129,204,1:29,129,205,1:29,129,206,1:29,129,207,1:29,129,208,1:29,129,209,1:29,129,210,1:29,129,211,1:29,129,212,1:29,129,213,1:29,129,214,1:29,129,215,1:29,129,216,1:29,129,217,1:29,129,218,1:29,129,219,1:29,130,220,1:29,130,221,1:29,130,222,1:29,130,223,1:28,130,224,1:28,130,225,1:28,130,226,1:28,130,227,1:28,130,228,1:28,130,229,1:28,130,230,1:28,130,231,1:28,130,232,1:28,131,233,1:28,131,234,1:28,131,235,1:28,131,236,1:28,131,237,1:28,131,238,1:28,131,239,1:28,131,240,1:28,131,241,1:28,131,242,1:28,132,243,1:27,132,244,1:27,132,245,1:27,132,246,1:27,132,247,1:27,132,248,1:27,132,249,1:27,132,250,1:27,133,251,1:27,133,252,1:27,133,253,1:27,133,254,1:27,133,255,1:27,133,256,1:27,133,257,1:27,133,258,1:27,134,259,1:27,134,260,1:27,134,261,1:27,134,262,1:27,134,263,1:27,134,264,1:27,135,265,1:27,135,266,1:27,135,267,1:27,135,268,1:27,135,269,1:27,135,270,1:27,136,271,1:27,136,272,1:27,136,273,1:27,136,274,1:27,136,275,1:27,136,276,1:27,137,277,1:27,137,278,1:27,137,279,1:27,137,280,1:27,137,281,1:27,138,282,1:27,138,283,1:27,138,284,1:27,138,285,1:27,138,286,1:28,139,287,1:28,139,288,1:28,139,289,1:28,139,290,1:28,139,291,1:28,139,292,1:28,140,293,1:28,140,294,1:28,140,295,1:28,140,296,1:28,140,297,1:28,141,298,1:28,141,299,1:28,141,300,1:28,141,301,1:28,141,302,1:28,142,303,1:28,142,304,1:28,142,305,1:28,142,306,1:28,142,307,1:28,142,308,1:28,143,309,1:28,143,310,1:29,143,311,1:29,143,312,1:29,143,313,1:29,144,314,1:29,144,315,1:29,144,316,1:29,144,317,1:29,144,318,1:29,144,319,1:29,145,320,1:29,145,321,1:29,145,322,1:29,145,323,1:29,145,324,1:29,145,325,1:29,145,326,1:29,146,327,1:29,146,328,1:29,146,329,1:29,146,330,1:29,146,331,1:29,146,332,1:29,147,333,1:29,147,334,1:29,147,335,1:29,147,336,1:29,147,337,1:29,147,338,1:29,147,339,1:29,147,340,1:29,148,341,1:29,148,342,1:29,148,343,1:29,148,344,1:30,148,345,1:30,148,346,1:30,148,347,1:30,149,348,1:30,149,349,1:30,149,350,1:30,149,351,1:30,149,352,1:30,149,353,1:30,149,354,1:30,149,355,1:30,149,356,1:30,150,357,1:30,150,358,1:30,150,359,1:30,150,360,1:30,150,361,1:30,150,362,1:30,150,363,1:30,150,364,1:30,150,365,1:30,151,366,1:30,151,367,1:30,151,368,1:30,151,369,1:30,151,370,1:30,151,371,1:30,151,372,1:30,151,373,1:30,151,374,1:30,151,375,1:30,151,376,1:30,152,377,1:30,152,378,1:30,152,379,1:30,152,380,1:30,152,381,1:30,152,382,1:30,152,383,1:30,152,384,1:30,152,385,1:30,152,386,1:30,152,387,1:30,153,388,1:30,153,389,1:30,153,390,1:30,153,391,1:30,153,392,1:30,153,393,1:30,153,394,1:30,153,395,1:29,153,396,1:29,153,397,1:29,154,398,1:29,154,399,1:29,154,400,1:29,154,401,1:29,154,402,1:29,154,403,1:29,154,404,1:29,154,405,1:29,154,406,1:29,154,407,1:29,155,408,1:29,155,409,1:29,155,410,1:29,155,411,1:29,155,412,1:29,155,413,1:29,155,414,1:29,155,415,1:29,156,416,1:29,156,417,1:29,156,418,1:29,156,419,1:29,156,420,1:29,156,421,1:29,156,422,1:29,157,423,1:29,157,424,1:29,157,425,1:29,157,426,1:29,157,427,1:29,157,428,1:29,157,429,1:29,158,430,1:29,158,431,1:29,158,432,1:29,158,433,1:29,158,434,1:29,158,435,1:29,159,436,1:29,159,437,1:29,159,438,1:29,159,439,1:29,159,440,1:29,159,441,1:29,160,442,1:29,160,443,1:29,160,444,1:29,160,445,1:29,160,446,1:29,160,447,1:29,161,448,1:29,161,449,1:29,161,450,1:29,161,451,1:29,161,452,1:29,161,453,1:29,162,454,1:29,162,455,1:29,162,456,1:29,162,457,1:29,162,458,1:29,162,459,1:29,163,460,1:29,163,461,1:29,163,462,1:29,163,463,1:29,163,464,1:29,163,465,1:29,164,466,1:29,164,467,1:29,164,468,1:29,164,469,1:29,164,470,1:29,164,471,1:29,164,472,1:29,165,473,1:29,165,474,1:29,165,475,1:29,165,476,1:29,165,477,1:29,165,478,1:29,165,479,1:29,166,480,1:29,166,481,1:29,166,482,1:29,166,483,1:29,166,484,1:29,166,485,1:29,166,486,1:29,167,487,1:29,167,488,1:29,167,489,1:29,167,490,1:29,167,491,1:29,167,492,1:29,167,493,1:29,167,494,1:29,168,495,1:29,168,496,1:29,168,497,1:29,168,498,1:29,168,499,1:29,168,500,1:29,168,501,1:29,168,502,1:29,168,503,1:29,168,504,1:29,168,505,1:29,168,506,1:29,169,507,1:29,169,508,1:29,169,509,1:29,169,510,1:29,169,511,1:29,169,512,1:29,169,513,1:29,169,514,1:29,169,515,1:29,169,516,1:29,169,517,1:29,169,518,1:29,169,519,1:29,169,520,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 17,141,0,1:16,138,12,1:16,135,25,1:16,133,40,1:16,133,55,1:17,132,69,1:17,132,84,1:18,131,99,1:18,131,113,1:21,157,429,1:21,160,450,1:21,165,470,1:22,175,484,1:23,180,496,1:23,184,511,1:22,186,520,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_24
os.makedirs(path_results + '/T2/errsm_24')
os.chdir(path_results + '/T2/errsm_24')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_24/20-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 14,133,106,20:14,131,138,19:14,128,168,18:15,126,196,17:16,124,223,16:16,122,250,15:17,125,274,14:17,129,300,13:20,136,323,12:20,146,347,11:21,157,367,10:21,172,383,9:21,183,399,8:23,186,415,7:23,186,432,6:23,186,448,5:23,187,467,4:23,188,483,3:23,190,541,2:25,195,564,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  26 -end 579 ')
f_crop = open('crop.txt', 'w')
f_crop.write('26,579,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 36,130,0,1:36,130,1,1:36,129,2,1:36,129,3,1:36,129,4,1:36,129,5,1:36,129,6,1:36,129,7,1:36,128,8,1:36,128,9,1:36,128,10,1:36,128,11,1:37,128,12,1:37,128,13,1:37,128,14,1:37,128,15,1:37,127,16,1:37,127,17,1:37,127,18,1:37,127,19,1:37,127,20,1:37,127,21,1:37,127,22,1:37,127,23,1:37,126,24,1:37,126,25,1:37,126,26,1:37,126,27,1:37,126,28,1:37,126,29,1:37,126,30,1:37,126,31,1:37,126,32,1:37,125,33,1:37,125,34,1:37,125,35,1:37,125,36,1:37,125,37,1:37,125,38,1:37,125,39,1:37,125,40,1:37,125,41,1:37,125,42,1:37,125,43,1:38,125,44,1:38,124,45,1:37,124,46,1:37,124,47,1:37,124,48,1:37,124,49,1:37,124,50,1:37,124,51,1:37,124,52,1:37,124,53,1:37,124,54,1:37,124,55,1:37,124,56,1:37,124,57,1:37,123,58,1:37,123,59,1:37,123,60,1:37,123,61,1:37,123,62,1:37,123,63,1:37,123,64,1:37,123,65,1:37,123,66,1:37,123,67,1:37,123,68,1:37,123,69,1:37,123,70,1:37,123,71,1:37,123,72,1:37,123,73,1:37,123,74,1:37,123,75,1:37,122,76,1:37,122,77,1:37,122,78,1:37,122,79,1:37,122,80,1:37,122,81,1:37,122,82,1:37,122,83,1:37,122,84,1:37,122,85,1:37,122,86,1:37,122,87,1:37,122,88,1:37,122,89,1:37,122,90,1:36,122,91,1:36,122,92,1:36,122,93,1:36,122,94,1:36,122,95,1:36,122,96,1:36,122,97,1:36,122,98,1:36,121,99,1:36,121,100,1:36,121,101,1:36,121,102,1:36,121,103,1:36,121,104,1:36,121,105,1:36,121,106,1:36,121,107,1:36,121,108,1:36,121,109,1:36,121,110,1:36,121,111,1:36,121,112,1:36,121,113,1:36,121,114,1:36,121,115,1:36,121,116,1:36,121,117,1:36,121,118,1:36,121,119,1:36,121,120,1:36,121,121,1:36,121,122,1:36,121,123,1:36,121,124,1:36,121,125,1:36,120,126,1:36,120,127,1:36,120,128,1:36,120,129,1:36,120,130,1:36,120,131,1:36,120,132,1:36,120,133,1:36,120,134,1:36,120,135,1:36,120,136,1:35,120,137,1:35,120,138,1:35,120,139,1:35,120,140,1:35,120,141,1:35,120,142,1:35,120,143,1:35,120,144,1:35,120,145,1:35,120,146,1:35,120,147,1:35,120,148,1:35,120,149,1:35,120,150,1:35,119,151,1:35,119,152,1:35,119,153,1:35,119,154,1:35,119,155,1:35,119,156,1:35,119,157,1:35,119,158,1:35,119,159,1:35,119,160,1:35,119,161,1:35,119,162,1:35,119,163,1:35,119,164,1:35,119,165,1:35,119,166,1:35,119,167,1:35,119,168,1:35,119,169,1:35,119,170,1:35,119,171,1:35,118,172,1:35,118,173,1:35,118,174,1:35,118,175,1:35,118,176,1:35,118,177,1:35,118,178,1:35,118,179,1:35,118,180,1:35,118,181,1:35,118,182,1:35,118,183,1:35,118,184,1:35,118,185,1:35,118,186,1:35,118,187,1:35,118,188,1:35,118,189,1:35,118,190,1:35,118,191,1:35,118,192,1:35,118,193,1:35,118,194,1:35,117,195,1:35,117,196,1:35,117,197,1:35,117,198,1:35,117,199,1:35,117,200,1:34,117,201,1:34,117,202,1:34,117,203,1:34,117,204,1:34,117,205,1:34,117,206,1:34,117,207,1:34,117,208,1:34,117,209,1:34,117,210,1:34,117,211,1:34,117,212,1:34,117,213,1:34,117,214,1:34,117,215,1:34,117,216,1:34,117,217,1:34,117,218,1:34,117,219,1:34,117,220,1:34,117,221,1:34,117,222,1:34,117,223,1:34,117,224,1:34,117,225,1:34,118,226,1:34,118,227,1:34,118,228,1:34,118,229,1:34,118,230,1:34,118,231,1:34,118,232,1:34,118,233,1:34,118,234,1:34,118,235,1:34,118,236,1:34,118,237,1:34,118,238,1:34,118,239,1:34,118,240,1:34,119,241,1:34,119,242,1:34,119,243,1:34,119,244,1:33,119,245,1:33,119,246,1:33,119,247,1:33,119,248,1:33,119,249,1:33,120,250,1:33,120,251,1:33,120,252,1:33,120,253,1:33,120,254,1:33,120,255,1:33,120,256,1:33,121,257,1:33,121,258,1:33,121,259,1:33,121,260,1:33,121,261,1:33,121,262,1:33,122,263,1:33,122,264,1:33,122,265,1:33,122,266,1:33,122,267,1:33,123,268,1:33,123,269,1:33,123,270,1:33,123,271,1:33,123,272,1:33,124,273,1:33,124,274,1:33,124,275,1:33,124,276,1:32,125,277,1:32,125,278,1:32,125,279,1:32,125,280,1:32,126,281,1:32,126,282,1:32,126,283,1:32,126,284,1:32,127,285,1:32,127,286,1:32,127,287,1:32,127,288,1:32,128,289,1:32,128,290,1:32,128,291,1:32,129,292,1:32,129,293,1:32,129,294,1:32,130,295,1:32,130,296,1:32,130,297,1:32,131,298,1:31,131,299,1:31,131,300,1:31,132,301,1:31,132,302,1:31,132,303,1:31,133,304,1:31,133,305,1:31,134,306,1:31,134,307,1:31,134,308,1:31,135,309,1:31,135,310,1:31,136,311,1:31,136,312,1:31,136,313,1:31,137,314,1:31,137,315,1:30,138,316,1:30,138,317,1:30,139,318,1:30,139,319,1:30,140,320,1:30,140,321,1:30,141,322,1:30,141,323,1:30,142,324,1:30,142,325,1:30,143,326,1:30,143,327,1:30,144,328,1:30,144,329,1:30,145,330,1:29,146,331,1:29,146,332,1:29,147,333,1:29,147,334,1:29,148,335,1:29,149,336,1:29,149,337,1:29,150,338,1:29,150,339,1:29,151,340,1:29,152,341,1:29,152,342,1:29,153,343,1:29,154,344,1:29,154,345,1:28,155,346,1:28,155,347,1:28,156,348,1:28,157,349,1:28,157,350,1:28,158,351,1:28,159,352,1:28,159,353,1:28,160,354,1:28,161,355,1:28,161,356,1:28,162,357,1:28,162,358,1:28,163,359,1:28,164,360,1:27,164,361,1:27,165,362,1:27,165,363,1:27,166,364,1:27,167,365,1:27,167,366,1:27,168,367,1:27,168,368,1:27,169,369,1:27,169,370,1:27,170,371,1:27,171,372,1:27,171,373,1:27,172,374,1:27,172,375,1:27,172,376,1:27,173,377,1:27,173,378,1:27,174,379,1:27,174,380,1:27,175,381,1:27,175,382,1:27,175,383,1:27,176,384,1:27,176,385,1:27,176,386,1:27,177,387,1:27,177,388,1:27,177,389,1:27,178,390,1:27,178,391,1:27,178,392,1:27,178,393,1:27,179,394,1:27,179,395,1:27,179,396,1:27,179,397,1:27,179,398,1:27,179,399,1:27,180,400,1:27,180,401,1:27,180,402,1:27,180,403,1:27,180,404,1:27,180,405,1:27,180,406,1:27,180,407,1:27,180,408,1:27,180,409,1:27,180,410,1:27,181,411,1:27,181,412,1:27,181,413,1:27,181,414,1:27,181,415,1:27,181,416,1:27,181,417,1:27,181,418,1:27,181,419,1:27,181,420,1:27,181,421,1:27,181,422,1:27,181,423,1:27,180,424,1:27,180,425,1:27,180,426,1:27,180,427,1:27,180,428,1:27,180,429,1:27,180,430,1:27,180,431,1:27,180,432,1:27,180,433,1:27,180,434,1:27,180,435,1:27,180,436,1:27,180,437,1:27,180,438,1:27,180,439,1:27,180,440,1:27,180,441,1:27,180,442,1:27,180,443,1:27,180,444,1:27,180,445,1:27,180,446,1:27,180,447,1:27,180,448,1:27,180,449,1:27,180,450,1:27,180,451,1:27,180,452,1:27,180,453,1:27,180,454,1:27,180,455,1:27,180,456,1:27,180,457,1:27,180,458,1:27,180,459,1:27,180,460,1:27,180,461,1:27,180,462,1:27,180,463,1:27,180,464,1:27,180,465,1:27,180,466,1:27,180,467,1:27,180,468,1:27,180,469,1:27,180,470,1:27,180,471,1:27,180,472,1:27,180,473,1:27,180,474,1:27,180,475,1:27,180,476,1:27,180,477,1:27,180,478,1:27,180,479,1:27,181,480,1:27,181,481,1:27,181,482,1:27,181,483,1:27,181,484,1:27,181,485,1:27,181,486,1:27,181,487,1:26,181,488,1:26,181,489,1:26,181,490,1:26,181,491,1:26,181,492,1:26,181,493,1:26,181,494,1:26,181,495,1:26,181,496,1:26,182,497,1:26,182,498,1:26,182,499,1:26,182,500,1:26,182,501,1:26,182,502,1:26,182,503,1:26,182,504,1:26,182,505,1:26,182,506,1:26,182,507,1:26,182,508,1:26,182,509,1:26,182,510,1:25,182,511,1:25,182,512,1:25,183,513,1:25,183,514,1:25,183,515,1:25,183,516,1:25,183,517,1:25,183,518,1:25,183,519,1:25,183,520,1:25,183,521,1:25,183,522,1:25,183,523,1:25,183,524,1:25,183,525,1:25,183,526,1:25,183,527,1:25,183,528,1:25,183,529,1:25,183,530,1:25,184,531,1:25,184,532,1:25,184,533,1:25,184,534,1:25,184,535,1:25,184,536,1:25,184,537,1:24,184,538,1:24,184,539,1:24,184,540,1:24,184,541,1:24,184,542,1:24,184,543,1:24,184,544,1:24,184,545,1:24,184,546,1:24,184,547,1:24,184,548,1:24,184,549,1:24,184,550,1:24,184,551,1:24,184,552,1:24,184,553,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 13,131,0,1:13,130,5,1:12,130,10,1:12,128,15,1:11,127,28,1:23,179,486,1:24,181,495,1:23,184,510,1:24,190,523,1:24,192,535,1:25,189,545,1:26,193,553,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_25
os.makedirs(path_results + '/T2/errsm_25')
os.chdir(path_results + '/T2/errsm_25')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_25/25-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 26,132,173,20:24,128,204,19:24,124,232,18:23,122,257,17:23,121,279,16:24,121,302,15:24,124,324,14:24,128,345,13:24,133,365,12:24,138,384,11:24,145,401,10:24,153,419,9:24,162,438,8:24,168,455,7:25,172,469,6:24,178,484,5:23,183,500,4:23,186,517,3:24,197,577,2:27,210,600,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  105 -end 614 ')
f_crop = open('crop.txt', 'w')
f_crop.write('105,614,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 22,136,0,1:22,136,1,1:22,135,2,1:22,135,3,1:22,135,4,1:22,135,5,1:22,134,6,1:22,134,7,1:23,134,8,1:23,133,9,1:23,133,10,1:23,133,11,1:23,133,12,1:23,132,13,1:23,132,14,1:23,132,15,1:23,132,16,1:23,131,17,1:23,131,18,1:23,131,19,1:23,131,20,1:23,130,21,1:23,130,22,1:23,130,23,1:23,130,24,1:23,129,25,1:23,129,26,1:24,129,27,1:24,129,28,1:24,128,29,1:24,128,30,1:24,128,31,1:24,128,32,1:24,128,33,1:24,127,34,1:24,127,35,1:24,127,36,1:24,127,37,1:24,127,38,1:24,126,39,1:24,126,40,1:24,126,41,1:24,126,42,1:24,126,43,1:24,126,44,1:24,125,45,1:24,125,46,1:24,125,47,1:24,125,48,1:24,125,49,1:24,125,50,1:24,124,51,1:24,124,52,1:24,124,53,1:24,124,54,1:24,124,55,1:24,124,56,1:24,123,57,1:24,123,58,1:24,123,59,1:24,123,60,1:24,123,61,1:24,123,62,1:24,123,63,1:24,122,64,1:24,122,65,1:24,122,66,1:25,122,67,1:25,122,68,1:25,122,69,1:25,122,70,1:25,122,71,1:25,121,72,1:25,121,73,1:25,121,74,1:25,121,75,1:25,121,76,1:25,121,77,1:25,121,78,1:25,121,79,1:25,121,80,1:25,120,81,1:25,120,82,1:25,120,83,1:25,120,84,1:25,120,85,1:25,120,86,1:25,120,87,1:25,120,88,1:25,120,89,1:25,119,90,1:25,119,91,1:25,119,92,1:25,119,93,1:25,119,94,1:25,119,95,1:25,119,96,1:25,119,97,1:25,119,98,1:26,119,99,1:26,119,100,1:26,118,101,1:26,118,102,1:26,118,103,1:26,118,104,1:26,118,105,1:26,118,106,1:26,118,107,1:26,118,108,1:26,118,109,1:26,118,110,1:26,118,111,1:26,118,112,1:26,117,113,1:26,117,114,1:26,117,115,1:27,117,116,1:27,117,117,1:27,117,118,1:27,117,119,1:27,117,120,1:27,117,121,1:27,117,122,1:27,117,123,1:27,117,124,1:27,117,125,1:27,116,126,1:27,116,127,1:27,116,128,1:27,116,129,1:28,116,130,1:28,116,131,1:28,116,132,1:28,116,133,1:28,116,134,1:28,116,135,1:28,116,136,1:28,116,137,1:28,116,138,1:28,116,139,1:28,116,140,1:28,116,141,1:28,116,142,1:28,115,143,1:28,115,144,1:28,115,145,1:28,115,146,1:28,115,147,1:29,115,148,1:29,115,149,1:29,115,150,1:29,115,151,1:29,115,152,1:29,115,153,1:29,115,154,1:29,115,155,1:29,115,156,1:29,115,157,1:29,115,158,1:29,115,159,1:29,115,160,1:29,115,161,1:29,115,162,1:29,115,163,1:29,115,164,1:29,115,165,1:29,115,166,1:29,115,167,1:29,115,168,1:29,115,169,1:29,115,170,1:29,115,171,1:29,115,172,1:29,115,173,1:29,115,174,1:29,115,175,1:29,115,176,1:29,115,177,1:29,115,178,1:29,115,179,1:29,115,180,1:29,115,181,1:29,115,182,1:29,115,183,1:29,115,184,1:29,115,185,1:29,115,186,1:29,115,187,1:29,115,188,1:29,115,189,1:29,115,190,1:29,115,191,1:29,115,192,1:29,115,193,1:29,115,194,1:29,115,195,1:28,115,196,1:28,115,197,1:28,115,198,1:28,115,199,1:28,115,200,1:28,115,201,1:28,116,202,1:28,116,203,1:28,116,204,1:28,116,205,1:28,116,206,1:28,116,207,1:28,116,208,1:28,116,209,1:28,116,210,1:28,116,211,1:28,117,212,1:28,117,213,1:28,117,214,1:28,117,215,1:28,117,216,1:28,117,217,1:28,117,218,1:28,118,219,1:28,118,220,1:28,118,221,1:28,118,222,1:28,118,223,1:28,118,224,1:28,119,225,1:28,119,226,1:28,119,227,1:28,119,228,1:28,119,229,1:28,119,230,1:28,120,231,1:28,120,232,1:28,120,233,1:28,120,234,1:28,120,235,1:28,121,236,1:28,121,237,1:28,121,238,1:28,121,239,1:28,121,240,1:28,122,241,1:28,122,242,1:28,122,243,1:28,122,244,1:28,123,245,1:28,123,246,1:28,123,247,1:28,123,248,1:28,124,249,1:28,124,250,1:28,124,251,1:28,124,252,1:28,125,253,1:28,125,254,1:28,125,255,1:28,125,256,1:28,126,257,1:28,126,258,1:27,126,259,1:27,127,260,1:27,127,261,1:27,127,262,1:27,127,263,1:27,128,264,1:27,128,265,1:27,128,266,1:27,129,267,1:27,129,268,1:27,129,269,1:27,129,270,1:27,130,271,1:27,130,272,1:27,130,273,1:27,131,274,1:27,131,275,1:27,131,276,1:27,132,277,1:27,132,278,1:27,132,279,1:27,133,280,1:27,133,281,1:27,133,282,1:27,134,283,1:27,134,284,1:27,134,285,1:27,135,286,1:27,135,287,1:27,135,288,1:27,136,289,1:27,136,290,1:27,136,291,1:27,137,292,1:27,137,293,1:27,137,294,1:27,138,295,1:27,138,296,1:27,139,297,1:27,139,298,1:27,139,299,1:27,140,300,1:27,140,301,1:27,140,302,1:27,141,303,1:27,141,304,1:27,142,305,1:27,142,306,1:27,142,307,1:27,143,308,1:27,143,309,1:27,144,310,1:27,144,311,1:27,144,312,1:27,145,313,1:27,145,314,1:27,146,315,1:27,146,316,1:27,146,317,1:27,147,318,1:27,147,319,1:27,148,320,1:27,148,321,1:27,149,322,1:27,149,323,1:27,149,324,1:27,150,325,1:27,150,326,1:27,151,327,1:27,151,328,1:27,151,329,1:27,152,330,1:27,152,331,1:27,153,332,1:27,153,333,1:27,154,334,1:27,154,335,1:27,154,336,1:27,155,337,1:27,155,338,1:27,156,339,1:27,156,340,1:28,156,341,1:28,157,342,1:28,157,343,1:28,158,344,1:28,158,345,1:28,158,346,1:28,159,347,1:28,159,348,1:28,160,349,1:28,160,350,1:28,160,351,1:28,161,352,1:28,161,353,1:28,162,354,1:28,162,355,1:28,162,356,1:28,163,357,1:28,163,358,1:28,163,359,1:28,164,360,1:28,164,361,1:28,165,362,1:28,165,363,1:28,165,364,1:28,166,365,1:28,166,366,1:28,166,367,1:28,167,368,1:28,167,369,1:28,167,370,1:28,168,371,1:28,168,372,1:28,168,373,1:28,169,374,1:28,169,375,1:28,169,376,1:28,170,377,1:28,170,378,1:28,170,379,1:28,170,380,1:28,171,381,1:28,171,382,1:28,171,383,1:28,172,384,1:28,172,385,1:28,172,386,1:28,172,387,1:28,173,388,1:28,173,389,1:28,173,390,1:28,174,391,1:28,174,392,1:28,174,393,1:28,174,394,1:28,175,395,1:28,175,396,1:28,175,397,1:28,175,398,1:28,176,399,1:28,176,400,1:28,176,401,1:28,176,402,1:28,177,403,1:28,177,404,1:28,177,405,1:28,177,406,1:28,178,407,1:28,178,408,1:28,178,409,1:28,178,410,1:28,178,411,1:28,179,412,1:28,179,413,1:28,179,414,1:28,179,415,1:28,179,416,1:28,180,417,1:28,180,418,1:28,180,419,1:28,180,420,1:28,180,421,1:28,181,422,1:28,181,423,1:28,181,424,1:28,181,425,1:28,181,426,1:28,181,427,1:28,182,428,1:28,182,429,1:28,182,430,1:28,182,431,1:28,182,432,1:28,182,433,1:28,183,434,1:28,183,435,1:28,183,436,1:28,183,437,1:28,183,438,1:28,183,439,1:27,184,440,1:27,184,441,1:27,184,442,1:27,184,443,1:27,184,444,1:27,184,445,1:27,184,446,1:27,185,447,1:27,185,448,1:27,185,449,1:27,185,450,1:27,185,451,1:27,185,452,1:27,185,453,1:27,186,454,1:27,186,455,1:27,186,456,1:27,186,457,1:27,186,458,1:27,186,459,1:27,187,460,1:27,187,461,1:27,187,462,1:27,187,463,1:27,187,464,1:27,187,465,1:27,187,466,1:27,188,467,1:27,188,468,1:27,188,469,1:26,188,470,1:26,188,471,1:26,188,472,1:26,188,473,1:26,189,474,1:26,189,475,1:26,189,476,1:26,189,477,1:26,189,478,1:26,189,479,1:26,190,480,1:26,190,481,1:26,190,482,1:26,190,483,1:26,190,484,1:26,190,485,1:26,191,486,1:26,191,487,1:26,191,488,1:26,191,489,1:26,191,490,1:26,192,491,1:26,192,492,1:26,192,493,1:26,192,494,1:26,192,495,1:26,193,496,1:26,193,497,1:26,193,498,1:26,193,499,1:26,193,500,1:26,194,501,1:26,194,502,1:26,194,503,1:26,194,504,1:26,194,505,1:26,195,506,1:26,195,507,1:26,195,508,1:26,195,509,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 30,137,0,1:29,134,11,1:28,131,20,1:28,129,34,1:28,125,48,1:27,122,64,1:26,120,78,1:26,119,92,1:25,128,269,1:24,131,279,1:24,136,291,1:24,142,306,1:24,149,322,1:23,155,335,1:23,160,349,1:23,165,363,1:23,171,379,1:23,173,388,1:23,178,408,1:23,179,423,1:24,181,437,1:25,184,451,1:25,189,463,1:27,198,474,1:26,204,486,1:26,208,500,1:26,210,509,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_30
os.makedirs(path_results + '/T2/errsm_30')
os.chdir(path_results + '/T2/errsm_30')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_30/51-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 15,134,115,20:15,126,145,19:15,121,174,18:17,117,199,17:18,115,224,16:19,114,247,15:19,116,271,14:19,121,294,13:20,127,317,12:20,135,337,11:22,145,357,10:24,157,374,9:26,168,391,8:27,175,407,7:26,178,422,6:26,179,438,5:26,180,456,4:24,181,476,3:22,181,536,2:22,184,561,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  37 -end 576 ')
f_crop = open('crop.txt', 'w')
f_crop.write('37,576,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 39,135,0,1:39,135,1,1:39,135,2,1:39,135,3,1:39,135,4,1:39,135,5,1:39,134,6,1:39,134,7,1:39,134,8,1:39,134,9,1:39,134,10,1:39,134,11,1:39,134,12,1:39,133,13,1:39,133,14,1:39,133,15,1:39,133,16,1:39,133,17,1:39,133,18,1:39,132,19,1:39,132,20,1:39,132,21,1:39,132,22,1:39,132,23,1:39,132,24,1:39,132,25,1:39,131,26,1:39,131,27,1:39,131,28,1:39,131,29,1:39,131,30,1:39,131,31,1:39,130,32,1:39,130,33,1:39,130,34,1:39,130,35,1:39,130,36,1:39,130,37,1:39,130,38,1:39,129,39,1:39,129,40,1:38,129,41,1:38,129,42,1:38,129,43,1:38,129,44,1:38,128,45,1:38,128,46,1:38,128,47,1:38,128,48,1:38,128,49,1:38,128,50,1:38,128,51,1:38,127,52,1:38,127,53,1:38,127,54,1:38,127,55,1:38,127,56,1:38,127,57,1:38,126,58,1:38,126,59,1:38,126,60,1:38,126,61,1:38,126,62,1:37,126,63,1:37,126,64,1:37,125,65,1:37,125,66,1:37,125,67,1:37,125,68,1:37,125,69,1:37,125,70,1:37,124,71,1:37,124,72,1:37,124,73,1:37,124,74,1:37,124,75,1:37,124,76,1:37,124,77,1:37,123,78,1:37,123,79,1:37,123,80,1:37,123,81,1:37,123,82,1:37,123,83,1:36,122,84,1:36,122,85,1:36,122,86,1:36,122,87,1:36,122,88,1:36,122,89,1:36,122,90,1:36,121,91,1:36,121,92,1:36,121,93,1:36,121,94,1:36,121,95,1:36,121,96,1:36,120,97,1:36,120,98,1:36,120,99,1:36,120,100,1:36,120,101,1:36,120,102,1:36,120,103,1:36,119,104,1:36,119,105,1:36,119,106,1:36,119,107,1:36,119,108,1:36,119,109,1:36,119,110,1:36,118,111,1:36,118,112,1:36,118,113,1:36,118,114,1:36,118,115,1:36,118,116,1:36,118,117,1:36,117,118,1:36,117,119,1:36,117,120,1:36,117,121,1:36,117,122,1:36,117,123,1:36,117,124,1:36,116,125,1:36,116,126,1:36,116,127,1:36,116,128,1:36,116,129,1:36,116,130,1:36,116,131,1:36,115,132,1:36,115,133,1:36,115,134,1:36,115,135,1:36,115,136,1:36,115,137,1:36,115,138,1:36,115,139,1:36,114,140,1:36,114,141,1:36,114,142,1:36,114,143,1:36,114,144,1:36,114,145,1:36,114,146,1:36,114,147,1:36,113,148,1:36,113,149,1:36,113,150,1:36,113,151,1:36,113,152,1:36,113,153,1:36,113,154,1:36,113,155,1:36,113,156,1:36,113,157,1:36,112,158,1:36,112,159,1:36,112,160,1:36,112,161,1:36,112,162,1:36,112,163,1:36,112,164,1:36,112,165,1:36,112,166,1:36,112,167,1:36,112,168,1:36,112,169,1:36,111,170,1:36,111,171,1:36,111,172,1:36,111,173,1:36,111,174,1:36,111,175,1:36,111,176,1:36,111,177,1:36,111,178,1:36,111,179,1:36,111,180,1:36,111,181,1:36,111,182,1:36,111,183,1:36,111,184,1:36,111,185,1:36,111,186,1:36,110,187,1:36,110,188,1:36,110,189,1:36,110,190,1:36,110,191,1:36,110,192,1:36,110,193,1:36,110,194,1:36,110,195,1:36,110,196,1:36,110,197,1:36,110,198,1:36,110,199,1:36,110,200,1:36,110,201,1:36,110,202,1:36,110,203,1:36,110,204,1:36,110,205,1:36,110,206,1:36,110,207,1:36,110,208,1:36,110,209,1:36,110,210,1:35,110,211,1:35,110,212,1:35,110,213,1:35,110,214,1:35,111,215,1:35,111,216,1:35,111,217,1:35,111,218,1:35,111,219,1:35,111,220,1:35,111,221,1:35,111,222,1:35,111,223,1:35,111,224,1:35,111,225,1:35,111,226,1:35,111,227,1:35,111,228,1:35,111,229,1:35,112,230,1:35,112,231,1:35,112,232,1:34,112,233,1:34,112,234,1:34,112,235,1:34,112,236,1:34,112,237,1:34,112,238,1:34,112,239,1:34,113,240,1:34,113,241,1:34,113,242,1:34,113,243,1:34,113,244,1:34,113,245,1:34,113,246,1:34,114,247,1:34,114,248,1:33,114,249,1:33,114,250,1:33,114,251,1:33,114,252,1:33,115,253,1:33,115,254,1:33,115,255,1:33,115,256,1:33,115,257,1:33,116,258,1:33,116,259,1:33,116,260,1:33,116,261,1:33,116,262,1:32,117,263,1:32,117,264,1:32,117,265,1:32,117,266,1:32,118,267,1:32,118,268,1:32,118,269,1:32,118,270,1:32,119,271,1:32,119,272,1:32,119,273,1:32,120,274,1:32,120,275,1:31,120,276,1:31,120,277,1:31,121,278,1:31,121,279,1:31,121,280,1:31,122,281,1:31,122,282,1:31,122,283,1:31,123,284,1:31,123,285,1:31,123,286,1:31,124,287,1:30,124,288,1:30,124,289,1:30,125,290,1:30,125,291,1:30,126,292,1:30,126,293,1:30,126,294,1:30,127,295,1:30,127,296,1:30,128,297,1:30,128,298,1:30,128,299,1:30,129,300,1:29,129,301,1:29,130,302,1:29,130,303,1:29,131,304,1:29,131,305,1:29,131,306,1:29,132,307,1:29,132,308,1:29,133,309,1:29,133,310,1:29,134,311,1:29,134,312,1:29,135,313,1:28,135,314,1:28,136,315,1:28,136,316,1:28,137,317,1:28,137,318,1:28,138,319,1:28,138,320,1:28,139,321,1:28,139,322,1:28,140,323,1:28,141,324,1:28,141,325,1:28,142,326,1:28,142,327,1:28,143,328,1:28,143,329,1:27,144,330,1:27,145,331,1:27,145,332,1:27,146,333,1:27,146,334,1:27,147,335,1:27,147,336,1:27,148,337,1:27,149,338,1:27,149,339,1:27,150,340,1:27,150,341,1:27,151,342,1:27,152,343,1:27,152,344,1:27,153,345,1:27,153,346,1:27,154,347,1:27,155,348,1:26,155,349,1:26,156,350,1:26,156,351,1:26,157,352,1:26,157,353,1:26,158,354,1:26,158,355,1:26,159,356,1:26,160,357,1:26,160,358,1:26,161,359,1:26,161,360,1:26,162,361,1:26,162,362,1:26,163,363,1:26,163,364,1:26,164,365,1:26,164,366,1:26,164,367,1:26,165,368,1:26,165,369,1:26,166,370,1:26,166,371,1:26,167,372,1:26,167,373,1:26,167,374,1:26,168,375,1:26,168,376,1:26,168,377,1:26,169,378,1:26,169,379,1:26,169,380,1:25,170,381,1:25,170,382,1:25,170,383,1:25,170,384,1:25,170,385,1:25,171,386,1:25,171,387,1:25,171,388,1:25,171,389,1:25,171,390,1:25,172,391,1:25,172,392,1:25,172,393,1:25,172,394,1:25,172,395,1:25,172,396,1:25,172,397,1:25,172,398,1:25,172,399,1:25,172,400,1:25,173,401,1:25,173,402,1:25,173,403,1:25,173,404,1:25,173,405,1:25,173,406,1:25,173,407,1:25,173,408,1:25,173,409,1:25,173,410,1:25,173,411,1:25,173,412,1:25,173,413,1:25,173,414,1:25,173,415,1:25,173,416,1:25,173,417,1:25,173,418,1:25,173,419,1:25,173,420,1:25,173,421,1:25,173,422,1:25,173,423,1:25,173,424,1:25,173,425,1:25,173,426,1:25,172,427,1:25,172,428,1:25,172,429,1:26,172,430,1:26,172,431,1:26,172,432,1:26,172,433,1:26,172,434,1:26,172,435,1:26,172,436,1:26,172,437,1:26,172,438,1:26,172,439,1:26,172,440,1:26,172,441,1:26,172,442,1:26,172,443,1:26,172,444,1:26,172,445,1:26,172,446,1:26,172,447,1:26,172,448,1:26,172,449,1:26,173,450,1:26,173,451,1:26,173,452,1:26,173,453,1:26,173,454,1:26,173,455,1:26,173,456,1:27,173,457,1:27,173,458,1:27,173,459,1:27,173,460,1:27,173,461,1:27,173,462,1:27,173,463,1:27,173,464,1:27,173,465,1:27,173,466,1:27,173,467,1:27,173,468,1:27,173,469,1:27,173,470,1:27,173,471,1:27,173,472,1:27,173,473,1:27,173,474,1:27,173,475,1:27,173,476,1:27,174,477,1:27,174,478,1:28,174,479,1:28,174,480,1:28,174,481,1:28,174,482,1:28,174,483,1:28,174,484,1:28,174,485,1:28,174,486,1:28,174,487,1:28,174,488,1:28,174,489,1:28,174,490,1:28,174,491,1:28,174,492,1:28,174,493,1:28,174,494,1:28,174,495,1:28,174,496,1:28,174,497,1:28,174,498,1:28,174,499,1:28,174,500,1:28,174,501,1:28,174,502,1:28,174,503,1:28,174,504,1:28,175,505,1:28,175,506,1:28,175,507,1:28,175,508,1:28,175,509,1:29,175,510,1:29,175,511,1:29,175,512,1:29,175,513,1:29,175,514,1:29,175,515,1:29,175,516,1:29,175,517,1:29,175,518,1:29,175,519,1:29,175,520,1:29,175,521,1:29,175,522,1:29,175,523,1:29,175,524,1:29,175,525,1:29,175,526,1:29,174,527,1:29,174,528,1:28,174,529,1:28,174,530,1:28,174,531,1:28,174,532,1:28,174,533,1:28,174,534,1:28,174,535,1:28,174,536,1:28,174,537,1:28,174,538,1:28,174,539,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 12,135,0,1:11,133,12,1:11,132,17,1:13,129,35,1:13,126,54,1:25,173,409,1:25,173,422,1:25,173,435,1:24,173,447,1:23,173,463,1:23,173,476,1:22,176,490,1:23,180,504,1:22,183,519,1:22,180,531,1:22,184,539,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_31
os.makedirs(path_results + '/T2/errsm_31')
os.chdir(path_results + '/T2/errsm_31')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_31/31-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 34,139,75,20:32,137,108,19:30,131,140,18:27,128,170,17:27,124,199,16:26,122,228,15:25,123,254,14:25,127,280,13:24,132,305,12:24,139,329,11:24,146,351,10:24,154,373,9:24,160,395,8:26,164,414,7:26,167,433,6:27,171,453,5:28,173,472,4:28,173,492,3:22,166,555,2:22,171,578,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  0 -end 593 ')
f_crop = open('crop.txt', 'w')
f_crop.write('0,593,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 15,133,0,1:15,133,1,1:15,133,2,1:15,133,3,1:15,133,4,1:15,133,5,1:15,132,6,1:15,132,7,1:15,132,8,1:15,132,9,1:15,132,10,1:15,132,11,1:15,132,12,1:15,132,13,1:15,132,14,1:15,132,15,1:15,132,16,1:15,132,17,1:15,131,18,1:15,131,19,1:15,131,20,1:15,131,21,1:15,131,22,1:15,131,23,1:15,131,24,1:15,131,25,1:15,131,26,1:15,131,27,1:15,131,28,1:15,131,29,1:15,130,30,1:15,130,31,1:15,130,32,1:15,130,33,1:15,130,34,1:15,130,35,1:15,130,36,1:15,130,37,1:15,130,38,1:15,130,39,1:15,130,40,1:15,130,41,1:15,129,42,1:15,129,43,1:15,129,44,1:15,129,45,1:15,129,46,1:15,129,47,1:15,129,48,1:15,129,49,1:15,129,50,1:15,129,51,1:15,129,52,1:15,129,53,1:15,129,54,1:15,128,55,1:15,128,56,1:15,128,57,1:15,128,58,1:15,128,59,1:15,128,60,1:15,128,61,1:15,128,62,1:15,128,63,1:15,128,64,1:15,128,65,1:15,128,66,1:15,128,67,1:15,127,68,1:15,127,69,1:15,127,70,1:15,127,71,1:15,127,72,1:15,127,73,1:16,127,74,1:16,127,75,1:16,127,76,1:16,127,77,1:16,127,78,1:16,127,79,1:16,127,80,1:16,126,81,1:16,126,82,1:16,126,83,1:16,126,84,1:16,126,85,1:16,126,86,1:16,126,87,1:16,126,88,1:16,126,89,1:16,126,90,1:16,126,91,1:16,126,92,1:16,126,93,1:16,125,94,1:16,125,95,1:16,125,96,1:16,125,97,1:16,125,98,1:16,125,99,1:16,125,100,1:16,125,101,1:16,125,102,1:16,125,103,1:16,125,104,1:16,125,105,1:16,125,106,1:16,124,107,1:16,124,108,1:16,124,109,1:16,124,110,1:17,124,111,1:17,124,112,1:17,124,113,1:17,124,114,1:17,124,115,1:17,124,116,1:17,124,117,1:17,124,118,1:17,124,119,1:17,123,120,1:17,123,121,1:17,123,122,1:17,123,123,1:17,123,124,1:17,123,125,1:17,123,126,1:17,123,127,1:17,123,128,1:17,123,129,1:17,123,130,1:17,123,131,1:17,123,132,1:18,122,133,1:18,122,134,1:18,122,135,1:18,122,136,1:18,122,137,1:18,122,138,1:18,122,139,1:18,122,140,1:18,122,141,1:18,122,142,1:18,122,143,1:18,122,144,1:18,122,145,1:18,121,146,1:18,121,147,1:18,121,148,1:18,121,149,1:18,121,150,1:19,121,151,1:19,121,152,1:19,121,153,1:19,121,154,1:19,121,155,1:19,121,156,1:19,121,157,1:19,121,158,1:19,120,159,1:19,120,160,1:19,120,161,1:19,120,162,1:19,120,163,1:19,120,164,1:19,120,165,1:19,120,166,1:20,120,167,1:20,120,168,1:20,120,169,1:20,120,170,1:20,120,171,1:20,119,172,1:20,119,173,1:20,119,174,1:20,119,175,1:20,119,176,1:20,119,177,1:20,119,178,1:20,119,179,1:20,119,180,1:20,119,181,1:20,119,182,1:21,119,183,1:21,119,184,1:21,119,185,1:21,119,186,1:21,118,187,1:21,118,188,1:21,118,189,1:21,118,190,1:21,118,191,1:21,118,192,1:21,118,193,1:21,118,194,1:21,118,195,1:21,118,196,1:21,118,197,1:21,118,198,1:22,118,199,1:22,118,200,1:22,118,201,1:22,118,202,1:22,118,203,1:22,118,204,1:22,117,205,1:22,117,206,1:22,117,207,1:22,117,208,1:22,117,209,1:22,117,210,1:22,117,211,1:22,117,212,1:22,117,213,1:22,117,214,1:22,117,215,1:22,117,216,1:22,117,217,1:23,117,218,1:23,117,219,1:23,117,220,1:23,117,221,1:23,117,222,1:23,117,223,1:23,117,224,1:23,117,225,1:23,117,226,1:23,117,227,1:23,117,228,1:23,117,229,1:23,117,230,1:23,117,231,1:23,117,232,1:23,117,233,1:23,117,234,1:23,117,235,1:23,117,236,1:23,117,237,1:23,117,238,1:23,117,239,1:23,117,240,1:23,117,241,1:23,118,242,1:23,118,243,1:23,118,244,1:23,118,245,1:23,118,246,1:23,118,247,1:23,118,248,1:23,118,249,1:23,118,250,1:23,118,251,1:23,118,252,1:24,118,253,1:24,118,254,1:24,118,255,1:24,119,256,1:24,119,257,1:24,119,258,1:24,119,259,1:24,119,260,1:24,119,261,1:24,119,262,1:24,119,263,1:24,119,264,1:24,120,265,1:24,120,266,1:24,120,267,1:24,120,268,1:24,120,269,1:24,120,270,1:24,120,271,1:24,120,272,1:24,121,273,1:24,121,274,1:24,121,275,1:24,121,276,1:24,121,277,1:24,121,278,1:24,121,279,1:24,122,280,1:24,122,281,1:24,122,282,1:24,122,283,1:24,122,284,1:24,122,285,1:24,123,286,1:24,123,287,1:24,123,288,1:24,123,289,1:24,123,290,1:24,124,291,1:24,124,292,1:24,124,293,1:24,124,294,1:24,124,295,1:24,125,296,1:24,125,297,1:24,125,298,1:24,125,299,1:24,125,300,1:24,126,301,1:24,126,302,1:24,126,303,1:24,126,304,1:24,127,305,1:24,127,306,1:24,127,307,1:24,127,308,1:24,127,309,1:24,128,310,1:24,128,311,1:24,128,312,1:24,128,313,1:24,129,314,1:24,129,315,1:24,129,316,1:24,129,317,1:25,130,318,1:25,130,319,1:25,130,320,1:25,130,321,1:25,131,322,1:25,131,323,1:25,131,324,1:25,132,325,1:25,132,326,1:25,132,327,1:25,132,328,1:25,133,329,1:25,133,330,1:25,133,331,1:25,133,332,1:25,134,333,1:25,134,334,1:25,134,335,1:25,134,336,1:25,135,337,1:25,135,338,1:25,135,339,1:25,136,340,1:25,136,341,1:25,136,342,1:25,136,343,1:25,137,344,1:25,137,345,1:25,137,346,1:25,137,347,1:25,138,348,1:25,138,349,1:25,138,350,1:25,139,351,1:25,139,352,1:25,139,353,1:25,139,354,1:25,140,355,1:25,140,356,1:25,140,357,1:25,141,358,1:26,141,359,1:26,141,360,1:26,141,361,1:26,142,362,1:26,142,363,1:26,142,364,1:26,142,365,1:26,143,366,1:26,143,367,1:26,143,368,1:26,144,369,1:26,144,370,1:26,144,371,1:26,144,372,1:26,145,373,1:26,145,374,1:26,145,375,1:26,145,376,1:26,146,377,1:26,146,378,1:26,146,379,1:26,146,380,1:26,147,381,1:26,147,382,1:26,147,383,1:26,148,384,1:26,148,385,1:26,148,386,1:26,148,387,1:26,149,388,1:25,149,389,1:25,149,390,1:25,149,391,1:25,150,392,1:25,150,393,1:25,150,394,1:25,150,395,1:25,151,396,1:25,151,397,1:25,151,398,1:25,151,399,1:25,152,400,1:25,152,401,1:25,152,402,1:25,152,403,1:25,153,404,1:25,153,405,1:25,153,406,1:25,153,407,1:25,154,408,1:25,154,409,1:25,154,410,1:25,154,411,1:25,155,412,1:25,155,413,1:25,155,414,1:25,155,415,1:25,156,416,1:25,156,417,1:25,156,418,1:25,156,419,1:25,156,420,1:25,157,421,1:25,157,422,1:25,157,423,1:25,157,424,1:25,158,425,1:25,158,426,1:25,158,427,1:25,158,428,1:25,158,429,1:25,159,430,1:25,159,431,1:25,159,432,1:25,159,433,1:25,159,434,1:25,160,435,1:24,160,436,1:24,160,437,1:24,160,438,1:24,160,439,1:24,160,440,1:24,161,441,1:24,161,442,1:24,161,443,1:24,161,444,1:24,161,445,1:24,161,446,1:24,162,447,1:24,162,448,1:24,162,449,1:24,162,450,1:24,162,451,1:24,162,452,1:24,162,453,1:24,162,454,1:24,163,455,1:24,163,456,1:24,163,457,1:24,163,458,1:24,163,459,1:24,163,460,1:24,163,461,1:24,163,462,1:24,163,463,1:24,163,464,1:24,163,465,1:24,163,466,1:25,163,467,1:25,163,468,1:25,163,469,1:25,163,470,1:25,163,471,1:25,163,472,1:25,163,473,1:25,163,474,1:25,163,475,1:25,163,476,1:25,163,477,1:25,163,478,1:25,163,479,1:25,163,480,1:25,163,481,1:25,163,482,1:25,163,483,1:25,163,484,1:25,163,485,1:25,163,486,1:26,163,487,1:26,163,488,1:26,163,489,1:26,163,490,1:26,162,491,1:26,162,492,1:26,162,493,1:26,162,494,1:26,162,495,1:26,162,496,1:26,162,497,1:26,162,498,1:26,162,499,1:26,162,500,1:26,161,501,1:27,161,502,1:27,161,503,1:27,161,504,1:27,161,505,1:27,161,506,1:27,161,507,1:27,161,508,1:27,161,509,1:27,161,510,1:27,161,511,1:27,160,512,1:27,160,513,1:27,160,514,1:27,160,515,1:27,160,516,1:27,160,517,1:27,160,518,1:27,160,519,1:27,160,520,1:27,160,521,1:27,160,522,1:27,160,523,1:27,160,524,1:27,160,525,1:27,160,526,1:27,160,527,1:27,160,528,1:27,160,529,1:27,160,530,1:27,160,531,1:27,160,532,1:27,160,533,1:27,160,534,1:27,160,535,1:27,160,536,1:27,160,537,1:26,160,538,1:26,160,539,1:26,160,540,1:26,160,541,1:26,160,542,1:26,160,543,1:26,160,544,1:26,161,545,1:26,161,546,1:26,161,547,1:26,161,548,1:26,161,549,1:25,161,550,1:25,161,551,1:25,161,552,1:25,161,553,1:25,161,554,1:25,161,555,1:25,162,556,1:25,162,557,1:25,162,558,1:25,162,559,1:25,162,560,1:25,162,561,1:25,162,562,1:25,162,563,1:25,162,564,1:25,162,565,1:25,162,566,1:25,162,567,1:25,162,568,1:25,162,569,1:25,162,570,1:25,162,571,1:25,162,572,1:25,162,573,1:25,162,574,1:25,162,575,1:25,162,576,1:25,162,577,1:26,162,578,1:26,162,579,1:26,162,580,1:26,162,581,1:26,162,582,1:26,162,583,1:27,162,584,1:27,161,585,1:27,161,586,1:27,161,587,1:28,161,588,1:28,161,589,1:28,160,590,1:29,160,591,1:29,160,592,1:30,160,593,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 34,133,0,1:35,133,16,1:34,131,33,1:35,129,54,1:34,126,72,1:33,125,94,1:32,123,118,1:31,122,141,1:22,160,534,1:22,162,551,1:22,168,564,1:21,169,576,1:21,167,584,1:21,174,593,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_32
os.makedirs(path_results + '/T2/errsm_32')
os.chdir(path_results + '/T2/errsm_32')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_32/16-SPINE_T1/echo_2.09 /*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 16,125,75,20:17,121,107,19:19,121,137,18:19,120,165,17:20,118,190,16:21,117,216,15:22,118,240,14:22,122,264,13:24,128,286,12:24,136,307,11:24,146,326,10:24,156,345,9:24,166,362,8:25,171,380,7:25,169,396,6:25,168,413,5:24,168,431,4:23,167,451,3:21,162,511,2:20,167,538,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  0 -end 552 ')
f_crop = open('crop.txt', 'w')
f_crop.write('0,552,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 37,124,0,1:37,124,1,1:37,123,2,1:37,123,3,1:37,123,4,1:37,123,5,1:37,123,6,1:37,123,7,1:37,123,8,1:37,123,9,1:37,123,10,1:37,123,11,1:37,123,12,1:37,122,13,1:37,122,14,1:37,122,15,1:37,122,16,1:37,122,17,1:37,122,18,1:37,122,19,1:37,122,20,1:37,122,21,1:37,122,22,1:37,122,23,1:37,121,24,1:36,121,25,1:36,121,26,1:36,121,27,1:36,121,28,1:36,121,29,1:36,121,30,1:36,121,31,1:36,121,32,1:36,121,33,1:36,120,34,1:36,120,35,1:36,120,36,1:36,120,37,1:36,120,38,1:36,120,39,1:36,120,40,1:36,120,41,1:36,120,42,1:36,120,43,1:36,119,44,1:36,119,45,1:36,119,46,1:36,119,47,1:35,119,48,1:35,119,49,1:35,119,50,1:35,119,51,1:35,119,52,1:35,119,53,1:35,118,54,1:35,118,55,1:35,118,56,1:35,118,57,1:35,118,58,1:35,118,59,1:35,118,60,1:35,118,61,1:35,118,62,1:35,118,63,1:35,118,64,1:34,117,65,1:34,117,66,1:34,117,67,1:34,117,68,1:34,117,69,1:34,117,70,1:34,117,71,1:34,117,72,1:34,117,73,1:34,117,74,1:34,117,75,1:34,116,76,1:34,116,77,1:34,116,78,1:34,116,79,1:34,116,80,1:33,116,81,1:33,116,82,1:33,116,83,1:33,116,84,1:33,116,85,1:33,116,86,1:33,115,87,1:33,115,88,1:33,115,89,1:33,115,90,1:33,115,91,1:33,115,92,1:33,115,93,1:33,115,94,1:33,115,95,1:33,115,96,1:32,115,97,1:32,115,98,1:32,115,99,1:32,115,100,1:32,114,101,1:32,114,102,1:32,114,103,1:32,114,104,1:32,114,105,1:32,114,106,1:32,114,107,1:32,114,108,1:32,114,109,1:32,114,110,1:32,114,111,1:32,114,112,1:32,114,113,1:31,114,114,1:31,114,115,1:31,114,116,1:31,113,117,1:31,113,118,1:31,113,119,1:31,113,120,1:31,113,121,1:31,113,122,1:31,113,123,1:31,113,124,1:31,113,125,1:31,113,126,1:31,113,127,1:31,113,128,1:31,113,129,1:31,113,130,1:31,113,131,1:31,113,132,1:31,113,133,1:31,113,134,1:30,113,135,1:30,113,136,1:30,113,137,1:30,113,138,1:30,113,139,1:30,112,140,1:30,112,141,1:30,112,142,1:30,112,143,1:30,112,144,1:30,112,145,1:30,112,146,1:30,112,147,1:30,112,148,1:30,112,149,1:30,112,150,1:30,112,151,1:30,112,152,1:30,112,153,1:30,112,154,1:30,112,155,1:30,112,156,1:30,112,157,1:30,112,158,1:30,112,159,1:30,112,160,1:30,112,161,1:30,112,162,1:30,112,163,1:29,112,164,1:29,112,165,1:29,112,166,1:29,112,167,1:29,112,168,1:29,111,169,1:29,111,170,1:29,111,171,1:29,111,172,1:29,111,173,1:29,111,174,1:29,111,175,1:29,111,176,1:29,111,177,1:29,111,178,1:29,111,179,1:29,111,180,1:29,111,181,1:29,111,182,1:29,111,183,1:29,111,184,1:29,111,185,1:29,111,186,1:29,111,187,1:29,111,188,1:29,111,189,1:29,111,190,1:29,111,191,1:29,111,192,1:29,111,193,1:29,111,194,1:29,111,195,1:29,111,196,1:29,111,197,1:29,111,198,1:29,111,199,1:29,111,200,1:29,111,201,1:29,111,202,1:29,111,203,1:28,111,204,1:28,111,205,1:28,111,206,1:28,111,207,1:28,111,208,1:28,111,209,1:28,111,210,1:28,111,211,1:28,111,212,1:28,111,213,1:28,111,214,1:28,111,215,1:28,111,216,1:28,111,217,1:28,111,218,1:28,111,219,1:28,111,220,1:28,111,221,1:28,111,222,1:28,111,223,1:28,111,224,1:28,111,225,1:28,111,226,1:28,111,227,1:28,111,228,1:28,111,229,1:28,111,230,1:27,111,231,1:27,112,232,1:27,112,233,1:27,112,234,1:27,112,235,1:27,112,236,1:27,112,237,1:27,112,238,1:27,112,239,1:27,112,240,1:27,112,241,1:27,113,242,1:27,113,243,1:27,113,244,1:27,113,245,1:27,113,246,1:27,113,247,1:27,113,248,1:27,113,249,1:27,114,250,1:26,114,251,1:26,114,252,1:26,114,253,1:26,114,254,1:26,114,255,1:26,115,256,1:26,115,257,1:26,115,258,1:26,115,259,1:26,115,260,1:26,115,261,1:26,116,262,1:26,116,263,1:26,116,264,1:26,116,265,1:26,117,266,1:26,117,267,1:26,117,268,1:26,117,269,1:26,117,270,1:25,118,271,1:25,118,272,1:25,118,273,1:25,118,274,1:25,119,275,1:25,119,276,1:25,119,277,1:25,120,278,1:25,120,279,1:25,120,280,1:25,120,281,1:25,121,282,1:25,121,283,1:25,121,284,1:25,122,285,1:25,122,286,1:25,122,287,1:25,123,288,1:25,123,289,1:25,123,290,1:25,124,291,1:25,124,292,1:25,124,293,1:25,125,294,1:25,125,295,1:25,126,296,1:25,126,297,1:25,126,298,1:25,127,299,1:25,127,300,1:25,127,301,1:24,128,302,1:24,128,303,1:24,129,304,1:24,129,305,1:24,129,306,1:24,130,307,1:24,130,308,1:24,131,309,1:24,131,310,1:24,131,311,1:24,132,312,1:24,132,313,1:24,133,314,1:24,133,315,1:24,134,316,1:24,134,317,1:24,134,318,1:24,135,319,1:24,135,320,1:24,136,321,1:24,136,322,1:24,137,323,1:24,137,324,1:24,138,325,1:24,138,326,1:24,138,327,1:24,139,328,1:24,139,329,1:24,140,330,1:24,140,331,1:24,141,332,1:24,141,333,1:24,142,334,1:24,142,335,1:24,143,336,1:24,143,337,1:24,143,338,1:24,144,339,1:24,144,340,1:24,145,341,1:24,145,342,1:24,146,343,1:24,146,344,1:24,147,345,1:24,147,346,1:24,147,347,1:24,148,348,1:24,148,349,1:24,149,350,1:24,149,351,1:24,150,352,1:24,150,353,1:24,150,354,1:24,151,355,1:24,151,356,1:24,152,357,1:24,152,358,1:24,152,359,1:24,153,360,1:24,153,361,1:24,154,362,1:24,154,363,1:24,154,364,1:24,155,365,1:24,155,366,1:24,155,367,1:24,156,368,1:24,156,369,1:24,156,370,1:24,157,371,1:24,157,372,1:24,157,373,1:24,158,374,1:24,158,375,1:24,158,376,1:24,158,377,1:24,159,378,1:24,159,379,1:24,159,380,1:24,159,381,1:24,160,382,1:24,160,383,1:24,160,384,1:24,160,385,1:24,160,386,1:24,160,387,1:24,161,388,1:24,161,389,1:24,161,390,1:24,161,391,1:24,161,392,1:24,161,393,1:24,161,394,1:24,161,395,1:24,161,396,1:24,161,397,1:24,161,398,1:24,161,399,1:24,161,400,1:24,161,401,1:24,161,402,1:24,161,403,1:24,161,404,1:24,161,405,1:24,161,406,1:24,161,407,1:24,161,408,1:24,161,409,1:24,161,410,1:24,161,411,1:24,161,412,1:24,161,413,1:24,161,414,1:24,161,415,1:24,161,416,1:24,161,417,1:24,161,418,1:24,161,419,1:24,161,420,1:24,161,421,1:24,161,422,1:24,161,423,1:24,161,424,1:24,160,425,1:24,160,426,1:24,160,427,1:24,160,428,1:24,160,429,1:24,160,430,1:24,160,431,1:24,160,432,1:24,160,433,1:24,160,434,1:25,160,435,1:25,160,436,1:25,160,437,1:25,159,438,1:25,159,439,1:25,159,440,1:25,159,441,1:25,159,442,1:25,159,443,1:25,159,444,1:25,159,445,1:26,159,446,1:26,159,447,1:26,159,448,1:26,159,449,1:26,159,450,1:26,159,451,1:26,159,452,1:26,159,453,1:27,159,454,1:27,159,455,1:27,159,456,1:27,159,457,1:27,159,458,1:27,159,459,1:27,159,460,1:27,159,461,1:27,159,462,1:28,159,463,1:28,159,464,1:28,159,465,1:28,159,466,1:28,159,467,1:28,159,468,1:28,159,469,1:28,159,470,1:28,159,471,1:28,159,472,1:28,159,473,1:28,159,474,1:28,159,475,1:28,159,476,1:28,159,477,1:28,159,478,1:28,159,479,1:28,159,480,1:28,159,481,1:28,159,482,1:28,159,483,1:28,159,484,1:28,159,485,1:28,159,486,1:28,159,487,1:28,159,488,1:28,159,489,1:28,159,490,1:28,159,491,1:27,159,492,1:27,159,493,1:27,159,494,1:27,159,495,1:27,159,496,1:26,159,497,1:26,159,498,1:26,159,499,1:26,160,500,1:25,160,501,1:25,160,502,1:25,160,503,1:24,160,504,1:24,160,505,1:24,160,506,1:23,160,507,1:23,160,508,1:23,160,509,1:23,160,510,1:22,160,511,1:22,160,512,1:22,160,513,1:21,160,514,1:21,160,515,1:21,160,516,1:21,160,517,1:20,160,518,1:20,160,519,1:20,160,520,1:20,160,521,1:20,160,522,1:19,160,523,1:19,160,524,1:19,160,525,1:19,160,526,1:19,160,527,1:19,160,528,1:19,160,529,1:19,161,530,1:19,161,531,1:19,161,532,1:19,161,533,1:19,161,534,1:19,161,535,1:20,161,536,1:20,161,537,1:20,161,538,1:21,161,539,1:21,161,540,1:21,161,541,1:22,161,542,1:22,161,543,1:23,161,544,1:23,161,545,1:24,161,546,1:25,161,547,1:26,161,548,1:26,161,549,1:27,161,550,1:28,161,551,1:29,161,552,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 11,126,0,1:12,124,6,1:13,120,24,1:13,119,40,1:13,117,58,1:14,116,76,1:14,115,94,1:24,161,392,1:24,161,408,1:24,161,422,1:23,159,438,1:23,158,452,1:23,157,467,1:23,156,482,1:22,158,499,1:20,162,514,1:20,165,528,1:19,164,541,1:19,169,552,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_33
os.makedirs(path_results + '/T2/errsm_33')
os.chdir(path_results + '/T2/errsm_33')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_33/30-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 19,126,71,20:19,121,101,19:20,119,135,18:21,121,162,17:22,121,189,16:22,121,215,15:22,123,243,14:23,126,267,13:24,133,290,12:25,143,313,11:26,154,331,10:26,166,350,9:26,177,367,8:25,183,385,7:25,186,401,6:25,186,417,5:25,186,435,4:25,185,452,3:25,181,512,2:25,187,536,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  0 -end 548 ')
f_crop = open('crop.txt', 'w')
f_crop.write('0,548,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 32,129,0,1:32,129,1,1:32,128,2,1:32,128,3,1:32,128,4,1:32,127,5,1:32,127,6,1:32,127,7,1:32,127,8,1:32,126,9,1:32,126,10,1:32,126,11,1:32,125,12,1:32,125,13,1:32,125,14,1:32,125,15,1:32,124,16,1:32,124,17,1:32,124,18,1:32,124,19,1:32,123,20,1:32,123,21,1:32,123,22,1:32,123,23,1:32,122,24,1:32,122,25,1:32,122,26,1:32,122,27,1:32,122,28,1:33,121,29,1:33,121,30,1:33,121,31,1:33,121,32,1:33,121,33,1:33,120,34,1:33,120,35,1:33,120,36,1:33,120,37,1:33,120,38,1:33,119,39,1:33,119,40,1:33,119,41,1:33,119,42,1:33,119,43,1:33,119,44,1:33,118,45,1:33,118,46,1:33,118,47,1:33,118,48,1:33,118,49,1:33,118,50,1:32,117,51,1:32,117,52,1:32,117,53,1:32,117,54,1:32,117,55,1:32,117,56,1:32,117,57,1:32,116,58,1:32,116,59,1:32,116,60,1:32,116,61,1:32,116,62,1:32,116,63,1:32,116,64,1:32,116,65,1:32,116,66,1:32,115,67,1:32,115,68,1:32,115,69,1:32,115,70,1:32,115,71,1:32,115,72,1:32,115,73,1:32,115,74,1:32,115,75,1:32,115,76,1:32,114,77,1:32,114,78,1:32,114,79,1:32,114,80,1:32,114,81,1:32,114,82,1:32,114,83,1:32,114,84,1:32,114,85,1:32,114,86,1:32,114,87,1:32,114,88,1:32,114,89,1:32,114,90,1:32,113,91,1:32,113,92,1:32,113,93,1:32,113,94,1:32,113,95,1:32,113,96,1:32,113,97,1:32,113,98,1:32,113,99,1:32,113,100,1:32,113,101,1:31,113,102,1:31,113,103,1:31,113,104,1:31,113,105,1:31,113,106,1:31,113,107,1:31,113,108,1:31,113,109,1:31,113,110,1:31,113,111,1:31,113,112,1:31,113,113,1:31,113,114,1:31,113,115,1:31,113,116,1:31,113,117,1:31,113,118,1:31,113,119,1:31,113,120,1:31,113,121,1:31,113,122,1:31,113,123,1:31,113,124,1:31,113,125,1:31,113,126,1:31,113,127,1:31,113,128,1:31,113,129,1:31,113,130,1:31,113,131,1:31,113,132,1:31,113,133,1:31,113,134,1:31,113,135,1:31,113,136,1:31,113,137,1:31,113,138,1:31,113,139,1:31,113,140,1:31,113,141,1:31,113,142,1:31,113,143,1:31,113,144,1:31,113,145,1:31,113,146,1:31,113,147,1:31,113,148,1:31,113,149,1:31,113,150,1:31,113,151,1:31,113,152,1:31,113,153,1:31,113,154,1:31,113,155,1:31,113,156,1:31,113,157,1:31,113,158,1:31,113,159,1:31,113,160,1:31,113,161,1:31,113,162,1:31,113,163,1:31,113,164,1:31,113,165,1:31,113,166,1:31,113,167,1:31,113,168,1:31,113,169,1:31,113,170,1:30,113,171,1:30,113,172,1:30,113,173,1:30,113,174,1:30,113,175,1:30,113,176,1:30,113,177,1:30,113,178,1:30,113,179,1:30,114,180,1:30,114,181,1:30,114,182,1:30,114,183,1:30,114,184,1:30,114,185,1:30,114,186,1:30,114,187,1:30,114,188,1:30,114,189,1:30,114,190,1:30,114,191,1:30,114,192,1:30,114,193,1:30,114,194,1:30,114,195,1:30,114,196,1:30,114,197,1:30,114,198,1:30,114,199,1:30,114,200,1:30,114,201,1:30,114,202,1:30,114,203,1:30,114,204,1:30,114,205,1:30,115,206,1:30,115,207,1:30,115,208,1:30,115,209,1:30,115,210,1:30,115,211,1:30,115,212,1:30,115,213,1:30,115,214,1:30,115,215,1:30,115,216,1:30,115,217,1:30,115,218,1:30,115,219,1:30,115,220,1:30,115,221,1:30,116,222,1:30,116,223,1:30,116,224,1:30,116,225,1:30,116,226,1:30,116,227,1:30,116,228,1:30,116,229,1:30,116,230,1:30,116,231,1:30,116,232,1:30,116,233,1:30,117,234,1:30,117,235,1:30,117,236,1:30,117,237,1:30,117,238,1:29,117,239,1:29,117,240,1:29,117,241,1:29,117,242,1:29,118,243,1:29,118,244,1:29,118,245,1:29,118,246,1:29,118,247,1:29,118,248,1:29,118,249,1:29,119,250,1:29,119,251,1:29,119,252,1:29,119,253,1:29,119,254,1:29,119,255,1:29,120,256,1:29,120,257,1:29,120,258,1:29,120,259,1:29,120,260,1:29,120,261,1:29,121,262,1:29,121,263,1:29,121,264,1:29,121,265,1:29,121,266,1:29,122,267,1:29,122,268,1:29,122,269,1:29,122,270,1:29,123,271,1:28,123,272,1:28,123,273,1:28,123,274,1:28,124,275,1:28,124,276,1:28,124,277,1:28,124,278,1:28,125,279,1:28,125,280,1:28,125,281,1:28,126,282,1:28,126,283,1:28,126,284,1:28,127,285,1:28,127,286,1:28,127,287,1:28,127,288,1:28,128,289,1:27,128,290,1:27,128,291,1:27,129,292,1:27,129,293,1:27,130,294,1:27,130,295,1:27,130,296,1:27,131,297,1:27,131,298,1:27,131,299,1:27,132,300,1:27,132,301,1:27,133,302,1:27,133,303,1:27,133,304,1:27,134,305,1:27,134,306,1:26,135,307,1:26,135,308,1:26,135,309,1:26,136,310,1:26,136,311,1:26,137,312,1:26,137,313,1:26,138,314,1:26,138,315,1:26,138,316,1:26,139,317,1:26,139,318,1:26,140,319,1:26,140,320,1:26,141,321,1:26,141,322,1:26,142,323,1:26,142,324,1:26,143,325,1:25,143,326,1:25,144,327,1:25,144,328,1:25,145,329,1:25,145,330,1:25,146,331,1:25,146,332,1:25,147,333,1:25,147,334,1:25,148,335,1:25,148,336,1:25,149,337,1:25,149,338,1:25,150,339,1:25,150,340,1:25,151,341,1:25,151,342,1:25,152,343,1:25,152,344,1:25,153,345,1:25,153,346,1:25,154,347,1:25,154,348,1:25,155,349,1:25,155,350,1:25,156,351,1:25,156,352,1:25,157,353,1:25,157,354,1:25,158,355,1:25,158,356,1:25,159,357,1:25,159,358,1:25,160,359,1:25,160,360,1:25,161,361,1:25,161,362,1:25,162,363,1:25,162,364,1:25,163,365,1:25,163,366,1:25,164,367,1:25,164,368,1:25,165,369,1:25,165,370,1:25,165,371,1:25,166,372,1:25,166,373,1:25,167,374,1:25,167,375,1:25,168,376,1:25,168,377,1:25,168,378,1:25,169,379,1:25,169,380,1:25,169,381,1:25,170,382,1:25,170,383,1:25,170,384,1:25,171,385,1:25,171,386,1:25,171,387,1:25,171,388,1:25,172,389,1:25,172,390,1:25,172,391,1:25,172,392,1:25,173,393,1:25,173,394,1:25,173,395,1:25,173,396,1:25,173,397,1:25,174,398,1:25,174,399,1:25,174,400,1:25,174,401,1:25,174,402,1:25,174,403,1:25,174,404,1:25,175,405,1:25,175,406,1:25,175,407,1:25,175,408,1:25,175,409,1:25,175,410,1:25,175,411,1:25,175,412,1:25,175,413,1:25,175,414,1:25,175,415,1:25,175,416,1:25,175,417,1:25,175,418,1:25,175,419,1:25,176,420,1:25,176,421,1:25,176,422,1:25,176,423,1:25,176,424,1:25,176,425,1:25,176,426,1:25,176,427,1:25,176,428,1:25,175,429,1:25,175,430,1:25,175,431,1:25,175,432,1:25,175,433,1:25,175,434,1:25,175,435,1:25,175,436,1:25,175,437,1:25,175,438,1:25,175,439,1:25,175,440,1:25,175,441,1:25,175,442,1:25,175,443,1:25,175,444,1:25,175,445,1:25,175,446,1:25,175,447,1:25,175,448,1:25,175,449,1:25,175,450,1:25,174,451,1:25,174,452,1:26,174,453,1:26,174,454,1:26,174,455,1:26,174,456,1:26,174,457,1:26,174,458,1:26,174,459,1:26,174,460,1:26,174,461,1:26,174,462,1:26,174,463,1:26,174,464,1:26,174,465,1:26,173,466,1:26,173,467,1:26,173,468,1:26,173,469,1:26,173,470,1:26,173,471,1:26,173,472,1:26,173,473,1:26,173,474,1:26,173,475,1:26,173,476,1:26,173,477,1:26,173,478,1:26,173,479,1:26,173,480,1:26,172,481,1:26,172,482,1:26,172,483,1:26,172,484,1:26,172,485,1:26,172,486,1:26,172,487,1:26,172,488,1:26,172,489,1:26,172,490,1:26,172,491,1:26,172,492,1:26,172,493,1:26,172,494,1:26,172,495,1:26,172,496,1:26,172,497,1:27,172,498,1:27,172,499,1:27,172,500,1:27,172,501,1:27,171,502,1:27,171,503,1:27,171,504,1:27,171,505,1:27,171,506,1:27,171,507,1:27,171,508,1:27,171,509,1:27,171,510,1:27,171,511,1:27,171,512,1:27,171,513,1:27,171,514,1:27,171,515,1:27,171,516,1:27,171,517,1:27,171,518,1:27,171,519,1:27,171,520,1:27,172,521,1:27,172,522,1:27,172,523,1:27,172,524,1:27,172,525,1:27,172,526,1:27,172,527,1:27,172,528,1:27,172,529,1:27,172,530,1:27,172,531,1:27,172,532,1:28,172,533,1:28,172,534,1:28,172,535,1:28,172,536,1:28,173,537,1:28,173,538,1:28,173,539,1:28,173,540,1:28,173,541,1:28,173,542,1:28,173,543,1:28,173,544,1:28,174,545,1:28,174,546,1:28,174,547,1:28,174,548,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 19,126,0,1:20,124,10,1:19,120,25,1:19,116,45,1:19,114,64,1:19,114,81,1:20,113,101,1:20,112,122,1:20,112,139,1:21,113,157,1:26,162,364,1:26,171,385,1:27,174,404,1:26,176,421,1:25,174,444,1:25,173,459,1:25,171,478,1:25,173,499,1:24,179,515,1:24,184,529,1:24,181,542,1:24,186,548,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject 1
os.makedirs(path_results + '/T2/1')
os.chdir(path_results + '/T2/1')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/ED/01_0007_sc-mprage-1mm-2palliers-fov384-comp-sp-101/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 14,88,100,20:15,83,132,19:15,77,160,18:15,75,186,17:16,73,210,16:16,73,235,15:16,75,260,14:18,79,283,13:20,86,305,12:21,93,326,11:22,101,345,10:21,111,362,9:21,119,380,8:21,123,397,7:20,123,414,6:20,124,431,5:20,126,449,4:22,126,466,3:19,118,524,2:19,124,544,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  27 -end 559 ')
f_crop = open('crop.txt', 'w')
f_crop.write('27,559,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 29,86,0,1:29,86,1,1:29,86,2,1:29,86,3,1:29,86,4,1:29,85,5,1:29,85,6,1:29,85,7,1:29,85,8,1:29,85,9,1:29,85,10,1:29,85,11,1:29,85,12,1:29,85,13,1:29,85,14,1:29,85,15,1:29,84,16,1:29,84,17,1:29,84,18,1:29,84,19,1:29,84,20,1:29,84,21,1:29,84,22,1:29,84,23,1:29,84,24,1:29,83,25,1:29,83,26,1:29,83,27,1:29,83,28,1:29,83,29,1:29,83,30,1:29,83,31,1:29,83,32,1:28,83,33,1:28,82,34,1:28,82,35,1:28,82,36,1:28,82,37,1:28,82,38,1:28,82,39,1:28,82,40,1:28,81,41,1:28,81,42,1:28,81,43,1:28,81,44,1:28,81,45,1:28,81,46,1:28,81,47,1:28,81,48,1:27,80,49,1:27,80,50,1:27,80,51,1:27,80,52,1:27,80,53,1:27,80,54,1:27,80,55,1:27,79,56,1:27,79,57,1:27,79,58,1:27,79,59,1:27,79,60,1:27,79,61,1:26,79,62,1:26,78,63,1:26,78,64,1:26,78,65,1:26,78,66,1:26,78,67,1:26,78,68,1:26,78,69,1:26,77,70,1:26,77,71,1:26,77,72,1:26,77,73,1:25,77,74,1:25,77,75,1:25,77,76,1:25,77,77,1:25,76,78,1:25,76,79,1:25,76,80,1:25,76,81,1:25,76,82,1:25,76,83,1:25,76,84,1:25,75,85,1:25,75,86,1:25,75,87,1:24,75,88,1:24,75,89,1:24,75,90,1:24,75,91,1:24,75,92,1:24,74,93,1:24,74,94,1:24,74,95,1:24,74,96,1:24,74,97,1:24,74,98,1:24,74,99,1:24,74,100,1:24,73,101,1:24,73,102,1:24,73,103,1:23,73,104,1:23,73,105,1:23,73,106,1:23,73,107,1:23,73,108,1:23,73,109,1:23,72,110,1:23,72,111,1:23,72,112,1:23,72,113,1:23,72,114,1:23,72,115,1:23,72,116,1:23,72,117,1:23,72,118,1:23,72,119,1:23,71,120,1:23,71,121,1:23,71,122,1:23,71,123,1:23,71,124,1:23,71,125,1:23,71,126,1:23,71,127,1:23,71,128,1:23,71,129,1:23,71,130,1:23,70,131,1:23,70,132,1:23,70,133,1:23,70,134,1:23,70,135,1:23,70,136,1:23,70,137,1:23,70,138,1:23,70,139,1:23,70,140,1:23,70,141,1:23,70,142,1:23,70,143,1:23,70,144,1:23,69,145,1:23,69,146,1:23,69,147,1:23,69,148,1:23,69,149,1:23,69,150,1:22,69,151,1:22,69,152,1:22,69,153,1:22,69,154,1:22,69,155,1:22,69,156,1:22,69,157,1:22,69,158,1:22,69,159,1:22,69,160,1:22,68,161,1:22,68,162,1:22,68,163,1:22,68,164,1:22,68,165,1:22,68,166,1:22,68,167,1:22,68,168,1:22,68,169,1:22,68,170,1:22,68,171,1:22,68,172,1:22,68,173,1:22,68,174,1:22,68,175,1:22,68,176,1:22,68,177,1:22,68,178,1:22,68,179,1:22,68,180,1:22,68,181,1:22,68,182,1:22,68,183,1:22,67,184,1:22,67,185,1:22,67,186,1:22,67,187,1:22,67,188,1:22,67,189,1:22,67,190,1:22,67,191,1:22,67,192,1:22,67,193,1:22,67,194,1:21,67,195,1:21,67,196,1:21,67,197,1:21,67,198,1:21,67,199,1:21,67,200,1:21,67,201,1:21,67,202,1:21,67,203,1:21,67,204,1:21,67,205,1:21,67,206,1:21,67,207,1:21,67,208,1:21,67,209,1:21,68,210,1:21,68,211,1:21,68,212,1:21,68,213,1:21,68,214,1:21,68,215,1:21,68,216,1:21,68,217,1:21,68,218,1:21,68,219,1:21,68,220,1:21,68,221,1:21,68,222,1:20,68,223,1:20,68,224,1:20,68,225,1:20,68,226,1:20,69,227,1:20,69,228,1:20,69,229,1:20,69,230,1:20,69,231,1:20,69,232,1:20,69,233,1:20,69,234,1:20,69,235,1:20,69,236,1:20,70,237,1:20,70,238,1:20,70,239,1:20,70,240,1:20,70,241,1:20,70,242,1:20,70,243,1:20,71,244,1:20,71,245,1:20,71,246,1:19,71,247,1:19,71,248,1:19,71,249,1:19,72,250,1:19,72,251,1:19,72,252,1:19,72,253,1:19,72,254,1:19,73,255,1:19,73,256,1:19,73,257,1:19,73,258,1:19,73,259,1:19,74,260,1:19,74,261,1:19,74,262,1:19,74,263,1:19,75,264,1:19,75,265,1:19,75,266,1:19,75,267,1:18,76,268,1:18,76,269,1:18,76,270,1:18,76,271,1:18,77,272,1:18,77,273,1:18,77,274,1:18,78,275,1:18,78,276,1:18,78,277,1:18,79,278,1:18,79,279,1:18,79,280,1:18,80,281,1:18,80,282,1:18,80,283,1:18,81,284,1:18,81,285,1:18,81,286,1:17,82,287,1:17,82,288,1:17,82,289,1:17,83,290,1:17,83,291,1:17,83,292,1:17,84,293,1:17,84,294,1:17,85,295,1:17,85,296,1:17,85,297,1:17,86,298,1:17,86,299,1:17,87,300,1:17,87,301,1:17,87,302,1:17,88,303,1:17,88,304,1:17,89,305,1:17,89,306,1:17,89,307,1:16,90,308,1:16,90,309,1:16,91,310,1:16,91,311,1:16,92,312,1:16,92,313,1:16,92,314,1:16,93,315,1:16,93,316,1:16,94,317,1:16,94,318,1:16,95,319,1:16,95,320,1:16,95,321,1:16,96,322,1:16,96,323,1:16,97,324,1:16,97,325,1:16,98,326,1:16,98,327,1:16,99,328,1:16,99,329,1:16,100,330,1:16,100,331,1:16,100,332,1:16,101,333,1:16,101,334,1:16,102,335,1:16,102,336,1:16,103,337,1:16,103,338,1:16,104,339,1:16,104,340,1:16,104,341,1:16,105,342,1:16,105,343,1:16,106,344,1:16,106,345,1:16,106,346,1:16,107,347,1:16,107,348,1:16,108,349,1:16,108,350,1:16,108,351,1:16,109,352,1:16,109,353,1:16,109,354,1:16,110,355,1:15,110,356,1:15,110,357,1:15,111,358,1:15,111,359,1:15,111,360,1:15,112,361,1:15,112,362,1:15,112,363,1:15,113,364,1:15,113,365,1:15,113,366,1:15,113,367,1:15,114,368,1:15,114,369,1:15,114,370,1:15,114,371,1:15,114,372,1:15,115,373,1:15,115,374,1:15,115,375,1:15,115,376,1:15,115,377,1:15,115,378,1:15,115,379,1:15,116,380,1:15,116,381,1:15,116,382,1:15,116,383,1:15,116,384,1:15,116,385,1:15,116,386,1:15,116,387,1:15,116,388,1:15,116,389,1:15,116,390,1:15,116,391,1:15,116,392,1:15,116,393,1:15,116,394,1:15,116,395,1:15,116,396,1:15,116,397,1:15,116,398,1:15,116,399,1:15,116,400,1:15,116,401,1:15,116,402,1:15,116,403,1:15,116,404,1:15,116,405,1:15,116,406,1:15,116,407,1:15,116,408,1:15,116,409,1:15,116,410,1:15,116,411,1:15,116,412,1:15,116,413,1:15,116,414,1:15,116,415,1:16,116,416,1:16,116,417,1:16,116,418,1:16,116,419,1:16,116,420,1:16,116,421,1:16,116,422,1:16,116,423,1:16,116,424,1:16,116,425,1:16,116,426,1:16,116,427,1:16,116,428,1:16,116,429,1:16,116,430,1:16,116,431,1:16,116,432,1:16,116,433,1:17,116,434,1:17,116,435,1:17,116,436,1:17,116,437,1:17,116,438,1:17,116,439,1:17,116,440,1:17,116,441,1:17,116,442,1:17,116,443,1:17,116,444,1:17,116,445,1:17,116,446,1:17,116,447,1:17,116,448,1:17,116,449,1:18,116,450,1:18,116,451,1:18,116,452,1:18,116,453,1:18,116,454,1:18,116,455,1:18,116,456,1:18,116,457,1:18,116,458,1:18,116,459,1:18,116,460,1:18,117,461,1:18,117,462,1:18,117,463,1:18,117,464,1:18,117,465,1:18,117,466,1:17,117,467,1:17,117,468,1:17,117,469,1:17,117,470,1:17,117,471,1:17,117,472,1:17,117,473,1:17,117,474,1:17,117,475,1:17,117,476,1:16,117,477,1:16,117,478,1:16,117,479,1:16,117,480,1:16,117,481,1:15,117,482,1:15,117,483,1:15,117,484,1:15,117,485,1:15,117,486,1:14,117,487,1:14,116,488,1:14,116,489,1:14,116,490,1:14,116,491,1:13,116,492,1:13,116,493,1:13,116,494,1:13,116,495,1:13,116,496,1:12,116,497,1:12,116,498,1:12,116,499,1:12,116,500,1:12,116,501,1:12,116,502,1:12,116,503,1:11,116,504,1:11,116,505,1:11,116,506,1:11,116,507,1:11,116,508,1:11,116,509,1:11,116,510,1:11,116,511,1:11,116,512,1:12,116,513,1:12,116,514,1:12,116,515,1:12,116,516,1:12,116,517,1:12,116,518,1:13,116,519,1:13,116,520,1:13,116,521,1:14,116,522,1:14,116,523,1:15,116,524,1:15,116,525,1:16,117,526,1:16,117,527,1:17,117,528,1:17,117,529,1:18,117,530,1:19,117,531,1:20,117,532,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 8,86,0,1:8,84,12,1:9,83,24,1:9,81,35,1:10,80,44,1:10,80,53,1:11,78,62,1:11,76,72,1:12,74,82,1:12,74,90,1:20,111,473,1:19,114,485,1:19,114,496,1:19,120,502,1:19,123,508,1:19,123,514,1:18,122,522,1:19,123,532,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject ALT
os.makedirs(path_results + '/T2/ALT')
os.chdir(path_results + '/T2/ALT')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/ALT/01_0007_sc-mprage-1mm-2palliers-fov384-comp-sp-15/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 15,82,53,20:16,76,84,19:15,71,113,18:16,67,140,17:16,65,165,16:16,62,190,15:18,64,214,14:19,69,238,13:21,77,260,12:21,85,282,11:22,96,301,10:23,108,320,9:26,120,337,8:27,128,355,7:27,133,373,6:29,137,391,5:32,138,410,4:33,137,430,3:33,121,492,2:32,120,516,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  40 -end 533 ')
f_crop = open('crop.txt', 'w')
f_crop.write('40,533,0,451')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 27,80,0,1:27,80,1,1:28,80,2,1:28,80,3,1:28,79,4,1:28,79,5,1:28,79,6,1:28,79,7,1:28,78,8,1:28,78,9,1:28,78,10,1:28,78,11,1:28,77,12,1:28,77,13,1:28,77,14,1:28,77,15,1:28,76,16,1:28,76,17,1:28,76,18,1:28,76,19,1:28,76,20,1:28,75,21,1:28,75,22,1:28,75,23,1:28,75,24,1:28,75,25,1:28,74,26,1:28,74,27,1:28,74,28,1:28,74,29,1:28,74,30,1:28,73,31,1:28,73,32,1:28,73,33,1:28,73,34,1:28,73,35,1:28,73,36,1:28,72,37,1:28,72,38,1:28,72,39,1:28,72,40,1:28,72,41,1:28,72,42,1:28,71,43,1:28,71,44,1:28,71,45,1:28,71,46,1:28,71,47,1:28,71,48,1:28,71,49,1:28,71,50,1:28,70,51,1:28,70,52,1:28,70,53,1:28,70,54,1:28,70,55,1:28,70,56,1:28,70,57,1:28,70,58,1:28,69,59,1:28,69,60,1:28,69,61,1:28,69,62,1:28,69,63,1:28,69,64,1:28,69,65,1:28,69,66,1:28,68,67,1:28,68,68,1:28,68,69,1:28,68,70,1:28,68,71,1:28,68,72,1:28,68,73,1:28,68,74,1:28,68,75,1:28,68,76,1:28,67,77,1:28,67,78,1:28,67,79,1:28,67,80,1:28,67,81,1:28,67,82,1:28,67,83,1:28,67,84,1:28,67,85,1:28,66,86,1:28,66,87,1:28,66,88,1:28,66,89,1:28,66,90,1:28,66,91,1:28,66,92,1:28,66,93,1:28,66,94,1:28,66,95,1:28,65,96,1:28,65,97,1:28,65,98,1:28,65,99,1:28,65,100,1:28,65,101,1:28,65,102,1:28,65,103,1:28,65,104,1:28,64,105,1:28,64,106,1:28,64,107,1:28,64,108,1:28,64,109,1:28,64,110,1:28,64,111,1:28,64,112,1:28,63,113,1:28,63,114,1:28,63,115,1:28,63,116,1:28,63,117,1:28,63,118,1:28,63,119,1:28,63,120,1:28,62,121,1:28,62,122,1:28,62,123,1:28,62,124,1:28,62,125,1:28,62,126,1:28,62,127,1:28,62,128,1:28,61,129,1:28,61,130,1:28,61,131,1:28,61,132,1:28,61,133,1:28,61,134,1:28,61,135,1:28,61,136,1:28,60,137,1:28,60,138,1:28,60,139,1:28,60,140,1:28,60,141,1:28,60,142,1:27,60,143,1:27,60,144,1:27,60,145,1:27,59,146,1:27,59,147,1:27,59,148,1:27,59,149,1:27,59,150,1:27,59,151,1:27,59,152,1:27,59,153,1:27,59,154,1:27,59,155,1:27,58,156,1:27,58,157,1:27,58,158,1:27,58,159,1:27,58,160,1:27,58,161,1:27,58,162,1:27,58,163,1:27,58,164,1:27,58,165,1:27,58,166,1:27,58,167,1:27,58,168,1:27,58,169,1:27,58,170,1:27,58,171,1:27,57,172,1:27,57,173,1:27,57,174,1:27,57,175,1:27,57,176,1:27,57,177,1:27,57,178,1:27,57,179,1:27,57,180,1:27,57,181,1:27,57,182,1:27,57,183,1:26,57,184,1:26,57,185,1:26,57,186,1:26,57,187,1:26,57,188,1:26,57,189,1:26,57,190,1:26,57,191,1:26,57,192,1:26,57,193,1:26,58,194,1:26,58,195,1:26,58,196,1:26,58,197,1:26,58,198,1:26,58,199,1:26,58,200,1:26,58,201,1:26,58,202,1:26,58,203,1:26,58,204,1:26,58,205,1:26,58,206,1:26,58,207,1:26,59,208,1:26,59,209,1:26,59,210,1:25,59,211,1:25,59,212,1:25,59,213,1:25,59,214,1:25,59,215,1:25,60,216,1:25,60,217,1:25,60,218,1:25,60,219,1:25,60,220,1:25,60,221,1:25,61,222,1:25,61,223,1:25,61,224,1:25,61,225,1:25,61,226,1:25,61,227,1:25,62,228,1:25,62,229,1:25,62,230,1:25,62,231,1:25,63,232,1:25,63,233,1:25,63,234,1:24,63,235,1:24,63,236,1:24,64,237,1:24,64,238,1:24,64,239,1:24,64,240,1:24,65,241,1:24,65,242,1:24,65,243,1:24,66,244,1:24,66,245,1:24,66,246,1:24,66,247,1:24,67,248,1:24,67,249,1:24,67,250,1:24,68,251,1:24,68,252,1:24,68,253,1:24,69,254,1:23,69,255,1:23,69,256,1:23,70,257,1:23,70,258,1:23,70,259,1:23,71,260,1:23,71,261,1:23,72,262,1:23,72,263,1:23,72,264,1:23,73,265,1:23,73,266,1:23,73,267,1:23,74,268,1:23,74,269,1:23,75,270,1:23,75,271,1:22,76,272,1:22,76,273,1:22,76,274,1:22,77,275,1:22,77,276,1:22,78,277,1:22,78,278,1:22,79,279,1:22,79,280,1:22,80,281,1:22,80,282,1:22,80,283,1:22,81,284,1:22,81,285,1:22,82,286,1:21,82,287,1:21,83,288,1:21,83,289,1:21,84,290,1:21,84,291,1:21,85,292,1:21,85,293,1:21,86,294,1:21,86,295,1:21,87,296,1:21,87,297,1:21,88,298,1:21,88,299,1:21,89,300,1:20,90,301,1:20,90,302,1:20,91,303,1:20,91,304,1:20,92,305,1:20,92,306,1:20,93,307,1:20,93,308,1:20,94,309,1:20,94,310,1:20,95,311,1:20,96,312,1:20,96,313,1:20,97,314,1:20,97,315,1:19,98,316,1:19,98,317,1:19,99,318,1:19,100,319,1:19,100,320,1:19,101,321,1:19,101,322,1:19,102,323,1:19,102,324,1:19,103,325,1:19,104,326,1:19,104,327,1:19,105,328,1:19,105,329,1:19,106,330,1:19,106,331,1:19,107,332,1:19,108,333,1:18,108,334,1:18,109,335,1:18,109,336,1:18,110,337,1:18,110,338,1:18,111,339,1:18,111,340,1:18,112,341,1:18,113,342,1:18,113,343,1:18,114,344,1:18,114,345,1:18,115,346,1:18,115,347,1:18,116,348,1:18,116,349,1:18,117,350,1:17,117,351,1:17,118,352,1:17,118,353,1:17,119,354,1:17,119,355,1:17,119,356,1:17,120,357,1:17,120,358,1:17,121,359,1:17,121,360,1:17,122,361,1:17,122,362,1:17,122,363,1:16,123,364,1:16,123,365,1:16,123,366,1:16,124,367,1:16,124,368,1:16,124,369,1:16,125,370,1:16,125,371,1:16,125,372,1:16,125,373,1:16,126,374,1:15,126,375,1:15,126,376,1:15,126,377,1:15,127,378,1:15,127,379,1:15,127,380,1:15,127,381,1:15,127,382,1:14,127,383,1:14,128,384,1:14,128,385,1:14,128,386,1:14,128,387,1:14,128,388,1:14,128,389,1:14,128,390,1:14,128,391,1:13,128,392,1:13,128,393,1:13,129,394,1:13,129,395,1:13,129,396,1:13,129,397,1:13,129,398,1:13,129,399,1:12,129,400,1:12,129,401,1:12,129,402,1:12,129,403,1:12,129,404,1:12,129,405,1:12,129,406,1:12,129,407,1:12,129,408,1:11,129,409,1:11,129,410,1:11,129,411,1:11,129,412,1:11,129,413,1:11,129,414,1:11,129,415,1:11,129,416,1:11,128,417,1:11,128,418,1:11,128,419,1:11,128,420,1:10,128,421,1:10,128,422,1:10,128,423,1:10,128,424,1:10,128,425,1:10,128,426,1:10,128,427,1:10,128,428,1:10,128,429,1:10,128,430,1:10,128,431,1:10,128,432,1:10,128,433,1:10,128,434,1:10,128,435,1:10,128,436,1:10,128,437,1:10,128,438,1:10,128,439,1:10,128,440,1:10,128,441,1:10,128,442,1:10,128,443,1:10,128,444,1:10,128,445,1:10,128,446,1:10,128,447,1:10,128,448,1:10,128,449,1:10,128,450,1:10,128,451,1:10,128,452,1:10,128,453,1:10,128,454,1:10,128,455,1:10,128,456,1:10,128,457,1:10,128,458,1:10,128,459,1:10,128,460,1:10,128,461,1:9,128,462,1:9,128,463,1:9,128,464,1:9,128,465,1:9,127,466,1:9,127,467,1:9,127,468,1:9,127,469,1:9,127,470,1:9,127,471,1:9,127,472,1:9,127,473,1:9,127,474,1:9,127,475,1:9,127,476,1:8,127,477,1:8,127,478,1:8,127,479,1:8,127,480,1:8,127,481,1:8,127,482,1:8,127,483,1:8,128,484,1:7,128,485,1:7,128,486,1:7,128,487,1:7,128,488,1:7,128,489,1:7,128,490,1:7,128,491,1:7,128,492,1:6,128,493,1:6,128,494,1:6,128,495,1:6,128,496,1:6,128,497,1:6,128,498,1:6,128,499,1:6,128,500,1:6,128,501,1:6,128,502,1:6,128,503,1:5,128,504,1:5,128,505,1:5,128,506,1:5,128,507,1:5,128,508,1:5,128,509,1:5,128,510,1:5,128,511,1:6,128,512,1:6,128,513,1:6,128,514,1:6,128,515,1:6,128,516,1:6,128,517,1:6,128,518,1:6,128,519,1:7,128,520,1:7,128,521,1:7,128,522,1:7,128,523,1:8,128,524,1:8,128,525,1:8,128,526,1:9,128,527,1:9,128,528,1:10,128,529,1:10,128,530,1:10,128,531,1:11,128,532,1:12,128,533,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 33,119,433,1:33,119,434,1:33,120,435,1:33,120,436,1:33,120,437,1:33,120,438,1:33,121,439,1:33,121,440,1:33,121,441,1:33,121,442,1:33,121,443,1:33,121,444,1:33,121,445,1:33,121,446,1:33,121,447,1:33,121,448,1:32,121,449,1:32,121,450,1:32,121,451,1:32,121,452,1:32,121,453,1:32,120,454,1:32,120,455,1:32,120,456,1:32,120,457,1:32,119,458,1:32,119,459,1:32,119,460,1:32,119,461,1:32,119,462,1:31,118,463,1:31,118,464,1:31,118,465,1:31,118,466,1:31,117,467,1:31,117,468,1:31,117,469,1:31,117,470,1:31,117,471,1:31,116,472,1:31,116,473,1:31,116,474,1:31,116,475,1:31,116,476,1:30,116,477,1:30,116,478,1:30,116,479,1:30,116,480,1:30,116,481,1:30,116,482,1:30,116,483,1:30,116,484,1:30,116,485,1:30,116,486,1:30,116,487,1:30,117,488,1:30,117,489,1:30,117,490,1:30,118,491,1:30,118,492,1:30,119,493,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject JD
os.makedirs(path_results + '/T2/JD')
os.chdir(path_results + '/T2/JD')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/JD/01_0007_sc-mprage-1mm-2palliers-fov384-comp-sp-23/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 24,82,7,20:23,79,38,19:22,77,70,18:22,77,102,17:23,76,130,16:23,76,160,15:24,78,187,14:24,82,213,13:25,89,241,12:26,96,264,11:27,106,289,10:27,118,311,9:27,129,331,8:27,134,351,7:27,134,371,6:25,133,392,5:24,132,413,4:24,132,435,3:27,117,500,2:30,123,529,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  3 -end 545 ')
f_crop = open('crop.txt', 'w')
f_crop.write('3,545,43,470')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 22,88,0,1:22,88,1,1:23,87,2,1:23,86,3,1:23,86,4,1:23,85,5,1:23,85,6,1:23,84,7,1:23,83,8,1:23,83,9,1:23,82,10,1:23,82,11,1:23,81,12,1:23,81,13,1:23,80,14,1:23,80,15,1:24,79,16,1:24,79,17,1:24,78,18,1:24,78,19,1:24,78,20,1:24,77,21,1:24,77,22,1:24,76,23,1:24,76,24,1:24,76,25,1:24,75,26,1:24,75,27,1:24,75,28,1:24,74,29,1:24,74,30,1:24,74,31,1:24,73,32,1:24,73,33,1:24,73,34,1:24,72,35,1:24,72,36,1:24,72,37,1:24,72,38,1:25,71,39,1:25,71,40,1:25,71,41,1:25,71,42,1:25,71,43,1:25,70,44,1:25,70,45,1:25,70,46,1:25,70,47,1:25,70,48,1:25,70,49,1:25,69,50,1:25,69,51,1:25,69,52,1:25,69,53,1:25,69,54,1:25,69,55,1:25,69,56,1:25,69,57,1:25,69,58,1:25,68,59,1:25,68,60,1:25,68,61,1:25,68,62,1:25,68,63,1:25,68,64,1:25,68,65,1:25,68,66,1:25,68,67,1:25,68,68,1:25,68,69,1:25,68,70,1:25,68,71,1:25,68,72,1:25,68,73,1:25,68,74,1:25,68,75,1:25,68,76,1:25,68,77,1:25,68,78,1:25,68,79,1:25,68,80,1:25,68,81,1:25,68,82,1:25,68,83,1:25,68,84,1:25,68,85,1:25,68,86,1:25,68,87,1:25,68,88,1:25,68,89,1:25,68,90,1:25,68,91,1:25,68,92,1:25,68,93,1:25,68,94,1:25,68,95,1:25,68,96,1:25,68,97,1:25,68,98,1:25,68,99,1:25,68,100,1:25,69,101,1:25,69,102,1:25,69,103,1:25,69,104,1:25,69,105,1:25,69,106,1:25,69,107,1:25,69,108,1:25,69,109,1:25,69,110,1:25,69,111,1:25,69,112,1:25,69,113,1:25,69,114,1:25,69,115,1:25,69,116,1:25,69,117,1:25,69,118,1:26,69,119,1:26,69,120,1:26,69,121,1:26,69,122,1:26,69,123,1:26,69,124,1:26,69,125,1:26,69,126,1:26,69,127,1:26,69,128,1:26,69,129,1:26,69,130,1:26,69,131,1:26,69,132,1:26,69,133,1:26,69,134,1:26,69,135,1:26,69,136,1:26,69,137,1:26,69,138,1:26,69,139,1:26,69,140,1:26,69,141,1:26,69,142,1:26,69,143,1:26,69,144,1:26,70,145,1:26,70,146,1:26,70,147,1:26,70,148,1:26,70,149,1:26,70,150,1:26,70,151,1:26,70,152,1:26,70,153,1:26,70,154,1:26,70,155,1:26,70,156,1:26,70,157,1:26,70,158,1:26,70,159,1:26,70,160,1:26,70,161,1:26,70,162,1:26,70,163,1:26,70,164,1:26,70,165,1:26,70,166,1:26,70,167,1:26,71,168,1:26,71,169,1:26,71,170,1:26,71,171,1:26,71,172,1:26,71,173,1:26,71,174,1:26,71,175,1:26,71,176,1:26,71,177,1:26,71,178,1:26,72,179,1:26,72,180,1:26,72,181,1:26,72,182,1:26,72,183,1:25,72,184,1:25,72,185,1:25,72,186,1:25,72,187,1:25,73,188,1:25,73,189,1:25,73,190,1:25,73,191,1:25,73,192,1:25,73,193,1:25,73,194,1:25,74,195,1:25,74,196,1:25,74,197,1:25,74,198,1:25,74,199,1:25,74,200,1:25,74,201,1:25,75,202,1:25,75,203,1:25,75,204,1:25,75,205,1:25,75,206,1:25,75,207,1:25,76,208,1:25,76,209,1:25,76,210,1:24,76,211,1:24,76,212,1:24,76,213,1:24,77,214,1:24,77,215,1:24,77,216,1:24,77,217,1:24,77,218,1:24,77,219,1:24,78,220,1:24,78,221,1:24,78,222,1:24,78,223,1:24,78,224,1:24,79,225,1:24,79,226,1:24,79,227,1:24,79,228,1:24,79,229,1:24,80,230,1:24,80,231,1:24,80,232,1:24,80,233,1:24,81,234,1:24,81,235,1:24,81,236,1:23,81,237,1:23,81,238,1:23,82,239,1:23,82,240,1:23,82,241,1:23,82,242,1:23,83,243,1:23,83,244,1:23,83,245,1:23,83,246,1:23,84,247,1:23,84,248,1:23,84,249,1:23,84,250,1:23,85,251,1:23,85,252,1:23,85,253,1:23,86,254,1:23,86,255,1:23,86,256,1:23,87,257,1:23,87,258,1:23,87,259,1:23,87,260,1:23,88,261,1:23,88,262,1:23,88,263,1:23,89,264,1:22,89,265,1:22,90,266,1:22,90,267,1:22,90,268,1:22,91,269,1:22,91,270,1:22,91,271,1:22,92,272,1:22,92,273,1:22,93,274,1:22,93,275,1:22,93,276,1:22,94,277,1:22,94,278,1:22,95,279,1:22,95,280,1:22,96,281,1:22,96,282,1:22,97,283,1:22,97,284,1:22,97,285,1:22,98,286,1:22,98,287,1:22,99,288,1:22,99,289,1:22,100,290,1:22,100,291,1:22,101,292,1:21,101,293,1:21,102,294,1:21,102,295,1:21,103,296,1:21,103,297,1:21,104,298,1:21,104,299,1:21,105,300,1:21,105,301,1:21,106,302,1:21,106,303,1:21,107,304,1:21,107,305,1:21,108,306,1:21,108,307,1:21,109,308,1:21,109,309,1:21,110,310,1:21,110,311,1:21,111,312,1:21,111,313,1:21,111,314,1:21,112,315,1:21,112,316,1:21,113,317,1:21,113,318,1:21,114,319,1:21,114,320,1:21,115,321,1:21,115,322,1:21,115,323,1:21,116,324,1:21,116,325,1:21,117,326,1:21,117,327,1:21,117,328,1:21,118,329,1:21,118,330,1:21,119,331,1:21,119,332,1:21,119,333,1:21,120,334,1:21,120,335,1:21,120,336,1:21,121,337,1:21,121,338,1:21,121,339,1:21,121,340,1:21,122,341,1:21,122,342,1:21,122,343,1:21,122,344,1:21,123,345,1:21,123,346,1:21,123,347,1:21,123,348,1:21,124,349,1:21,124,350,1:21,124,351,1:21,124,352,1:21,124,353,1:21,125,354,1:21,125,355,1:21,125,356,1:21,125,357,1:21,125,358,1:21,125,359,1:22,125,360,1:22,126,361,1:22,126,362,1:22,126,363,1:22,126,364,1:22,126,365,1:22,126,366,1:22,126,367,1:22,126,368,1:22,126,369,1:22,126,370,1:22,126,371,1:22,126,372,1:22,126,373,1:22,127,374,1:22,127,375,1:22,127,376,1:22,127,377,1:22,127,378,1:22,127,379,1:22,127,380,1:22,127,381,1:22,127,382,1:23,127,383,1:23,127,384,1:23,126,385,1:23,126,386,1:23,126,387,1:23,126,388,1:23,126,389,1:23,126,390,1:23,126,391,1:23,126,392,1:23,126,393,1:23,126,394,1:23,126,395,1:23,126,396,1:23,126,397,1:23,126,398,1:23,125,399,1:23,125,400,1:23,125,401,1:23,125,402,1:23,125,403,1:24,125,404,1:24,125,405,1:24,125,406,1:24,125,407,1:24,124,408,1:24,124,409,1:24,124,410,1:24,124,411,1:24,124,412,1:24,124,413,1:24,124,414,1:24,124,415,1:24,123,416,1:24,123,417,1:24,123,418,1:24,123,419,1:24,123,420,1:24,123,421,1:24,123,422,1:24,123,423,1:24,122,424,1:24,122,425,1:24,122,426,1:24,122,427,1:24,122,428,1:24,122,429,1:24,122,430,1:24,122,431,1:24,121,432,1:24,121,433,1:24,121,434,1:24,121,435,1:24,121,436,1:24,121,437,1:24,121,438,1:24,121,439,1:24,121,440,1:24,121,441,1:24,121,442,1:24,120,443,1:24,120,444,1:24,120,445,1:24,120,446,1:24,120,447,1:24,120,448,1:24,120,449,1:24,120,450,1:24,120,451,1:24,120,452,1:24,120,453,1:24,120,454,1:24,120,455,1:24,120,456,1:24,120,457,1:24,120,458,1:24,120,459,1:24,120,460,1:24,120,461,1:24,120,462,1:24,120,463,1:24,120,464,1:24,120,465,1:24,120,466,1:24,120,467,1:23,120,468,1:23,120,469,1:23,120,470,1:23,120,471,1:23,120,472,1:23,120,473,1:23,120,474,1:23,120,475,1:23,120,476,1:23,120,477,1:23,120,478,1:23,120,479,1:23,120,480,1:23,120,481,1:23,120,482,1:23,120,483,1:22,120,484,1:22,120,485,1:22,120,486,1:22,121,487,1:22,121,488,1:22,121,489,1:22,121,490,1:22,121,491,1:22,121,492,1:22,121,493,1:22,121,494,1:22,121,495,1:22,121,496,1:21,121,497,1:21,121,498,1:21,121,499,1:21,121,500,1:21,121,501,1:21,121,502,1:21,121,503,1:21,121,504,1:21,122,505,1:21,122,506,1:21,122,507,1:21,122,508,1:20,122,509,1:20,122,510,1:20,122,511,1:20,122,512,1:20,122,513,1:20,122,514,1:20,122,515,1:20,122,516,1:20,122,517,1:20,122,518,1:20,122,519,1:20,122,520,1:19,122,521,1:19,122,522,1:19,122,523,1:19,122,524,1:19,123,525,1:19,123,526,1:19,123,527,1:19,123,528,1:19,123,529,1:19,123,530,1:19,123,531,1:19,123,532,1:18,123,533,1:18,123,534,1:18,123,535,1:18,123,536,1:18,123,537,1:18,123,538,1:18,123,539,1:18,123,540,1:18,123,541,1:18,123,542,1:18,123,543,1:18,123,544,1:18,123,545,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 23,69,4,1:23,69,13,1:23,69,21,1:23,69,37,1:27,127,368,1:26,127,384,1:25,126,396,1:25,125,410,1:24,122,427,1:24,120,438,1:24,116,451,1:24,113,464,1:25,113,481,1:27,113,491,1:28,118,504,1:29,121,516,1:30,119,528,1:32,125,542,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject JW
os.makedirs(path_results + '/T2/JW')
os.chdir(path_results + '/T2/JW')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/JW/01_0007_sc-mprage-1mm-2palliers-fov384-comp-sp-5/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 36,109,29,20:35,105,57,19:32,99,87,18:31,97,116,17:29,96,143,16:27,97,170,15:24,100,196,14:23,104,219,13:26,110,242,12:26,118,263,11:26,127,284,10:27,136,303,9:27,143,323,8:27,146,342,7:27,146,359,6:26,146,376,5:24,145,394,4:24,144,413,3:25,134,475,2:25,131,501,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  20 -end 516 ')
f_crop = open('crop.txt', 'w')
f_crop.write('20,516,56,516')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 25,95,0,1:25,95,1,1:24,96,2,1:24,96,3,1:24,96,4,1:23,96,5,1:23,96,6,1:22,96,7,1:22,96,8,1:22,96,9,1:21,96,10,1:21,96,11,1:21,96,12,1:20,96,13,1:20,96,14,1:20,96,15,1:20,96,16,1:19,96,17,1:19,96,18,1:19,96,19,1:19,96,20,1:18,96,21,1:18,96,22,1:18,96,23,1:18,96,24,1:18,96,25,1:17,96,26,1:17,96,27,1:17,96,28,1:17,96,29,1:17,96,30,1:17,96,31,1:16,96,32,1:16,96,33,1:16,96,34,1:16,96,35,1:16,96,36,1:16,96,37,1:16,96,38,1:16,96,39,1:15,96,40,1:15,96,41,1:15,96,42,1:15,96,43,1:15,96,44,1:15,95,45,1:15,95,46,1:15,95,47,1:15,95,48,1:15,95,49,1:15,95,50,1:15,95,51,1:15,95,52,1:15,95,53,1:15,95,54,1:15,95,55,1:15,95,56,1:15,95,57,1:15,95,58,1:15,95,59,1:15,95,60,1:15,95,61,1:15,95,62,1:15,95,63,1:15,94,64,1:15,94,65,1:15,94,66,1:15,94,67,1:15,94,68,1:15,94,69,1:15,94,70,1:15,94,71,1:15,94,72,1:15,94,73,1:15,94,74,1:15,94,75,1:16,94,76,1:16,94,77,1:16,94,78,1:16,93,79,1:16,93,80,1:16,93,81,1:16,93,82,1:16,93,83,1:16,93,84,1:16,93,85,1:16,93,86,1:16,93,87,1:16,93,88,1:17,93,89,1:17,93,90,1:17,93,91,1:17,93,92,1:17,93,93,1:17,92,94,1:17,92,95,1:17,92,96,1:17,92,97,1:17,92,98,1:17,92,99,1:18,92,100,1:18,92,101,1:18,92,102,1:18,92,103,1:18,92,104,1:18,92,105,1:18,92,106,1:18,92,107,1:18,92,108,1:18,92,109,1:18,92,110,1:18,92,111,1:19,91,112,1:19,91,113,1:19,91,114,1:19,91,115,1:19,91,116,1:19,91,117,1:19,91,118,1:19,91,119,1:19,91,120,1:19,91,121,1:19,91,122,1:19,91,123,1:19,91,124,1:19,91,125,1:20,91,126,1:20,91,127,1:20,91,128,1:20,91,129,1:20,91,130,1:20,91,131,1:20,91,132,1:20,91,133,1:20,91,134,1:20,91,135,1:20,91,136,1:20,91,137,1:20,91,138,1:20,91,139,1:20,91,140,1:21,91,141,1:21,91,142,1:21,91,143,1:21,91,144,1:21,91,145,1:21,91,146,1:21,91,147,1:21,91,148,1:21,91,149,1:21,91,150,1:21,91,151,1:21,91,152,1:21,91,153,1:21,91,154,1:21,91,155,1:21,91,156,1:21,91,157,1:21,91,158,1:22,91,159,1:22,91,160,1:22,91,161,1:22,91,162,1:22,91,163,1:22,91,164,1:22,91,165,1:22,91,166,1:22,91,167,1:22,91,168,1:22,91,169,1:22,91,170,1:22,91,171,1:22,91,172,1:22,91,173,1:22,91,174,1:22,91,175,1:22,91,176,1:22,91,177,1:22,91,178,1:23,92,179,1:23,92,180,1:23,92,181,1:23,92,182,1:23,92,183,1:23,92,184,1:23,92,185,1:23,92,186,1:23,92,187,1:23,92,188,1:23,92,189,1:23,92,190,1:23,93,191,1:23,93,192,1:23,93,193,1:23,93,194,1:23,93,195,1:23,93,196,1:23,93,197,1:23,93,198,1:23,94,199,1:23,94,200,1:23,94,201,1:23,94,202,1:23,94,203,1:23,94,204,1:24,95,205,1:24,95,206,1:24,95,207,1:24,95,208,1:24,95,209,1:24,96,210,1:24,96,211,1:24,96,212,1:24,96,213,1:24,96,214,1:24,97,215,1:24,97,216,1:24,97,217,1:24,97,218,1:24,98,219,1:24,98,220,1:24,98,221,1:24,98,222,1:24,99,223,1:24,99,224,1:24,99,225,1:24,99,226,1:24,100,227,1:24,100,228,1:24,100,229,1:24,100,230,1:24,101,231,1:24,101,232,1:24,101,233,1:24,102,234,1:24,102,235,1:24,102,236,1:24,103,237,1:24,103,238,1:24,103,239,1:24,104,240,1:24,104,241,1:24,104,242,1:24,104,243,1:24,105,244,1:24,105,245,1:24,105,246,1:24,106,247,1:24,106,248,1:24,106,249,1:24,107,250,1:24,107,251,1:24,107,252,1:24,108,253,1:24,108,254,1:24,108,255,1:24,109,256,1:24,109,257,1:24,110,258,1:24,110,259,1:24,110,260,1:24,111,261,1:24,111,262,1:24,111,263,1:24,112,264,1:24,112,265,1:24,112,266,1:24,113,267,1:24,113,268,1:24,113,269,1:24,114,270,1:24,114,271,1:24,114,272,1:24,115,273,1:24,115,274,1:24,115,275,1:24,116,276,1:24,116,277,1:24,116,278,1:24,117,279,1:24,117,280,1:24,118,281,1:24,118,282,1:24,118,283,1:24,119,284,1:24,119,285,1:24,119,286,1:24,120,287,1:24,120,288,1:24,120,289,1:24,121,290,1:24,121,291,1:24,121,292,1:24,122,293,1:24,122,294,1:24,122,295,1:24,123,296,1:24,123,297,1:24,123,298,1:24,124,299,1:24,124,300,1:24,124,301,1:24,125,302,1:24,125,303,1:23,125,304,1:23,126,305,1:23,126,306,1:23,126,307,1:23,127,308,1:23,127,309,1:23,127,310,1:23,127,311,1:23,128,312,1:23,128,313,1:23,128,314,1:23,129,315,1:23,129,316,1:23,129,317,1:23,130,318,1:23,130,319,1:23,130,320,1:23,130,321,1:23,131,322,1:23,131,323,1:23,131,324,1:23,131,325,1:23,132,326,1:23,132,327,1:23,132,328,1:23,132,329,1:23,133,330,1:23,133,331,1:23,133,332,1:23,133,333,1:23,134,334,1:23,134,335,1:23,134,336,1:23,134,337,1:23,134,338,1:23,135,339,1:23,135,340,1:23,135,341,1:23,135,342,1:23,135,343,1:23,136,344,1:23,136,345,1:24,136,346,1:24,136,347,1:24,136,348,1:24,136,349,1:24,137,350,1:24,137,351,1:24,137,352,1:24,137,353,1:24,137,354,1:24,137,355,1:24,137,356,1:24,137,357,1:24,138,358,1:24,138,359,1:24,138,360,1:24,138,361,1:24,138,362,1:24,138,363,1:24,138,364,1:24,138,365,1:24,138,366,1:24,138,367,1:24,138,368,1:24,138,369,1:24,138,370,1:24,138,371,1:25,138,372,1:25,138,373,1:25,138,374,1:25,138,375,1:25,138,376,1:25,138,377,1:25,138,378,1:25,138,379,1:25,138,380,1:25,138,381,1:25,138,382,1:25,138,383,1:25,138,384,1:25,138,385,1:25,138,386,1:25,138,387,1:25,138,388,1:26,138,389,1:26,137,390,1:26,137,391,1:26,137,392,1:26,137,393,1:26,137,394,1:26,137,395,1:26,137,396,1:26,137,397,1:26,137,398,1:26,137,399,1:26,137,400,1:26,136,401,1:26,136,402,1:26,136,403,1:26,136,404,1:26,136,405,1:26,136,406,1:27,136,407,1:27,136,408,1:27,136,409,1:27,135,410,1:27,135,411,1:27,135,412,1:27,135,413,1:27,135,414,1:27,135,415,1:27,135,416,1:27,135,417,1:27,135,418,1:27,134,419,1:27,134,420,1:27,134,421,1:27,134,422,1:27,134,423,1:27,134,424,1:27,134,425,1:27,134,426,1:27,134,427,1:27,133,428,1:27,133,429,1:27,133,430,1:27,133,431,1:27,133,432,1:27,133,433,1:27,133,434,1:27,133,435,1:27,133,436,1:27,133,437,1:27,133,438,1:27,132,439,1:27,132,440,1:27,132,441,1:27,132,442,1:27,132,443,1:27,132,444,1:27,132,445,1:27,132,446,1:27,132,447,1:27,132,448,1:27,132,449,1:27,132,450,1:27,132,451,1:27,132,452,1:27,132,453,1:27,132,454,1:27,132,455,1:27,131,456,1:27,131,457,1:27,131,458,1:27,131,459,1:27,131,460,1:27,131,461,1:27,131,462,1:27,131,463,1:27,131,464,1:27,131,465,1:27,131,466,1:27,131,467,1:27,131,468,1:27,131,469,1:27,131,470,1:27,131,471,1:27,131,472,1:26,131,473,1:26,131,474,1:26,131,475,1:26,131,476,1:26,131,477,1:26,131,478,1:26,132,479,1:26,132,480,1:26,132,481,1:26,132,482,1:26,132,483,1:26,132,484,1:26,132,485,1:26,132,486,1:26,132,487,1:26,132,488,1:26,132,489,1:26,132,490,1:26,132,491,1:26,133,492,1:26,133,493,1:26,133,494,1:26,133,495,1:26,133,496,1:26,133,497,1:26,133,498,1:26,133,499,1:26,134,500,1:26,134,501,1:26,134,502,1:25,134,503,1:25,134,504,1:25,134,505,1:25,135,506,1:25,135,507,1:25,135,508,1:25,135,509,1:25,135,510,1:25,136,511,1:25,136,512,1:25,136,513,1:25,136,514,1:25,137,515,1:25,137,516,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 36,97,8,1:35,96,23,1:35,95,39,1:26,118,264,1:26,124,282,1:26,131,302,1:27,135,319,1:26,137,337,1:26,138,355,1:25,137,372,1:24,136,389,1:23,133,407,1:24,131,425,1:24,131,443,1:25,132,459,1:25,131,474,1:24,126,486,1:25,131,496,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject MLL
os.makedirs(path_results + '/T2/MLL')
os.chdir(path_results + '/T2/MLL')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/MLL_1016/01_0008_sc-mprage-1mm-2palliers-fov384-comp-sp-7/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 34,98,85,20:32,93,116,19:31,88,145,18:30,86,170,17:30,84,195,16:28,84,218,15:27,85,242,14:26,87,265,13:26,92,287,12:26,99,308,11:26,107,329,10:26,117,346,9:24,126,363,8:24,131,380,7:23,133,397,6:22,135,415,5:22,134,433,4:22,132,451,3:17,120,507,2:16,125,530,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  14 -end 542 ')
f_crop = open('crop.txt', 'w')
f_crop.write('14,542,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 20,102,0,1:20,102,1,1:20,102,2,1:20,101,3,1:20,101,4,1:19,101,5,1:19,101,6,1:19,100,7,1:19,100,8,1:19,100,9,1:19,100,10,1:19,99,11,1:19,99,12,1:19,99,13,1:19,99,14,1:19,98,15,1:19,98,16,1:19,98,17,1:19,98,18,1:19,97,19,1:19,97,20,1:19,97,21,1:19,97,22,1:19,96,23,1:19,96,24,1:19,96,25,1:19,96,26,1:19,96,27,1:19,95,28,1:19,95,29,1:19,95,30,1:19,95,31,1:19,94,32,1:19,94,33,1:19,94,34,1:19,94,35,1:19,94,36,1:19,93,37,1:19,93,38,1:19,93,39,1:19,93,40,1:19,93,41,1:19,92,42,1:19,92,43,1:19,92,44,1:19,92,45,1:19,92,46,1:20,91,47,1:20,91,48,1:20,91,49,1:20,91,50,1:20,91,51,1:20,91,52,1:20,90,53,1:20,90,54,1:20,90,55,1:20,90,56,1:20,90,57,1:20,90,58,1:20,89,59,1:20,89,60,1:20,89,61,1:20,89,62,1:20,89,63,1:20,89,64,1:20,88,65,1:20,88,66,1:20,88,67,1:20,88,68,1:20,88,69,1:20,88,70,1:20,87,71,1:20,87,72,1:20,87,73,1:20,87,74,1:20,87,75,1:20,87,76,1:20,87,77,1:20,86,78,1:20,86,79,1:20,86,80,1:20,86,81,1:20,86,82,1:20,86,83,1:20,86,84,1:20,85,85,1:20,85,86,1:20,85,87,1:20,85,88,1:20,85,89,1:20,85,90,1:20,85,91,1:21,84,92,1:21,84,93,1:21,84,94,1:21,84,95,1:21,84,96,1:21,84,97,1:21,84,98,1:21,84,99,1:21,84,100,1:21,83,101,1:21,83,102,1:21,83,103,1:21,83,104,1:21,83,105,1:21,83,106,1:21,83,107,1:21,83,108,1:21,83,109,1:21,82,110,1:21,82,111,1:21,82,112,1:21,82,113,1:21,82,114,1:21,82,115,1:21,82,116,1:21,82,117,1:21,82,118,1:21,82,119,1:21,81,120,1:21,81,121,1:21,81,122,1:21,81,123,1:21,81,124,1:21,81,125,1:21,81,126,1:21,81,127,1:21,81,128,1:21,81,129,1:21,81,130,1:21,81,131,1:21,80,132,1:21,80,133,1:21,80,134,1:22,80,135,1:22,80,136,1:22,80,137,1:22,80,138,1:22,80,139,1:22,80,140,1:22,80,141,1:22,80,142,1:22,80,143,1:22,80,144,1:22,80,145,1:22,80,146,1:22,79,147,1:22,79,148,1:22,79,149,1:22,79,150,1:22,79,151,1:22,79,152,1:22,79,153,1:22,79,154,1:22,79,155,1:22,79,156,1:22,79,157,1:22,79,158,1:22,79,159,1:22,79,160,1:22,79,161,1:23,79,162,1:23,79,163,1:23,79,164,1:23,79,165,1:23,79,166,1:23,79,167,1:23,79,168,1:23,78,169,1:23,78,170,1:23,78,171,1:23,78,172,1:23,78,173,1:23,78,174,1:23,78,175,1:23,78,176,1:23,78,177,1:23,78,178,1:23,78,179,1:23,78,180,1:24,78,181,1:24,78,182,1:24,78,183,1:24,78,184,1:24,78,185,1:24,78,186,1:24,78,187,1:24,78,188,1:24,78,189,1:24,78,190,1:24,78,191,1:24,78,192,1:24,78,193,1:24,78,194,1:24,78,195,1:24,78,196,1:24,78,197,1:25,78,198,1:25,78,199,1:25,78,200,1:25,78,201,1:25,78,202,1:25,78,203,1:25,78,204,1:25,78,205,1:25,78,206,1:25,78,207,1:25,78,208,1:25,78,209,1:25,78,210,1:25,78,211,1:25,78,212,1:25,78,213,1:25,78,214,1:25,78,215,1:25,78,216,1:25,78,217,1:25,79,218,1:25,79,219,1:25,79,220,1:25,79,221,1:25,79,222,1:25,79,223,1:25,79,224,1:25,79,225,1:25,79,226,1:25,79,227,1:26,79,228,1:26,79,229,1:26,79,230,1:26,79,231,1:26,79,232,1:26,79,233,1:26,79,234,1:26,79,235,1:26,80,236,1:26,80,237,1:26,80,238,1:26,80,239,1:26,80,240,1:26,80,241,1:26,80,242,1:26,80,243,1:26,80,244,1:26,80,245,1:26,80,246,1:26,81,247,1:26,81,248,1:26,81,249,1:26,81,250,1:26,81,251,1:26,81,252,1:26,81,253,1:26,82,254,1:26,82,255,1:26,82,256,1:26,82,257,1:26,82,258,1:26,82,259,1:26,83,260,1:26,83,261,1:26,83,262,1:26,83,263,1:26,83,264,1:26,84,265,1:26,84,266,1:26,84,267,1:26,84,268,1:26,85,269,1:26,85,270,1:26,85,271,1:26,85,272,1:26,86,273,1:26,86,274,1:26,86,275,1:26,86,276,1:26,87,277,1:26,87,278,1:26,87,279,1:26,87,280,1:26,88,281,1:26,88,282,1:26,88,283,1:26,89,284,1:26,89,285,1:26,89,286,1:26,90,287,1:26,90,288,1:26,90,289,1:26,91,290,1:26,91,291,1:27,91,292,1:27,92,293,1:27,92,294,1:27,92,295,1:27,93,296,1:27,93,297,1:27,94,298,1:27,94,299,1:27,94,300,1:27,95,301,1:27,95,302,1:27,95,303,1:27,96,304,1:27,96,305,1:27,97,306,1:27,97,307,1:27,97,308,1:27,98,309,1:27,98,310,1:27,99,311,1:27,99,312,1:27,100,313,1:27,100,314,1:27,100,315,1:27,101,316,1:27,101,317,1:27,102,318,1:27,102,319,1:27,103,320,1:27,103,321,1:28,103,322,1:28,104,323,1:28,104,324,1:28,105,325,1:28,105,326,1:28,106,327,1:28,106,328,1:28,106,329,1:28,107,330,1:28,107,331,1:28,108,332,1:28,108,333,1:28,109,334,1:28,109,335,1:28,110,336,1:28,110,337,1:28,110,338,1:28,111,339,1:28,111,340,1:28,112,341,1:28,112,342,1:28,112,343,1:28,113,344,1:28,113,345,1:28,114,346,1:28,114,347,1:28,114,348,1:28,115,349,1:28,115,350,1:28,116,351,1:29,116,352,1:29,116,353,1:29,117,354,1:29,117,355,1:29,117,356,1:29,118,357,1:29,118,358,1:29,118,359,1:29,119,360,1:29,119,361,1:29,119,362,1:29,120,363,1:29,120,364,1:29,120,365,1:29,121,366,1:29,121,367,1:29,121,368,1:29,121,369,1:29,122,370,1:29,122,371,1:29,122,372,1:29,122,373,1:29,122,374,1:29,123,375,1:29,123,376,1:29,123,377,1:29,123,378,1:29,123,379,1:29,123,380,1:29,123,381,1:30,124,382,1:30,124,383,1:30,124,384,1:30,124,385,1:30,124,386,1:30,124,387,1:30,124,388,1:30,124,389,1:30,124,390,1:30,124,391,1:30,124,392,1:30,124,393,1:30,124,394,1:30,124,395,1:30,125,396,1:30,125,397,1:30,125,398,1:30,125,399,1:30,125,400,1:30,125,401,1:30,125,402,1:30,125,403,1:30,125,404,1:30,124,405,1:31,124,406,1:31,124,407,1:31,124,408,1:31,124,409,1:31,124,410,1:31,124,411,1:31,124,412,1:31,124,413,1:31,124,414,1:31,124,415,1:31,124,416,1:31,124,417,1:31,124,418,1:31,124,419,1:31,124,420,1:31,124,421,1:31,124,422,1:32,124,423,1:32,123,424,1:32,123,425,1:32,123,426,1:32,123,427,1:32,123,428,1:32,123,429,1:32,123,430,1:32,123,431,1:32,123,432,1:32,123,433,1:32,123,434,1:33,123,435,1:33,123,436,1:33,122,437,1:33,122,438,1:33,122,439,1:33,122,440,1:33,122,441,1:33,122,442,1:33,122,443,1:33,122,444,1:33,122,445,1:34,122,446,1:34,122,447,1:34,122,448,1:34,122,449,1:34,121,450,1:34,121,451,1:34,121,452,1:34,121,453,1:34,121,454,1:34,121,455,1:35,121,456,1:35,121,457,1:35,121,458,1:35,121,459,1:35,121,460,1:35,121,461,1:35,121,462,1:35,120,463,1:35,120,464,1:35,120,465,1:36,120,466,1:36,120,467,1:36,120,468,1:36,120,469,1:36,120,470,1:36,120,471,1:36,120,472,1:36,120,473,1:36,120,474,1:36,120,475,1:37,120,476,1:37,119,477,1:37,119,478,1:37,119,479,1:37,119,480,1:37,119,481,1:37,119,482,1:37,119,483,1:37,119,484,1:37,119,485,1:37,119,486,1:38,119,487,1:38,119,488,1:38,119,489,1:38,119,490,1:38,119,491,1:38,119,492,1:38,119,493,1:38,119,494,1:38,119,495,1:38,119,496,1:38,119,497,1:38,119,498,1:38,119,499,1:39,119,500,1:39,119,501,1:39,119,502,1:39,118,503,1:39,118,504,1:39,118,505,1:39,118,506,1:39,118,507,1:39,118,508,1:39,118,509,1:39,118,510,1:39,118,511,1:39,118,512,1:39,119,513,1:39,119,514,1:39,119,515,1:39,119,516,1:39,119,517,1:39,119,518,1:39,119,519,1:39,119,520,1:39,119,521,1:39,119,522,1:39,119,523,1:39,119,524,1:39,119,525,1:39,119,526,1:39,119,527,1:39,119,528,1:39,119,529,1:39,119,530,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 34,100,5,1:34,97,21,1:34,92,39,1:34,89,57,1:33,86,78,1:32,83,96,1:32,81,113,1:20,116,451,1:19,113,463,1:17,114,476,1:16,116,491,1:16,123,504,1:15,122,518,1:14,128,528,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject MT
os.makedirs(path_results + '/T2/MT')
os.chdir(path_results + '/T2/MT')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/MT/01_0007_sc-mprage-1mm-2palliers-fov384-comp-sp-5/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 32,72,41,20:29,66,72,19:28,65,102,18:27,63,129,17:28,64,156,16:26,65,182,15:26,69,206,14:26,74,232,13:25,83,254,12:28,93,276,11:28,103,296,10:28,115,314,9:26,126,332,8:26,133,348,7:25,134,366,6:25,133,382,5:25,131,399,4:25,130,417,3:25,114,474,2:27,111,499,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  8 -end 515 ')
f_crop = open('crop.txt', 'w')
f_crop.write('8,515,0,449')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 19,66,0,1:19,66,1,1:19,66,2,1:19,66,3,1:20,66,4,1:20,65,5,1:20,65,6,1:20,65,7,1:20,65,8,1:20,65,9,1:20,65,10,1:20,65,11,1:20,64,12,1:20,64,13,1:20,64,14,1:20,64,15,1:20,64,16,1:20,64,17,1:20,63,18,1:20,63,19,1:20,63,20,1:20,63,21,1:20,63,22,1:20,63,23,1:20,63,24,1:20,63,25,1:20,62,26,1:20,62,27,1:21,62,28,1:21,62,29,1:21,62,30,1:21,62,31,1:21,62,32,1:21,62,33,1:21,61,34,1:21,61,35,1:21,61,36,1:21,61,37,1:21,61,38,1:21,61,39,1:21,61,40,1:21,61,41,1:21,61,42,1:21,61,43,1:21,60,44,1:21,60,45,1:21,60,46,1:21,60,47,1:21,60,48,1:21,60,49,1:21,60,50,1:21,60,51,1:21,60,52,1:21,60,53,1:21,60,54,1:21,60,55,1:21,59,56,1:21,59,57,1:22,59,58,1:22,59,59,1:22,59,60,1:22,59,61,1:22,59,62,1:22,59,63,1:22,59,64,1:22,59,65,1:22,59,66,1:22,59,67,1:22,59,68,1:22,59,69,1:22,59,70,1:22,59,71,1:22,58,72,1:22,58,73,1:22,58,74,1:22,58,75,1:22,58,76,1:22,58,77,1:22,58,78,1:22,58,79,1:22,58,80,1:22,58,81,1:22,58,82,1:22,58,83,1:22,58,84,1:22,58,85,1:22,58,86,1:22,58,87,1:22,58,88,1:22,58,89,1:22,58,90,1:22,58,91,1:22,58,92,1:22,58,93,1:22,58,94,1:22,58,95,1:22,58,96,1:22,58,97,1:22,58,98,1:23,58,99,1:23,58,100,1:23,58,101,1:23,58,102,1:23,58,103,1:23,58,104,1:23,58,105,1:23,57,106,1:23,57,107,1:23,57,108,1:23,57,109,1:23,57,110,1:23,57,111,1:23,57,112,1:23,57,113,1:23,57,114,1:23,57,115,1:23,57,116,1:23,57,117,1:23,57,118,1:23,57,119,1:23,57,120,1:23,57,121,1:23,57,122,1:23,57,123,1:23,57,124,1:23,57,125,1:23,57,126,1:23,57,127,1:23,57,128,1:23,57,129,1:23,58,130,1:23,58,131,1:23,58,132,1:23,58,133,1:23,58,134,1:23,58,135,1:23,58,136,1:23,58,137,1:23,58,138,1:23,58,139,1:23,58,140,1:23,58,141,1:23,58,142,1:23,58,143,1:23,58,144,1:23,58,145,1:23,58,146,1:23,58,147,1:23,58,148,1:23,58,149,1:23,58,150,1:24,58,151,1:24,58,152,1:24,58,153,1:24,58,154,1:24,58,155,1:24,58,156,1:24,58,157,1:24,58,158,1:24,58,159,1:24,58,160,1:24,59,161,1:24,59,162,1:24,59,163,1:24,59,164,1:24,59,165,1:24,59,166,1:24,59,167,1:24,59,168,1:24,59,169,1:24,59,170,1:24,59,171,1:24,59,172,1:24,59,173,1:24,59,174,1:24,59,175,1:24,60,176,1:24,60,177,1:24,60,178,1:24,60,179,1:24,60,180,1:24,60,181,1:24,60,182,1:24,60,183,1:24,60,184,1:24,60,185,1:24,61,186,1:24,61,187,1:24,61,188,1:24,61,189,1:24,61,190,1:24,61,191,1:25,61,192,1:25,61,193,1:25,61,194,1:25,62,195,1:25,62,196,1:25,62,197,1:25,62,198,1:25,62,199,1:25,62,200,1:25,63,201,1:25,63,202,1:25,63,203,1:25,63,204,1:25,63,205,1:25,63,206,1:25,64,207,1:25,64,208,1:25,64,209,1:25,64,210,1:25,64,211,1:25,65,212,1:25,65,213,1:25,65,214,1:25,65,215,1:25,66,216,1:25,66,217,1:25,66,218,1:25,66,219,1:25,66,220,1:25,67,221,1:25,67,222,1:25,67,223,1:25,67,224,1:25,68,225,1:25,68,226,1:25,68,227,1:25,69,228,1:25,69,229,1:25,69,230,1:25,69,231,1:25,70,232,1:25,70,233,1:25,70,234,1:25,71,235,1:25,71,236,1:25,71,237,1:25,72,238,1:25,72,239,1:25,72,240,1:25,73,241,1:25,73,242,1:25,73,243,1:25,74,244,1:25,74,245,1:25,74,246,1:25,75,247,1:25,75,248,1:25,75,249,1:25,76,250,1:25,76,251,1:25,76,252,1:25,77,253,1:25,77,254,1:25,78,255,1:25,78,256,1:25,78,257,1:25,79,258,1:25,79,259,1:25,80,260,1:25,80,261,1:25,81,262,1:25,81,263,1:25,81,264,1:25,82,265,1:25,82,266,1:25,83,267,1:25,83,268,1:25,84,269,1:24,84,270,1:24,84,271,1:24,85,272,1:24,85,273,1:24,86,274,1:24,86,275,1:24,87,276,1:24,87,277,1:24,88,278,1:24,88,279,1:24,89,280,1:24,89,281,1:24,90,282,1:24,90,283,1:24,91,284,1:24,91,285,1:24,92,286,1:24,92,287,1:24,93,288,1:24,93,289,1:24,94,290,1:24,94,291,1:23,95,292,1:23,95,293,1:23,96,294,1:23,96,295,1:23,97,296,1:23,97,297,1:23,98,298,1:23,98,299,1:23,99,300,1:23,99,301,1:23,100,302,1:23,100,303,1:23,101,304,1:23,101,305,1:23,102,306,1:23,102,307,1:23,103,308,1:23,103,309,1:23,104,310,1:23,105,311,1:23,105,312,1:23,106,313,1:23,106,314,1:23,107,315,1:23,107,316,1:23,108,317,1:23,108,318,1:23,109,319,1:23,109,320,1:23,110,321,1:23,110,322,1:23,111,323,1:23,111,324,1:23,112,325,1:23,113,326,1:24,113,327,1:24,114,328,1:24,114,329,1:24,115,330,1:24,115,331,1:24,116,332,1:24,116,333,1:24,117,334,1:24,117,335,1:24,117,336,1:24,118,337,1:24,118,338,1:24,119,339,1:24,119,340,1:24,120,341,1:24,120,342,1:24,120,343,1:24,121,344,1:24,121,345,1:24,122,346,1:25,122,347,1:25,122,348,1:25,123,349,1:25,123,350,1:25,123,351,1:25,124,352,1:25,124,353,1:25,124,354,1:25,125,355,1:25,125,356,1:25,125,357,1:25,125,358,1:25,126,359,1:25,126,360,1:25,126,361,1:25,126,362,1:25,126,363,1:25,126,364,1:25,127,365,1:25,127,366,1:25,127,367,1:26,127,368,1:26,127,369,1:26,127,370,1:26,127,371,1:26,127,372,1:26,127,373,1:26,127,374,1:26,127,375,1:26,127,376,1:26,127,377,1:26,127,378,1:26,127,379,1:26,127,380,1:26,127,381,1:26,127,382,1:26,127,383,1:26,127,384,1:26,127,385,1:26,126,386,1:26,126,387,1:26,126,388,1:26,126,389,1:26,126,390,1:26,126,391,1:26,126,392,1:26,126,393,1:26,125,394,1:26,125,395,1:26,125,396,1:26,125,397,1:26,125,398,1:26,125,399,1:26,124,400,1:26,124,401,1:26,124,402,1:26,124,403,1:26,124,404,1:26,124,405,1:26,123,406,1:26,123,407,1:26,123,408,1:26,123,409,1:26,123,410,1:26,123,411,1:26,123,412,1:26,122,413,1:26,122,414,1:26,122,415,1:26,122,416,1:26,122,417,1:26,122,418,1:26,122,419,1:26,121,420,1:26,121,421,1:26,121,422,1:26,121,423,1:26,121,424,1:26,121,425,1:26,121,426,1:26,121,427,1:26,121,428,1:27,121,429,1:27,121,430,1:27,121,431,1:27,121,432,1:27,121,433,1:27,120,434,1:27,120,435,1:27,120,436,1:27,120,437,1:27,120,438,1:27,120,439,1:27,120,440,1:27,120,441,1:27,120,442,1:27,120,443,1:27,120,444,1:27,120,445,1:27,120,446,1:27,120,447,1:27,120,448,1:27,120,449,1:27,120,450,1:27,120,451,1:27,120,452,1:27,120,453,1:27,120,454,1:27,120,455,1:27,120,456,1:27,120,457,1:28,120,458,1:28,120,459,1:28,120,460,1:28,120,461,1:28,120,462,1:28,121,463,1:28,121,464,1:28,121,465,1:28,121,466,1:28,121,467,1:28,121,468,1:28,121,469,1:28,121,470,1:28,121,471,1:28,121,472,1:28,121,473,1:28,121,474,1:28,121,475,1:28,121,476,1:28,121,477,1:28,121,478,1:28,121,479,1:27,121,480,1:27,121,481,1:27,121,482,1:27,121,483,1:27,121,484,1:27,121,485,1:27,121,486,1:27,121,487,1:27,121,488,1:27,122,489,1:27,122,490,1:27,122,491,1:27,122,492,1:27,122,493,1:27,122,494,1:27,122,495,1:27,122,496,1:26,122,497,1:26,122,498,1:26,122,499,1:26,122,500,1:26,122,501,1:26,122,502,1:26,122,503,1:26,122,504,1:25,122,505,1:25,122,506,1:25,122,507,1:25,122,508,1:25,122,509,1:25,122,510,1:25,122,511,1:24,122,512,1:24,122,513,1:24,122,514,1:24,122,515,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 31,61,8,1:31,60,27,1:30,59,48,1:29,58,69,1:28,57,90,1:28,57,110,1:28,57,129,1:28,58,146,1:27,59,160,1:27,59,177,1:26,63,194,1:26,67,212,1:25,113,447,1:26,111,463,1:27,113,476,1:27,106,492,1:28,112,507,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject TR
os.makedirs(path_results + '/T2/TR')
os.chdir(path_results + '/T2/TR')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/TR_T076/01_0007_sc-mprage-1mm-2palliers-fov384-comp-sp-5/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 17,89,63,20:17,87,90,19:18,88,118,18:17,88,143,17:20,89,167,16:21,90,190,15:23,92,213,14:24,95,235,13:26,99,256,12:28,104,278,11:29,109,298,10:29,115,318,9:30,121,338,8:31,124,356,7:33,125,372,6:34,127,389,5:34,129,407,4:34,132,424,3:31,133,481,2:29,136,506,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 1,2 -start 20,3 -end 245,528')
f_crop = open('crop.txt', 'w')
f_crop.write('3,528,0,10,20,245')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 17,70,0,1:17,64,38,1:18,60,59,1:18,59,81,1:17,60,101,1:18,60,137,1:20,62,177,1:22,65,208,1:24,69,237,1:26,74,263,1:29,83,300,1:30,90,329,1:33,98,372,1:34,102,401,1:34,104,435,1:33,105,453,1:30,112,484,1:28,115,507,1:26,121,525,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject T047
os.makedirs(path_results + '/T2/T047')
os.chdir(path_results + '/T2/T047')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/T047/01_0007_sc-mprage-1mm-2palliers-fov384-comp-sp-5/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 22,96,74,20:22,91,105,19:22,87,135,18:22,83,161,17:22,81,187,16:22,81,210,15:22,82,235,14:22,86,259,13:22,89,281,12:22,96,302,11:22,102,321,10:22,110,340,9:22,118,358,8:23,123,375,7:24,124,392,6:24,124,410,5:25,123,428,4:25,123,445,3:23,120,513,2:23,123,538,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  6 -end 553 ')
f_crop = open('crop.txt', 'w')
f_crop.write('6,553,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 29,99,0,1:29,98,1,1:29,98,2,1:29,98,3,1:29,98,4,1:29,97,5,1:28,97,6,1:28,97,7,1:28,96,8,1:28,96,9,1:28,96,10,1:28,96,11,1:28,95,12,1:28,95,13,1:28,95,14,1:28,95,15,1:28,94,16,1:28,94,17,1:28,94,18,1:28,94,19,1:28,93,20,1:28,93,21,1:28,93,22,1:28,93,23,1:28,92,24,1:28,92,25,1:28,92,26,1:28,92,27,1:28,92,28,1:28,91,29,1:28,91,30,1:28,91,31,1:28,91,32,1:28,90,33,1:28,90,34,1:28,90,35,1:28,90,36,1:27,90,37,1:27,89,38,1:27,89,39,1:27,89,40,1:27,89,41,1:27,89,42,1:27,88,43,1:28,88,44,1:28,88,45,1:28,88,46,1:28,88,47,1:28,87,48,1:28,87,49,1:28,87,50,1:28,87,51,1:28,87,52,1:28,86,53,1:28,86,54,1:28,86,55,1:28,86,56,1:28,86,57,1:28,86,58,1:28,85,59,1:28,85,60,1:28,85,61,1:28,85,62,1:28,85,63,1:28,85,64,1:28,84,65,1:28,84,66,1:28,84,67,1:28,84,68,1:28,84,69,1:28,84,70,1:28,84,71,1:28,83,72,1:28,83,73,1:28,83,74,1:28,83,75,1:28,83,76,1:28,83,77,1:28,83,78,1:28,82,79,1:28,82,80,1:28,82,81,1:28,82,82,1:28,82,83,1:28,82,84,1:28,82,85,1:28,82,86,1:28,81,87,1:29,81,88,1:29,81,89,1:29,81,90,1:29,81,91,1:29,81,92,1:29,81,93,1:29,81,94,1:29,81,95,1:29,80,96,1:29,80,97,1:29,80,98,1:29,80,99,1:29,80,100,1:29,80,101,1:29,80,102,1:29,80,103,1:29,80,104,1:29,80,105,1:29,79,106,1:29,79,107,1:29,79,108,1:29,79,109,1:29,79,110,1:29,79,111,1:29,79,112,1:29,79,113,1:29,79,114,1:29,79,115,1:29,79,116,1:29,79,117,1:29,78,118,1:29,78,119,1:29,78,120,1:29,78,121,1:29,78,122,1:29,78,123,1:29,78,124,1:29,78,125,1:29,78,126,1:29,78,127,1:29,78,128,1:29,78,129,1:29,78,130,1:29,78,131,1:29,78,132,1:29,77,133,1:29,77,134,1:29,77,135,1:29,77,136,1:29,77,137,1:29,77,138,1:30,77,139,1:30,77,140,1:30,77,141,1:30,77,142,1:30,77,143,1:30,77,144,1:30,77,145,1:30,77,146,1:30,77,147,1:30,77,148,1:30,77,149,1:30,77,150,1:29,77,151,1:29,77,152,1:29,76,153,1:29,76,154,1:29,76,155,1:29,76,156,1:29,76,157,1:29,76,158,1:29,76,159,1:29,76,160,1:29,76,161,1:29,76,162,1:29,76,163,1:29,76,164,1:29,76,165,1:29,76,166,1:29,76,167,1:29,76,168,1:29,76,169,1:29,76,170,1:29,76,171,1:29,76,172,1:29,76,173,1:29,76,174,1:29,76,175,1:29,76,176,1:29,76,177,1:29,76,178,1:29,76,179,1:29,76,180,1:29,76,181,1:29,76,182,1:29,76,183,1:29,76,184,1:29,76,185,1:29,76,186,1:29,76,187,1:29,76,188,1:29,76,189,1:29,76,190,1:29,76,191,1:29,76,192,1:29,76,193,1:29,76,194,1:29,76,195,1:29,76,196,1:29,76,197,1:29,76,198,1:29,76,199,1:29,76,200,1:29,76,201,1:29,76,202,1:29,76,203,1:29,76,204,1:29,76,205,1:29,76,206,1:29,76,207,1:29,76,208,1:29,76,209,1:29,76,210,1:29,76,211,1:29,76,212,1:29,76,213,1:29,76,214,1:29,76,215,1:29,76,216,1:29,76,217,1:29,76,218,1:29,76,219,1:29,76,220,1:29,76,221,1:29,76,222,1:29,77,223,1:29,77,224,1:29,77,225,1:29,77,226,1:29,77,227,1:29,77,228,1:29,77,229,1:29,77,230,1:29,77,231,1:29,77,232,1:29,77,233,1:29,77,234,1:29,77,235,1:29,77,236,1:29,77,237,1:29,78,238,1:29,78,239,1:29,78,240,1:29,78,241,1:29,78,242,1:29,78,243,1:29,78,244,1:29,78,245,1:29,78,246,1:29,78,247,1:29,79,248,1:29,79,249,1:29,79,250,1:29,79,251,1:29,79,252,1:29,79,253,1:29,79,254,1:29,79,255,1:29,80,256,1:29,80,257,1:29,80,258,1:29,80,259,1:29,80,260,1:29,80,261,1:29,80,262,1:29,81,263,1:29,81,264,1:29,81,265,1:29,81,266,1:29,81,267,1:29,82,268,1:29,82,269,1:29,82,270,1:29,82,271,1:29,82,272,1:29,82,273,1:29,83,274,1:29,83,275,1:29,83,276,1:29,83,277,1:29,84,278,1:29,84,279,1:29,84,280,1:29,84,281,1:29,84,282,1:29,85,283,1:29,85,284,1:29,85,285,1:29,85,286,1:29,86,287,1:29,86,288,1:29,86,289,1:29,86,290,1:29,87,291,1:29,87,292,1:29,87,293,1:29,87,294,1:29,88,295,1:29,88,296,1:29,88,297,1:29,89,298,1:29,89,299,1:29,89,300,1:29,89,301,1:29,90,302,1:29,90,303,1:29,90,304,1:29,91,305,1:29,91,306,1:29,91,307,1:29,92,308,1:29,92,309,1:29,92,310,1:29,92,311,1:29,93,312,1:29,93,313,1:29,93,314,1:29,94,315,1:29,94,316,1:29,94,317,1:29,95,318,1:29,95,319,1:29,95,320,1:29,96,321,1:29,96,322,1:29,96,323,1:29,97,324,1:29,97,325,1:29,97,326,1:29,98,327,1:29,98,328,1:29,98,329,1:29,99,330,1:29,99,331,1:29,99,332,1:29,100,333,1:29,100,334,1:29,100,335,1:29,101,336,1:29,101,337,1:29,101,338,1:29,102,339,1:29,102,340,1:29,102,341,1:29,103,342,1:29,103,343,1:29,103,344,1:28,104,345,1:28,104,346,1:28,104,347,1:28,105,348,1:28,105,349,1:28,105,350,1:28,106,351,1:28,106,352,1:28,106,353,1:28,107,354,1:28,107,355,1:28,107,356,1:28,108,357,1:28,108,358,1:28,108,359,1:28,109,360,1:28,109,361,1:28,109,362,1:28,109,363,1:28,110,364,1:28,110,365,1:28,110,366,1:28,110,367,1:28,111,368,1:28,111,369,1:28,111,370,1:28,111,371,1:28,112,372,1:28,112,373,1:28,112,374,1:28,112,375,1:28,113,376,1:28,113,377,1:28,113,378,1:27,113,379,1:27,113,380,1:27,114,381,1:27,114,382,1:27,114,383,1:27,114,384,1:27,114,385,1:27,114,386,1:27,114,387,1:27,115,388,1:27,115,389,1:27,115,390,1:27,115,391,1:27,115,392,1:27,115,393,1:27,115,394,1:27,115,395,1:27,115,396,1:27,115,397,1:27,115,398,1:27,116,399,1:27,116,400,1:27,116,401,1:27,116,402,1:27,116,403,1:27,116,404,1:27,116,405,1:27,116,406,1:27,116,407,1:27,116,408,1:27,116,409,1:27,116,410,1:27,116,411,1:27,116,412,1:27,116,413,1:27,116,414,1:27,116,415,1:27,116,416,1:27,116,417,1:27,116,418,1:27,116,419,1:27,116,420,1:27,116,421,1:27,116,422,1:27,116,423,1:27,116,424,1:27,116,425,1:27,116,426,1:27,116,427,1:27,116,428,1:28,115,429,1:28,115,430,1:28,115,431,1:28,115,432,1:28,115,433,1:28,115,434,1:28,115,435,1:28,115,436,1:28,115,437,1:28,115,438,1:28,115,439,1:28,115,440,1:28,115,441,1:28,115,442,1:28,115,443,1:28,115,444,1:28,115,445,1:28,115,446,1:28,115,447,1:28,115,448,1:28,115,449,1:28,115,450,1:28,115,451,1:28,115,452,1:28,115,453,1:28,115,454,1:28,115,455,1:28,115,456,1:28,115,457,1:28,115,458,1:28,115,459,1:28,115,460,1:28,115,461,1:28,115,462,1:28,115,463,1:28,115,464,1:28,115,465,1:28,115,466,1:28,115,467,1:28,115,468,1:28,115,469,1:28,115,470,1:28,115,471,1:28,115,472,1:28,116,473,1:28,116,474,1:28,116,475,1:28,116,476,1:28,116,477,1:28,116,478,1:28,116,479,1:28,116,480,1:28,116,481,1:28,116,482,1:28,116,483,1:28,116,484,1:28,116,485,1:28,116,486,1:28,116,487,1:28,116,488,1:28,116,489,1:28,116,490,1:28,116,491,1:28,116,492,1:28,116,493,1:28,116,494,1:28,116,495,1:28,116,496,1:28,116,497,1:28,116,498,1:28,116,499,1:28,116,500,1:28,116,501,1:28,116,502,1:28,116,503,1:28,116,504,1:28,116,505,1:28,116,506,1:28,116,507,1:28,116,508,1:28,116,509,1:28,116,510,1:28,116,511,1:28,116,512,1:28,116,513,1:28,116,514,1:28,116,515,1:28,116,516,1:28,116,517,1:28,116,518,1:28,116,519,1:28,116,520,1:28,116,521,1:28,116,522,1:28,116,523,1:28,116,524,1:28,116,525,1:28,116,526,1:28,116,527,1:28,116,528,1:28,116,529,1:28,116,530,1:28,116,531,1:28,116,532,1:28,116,533,1:28,116,534,1:28,116,535,1:28,116,536,1:28,116,537,1:28,116,538,1:28,116,539,1:28,116,540,1:28,116,541,1:28,116,542,1:28,116,543,1:28,116,544,1:28,116,545,1:28,116,546,1:28,116,547,1:28,116,548,1:28,116,549,1:28,116,550,1:28,116,551,1:28,116,552,1:28,116,553,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 24,91,0,1:24,90,17,1:24,85,37,1:24,83,54,1:23,81,73,1:23,80,91,1:23,78,109,1:23,77,126,1:22,77,145,1:23,75,165,1:22,75,189,1:23,76,214,1:22,77,230,1:23,117,498,1:23,121,513,1:23,121,525,1:23,119,537,1:23,124,547,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject VC
os.makedirs(path_results + '/T2/VC')
os.chdir(path_results + '/T2/VC')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/VC/01_0007_sc-mprage-1mm-2palliers-fov384-comp-sp-23/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 25,103,137,20:24,96,169,19:24,90,197,18:24,88,223,17:24,83,247,16:24,78,270,15:24,78,293,14:24,79,315,13:24,86,337,12:24,93,357,11:25,103,376,10:26,113,395,9:24,123,411,8:24,128,429,7:23,131,444,6:23,132,459,5:23,133,474,4:23,132,490,3:25,127,550,2:25,130,575,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 1,2 -start 11,67 -end 245,589')
f_crop = open('crop.txt', 'w')
f_crop.write('67,589,0,max,11,245')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 27,97,0,1:27,96,1,1:27,96,2,1:27,96,3,1:26,96,4,1:26,96,5,1:26,95,6,1:26,95,7,1:26,95,8,1:26,95,9,1:26,94,10,1:26,94,11,1:26,94,12,1:26,94,13,1:26,93,14,1:26,93,15,1:26,93,16,1:26,93,17,1:26,93,18,1:26,92,19,1:26,92,20,1:26,92,21,1:26,92,22,1:26,91,23,1:26,91,24,1:26,91,25,1:26,91,26,1:26,90,27,1:26,90,28,1:25,90,29,1:25,90,30,1:25,90,31,1:25,89,32,1:25,89,33,1:25,89,34,1:25,89,35,1:25,88,36,1:25,88,37,1:25,88,38,1:25,88,39,1:25,87,40,1:25,87,41,1:25,87,42,1:25,87,43,1:25,87,44,1:25,86,45,1:25,86,46,1:25,86,47,1:25,86,48,1:25,85,49,1:25,85,50,1:25,85,51,1:25,85,52,1:25,84,53,1:25,84,54,1:25,84,55,1:25,84,56,1:25,84,57,1:25,83,58,1:25,83,59,1:25,83,60,1:25,83,61,1:25,82,62,1:25,82,63,1:25,82,64,1:25,82,65,1:25,82,66,1:25,81,67,1:25,81,68,1:25,81,69,1:25,81,70,1:25,81,71,1:25,80,72,1:25,80,73,1:25,80,74,1:25,80,75,1:25,79,76,1:25,79,77,1:25,79,78,1:25,79,79,1:25,79,80,1:25,79,81,1:25,78,82,1:25,78,83,1:25,78,84,1:25,78,85,1:25,78,86,1:25,77,87,1:25,77,88,1:25,77,89,1:25,77,90,1:25,77,91,1:25,76,92,1:25,76,93,1:25,76,94,1:25,76,95,1:25,76,96,1:25,76,97,1:25,76,98,1:25,75,99,1:26,75,100,1:26,75,101,1:26,75,102,1:26,75,103,1:26,75,104,1:26,74,105,1:26,74,106,1:26,74,107,1:26,74,108,1:26,74,109,1:26,74,110,1:26,74,111,1:26,73,112,1:26,73,113,1:26,73,114,1:26,73,115,1:26,73,116,1:26,73,117,1:26,73,118,1:26,73,119,1:26,73,120,1:26,72,121,1:26,72,122,1:26,72,123,1:26,72,124,1:26,72,125,1:26,72,126,1:26,72,127,1:26,72,128,1:26,72,129,1:26,71,130,1:26,71,131,1:26,71,132,1:26,71,133,1:26,71,134,1:26,71,135,1:26,71,136,1:26,71,137,1:26,71,138,1:26,70,139,1:26,70,140,1:26,70,141,1:26,70,142,1:26,70,143,1:26,70,144,1:26,70,145,1:26,70,146,1:26,70,147,1:26,69,148,1:26,69,149,1:26,69,150,1:26,69,151,1:26,69,152,1:26,69,153,1:26,69,154,1:26,69,155,1:26,68,156,1:26,68,157,1:26,68,158,1:26,68,159,1:26,68,160,1:26,68,161,1:26,68,162,1:26,67,163,1:26,67,164,1:26,67,165,1:26,67,166,1:26,67,167,1:26,67,168,1:26,67,169,1:26,66,170,1:26,66,171,1:26,66,172,1:26,66,173,1:26,66,174,1:26,66,175,1:26,66,176,1:26,65,177,1:26,65,178,1:26,65,179,1:26,65,180,1:26,65,181,1:26,65,182,1:26,65,183,1:26,64,184,1:26,64,185,1:26,64,186,1:26,64,187,1:26,64,188,1:26,64,189,1:26,64,190,1:26,64,191,1:26,63,192,1:26,63,193,1:26,63,194,1:26,63,195,1:26,63,196,1:26,63,197,1:26,63,198,1:26,63,199,1:26,63,200,1:26,63,201,1:26,62,202,1:26,62,203,1:26,62,204,1:26,62,205,1:26,62,206,1:26,62,207,1:26,62,208,1:26,62,209,1:26,62,210,1:26,62,211,1:26,62,212,1:26,62,213,1:26,62,214,1:26,62,215,1:26,62,216,1:26,62,217,1:26,62,218,1:26,62,219,1:26,62,220,1:26,62,221,1:26,62,222,1:26,62,223,1:26,62,224,1:26,62,225,1:26,62,226,1:26,62,227,1:26,62,228,1:26,62,229,1:26,62,230,1:26,62,231,1:26,62,232,1:26,62,233,1:26,62,234,1:26,62,235,1:26,62,236,1:26,62,237,1:26,62,238,1:26,63,239,1:26,63,240,1:26,63,241,1:26,63,242,1:26,63,243,1:26,63,244,1:26,63,245,1:26,63,246,1:26,64,247,1:26,64,248,1:26,64,249,1:26,64,250,1:26,64,251,1:26,64,252,1:26,65,253,1:26,65,254,1:26,65,255,1:26,65,256,1:26,65,257,1:26,66,258,1:26,66,259,1:26,66,260,1:26,66,261,1:26,67,262,1:26,67,263,1:26,67,264,1:26,67,265,1:26,68,266,1:26,68,267,1:26,68,268,1:26,69,269,1:26,69,270,1:26,69,271,1:26,69,272,1:26,70,273,1:26,70,274,1:26,70,275,1:26,71,276,1:26,71,277,1:26,71,278,1:26,72,279,1:26,72,280,1:26,73,281,1:26,73,282,1:26,73,283,1:26,74,284,1:26,74,285,1:26,74,286,1:26,75,287,1:26,75,288,1:26,76,289,1:26,76,290,1:26,77,291,1:26,77,292,1:26,77,293,1:26,78,294,1:26,78,295,1:26,79,296,1:26,79,297,1:26,80,298,1:26,80,299,1:26,80,300,1:26,81,301,1:26,81,302,1:26,82,303,1:26,82,304,1:26,83,305,1:26,83,306,1:26,84,307,1:26,84,308,1:26,85,309,1:26,85,310,1:26,86,311,1:26,86,312,1:26,87,313,1:26,87,314,1:26,88,315,1:26,88,316,1:26,89,317,1:26,89,318,1:26,90,319,1:26,90,320,1:26,91,321,1:26,91,322,1:26,92,323,1:26,92,324,1:26,93,325,1:26,93,326,1:26,94,327,1:26,95,328,1:26,95,329,1:26,96,330,1:26,96,331,1:26,97,332,1:26,97,333,1:26,98,334,1:26,98,335,1:26,99,336,1:26,99,337,1:26,100,338,1:26,100,339,1:26,100,340,1:26,101,341,1:26,101,342,1:26,102,343,1:26,102,344,1:26,103,345,1:26,103,346,1:26,104,347,1:26,104,348,1:26,104,349,1:26,105,350,1:26,105,351,1:26,106,352,1:26,106,353,1:26,106,354,1:26,107,355,1:26,107,356,1:26,107,357,1:26,108,358,1:26,108,359,1:26,108,360,1:26,109,361,1:26,109,362,1:26,109,363,1:26,109,364,1:26,110,365,1:26,110,366,1:26,110,367,1:26,110,368,1:26,111,369,1:26,111,370,1:26,111,371,1:26,111,372,1:26,111,373,1:26,111,374,1:26,111,375,1:26,112,376,1:26,112,377,1:26,112,378,1:26,112,379,1:26,112,380,1:26,112,381,1:26,112,382,1:26,112,383,1:26,112,384,1:26,112,385,1:26,112,386,1:26,112,387,1:26,112,388,1:26,112,389,1:26,112,390,1:26,112,391,1:27,112,392,1:27,112,393,1:27,112,394,1:27,113,395,1:27,113,396,1:27,113,397,1:27,112,398,1:27,112,399,1:27,112,400,1:27,112,401,1:27,112,402,1:27,112,403,1:27,112,404,1:27,112,405,1:27,112,406,1:27,112,407,1:27,112,408,1:26,112,409,1:26,112,410,1:26,112,411,1:26,112,412,1:26,112,413,1:26,112,414,1:26,112,415,1:26,112,416,1:26,112,417,1:26,112,418,1:26,112,419,1:26,112,420,1:26,113,421,1:26,113,422,1:26,113,423,1:26,113,424,1:26,113,425,1:26,113,426,1:26,113,427,1:26,113,428,1:25,113,429,1:25,113,430,1:25,113,431,1:25,113,432,1:25,113,433,1:25,113,434,1:25,113,435,1:25,113,436,1:25,113,437,1:25,113,438,1:25,113,439,1:25,113,440,1:25,114,441,1:25,114,442,1:24,114,443,1:24,114,444,1:24,114,445,1:24,114,446,1:24,114,447,1:24,114,448,1:24,114,449,1:24,114,450,1:24,114,451,1:24,114,452,1:24,114,453,1:24,114,454,1:24,114,455,1:24,114,456,1:24,114,457,1:24,114,458,1:24,114,459,1:24,114,460,1:24,114,461,1:24,114,462,1:24,114,463,1:25,114,464,1:25,114,465,1:25,114,466,1:25,114,467,1:25,114,468,1:25,114,469,1:25,114,470,1:25,114,471,1:25,114,472,1:26,114,473,1:26,114,474,1:26,114,475,1:26,114,476,1:26,114,477,1:26,114,478,1:27,114,479,1:27,114,480,1:27,114,481,1:27,114,482,1:27,113,483,1:27,113,484,1:28,113,485,1:28,113,486,1:28,113,487,1:28,113,488,1:28,113,489,1:28,113,490,1:28,113,491,1:29,113,492,1:29,113,493,1:29,113,494,1:29,113,495,1:29,113,496,1:29,113,497,1:29,113,498,1:29,113,499,1:29,113,500,1:29,113,501,1:29,113,502,1:29,113,503,1:29,113,504,1:29,113,505,1:29,113,506,1:29,113,507,1:29,113,508,1:29,113,509,1:29,113,510,1:29,113,511,1:28,113,512,1:28,114,513,1:28,114,514,1:28,114,515,1:27,114,516,1:27,114,517,1:27,114,518,1:26,115,519,1:26,115,520,1:25,115,521,1:25,115,522,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 23,97,0,1:24,98,2,1:24,95,17,1:24,90,33,1:25,87,46,1:24,83,59,1:24,81,72,1:24,113,413,1:24,111,432,1:25,109,451,1:25,109,468,1:26,115,485,1:25,119,500,1:26,116,512,1:26,122,522,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject VG
os.makedirs(path_results + '/T2/VG')
os.chdir(path_results + '/T2/VG')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/VG/T1/01_0007_sc-mprage-1mm-2palliers-fov384-comp-sp-15/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 19,98,138,20:21,91,167,19:21,84,192,18:25,79,217,17:25,75,240,16:26,73,262,15:26,73,283,14:28,75,302,13:29,81,320,12:30,89,339,11:32,98,358,10:32,107,371,9:32,116,389,8:32,123,404,7:33,126,419,6:32,129,433,5:31,132,448,4:31,134,461,3:27,135,513,2:25,137,535,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 1,2 -start 11,71 -end 246,549')
f_crop = open('crop.txt', 'w')
f_crop.write('71,549,0,423,11,246')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 35,86,0,1:35,86,1,1:35,86,2,1:35,86,3,1:35,86,4,1:35,85,5,1:35,85,6,1:35,85,7,1:35,85,8,1:35,85,9,1:35,85,10,1:35,85,11,1:35,84,12,1:35,84,13,1:36,84,14,1:36,84,15,1:36,84,16,1:36,84,17,1:36,83,18,1:36,83,19,1:36,83,20,1:36,83,21,1:36,83,22,1:36,83,23,1:36,83,24,1:36,82,25,1:36,82,26,1:36,82,27,1:36,82,28,1:36,82,29,1:36,82,30,1:36,82,31,1:36,81,32,1:35,81,33,1:35,81,34,1:35,81,35,1:35,81,36,1:35,81,37,1:35,81,38,1:35,80,39,1:35,80,40,1:35,80,41,1:35,80,42,1:35,80,43,1:35,80,44,1:35,79,45,1:35,79,46,1:35,79,47,1:35,79,48,1:35,79,49,1:35,79,50,1:35,79,51,1:35,78,52,1:35,78,53,1:35,78,54,1:35,78,55,1:35,78,56,1:35,78,57,1:35,78,58,1:35,77,59,1:35,77,60,1:34,77,61,1:34,77,62,1:34,77,63,1:34,77,64,1:34,76,65,1:34,76,66,1:34,76,67,1:34,76,68,1:34,76,69,1:34,76,70,1:34,75,71,1:34,75,72,1:34,75,73,1:34,75,74,1:34,75,75,1:34,75,76,1:34,74,77,1:33,74,78,1:33,74,79,1:33,74,80,1:33,74,81,1:33,74,82,1:33,73,83,1:33,73,84,1:33,73,85,1:33,73,86,1:33,73,87,1:33,73,88,1:33,72,89,1:33,72,90,1:33,72,91,1:33,72,92,1:32,72,93,1:32,71,94,1:32,71,95,1:32,71,96,1:32,71,97,1:32,71,98,1:32,70,99,1:32,70,100,1:32,70,101,1:32,70,102,1:32,70,103,1:32,69,104,1:32,69,105,1:32,69,106,1:32,69,107,1:31,69,108,1:31,68,109,1:31,68,110,1:31,68,111,1:31,68,112,1:31,68,113,1:31,67,114,1:31,67,115,1:31,67,116,1:31,67,117,1:31,67,118,1:31,66,119,1:31,66,120,1:31,66,121,1:31,66,122,1:31,65,123,1:30,65,124,1:30,65,125,1:30,65,126,1:30,65,127,1:30,64,128,1:30,64,129,1:30,64,130,1:30,64,131,1:30,64,132,1:30,64,133,1:30,63,134,1:30,63,135,1:30,63,136,1:30,63,137,1:29,63,138,1:29,62,139,1:29,62,140,1:29,62,141,1:29,62,142,1:29,62,143,1:29,62,144,1:29,61,145,1:29,61,146,1:29,61,147,1:29,61,148,1:29,61,149,1:29,61,150,1:29,60,151,1:29,60,152,1:28,60,153,1:28,60,154,1:28,60,155,1:28,60,156,1:28,60,157,1:28,60,158,1:28,59,159,1:28,59,160,1:28,59,161,1:28,59,162,1:28,59,163,1:28,59,164,1:28,59,165,1:28,59,166,1:27,58,167,1:27,58,168,1:27,58,169,1:27,58,170,1:27,58,171,1:27,58,172,1:27,58,173,1:27,58,174,1:27,58,175,1:27,58,176,1:27,58,177,1:27,58,178,1:27,57,179,1:27,57,180,1:27,57,181,1:26,57,182,1:26,57,183,1:26,57,184,1:26,57,185,1:26,57,186,1:26,57,187,1:26,57,188,1:26,57,189,1:26,57,190,1:26,57,191,1:26,57,192,1:26,57,193,1:26,57,194,1:26,57,195,1:26,57,196,1:26,57,197,1:26,57,198,1:25,57,199,1:25,57,200,1:25,57,201,1:25,57,202,1:25,57,203,1:25,57,204,1:25,57,205,1:25,57,206,1:25,57,207,1:25,57,208,1:25,57,209,1:25,57,210,1:25,57,211,1:25,57,212,1:25,57,213,1:25,57,214,1:25,58,215,1:25,58,216,1:25,58,217,1:25,58,218,1:24,58,219,1:24,58,220,1:24,58,221,1:24,58,222,1:24,58,223,1:24,59,224,1:24,59,225,1:24,59,226,1:24,59,227,1:24,59,228,1:24,59,229,1:24,60,230,1:24,60,231,1:24,60,232,1:24,60,233,1:24,60,234,1:24,61,235,1:24,61,236,1:24,61,237,1:23,61,238,1:23,62,239,1:23,62,240,1:23,62,241,1:23,62,242,1:23,63,243,1:23,63,244,1:23,63,245,1:23,64,246,1:23,64,247,1:23,64,248,1:23,64,249,1:23,65,250,1:23,65,251,1:22,66,252,1:22,66,253,1:22,66,254,1:22,67,255,1:22,67,256,1:22,67,257,1:22,68,258,1:22,68,259,1:22,69,260,1:22,69,261,1:22,69,262,1:22,70,263,1:21,70,264,1:21,71,265,1:21,71,266,1:21,72,267,1:21,72,268,1:21,72,269,1:21,73,270,1:21,73,271,1:21,74,272,1:21,74,273,1:21,75,274,1:21,75,275,1:20,76,276,1:20,76,277,1:20,77,278,1:20,77,279,1:20,78,280,1:20,78,281,1:20,79,282,1:20,79,283,1:20,80,284,1:20,80,285,1:20,81,286,1:20,81,287,1:20,82,288,1:20,82,289,1:20,83,290,1:19,83,291,1:19,84,292,1:19,84,293,1:19,85,294,1:19,85,295,1:19,86,296,1:19,86,297,1:19,87,298,1:19,87,299,1:19,88,300,1:19,88,301,1:19,89,302,1:19,89,303,1:19,90,304,1:19,90,305,1:19,91,306,1:19,91,307,1:19,92,308,1:19,92,309,1:19,93,310,1:18,93,311,1:18,94,312,1:18,94,313,1:18,95,314,1:18,95,315,1:18,96,316,1:18,96,317,1:18,97,318,1:18,97,319,1:18,98,320,1:18,98,321,1:18,98,322,1:18,99,323,1:18,99,324,1:18,100,325,1:18,100,326,1:18,101,327,1:18,101,328,1:18,101,329,1:18,102,330,1:18,102,331,1:18,103,332,1:18,103,333,1:18,103,334,1:18,104,335,1:18,104,336,1:18,104,337,1:18,105,338,1:18,105,339,1:18,106,340,1:18,106,341,1:18,106,342,1:18,106,343,1:18,107,344,1:18,107,345,1:18,107,346,1:18,108,347,1:18,108,348,1:18,108,349,1:18,108,350,1:18,109,351,1:18,109,352,1:18,109,353,1:18,109,354,1:18,110,355,1:18,110,356,1:18,110,357,1:18,110,358,1:18,111,359,1:18,111,360,1:18,111,361,1:18,111,362,1:18,111,363,1:18,112,364,1:18,112,365,1:18,112,366,1:18,112,367,1:18,112,368,1:19,113,369,1:19,113,370,1:19,113,371,1:19,113,372,1:19,113,373,1:19,113,374,1:19,114,375,1:19,114,376,1:19,114,377,1:19,114,378,1:19,114,379,1:19,114,380,1:19,115,381,1:19,115,382,1:19,115,383,1:19,115,384,1:19,115,385,1:19,115,386,1:19,115,387,1:19,116,388,1:19,116,389,1:19,116,390,1:19,116,391,1:19,116,392,1:19,116,393,1:19,116,394,1:19,117,395,1:19,117,396,1:19,117,397,1:19,117,398,1:19,117,399,1:19,117,400,1:19,117,401,1:19,117,402,1:19,118,403,1:20,118,404,1:20,118,405,1:20,118,406,1:20,118,407,1:20,118,408,1:20,118,409,1:20,118,410,1:20,119,411,1:20,119,412,1:20,119,413,1:20,119,414,1:20,119,415,1:20,119,416,1:20,119,417,1:20,119,418,1:20,119,419,1:20,120,420,1:20,120,421,1:20,120,422,1:20,120,423,1:20,120,424,1:20,120,425,1:20,120,426,1:20,120,427,1:21,120,428,1:21,120,429,1:21,120,430,1:21,120,431,1:21,120,432,1:21,121,433,1:21,121,434,1:21,121,435,1:21,121,436,1:21,121,437,1:21,121,438,1:21,121,439,1:21,121,440,1:21,121,441,1:21,121,442,1:22,121,443,1:22,121,444,1:22,121,445,1:22,121,446,1:22,121,447,1:22,121,448,1:22,121,449,1:22,121,450,1:22,121,451,1:22,121,452,1:22,121,453,1:23,121,454,1:23,121,455,1:23,121,456,1:23,121,457,1:23,121,458,1:23,121,459,1:23,121,460,1:23,121,461,1:23,121,462,1:24,121,463,1:24,121,464,1:24,121,465,1:24,121,466,1:24,121,467,1:24,121,468,1:24,121,469,1:25,121,470,1:25,121,471,1:25,121,472,1:25,121,473,1:25,121,474,1:25,121,475,1:26,120,476,1:26,120,477,1:26,120,478,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 16,86,0,1:17,86,4,1:16,83,24,1:16,79,41,1:17,79,59,1:33,108,350,1:33,112,366,1:32,115,382,1:31,116,401,1:30,117,420,1:28,120,435,1:27,127,454,1:25,121,469,1:24,126,478,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject VP
os.makedirs(path_results + '/T2/VP')
os.chdir(path_results + '/T2/VP')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/VP/01_0011_sc-mprage-1mm-2palliers-fov384-comp-sp-25/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 29,104,37,20:29,95,71,19:28,87,101,18:28,84,129,17:27,82,157,16:27,83,183,15:27,85,207,14:27,88,231,13:28,93,254,12:27,97,274,11:27,105,294,10:25,116,313,9:23,127,332,8:21,135,351,7:19,139,369,6:18,141,385,5:15,140,404,4:13,139,423,3:12,124,484,2:13,124,512,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  30 -end 528 ')
f_crop = open('crop.txt', 'w')
f_crop.write('30,528,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 22,103,0,1:22,103,1,1:22,102,2,1:22,102,3,1:22,102,4,1:22,101,5,1:22,101,6,1:22,101,7,1:22,100,8,1:22,100,9,1:22,99,10,1:22,99,11,1:22,99,12,1:22,98,13,1:22,98,14,1:22,98,15,1:22,97,16,1:22,97,17,1:22,97,18,1:22,96,19,1:22,96,20,1:22,96,21,1:22,95,22,1:22,95,23,1:22,95,24,1:22,94,25,1:22,94,26,1:22,94,27,1:22,94,28,1:22,93,29,1:22,93,30,1:22,93,31,1:22,92,32,1:22,92,33,1:22,92,34,1:22,92,35,1:22,91,36,1:22,91,37,1:22,91,38,1:22,91,39,1:22,90,40,1:22,90,41,1:22,90,42,1:22,90,43,1:22,90,44,1:22,89,45,1:22,89,46,1:22,89,47,1:22,89,48,1:22,89,49,1:22,88,50,1:22,88,51,1:22,88,52,1:22,88,53,1:22,88,54,1:22,87,55,1:22,87,56,1:22,87,57,1:22,87,58,1:22,87,59,1:22,86,60,1:22,86,61,1:22,86,62,1:22,86,63,1:22,86,64,1:22,86,65,1:22,85,66,1:22,85,67,1:22,85,68,1:22,85,69,1:22,85,70,1:22,85,71,1:22,85,72,1:22,84,73,1:22,84,74,1:22,84,75,1:21,84,76,1:21,84,77,1:21,84,78,1:21,84,79,1:21,83,80,1:21,83,81,1:21,83,82,1:21,83,83,1:21,83,84,1:21,83,85,1:21,83,86,1:21,83,87,1:21,82,88,1:21,82,89,1:21,82,90,1:21,82,91,1:21,82,92,1:21,82,93,1:21,82,94,1:21,82,95,1:21,82,96,1:21,81,97,1:21,81,98,1:21,81,99,1:21,81,100,1:21,81,101,1:21,81,102,1:21,81,103,1:21,81,104,1:21,81,105,1:21,80,106,1:21,80,107,1:21,80,108,1:21,80,109,1:21,80,110,1:21,80,111,1:21,80,112,1:21,80,113,1:21,80,114,1:21,79,115,1:21,79,116,1:21,79,117,1:21,79,118,1:21,79,119,1:21,79,120,1:21,79,121,1:21,79,122,1:21,79,123,1:21,79,124,1:21,78,125,1:21,78,126,1:21,78,127,1:21,78,128,1:21,78,129,1:21,78,130,1:21,78,131,1:21,78,132,1:21,78,133,1:21,78,134,1:21,77,135,1:21,77,136,1:21,77,137,1:21,77,138,1:21,77,139,1:21,77,140,1:21,77,141,1:21,77,142,1:21,77,143,1:21,77,144,1:21,77,145,1:21,77,146,1:21,77,147,1:21,77,148,1:21,77,149,1:21,76,150,1:21,76,151,1:21,76,152,1:21,76,153,1:21,76,154,1:21,76,155,1:21,76,156,1:22,76,157,1:22,76,158,1:22,76,159,1:22,76,160,1:22,76,161,1:22,76,162,1:22,76,163,1:22,76,164,1:22,76,165,1:22,76,166,1:22,76,167,1:22,76,168,1:22,76,169,1:22,76,170,1:22,76,171,1:22,76,172,1:22,76,173,1:22,76,174,1:22,76,175,1:22,76,176,1:22,76,177,1:22,76,178,1:22,76,179,1:22,76,180,1:22,76,181,1:23,76,182,1:23,76,183,1:23,77,184,1:23,77,185,1:23,77,186,1:23,77,187,1:23,77,188,1:23,77,189,1:23,77,190,1:23,77,191,1:23,77,192,1:23,77,193,1:23,77,194,1:23,77,195,1:23,77,196,1:23,77,197,1:23,77,198,1:23,78,199,1:23,78,200,1:23,78,201,1:23,78,202,1:23,78,203,1:23,78,204,1:23,78,205,1:23,78,206,1:23,78,207,1:24,78,208,1:24,79,209,1:24,79,210,1:24,79,211,1:24,79,212,1:24,79,213,1:24,79,214,1:24,79,215,1:24,79,216,1:24,80,217,1:24,80,218,1:24,80,219,1:24,80,220,1:24,80,221,1:24,80,222,1:24,80,223,1:24,80,224,1:24,81,225,1:24,81,226,1:24,81,227,1:24,81,228,1:24,81,229,1:24,81,230,1:24,82,231,1:24,82,232,1:24,82,233,1:24,82,234,1:24,82,235,1:24,82,236,1:24,83,237,1:24,83,238,1:24,83,239,1:24,83,240,1:24,83,241,1:24,84,242,1:24,84,243,1:24,84,244,1:24,84,245,1:24,84,246,1:24,85,247,1:24,85,248,1:24,85,249,1:24,85,250,1:24,86,251,1:24,86,252,1:24,86,253,1:24,86,254,1:24,87,255,1:24,87,256,1:24,87,257,1:24,87,258,1:24,88,259,1:24,88,260,1:24,88,261,1:24,88,262,1:24,89,263,1:24,89,264,1:24,89,265,1:24,90,266,1:24,90,267,1:24,90,268,1:24,90,269,1:24,91,270,1:24,91,271,1:24,91,272,1:24,92,273,1:24,92,274,1:24,92,275,1:24,93,276,1:24,93,277,1:24,93,278,1:24,94,279,1:24,94,280,1:24,94,281,1:24,95,282,1:24,95,283,1:24,96,284,1:24,96,285,1:24,96,286,1:24,97,287,1:24,97,288,1:24,97,289,1:24,98,290,1:24,98,291,1:24,99,292,1:24,99,293,1:24,99,294,1:24,100,295,1:24,100,296,1:24,101,297,1:24,101,298,1:24,101,299,1:24,102,300,1:24,102,301,1:24,103,302,1:24,103,303,1:24,103,304,1:24,104,305,1:24,104,306,1:24,105,307,1:24,105,308,1:24,106,309,1:24,106,310,1:24,106,311,1:25,107,312,1:25,107,313,1:25,108,314,1:25,108,315,1:25,109,316,1:25,109,317,1:25,110,318,1:25,110,319,1:25,111,320,1:25,111,321,1:25,111,322,1:25,112,323,1:25,112,324,1:25,113,325,1:25,113,326,1:26,114,327,1:26,114,328,1:26,115,329,1:26,115,330,1:26,116,331,1:26,116,332,1:26,116,333,1:26,117,334,1:26,117,335,1:26,118,336,1:27,118,337,1:27,119,338,1:27,119,339,1:27,120,340,1:27,120,341,1:27,120,342,1:27,121,343,1:27,121,344,1:27,122,345,1:28,122,346,1:28,122,347,1:28,123,348,1:28,123,349,1:28,124,350,1:28,124,351,1:28,124,352,1:28,125,353,1:29,125,354,1:29,125,355,1:29,126,356,1:29,126,357,1:29,126,358,1:29,127,359,1:29,127,360,1:29,127,361,1:30,127,362,1:30,128,363,1:30,128,364,1:30,128,365,1:30,128,366,1:30,129,367,1:30,129,368,1:30,129,369,1:31,129,370,1:31,130,371,1:31,130,372,1:31,130,373,1:31,130,374,1:31,130,375,1:31,130,376,1:31,130,377,1:32,130,378,1:32,131,379,1:32,131,380,1:32,131,381,1:32,131,382,1:32,131,383,1:32,131,384,1:32,131,385,1:33,131,386,1:33,131,387,1:33,131,388,1:33,131,389,1:33,131,390,1:33,131,391,1:33,131,392,1:33,131,393,1:33,131,394,1:34,131,395,1:34,131,396,1:34,131,397,1:34,131,398,1:34,131,399,1:34,130,400,1:34,130,401,1:34,130,402,1:34,130,403,1:35,130,404,1:35,130,405,1:35,130,406,1:35,130,407,1:35,130,408,1:35,130,409,1:35,130,410,1:35,130,411,1:35,129,412,1:35,129,413,1:36,129,414,1:36,129,415,1:36,129,416,1:36,129,417,1:36,129,418,1:36,129,419,1:36,129,420,1:36,129,421,1:36,128,422,1:36,128,423,1:36,128,424,1:37,128,425,1:37,128,426,1:37,128,427,1:37,128,428,1:37,128,429,1:37,128,430,1:37,128,431,1:37,128,432,1:37,128,433,1:37,127,434,1:37,127,435,1:37,127,436,1:37,127,437,1:38,127,438,1:38,127,439,1:38,127,440,1:38,127,441,1:38,127,442,1:38,127,443,1:38,127,444,1:38,127,445,1:38,127,446,1:38,127,447,1:38,127,448,1:38,127,449,1:38,127,450,1:38,127,451,1:38,127,452,1:38,127,453,1:38,127,454,1:38,127,455,1:39,127,456,1:39,127,457,1:39,127,458,1:39,127,459,1:39,127,460,1:39,126,461,1:39,126,462,1:39,126,463,1:39,126,464,1:39,126,465,1:39,126,466,1:39,126,467,1:39,126,468,1:39,126,469,1:39,126,470,1:39,126,471,1:39,126,472,1:39,126,473,1:39,126,474,1:39,126,475,1:39,126,476,1:39,126,477,1:39,126,478,1:39,127,479,1:39,127,480,1:39,127,481,1:39,127,482,1:39,127,483,1:39,127,484,1:39,127,485,1:39,127,486,1:39,127,487,1:39,127,488,1:39,127,489,1:39,127,490,1:39,127,491,1:39,127,492,1:39,127,493,1:39,127,494,1:39,127,495,1:39,127,496,1:39,127,497,1:39,127,498,1:39,127,499,1:39,127,500,1:39,127,501,1:39,127,502,1:39,127,503,1:39,127,504,1:39,127,505,1:39,127,506,1:39,127,507,1:39,127,508,1:39,127,509,1:39,127,510,1:39,127,511,1:39,127,512,1:39,127,513,1:39,127,514,1:39,128,515,1:39,128,516,1:39,128,517,1:39,128,518,1:39,128,519,1:39,128,520,1:39,128,521,1:39,128,522,1:39,128,523,1:39,128,524,1:39,128,525,1:39,128,526,1:39,128,527,1:38,128,528,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 28,92,1,1:29,88,21,1:29,84,42,1:29,81,60,1:29,79,80,1:29,77,101,1:28,76,120,1:28,76,141,1:28,76,159,1:27,78,182,1:27,82,202,1:26,85,221,1:22,125,323,1:20,130,341,1:18,131,358,1:16,131,375,1:14,128,395,1:12,124,413,1:12,121,430,1:11,122,447,1:11,125,465,1:12,123,479,1:12,124,498,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject pain_pilot_1
os.makedirs(path_results + '/T2/pain_pilot_1')
os.chdir(path_results + '/T2/pain_pilot_1')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/d_sp_pain_pilot1/24-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 24,157,95,20:24,153,127,19:24,149,157,18:23,146,184,17:24,145,210,16:24,144,235,15:23,145,259,14:23,148,282,13:24,152,305,12:25,159,326,11:25,165,349,10:25,171,368,9:25,174,389,8:25,175,406,7:23,175,422,6:23,175,439,5:23,176,456,4:22,176,472,3:23,170,527,2:22,173,551,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  17 -end 585 ')
f_crop = open('crop.txt', 'w')
f_crop.write('17,585,101,478')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 21,148,0,1:21,148,10,1:22,148,20,1:23,146,32,1:23,145,42,1:23,145,54,1:23,144,64,1:23,144,75,1:23,143,88,1:23,142,98,1:23,141,107,1:23,162,472,1:24,162,477,1:24,161,487,1:24,162,494,1:23,167,505,1:23,170,512,1:23,173,521,1:23,175,529,1:24,177,539,1:23,182,568,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject pain_pilot_2
os.makedirs(path_results + '/T2/pain_pilot_2')
os.chdir(path_results + '/T2/pain_pilot_2')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/d_sp_pain_pilot2/13-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 23,143,53,20:20,139,85,19:20,140,113,18:19,138,140,17:19,137,164,16:19,137,189,15:19,138,214,14:19,139,238,13:19,143,262,12:19,149,284,11:19,155,305,10:21,163,325,9:22,171,345,8:23,175,365,7:22,177,384,6:21,175,402,5:19,176,420,4:16,176,440,3:16,172,502,2:20,182,524,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  0 -end 562 ')
f_crop = open('crop.txt', 'w')
f_crop.write('0,562,77,477')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 26,136,0,1:26,136,9,1:26,136,15,1:24,135,24,1:24,136,32,1:23,134,43,1:22,134,53,1:22,133,60,1:22,133,68,1:21,133,74,1:21,133,80,1:15,164,473,1:15,164,477,1:14,165,484,1:14,167,491,1:15,169,499,1:16,175,508,1:18,179,520,1:19,179,528,1:18,187,540,1:18,193,557,1:22,197,562,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject pain_pilot_4
os.makedirs(path_results + '/T2/pain_pilot_4')
os.chdir(path_results + '/T2/pain_pilot_4')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/d_sp_pain_pilot4/33-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 18,132,94,20:18,129,125,19:19,127,154,18:20,125,182,17:21,124,209,16:21,123,234,15:21,124,259,14:21,127,283,13:24,132,305,12:28,140,327,11:28,146,348,10:25,155,368,9:24,162,387,8:21,166,405,7:21,168,422,6:22,169,440,5:21,170,458,4:21,171,477,3:21,180,546,2:22,187,567,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  16 -end 585 ')
f_crop = open('crop.txt', 'w')
f_crop.write('16,585,97,509')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 15,130,0,1:15,129,8,1:16,127,18,1:16,127,25,1:16,125,35,1:17,123,45,1:16,122,53,1:17,122,63,1:17,121,74,1:17,121,82,1:18,120,91,1:18,120,99,1:21,167,499,1:21,169,506,1:21,171,513,1:21,174,522,1:21,180,531,1:22,183,540,1:21,184,548,1:23,188,560,1:21,189,569,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject TM
os.makedirs(path_results + '/T2/TM')
os.chdir(path_results + '/T2/TM')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/TM_T057c/01_0007_sc-mprage-1mm-2palliers-fov384-comp-sp-5/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 32,101,20,20:31,94,56,19:31,88,88,18:30,84,117,17:28,82,145,16:29,80,171,15:28,81,197,14:28,85,222,13:28,91,247,12:29,98,270,11:29,109,291,10:28,122,310,9:28,134,329,8:28,141,347,7:27,143,365,6:27,143,385,5:25,142,403,4:24,139,422,3:22,119,484,2:22,118,511,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  1 -end 532 ')
f_crop = open('crop.txt', 'w')
f_crop.write('1,532,74,489')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 33,93,0,1:33,91,17,1:33,87,29,1:32,84,48,1:32,84,50,1:31,83,58,1:31,82,65,1:30,81,72,1:30,80,79,1:31,80,83,1:31,79,88,1:30,78,89,1:31,78,93,1:30,78,99,1:29,76,119,1:29,76,123,1:29,75,126,1:28,75,132,1:29,74,151,1:29,74,160,1:29,74,172,1:29,74,182,1:28,75,198,1:28,78,219,1:28,80,224,1:28,80,227,1:28,84,244,1:28,92,267,1:28,94,271,1:28,97,278,1:28,99,282,1:28,109,300,1:28,109,301,1:27,123,326,1:27,126,332,1:27,127,336,1:27,133,353,1:27,134,360,1:26,134,377,1:25,133,398,1:25,132,403,1:24,127,423,1:24,122,439,1:24,118,452,1:23,115,466,1:23,116,477,1:22,117,484,1:22,119,501,1:21,120,531,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_20
os.makedirs(path_results + '/T2/errsm_20')
os.chdir(path_results + '/T2/errsm_20')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_20/12-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 24,134,118,20:25,124,151,19:25,116,182,18:24,113,211,17:23,111,240,16:22,112,267,15:21,117,296,14:20,125,321,13:20,136,345,12:20,150,364,11:20,164,382,10:21,182,398,9:22,195,414,8:23,203,430,7:24,206,446,6:24,206,463,5:24,202,480,4:23,199,498,3:23,189,562,2:23,195,590,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  39 -end 604 ')
f_crop = open('crop.txt', 'w')
f_crop.write('39,604,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 24,145,0,1:24,144,1,1:24,144,2,1:23,144,3,1:23,143,4,1:23,143,5,1:23,143,6,1:23,142,7,1:23,142,8,1:23,142,9,1:23,141,10,1:23,141,11,1:23,141,12,1:23,141,13,1:23,140,14,1:23,140,15,1:23,140,16,1:23,139,17,1:23,139,18,1:23,139,19,1:23,138,20,1:23,138,21,1:23,138,22,1:23,137,23,1:23,137,24,1:23,137,25,1:23,137,26,1:23,136,27,1:23,136,28,1:23,136,29,1:23,135,30,1:23,135,31,1:23,135,32,1:23,135,33,1:23,134,34,1:23,134,35,1:23,134,36,1:23,133,37,1:23,133,38,1:23,133,39,1:23,133,40,1:23,132,41,1:23,132,42,1:23,132,43,1:23,131,44,1:23,131,45,1:23,131,46,1:23,131,47,1:23,130,48,1:23,130,49,1:23,130,50,1:23,130,51,1:23,129,52,1:23,129,53,1:24,129,54,1:24,128,55,1:24,128,56,1:24,128,57,1:24,128,58,1:24,127,59,1:24,127,60,1:24,127,61,1:24,127,62,1:24,126,63,1:24,126,64,1:24,126,65,1:24,126,66,1:24,125,67,1:24,125,68,1:24,125,69,1:24,125,70,1:24,124,71,1:24,124,72,1:24,124,73,1:24,124,74,1:24,123,75,1:24,123,76,1:24,123,77,1:24,123,78,1:24,123,79,1:24,122,80,1:24,122,81,1:24,122,82,1:24,122,83,1:24,121,84,1:24,121,85,1:24,121,86,1:24,121,87,1:24,120,88,1:24,120,89,1:24,120,90,1:24,120,91,1:24,120,92,1:24,119,93,1:24,119,94,1:24,119,95,1:24,119,96,1:24,119,97,1:24,118,98,1:24,118,99,1:24,118,100,1:24,118,101,1:24,117,102,1:24,117,103,1:25,117,104,1:25,117,105,1:25,117,106,1:25,116,107,1:25,116,108,1:25,116,109,1:25,116,110,1:25,116,111,1:25,115,112,1:25,115,113,1:25,115,114,1:25,115,115,1:25,115,116,1:25,114,117,1:25,114,118,1:25,114,119,1:25,114,120,1:25,114,121,1:25,114,122,1:25,113,123,1:25,113,124,1:25,113,125,1:25,113,126,1:25,113,127,1:25,113,128,1:25,112,129,1:25,112,130,1:25,112,131,1:25,112,132,1:25,112,133,1:25,111,134,1:25,111,135,1:25,111,136,1:25,111,137,1:25,111,138,1:25,111,139,1:25,111,140,1:25,110,141,1:25,110,142,1:25,110,143,1:25,110,144,1:25,110,145,1:25,110,146,1:25,110,147,1:25,109,148,1:25,109,149,1:25,109,150,1:25,109,151,1:25,109,152,1:25,109,153,1:25,109,154,1:25,108,155,1:25,108,156,1:25,108,157,1:25,108,158,1:25,108,159,1:25,108,160,1:25,108,161,1:25,108,162,1:25,108,163,1:25,107,164,1:25,107,165,1:25,107,166,1:25,107,167,1:25,107,168,1:25,107,169,1:25,107,170,1:25,107,171,1:25,107,172,1:25,107,173,1:25,106,174,1:26,106,175,1:26,106,176,1:26,106,177,1:26,106,178,1:26,106,179,1:26,106,180,1:26,106,181,1:26,106,182,1:26,106,183,1:26,106,184,1:26,106,185,1:26,106,186,1:26,106,187,1:26,106,188,1:26,105,189,1:26,105,190,1:26,105,191,1:26,105,192,1:26,105,193,1:26,105,194,1:26,105,195,1:26,105,196,1:26,105,197,1:26,105,198,1:26,105,199,1:26,105,200,1:26,105,201,1:26,105,202,1:26,105,203,1:26,105,204,1:26,105,205,1:26,105,206,1:26,105,207,1:26,105,208,1:26,105,209,1:26,105,210,1:26,105,211,1:26,105,212,1:26,106,213,1:26,106,214,1:26,106,215,1:26,106,216,1:26,106,217,1:26,106,218,1:26,106,219,1:26,106,220,1:26,106,221,1:26,106,222,1:26,106,223,1:26,106,224,1:27,106,225,1:27,106,226,1:27,107,227,1:27,107,228,1:27,107,229,1:27,107,230,1:27,107,231,1:27,107,232,1:27,107,233,1:27,107,234,1:27,108,235,1:27,108,236,1:27,108,237,1:27,108,238,1:27,108,239,1:27,108,240,1:27,109,241,1:27,109,242,1:27,109,243,1:27,109,244,1:27,109,245,1:27,110,246,1:27,110,247,1:27,110,248,1:27,110,249,1:27,110,250,1:27,111,251,1:27,111,252,1:27,111,253,1:27,111,254,1:27,112,255,1:27,112,256,1:27,112,257,1:28,112,258,1:28,113,259,1:28,113,260,1:28,113,261,1:28,114,262,1:28,114,263,1:28,114,264,1:28,114,265,1:28,115,266,1:28,115,267,1:28,115,268,1:28,116,269,1:28,116,270,1:28,116,271,1:28,117,272,1:28,117,273,1:28,117,274,1:28,118,275,1:28,118,276,1:28,118,277,1:28,119,278,1:28,119,279,1:28,120,280,1:28,120,281,1:28,120,282,1:28,121,283,1:28,121,284,1:28,122,285,1:28,122,286,1:28,122,287,1:28,123,288,1:28,123,289,1:28,124,290,1:28,124,291,1:28,125,292,1:28,125,293,1:28,125,294,1:28,126,295,1:28,126,296,1:28,127,297,1:28,127,298,1:28,128,299,1:28,128,300,1:28,129,301,1:28,129,302,1:28,130,303,1:28,130,304,1:28,131,305,1:28,131,306,1:28,132,307,1:28,132,308,1:28,133,309,1:28,134,310,1:28,134,311,1:28,135,312,1:28,135,313,1:28,136,314,1:28,136,315,1:28,137,316,1:28,138,317,1:28,138,318,1:28,139,319,1:28,139,320,1:28,140,321,1:28,141,322,1:28,141,323,1:28,142,324,1:28,143,325,1:28,143,326,1:28,144,327,1:28,145,328,1:28,145,329,1:28,146,330,1:28,147,331,1:28,147,332,1:28,148,333,1:28,149,334,1:28,150,335,1:28,150,336,1:28,151,337,1:28,152,338,1:28,153,339,1:28,153,340,1:28,154,341,1:28,155,342,1:28,156,343,1:28,156,344,1:28,157,345,1:28,158,346,1:28,159,347,1:28,160,348,1:28,161,349,1:28,161,350,1:28,162,351,1:28,163,352,1:28,164,353,1:28,165,354,1:27,166,355,1:27,166,356,1:27,167,357,1:27,168,358,1:27,169,359,1:27,170,360,1:27,171,361,1:27,171,362,1:27,172,363,1:27,173,364,1:27,174,365,1:27,175,366,1:27,176,367,1:27,176,368,1:27,177,369,1:27,178,370,1:27,179,371,1:27,180,372,1:27,180,373,1:27,181,374,1:27,182,375,1:27,183,376,1:27,183,377,1:27,184,378,1:27,185,379,1:27,185,380,1:27,186,381,1:27,187,382,1:27,187,383,1:27,188,384,1:27,189,385,1:27,189,386,1:27,190,387,1:27,190,388,1:27,191,389,1:27,191,390,1:27,192,391,1:27,192,392,1:27,193,393,1:27,193,394,1:27,194,395,1:27,194,396,1:27,194,397,1:27,195,398,1:27,195,399,1:27,195,400,1:27,196,401,1:27,196,402,1:26,196,403,1:26,196,404,1:26,197,405,1:26,197,406,1:26,197,407,1:26,197,408,1:26,197,409,1:26,197,410,1:26,197,411,1:26,197,412,1:26,197,413,1:26,198,414,1:26,198,415,1:26,198,416,1:26,197,417,1:26,197,418,1:26,197,419,1:26,197,420,1:26,197,421,1:26,197,422,1:26,197,423,1:26,197,424,1:26,197,425,1:26,197,426,1:26,196,427,1:26,196,428,1:26,196,429,1:26,196,430,1:26,196,431,1:26,196,432,1:26,195,433,1:26,195,434,1:26,195,435,1:26,195,436,1:26,195,437,1:26,194,438,1:26,194,439,1:26,194,440,1:26,194,441,1:26,193,442,1:26,193,443,1:26,193,444,1:26,193,445,1:26,192,446,1:26,192,447,1:26,192,448,1:26,192,449,1:26,191,450,1:26,191,451,1:26,191,452,1:25,191,453,1:25,190,454,1:25,190,455,1:25,190,456,1:25,190,457,1:25,189,458,1:25,189,459,1:25,189,460,1:25,189,461,1:25,189,462,1:25,188,463,1:25,188,464,1:25,188,465,1:25,188,466,1:25,188,467,1:25,187,468,1:25,187,469,1:25,187,470,1:25,187,471,1:25,187,472,1:25,187,473,1:25,186,474,1:25,186,475,1:25,186,476,1:25,186,477,1:25,186,478,1:25,186,479,1:25,186,480,1:25,186,481,1:25,185,482,1:25,185,483,1:25,185,484,1:25,185,485,1:25,185,486,1:25,185,487,1:25,185,488,1:25,185,489,1:25,185,490,1:25,185,491,1:25,184,492,1:25,184,493,1:25,184,494,1:25,184,495,1:25,184,496,1:25,184,497,1:25,184,498,1:25,184,499,1:25,184,500,1:25,184,501,1:25,184,502,1:25,184,503,1:25,184,504,1:25,184,505,1:25,184,506,1:25,184,507,1:25,184,508,1:25,184,509,1:25,184,510,1:25,184,511,1:25,184,512,1:25,184,513,1:25,184,514,1:25,184,515,1:25,184,516,1:25,184,517,1:25,184,518,1:25,184,519,1:25,184,520,1:25,184,521,1:25,184,522,1:25,184,523,1:25,184,524,1:25,184,525,1:25,184,526,1:25,184,527,1:25,184,528,1:25,184,529,1:25,184,530,1:25,184,531,1:25,184,532,1:25,184,533,1:25,184,534,1:25,185,535,1:25,185,536,1:25,185,537,1:25,185,538,1:25,185,539,1:25,185,540,1:25,185,541,1:25,185,542,1:25,185,543,1:25,185,544,1:25,185,545,1:25,185,546,1:25,185,547,1:25,186,548,1:25,186,549,1:25,186,550,1:25,186,551,1:25,186,552,1:25,186,553,1:25,186,554,1:25,186,555,1:25,186,556,1:25,187,557,1:25,187,558,1:25,187,559,1:25,187,560,1:25,187,561,1:25,187,562,1:25,187,563,1:25,187,564,1:25,188,565,1')
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 23,196,426,1:23,195,433,1:24,191,449,1:24,187,466,1:25,183,484,1:25,182,499,1:24,184,515,1:25,192,531,1:25,194,544,1:23,196,555,1:23,200,565,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject pain_pilot_3
os.makedirs(path_results + '/T2/pain_pilot_3')
os.chdir(path_results + '/T2/pain_pilot_3')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/d_sp_pain_pilot3/16-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 15,119,95,20:16,118,128,19:16,119,159,18:19,121,186,17:21,122,212,16:22,123,237,15:23,125,261,14:25,129,286,13:26,135,308,12:27,141,330,11:27,149,349,10:27,161,367,9:26,169,385,8:26,176,402,7:25,181,418,6:25,184,434,5:25,189,450,4:26,189,468,3:30,185,527,2:33,191,554,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  18 -end 605 ')
f_crop = open('crop.txt', 'w')
f_crop.write('18,605,74,489')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_updown.nii.gz')
sct.run('sct_label_utils -i labels_updown.nii.gz -o labels_updown.nii.gz -t create -x 13,117,0,1:13,116,6,1:13,114,14,1:14,113,21,1:14,111,29,1:14,111,36,1:14,109,47,1:15,108,58,1:15,108,67,1:15,107,74,1:28,177,482,1:28,178,489,1:29,178,495,1:29,181,503,1:30,184,514,1:30,188,523,1:31,190,530,1:33,191,540,1:34,195,550,1:35,200,564,1:36,200,579,1:36,202,587,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_34
os.makedirs(path_results + '/T2/errsm_34')
os.chdir(path_results + '/T2/errsm_34')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_34/41-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 19,132,107,20:20,129,140,19:23,126,170,18:24,123,198,17:25,120,223,16:26,118,247,15:28,118,273,14:28,120,295,13:28,125,318,12:28,131,341,11:27,138,362,10:27,150,381,9:27,161,399,8:26,166,417,7:25,170,434,6:24,173,453,5:23,177,472,4:21,183,490,3:20,186,557,2:20,190,581,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  36 -end 598 ')
f_crop = open('crop.txt', 'w')
f_crop.write('36,598,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 16,126,0,1:18,123,23,1:18,122,55,1:20,121,84,1:22,120,108,1:23,118,137,1:24,116,157,1:25,115,177,1:26,113,203,1:27,112,227,1:27,114,251,1:28,119,282,1:28,131,320,1:27,152,365,1:25,163,401,1:23,169,431,1:21,175,478,1:21,177,495,1:20,186,523,1:19,190,538,1:20,195,562,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_35
os.makedirs(path_results + '/T2/errsm_35')
os.chdir(path_results + '/T2/errsm_35')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_35/37-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 24,128,83,20:22,122,114,19:22,118,144,18:21,115,172,17:20,113,197,16:20,113,223,15:19,114,247,14:18,117,271,13:18,122,293,12:18,127,314,11:19,132,333,10:20,141,351,9:18,150,369,8:17,154,384,7:18,157,399,6:18,159,415,5:19,161,431,4:19,164,448,3:22,172,508,2:23,182,530,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  16 -end 550 ')
f_crop = open('crop.txt', 'w')
f_crop.write('16,550,59,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 25,122,0,1:25,116,34,1:22,112,77,1:22,110,116,1:21,107,149,1:19,107,185,1:19,107,214,1:18,111,250,1:18,119,290,1:19,128,323,1:18,138,352,1:18,147,381,1:18,153,418,1:20,154,450,1:21,160,474,1:22,167,489,1:23,178,502,1:24,182,513,1:24,194,534,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject pain_pilot_7
os.makedirs(path_results + '/T2/pain_pilot_7')
os.chdir(path_results + '/T2/pain_pilot_7')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/d_sp_pain_pilot7/32-SPINE_T1/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 34,143,82,20:32,135,115,19:31,129,143,18:29,123,169,17:27,118,195,16:26,115,221,15:25,113,246,14:22,116,271,13:21,121,295,12:21,130,317,11:21,140,339,10:19,151,359,9:19,163,379,8:19,171,397,7:20,177,416,6:22,182,434,5:23,187,453,4:25,190,473,3:25,185,535,2:25,191,558,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  14 -end 575 ')
f_crop = open('crop.txt', 'w')
f_crop.write('14,575,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 35,142,0,1:34,136,34,1:33,129,75,1:32,122,116,1:29,115,157,1:25,111,200,1:23,111,241,1:21,118,279,1:20,134,322,1:19,153,364,1:20,170,406,1:24,180,455,1:26,180,494,1:25,182,516,1:25,189,538,1:25,196,561,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject errsm_03
os.makedirs(path_results + '/T2/errsm_03')
os.chdir(path_results + '/T2/errsm_03')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/montreal_criugm/errsm_03/32-SPINE_all/echo_2.09/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 25,144,101,20:26,142,133,19:26,139,162,18:27,136,189,17:28,136,214,16:28,137,239,15:29,139,264,14:30,141,287,13:30,145,310,12:30,151,332,11:30,160,352,10:31,173,370,9:31,186,388,8:30,193,404,7:29,194,419,6:29,192,434,5:29,192,451,4:29,193,468,3:28,194,530,2:28,200,554,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  30 -end 572 ')
f_crop = open('crop.txt', 'w')
f_crop.write('30,572,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 25,135,0,1:25,132,43,1:25,133,73,1:27,132,103,1:27,131,133,1:28,129,179,1:29,131,218,1:29,134,250,1:30,141,286,1:30,149,309,1:30,163,337,1:30,172,352,1:30,181,372,1:29,185,411,1:29,184,444,1:28,184,473,1:29,192,504,1:27,199,516,1:27,204,531,1:28,207,542,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject FR
os.makedirs(path_results + '/T2/FR')
os.chdir(path_results + '/T2/FR')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/FR_T080/01_0039_sc-mprage-1mm-3palliers-fov384-comp-sp-13/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 30,96,60,20:30,91,95,19:30,86,128,18:29,81,157,17:28,76,186,16:27,73,215,15:25,72,249,14:24,71,275,13:23,72,298,12:23,77,324,11:24,83,347,10:24,94,369,9:23,103,389,8:22,112,409,7:22,115,429,6:21,115,449,5:21,116,471,4:21,116,491,3:22,108,558,2:22,111,584,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  0 -end 605 ')
f_crop = open('crop.txt', 'w')
f_crop.write('0,605,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 32,96,0,1:32,95,5,1:31,89,29,1:30,85,45,1:30,84,54,1:30,80,68,1:30,80,77,1:30,78,86,1:30,77,99,1:30,77,102,1:30,76,119,1:29,74,127,1:29,74,128,1:29,72,145,1:29,70,158,1:28,70,160,1:28,69,170,1:28,68,182,1:27,67,189,1:27,67,198,1:27,66,205,1:27,66,213,1:26,66,220,1:26,65,227,1:26,65,228,1:25,65,234,1:25,65,241,1:25,64,249,1:24,65,254,1:24,65,267,1:23,69,307,1:24,78,347,1:22,93,387,1:21,103,416,1:21,107,450,1:21,106,479,1:21,102,518,1:22,104,549,1:21,109,568,1:22,114,585,1:21,116,605,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject GB
os.makedirs(path_results + '/T2/GB')
os.chdir(path_results + '/T2/GB')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/GB_T083/01_0029_sc-mprage-1mm-2palliers-fov384-comp-sp-5/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 31,99,63,20:31,99,95,19:32,96,125,18:32,92,151,17:32,90,176,16:32,88,199,15:32,89,223,14:32,92,245,13:32,97,268,12:32,105,289,11:32,114,309,10:30,125,328,9:29,134,347,8:28,138,364,7:28,140,381,6:28,140,398,5:28,137,415,4:28,135,433,3:26,128,495,2:24,130,522,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  1 -end 539 ')
f_crop = open('crop.txt', 'w')
f_crop.write('1,539,0,max')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 32,88,0,1:32,87,5,1:32,87,18,1:32,86,28,1:32,85,39,1:32,85,45,1:32,84,54,1:32,85,104,1:32,84,137,1:33,82,175,1:32,83,225,1:32,91,266,1:31,106,307,1:29,122,346,1:29,131,387,1:28,126,434,1:27,124,474,1:26,126,492,1:24,129,511,1:22,134,538,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


#Preprocessing for subject T045
os.makedirs(path_results + '/T2/T045')
os.chdir(path_results + '/T2/T045')
sct.run('dcm2nii -o . -r N /Volumes/data_shared/marseille/T045/01_0007_sc-mprage-1mm-2palliers-fov384-comp-sp-5/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_orientation -i data.nii.gz -s RPI')
sct.run('sct_crop_image -i data_RPI.nii.gz -dim 2 -start 2 -end 1 -b 0 -o labels_vertebral.nii.gz')
sct.run('sct_label_utils -i labels_vertebral.nii.gz -o labels_vertebral.nii.gz -t create -x 23,87,98,20:23,84,128,19:24,80,156,18:25,77,183,17:26,76,207,16:26,73,230,15:27,74,254,14:27,75,277,13:28,80,300,12:28,87,323,11:28,93,342,10:28,102,363,9:28,109,381,8:27,114,400,7:26,117,418,6:25,118,435,5:24,119,453,4:22,118,472,3:18,118,537,2:18,119,563,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  29 -end 580 ')
f_crop = open('crop.txt', 'w')
f_crop.write('29,580,0,10')
f_crop.close()
sct.run('sct_crop_image -i data_RPI_crop.nii.gz -dim 2 -start 2 -end 1 -b 0 -o centerline_propseg_RPI.nii.gz')
sct.run('sct_label_utils -i centerline_propseg_RPI.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 23,78,0,1:22,77,19,1:23,76,39,1:22,77,67,1:23,75,101,1:24,72,124,1:25,70,146,1:26,67,178,1:27,66,206,1:27,68,235,1:27,72,263,1:27,77,284,1:28,84,308,1:27,94,334,1:27,105,363,1:26,110,386,1:25,112,408,1:23,112,429,1:21,111,449,1:20,110,475,1:19,114,504,1:18,120,529,1:19,124,551,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')
