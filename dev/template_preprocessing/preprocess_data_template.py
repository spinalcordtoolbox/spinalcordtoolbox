#!/usr/bin/env python

#########################################################################################
# This batch prepare all data for each subject, before preprocessing.
# N.B.: Specify an output path in variable 'path_results'. E.g.:
# path_results ='/Users/julien/data/test_template'
#
# ---------------------------------------------------------------------------------------
# Copyright (c) 2015 Polytechnique Montreal <www.neuro.polymtl.ca>
# Author: Tanguy Magnan
# Modified: 2015-07-01
#
# About the license: see the file LICENSE.TXT
#########################################################################################
import sys, io, os, shutil

# Get path of the toolbox
path_sct = os.environ.get("SCT_DIR", os.path.dirname(os.path.dirname(os.path.dirname(__file__))))
# Append path that contains scripts, to be able to load modules
sys.path.append(os.path.join(path_sct, "scripts"))

# create symbolic link to /Volumes/data_shared
# ln -s /Volumes/data_raid/data_shared /Volumes/data_shared 

import sct_utils as sct

##Commands to generate label and txt files for T1 and T2 (first is T1 then T2)

# Specify the output folder (no slash at the end)
path_results = '/Users/benjamindeleener/data/template_preprocessing'

if not os.path.isdir(path_results + '/' + 'T1'):
    os.makedirs(path_results + '/' + 'T1')

if not os.path.isdir(path_results + '/' + 'T2'):
    os.makedirs(path_results + '/' + 'T2')


# folder to dataset
folder_data_errsm = '/Volumes/data_shared/montreal_criugm/errsm'
folder_data_sct = '/Volumes/data_shared/montreal_criugm/sct'
folder_data_marseille = '/Volumes/data_shared/marseille'
folder_data_pain = '/Volumes/data_shared/montreal_criugm/simon'

new_folder = "/Users/benjamindeleener/data/template_data"
SUBJECTS_LIST = [['errsm_04', new_folder+'/errsm_04/T1', new_folder+'/errsm_04/T2'],
                 ['errsm_05', new_folder+'/errsm_05/T1', new_folder+'/errsm_05/T2'],
                 ['errsm_09', new_folder+'/errsm_09/T1', new_folder+'/errsm_09/T2'],
                 ['errsm_10', new_folder+'/errsm_10/T1', new_folder+'/errsm_10/T2'],
                 ['errsm_12', new_folder+'/errsm_12/T1', new_folder+'/errsm_12/T2'],
                 ['errsm_13', new_folder+'/errsm_13/T1', new_folder+'/errsm_13/T2'],
                 ['errsm_14', new_folder+'/errsm_14/T1', new_folder+'/errsm_14/T2'],
                 ['errsm_16', new_folder+'/errsm_16/T1', new_folder+'/errsm_16/T2'],
                 ['errsm_17', new_folder+'/errsm_17/T1', new_folder+'/errsm_17/T2'],
                 ['errsm_18', new_folder+'/errsm_18/T1', new_folder+'/errsm_18/T2'],
                 ['errsm_11', new_folder+'/errsm_11/T1', new_folder+'/errsm_11/T2'],
                 ['errsm_21', new_folder+'/errsm_21/T1', new_folder+'/errsm_21/T2'],
                 ['errsm_23', new_folder+'/errsm_23/T1', new_folder+'/errsm_23/T2'],
                 ['errsm_24', new_folder+'/errsm_24/T1', new_folder+'/errsm_24/T2'],
                 ['errsm_25', new_folder+'/errsm_25/T1', new_folder+'/errsm_25/T2'],
                 ['errsm_30', new_folder+'/errsm_30/T1', new_folder+'/errsm_30/T2'],
                 ['errsm_31', new_folder+'/errsm_31/T1', new_folder+'/errsm_31/T2'],
                 ['errsm_32', new_folder+'/errsm_32/T1', new_folder+'/errsm_32/T2'],
                 ['errsm_33', new_folder+'/errsm_33/T1', new_folder+'/errsm_33/T2'],
                 ['sct_001', new_folder+'/sct_001/T1', new_folder+'/sct_001/T2'],
                 ['sct_002', new_folder+'/sct_002/T1', new_folder+'/sct_002/T2'],
                 ['ED', new_folder+'/ED/T1', new_folder+'/ED/T2'],
                 ['ALT', new_folder+'/ALT/T1', new_folder+'/ALT/T2'],
                 ['JD', new_folder+'/JD/T1', new_folder+'/JD/T2'],
                 ['JW', new_folder+'/JW/T1', new_folder+'/JW/T2'],
                 ['MLL', new_folder+'/MLL/T1', new_folder+'/MLL/T2'],
                 ['MT', new_folder+'/MT/T1', new_folder+'/MT/T2'],
                 ['T045', new_folder+'/T045/T1', new_folder+'/T045/T2'],
                 ['T047', new_folder+'/T047/T1', new_folder+'/T047/T2'],
                 ['VC', new_folder+'/VC/T1', new_folder+'/VC/T2'],
                 ['VG', new_folder+'/VG/T1', new_folder+'/VG/T2'],
                 ['VP', new_folder+'/VP/T1', new_folder+'/VP/T2'],
                 ['pain_pilot_1', new_folder+'/pain_pilot_1/T1', new_folder+'/pain_pilot_1/T2'],
                 ['pain_pilot_2', new_folder+'/pain_pilot_2/T1', new_folder+'/pain_pilot_2/T2'],
                 ['pain_pilot_4', new_folder+'/pain_pilot_4/T1', new_folder+'/pain_pilot_4/T2'],
                 ['errsm_20', new_folder+'/errsm_20/T1', new_folder+'/errsm_20/T2'],
                 ['pain_pilot_3', new_folder+'/pain_pilot_3/T1', new_folder+'/pain_pilot_3/T2'],
                 ['errsm_34', new_folder+'/errsm_34/T1', new_folder+'/errsm_34/T2'],
                 ['errsm_35', new_folder+'/errsm_35/T1', new_folder+'/errsm_35/T2'],
                 ['pain_pilot_7', new_folder+'/pain_pilot_7/T1', new_folder+'/pain_pilot_7/T2'],
                 ['errsm_03', new_folder+'/errsm_03/T1', new_folder+'/errsm_03/T2'],
                 ['FR', new_folder+'/FR/T1', new_folder+'/FR/T2'],
                 ['GB', new_folder+'/GB/T1', new_folder+'/GB/T2'],
                 ['errsm_36', new_folder+'/errsm_36/T1', new_folder+'/errsm_36/T2'],
                 ['errsm_37', new_folder+'/errsm_37/T1', new_folder+'/errsm_37/T2'],
                 ['errsm_43', new_folder+'/errsm_43/T1', new_folder+'/errsm_43/T2'],
                 ['errsm_44', new_folder+'/errsm_44/T1', new_folder+'/errsm_44/T2'],
                 ['AM', new_folder+'/AM/T1', new_folder+'/AM/T2'],
                 ['HB', new_folder+'/HB/T1', new_folder+'/HB/T2'],
                 ['PA', new_folder+'/PA/T1', new_folder+'/PA/T2']
                 ]

# Creation of necessary files for T2 preprocessing


# Preprocessing for subject errsm_36
if not os.path.isdir(path_results + '/T2/errsm_36'):
    os.makedirs(path_results + '/T2/errsm_36')
os.chdir(path_results + '/T2/errsm_36')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_36/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 23,140,71,20:22,136,105,19:23,130,137,18:23,125,166,17:23,121,194,16:24,120,224,15:24,121,249,14:24,125,275,13:24,131,300,12:24,140,323,11:24,152,345,10:23,165,365,9:22,175,384,8:21,184,404,7:21,188,422,6:21,190,441,5:21,191,461,4:21,191,481,3:23,184,552,2:25,188,577,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  0 -end 590')
f_crop = open('crop.txt', 'w')
f_crop.write('0,590,85,525')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 19,140,0,1:19,139,6,1:19,138,13,1:20,139,17,1:20,137,20,1:20,137,27,1:20,137,32,1:21,135,36,1:21,133,42,1:21,134,46,1:21,133,47,1:21,132,51,1:21,131,56,1:21,131,61,1:22,130,63,1:22,129,68,1:22,129,73,1:22,128,80,1:22,127,89,1:22,123,103,1:22,122,118,1:22,120,131,1:23,119,144,1:22,117,161,1:23,116,178,1:23,115,191,1:23,115,205,1:24,115,218,1:24,115,233,1:24,116,247,1:24,118,262,1:25,121,275,1:25,124,291,1:25,129,307,1:25,135,323,1:24,143,340,1:24,150,356,1:23,157,370,1:22,164,383,1:21,171,397,1:21,175,411,1:21,179,428,1:21,180,440,1:21,181,453,1:21,181,466,1:21,180,480,1:22,179,492,1:22,178,503,1:21,178,514,1:21,178,525,1:23,176,535,1:23,175,538,1:23,175,541,1:23,175,544,1:24,175,547,1:24,174,550,1:24,174,553,1:24,174,556,1:24,174,559,1:24,174,562,1:24,175,565,1:24,176,569,1:25,176,573,1:25,176,576,1:25,177,580,1:26,178,583,1:26,179,586,1:26,182,589,1:26,186,590,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_37
if not os.path.isdir(path_results + '/T2/errsm_37'):
    os.makedirs(path_results + '/T2/errsm_37')
os.chdir(path_results + '/T2/errsm_37')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_37/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 21,158,170,20:23,152,198,19:23,147,225,18:23,143,251,17:23,140,274,16:23,138,297,15:23,138,321,14:24,142,343,13:23,146,365,12:23,152,385,11:24,159,403,10:24,166,421,9:24,172,438,8:25,173,451,7:25,174,466,6:26,174,480,5:27,175,495,4:27,177,511,3:29,178,562,2:29,186,584,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 597')
f_crop = open('crop.txt', 'w')
f_crop.write('0,597,75,545')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 26,144,0,1:27,148,3,1:26,151,6,1:26,154,9,1:25,155,12,1:25,156,15,1:25,158,18,1:24,160,21,1:24,162,24,1:24,163,27,1:24,164,30,1:23,165,33,1:23,165,36,1:23,164,39,1:22,165,42,1:22,164,45,1:22,165,48,1:22,166,51,1:23,167,54,1:21,166,57,1:21,166,60,1:21,166,63,1:20,166,66,1:20,166,69,1:20,166,72,1:20,166,75,1:20,165,78,1:20,164,81,1:20,164,84,1:20,163,87,1:20,163,90,1:20,162,93,1:20,162,96,1:20,161,99,1:19,161,102,1:20,161,105,1:20,160,108,1:19,160,111,1:20,159,114,1:19,158,117,1:19,158,120,1:19,157,123,1:20,156,126,1:19,156,129,1:20,155,132,1:19,155,135,1:20,154,138,1:19,153,141,1:20,152,144,1:20,152,147,1:20,152,150,1:20,151,153,1:21,150,156,1:20,150,159,1:21,150,162,1:21,149,165,1:21,149,168,1:21,149,171,1:21,148,174,1:21,148,177,1:22,147,180,1:22,146,183,1:22,146,186,1:22,145,189,1:23,145,192,1:23,145,195,1:23,144,198,1:23,144,201,1:23,143,204,1:23,142,207,1:23,142,210,1:23,141,213,1:23,141,216,1:23,140,219,1:23,140,222,1:23,140,225,1:23,139,228,1:23,139,231,1:23,139,234,1:23,138,237,1:23,138,240,1:23,138,243,1:23,137,246,1:23,137,249,1:23,136,252,1:23,136,255,1:23,136,258,1:23,136,261,1:23,135,264,1:23,135,267,1:23,135,270,1:23,134,273,1:23,134,276,1:23,134,279,1:23,134,282,1:23,134,285,1:23,134,288,1:23,134,291,1:23,134,294,1:23,134,297,1:23,134,300,1:23,134,303,1:23,133,306,1:23,134,309,1:23,134,312,1:23,134,315,1:23,135,318,1:23,134,321,1:23,135,324,1:23,136,327,1:23,136,330,1:23,136,333,1:23,137,336,1:23,137,339,1:23,138,342,1:23,138,345,1:23,139,348,1:24,140,351,1:24,140,354,1:24,140,357,1:24,141,360,1:24,141,363,1:24,142,366,1:24,143,369,1:24,144,372,1:24,145,375,1:23,145,378,1:23,146,381,1:23,147,384,1:24,148,387,1:24,149,390,1:24,150,393,1:24,151,396,1:24,151,399,1:24,153,402,1:24,153,405,1:24,154,408,1:24,156,411,1:24,156,414,1:24,157,417,1:24,158,420,1:24,159,423,1:24,160,426,1:24,161,429,1:24,162,432,1:24,163,435,1:25,163,438,1:25,164,441,1:25,165,444,1:25,165,447,1:25,165,450,1:25,166,453,1:25,166,456,1:25,166,459,1:25,167,462,1:25,167,465,1:25,167,468,1:25,167,471,1:25,167,474,1:26,168,477,1:26,167,480,1:26,168,483,1:26,168,486,1:26,168,489,1:26,168,492,1:27,168,495,1:27,168,498,1:27,168,501,1:27,168,504,1:28,168,507,1:27,168,510,1:28,168,513,1:28,168,516,1:28,168,519,1:28,167,522,1:28,167,525,1:28,167,528,1:28,167,531,1:28,167,534,1:27,167,537,1:28,167,540,1:28,168,543,1:28,168,546,1:28,168,549,1:28,166,552,1:28,167,555,1:28,168,558,1:29,168,561,1:29,169,564,1:28,169,567,1:29,170,570,1:29,171,573,1:29,173,576,1:29,174,579,1:29,174,582,1:30,175,585,1:30,176,588,1:30,177,591,1:30,181,594,1:30,184,597,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_43
if not os.path.isdir(path_results + '/T2/errsm_43'):
    os.makedirs(path_results + '/T2/errsm_43')
os.chdir(path_results + '/T2/errsm_43')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_43/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 19,162,73,20:19,156,108,19:18,151,139,18:18,148,167,17:19,144,193,16:18,142,218,15:19,142,243,14:19,144,267,13:20,149,290,12:21,155,312,11:22,164,334,10:24,174,354,9:25,183,372,8:27,190,390,7:28,193,406,6:31,196,423,5:31,198,440,4:32,199,458,3:31,206,520,2:29,212,543,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 557')
f_crop = open('crop.txt', 'w')
f_crop.write('0,557,83,495')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 20,156,0,1:20,155,3,1:20,155,6,1:20,155,9,1:20,155,12,1:20,155,15,1:20,155,18,1:20,155,21,1:20,154,24,1:20,154,27,1:20,154,30,1:20,153,33,1:19,153,36,1:19,153,39,1:20,153,42,1:19,153,45,1:19,152,48,1:20,152,51,1:19,152,54,1:20,152,57,1:20,151,60,1:19,152,63,1:19,151,66,1:18,150,69,1:19,151,72,1:19,150,75,1:19,150,78,1:19,150,81,1:19,150,84,1:19,150,87,1:19,149,90,1:19,149,93,1:18,148,96,1:19,149,99,1:18,148,102,1:19,149,105,1:18,148,108,1:18,148,111,1:18,147,114,1:18,146,117,1:18,146,120,1:18,146,123,1:18,146,126,1:18,145,129,1:19,145,132,1:18,144,135,1:18,144,138,1:18,144,141,1:18,143,144,1:18,143,147,1:18,143,150,1:19,142,153,1:18,142,156,1:19,141,159,1:19,141,162,1:18,141,165,1:19,141,168,1:19,141,171,1:19,140,174,1:19,140,177,1:18,140,180,1:19,139,183,1:19,139,186,1:18,139,189,1:19,139,192,1:19,138,195,1:19,138,198,1:19,138,201,1:19,138,204,1:19,138,207,1:19,138,210,1:19,138,213,1:19,138,216,1:19,138,219,1:19,138,222,1:19,138,225,1:19,138,228,1:19,137,231,1:19,137,234,1:19,137,237,1:19,137,240,1:19,137,243,1:19,137,246,1:19,138,249,1:19,138,252,1:19,138,255,1:19,139,258,1:19,139,261,1:20,139,264,1:20,140,267,1:20,140,270,1:20,140,273,1:20,141,276,1:20,142,279,1:20,142,282,1:20,143,285,1:20,144,288,1:20,144,291,1:20,145,294,1:20,146,297,1:21,147,300,1:20,147,303,1:21,148,306,1:21,149,309,1:21,150,312,1:22,151,315,1:22,152,318,1:22,153,321,1:22,154,324,1:23,156,327,1:23,157,330,1:23,158,333,1:22,159,336,1:23,160,339,1:23,162,342,1:23,162,345,1:24,163,348,1:24,165,351,1:24,166,354,1:24,167,357,1:24,169,360,1:25,170,363,1:25,172,366,1:25,172,369,1:25,173,372,1:25,175,375,1:26,176,378,1:26,178,381,1:26,179,384,1:26,180,387,1:27,181,390,1:28,182,393,1:28,183,396,1:28,183,399,1:28,184,402,1:29,185,405,1:29,185,408,1:29,186,411,1:30,187,414,1:30,187,417,1:30,188,420,1:31,188,423,1:31,188,426,1:31,189,429,1:31,189,432,1:32,189,435,1:32,190,438,1:32,190,441,1:32,190,444,1:32,190,447,1:32,190,450,1:33,190,453,1:33,190,456,1:33,191,459,1:33,191,462,1:33,191,465,1:33,191,468,1:33,191,471,1:33,191,474,1:34,191,477,1:34,191,480,1:34,191,483,1:34,190,486,1:34,191,489,1:34,192,492,1:33,192,495,1:33,193,498,1:33,193,501,1:33,193,504,1:34,192,507,1:33,193,510,1:33,194,513,1:32,195,516,1:32,195,519,1:31,196,522,1:31,197,525,1:31,197,528,1:31,198,531,1:30,199,534,1:30,200,537,1:30,200,540,1:30,201,543,1:30,202,546,1:29,203,549,1:29,205,552,1:29,208,555,1:28,210,557,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_44
if not os.path.isdir(path_results + '/T2/errsm_44'):
    os.makedirs(path_results + '/T2/errsm_44')
os.chdir(path_results + '/T2/errsm_44')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_44/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 17,144,83,20:18,141,113,19:18,139,142,18:18,136,170,17:17,133,195,16:18,131,221,15:19,131,245,14:22,134,269,13:24,140,290,12:25,149,310,11:27,162,328,10:28,175,346,9:28,190,362,8:28,201,378,7:28,209,394,6:28,213,411,5:27,212,429,4:26,211,445,3:24,207,517,2:25,212,540,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 557')
f_crop = open('crop.txt', 'w')
f_crop.write('0,557,20,495')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 20,143,0,1:19,143,3,1:19,142,6,1:19,142,9,1:19,141,12,1:19,140,15,1:19,140,18,1:19,140,21,1:19,139,24,1:19,139,27,1:19,139,30,1:19,138,33,1:19,138,36,1:19,137,39,1:19,136,42,1:18,135,45,1:18,135,48,1:18,135,51,1:18,134,54,1:18,134,57,1:18,133,60,1:18,134,63,1:18,134,66,1:18,134,69,1:18,133,72,1:18,133,75,1:18,133,78,1:18,132,81,1:19,132,84,1:18,132,87,1:18,132,90,1:18,132,93,1:18,132,96,1:18,132,99,1:19,131,102,1:19,131,105,1:19,131,108,1:19,131,111,1:19,131,114,1:19,130,117,1:19,130,120,1:18,131,123,1:18,131,126,1:18,131,129,1:18,130,132,1:18,130,135,1:18,130,138,1:18,130,141,1:18,129,144,1:18,129,147,1:18,129,150,1:18,129,153,1:18,129,156,1:18,128,159,1:18,128,162,1:18,128,165,1:18,128,168,1:18,127,171,1:18,127,174,1:18,127,177,1:17,127,180,1:17,127,183,1:17,127,186,1:17,127,189,1:17,126,192,1:17,126,195,1:17,126,198,1:17,126,201,1:17,126,204,1:17,126,207,1:17,125,210,1:17,125,213,1:17,125,216,1:17,125,219,1:17,125,222,1:18,125,225,1:18,125,228,1:18,125,231,1:18,125,234,1:19,125,237,1:19,125,240,1:19,125,243,1:19,126,246,1:20,126,249,1:20,126,252,1:20,126,255,1:21,127,258,1:21,128,261,1:21,128,264,1:22,128,267,1:22,129,270,1:22,130,273,1:23,130,276,1:23,131,279,1:23,132,282,1:23,133,285,1:24,135,288,1:24,135,291,1:24,136,294,1:25,138,297,1:25,139,300,1:25,140,303,1:25,142,306,1:26,143,309,1:26,145,312,1:26,147,315,1:26,148,318,1:26,151,321,1:27,153,324,1:27,155,327,1:27,156,330,1:27,159,333,1:27,161,336,1:27,163,339,1:27,165,342,1:27,167,345,1:28,170,348,1:28,172,351,1:28,174,354,1:28,176,357,1:28,178,360,1:28,181,363,1:28,183,366,1:28,185,369,1:28,188,372,1:28,190,375,1:28,191,378,1:28,193,381,1:28,194,384,1:29,196,387,1:29,198,390,1:29,199,393,1:28,200,396,1:28,201,399,1:28,202,402,1:28,202,405,1:28,203,408,1:27,203,411,1:27,203,414,1:27,203,417,1:27,203,420,1:26,203,423,1:27,203,426,1:26,203,429,1:26,203,432,1:26,203,435,1:26,203,438,1:26,202,441,1:26,202,444,1:26,202,447,1:25,201,450,1:25,201,453,1:25,201,456,1:25,200,459,1:25,200,462,1:25,199,465,1:25,199,468,1:25,198,471,1:25,197,474,1:25,197,477,1:25,197,480,1:25,197,483,1:25,196,486,1:24,197,489,1:25,196,492,1:24,196,495,1:24,196,498,1:25,195,501,1:25,195,504,1:25,196,507,1:25,196,510,1:25,197,513,1:25,197,516,1:24,197,519,1:24,197,522,1:24,198,525,1:25,199,528,1:25,199,531,1:25,200,534,1:25,199,537,1:25,199,540,1:25,200,543,1:25,200,546,1:24,201,549,1:24,204,552,1:24,209,555,1:25,210,557,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')

"""
# Preprocessing for subject errsm_02 - removed because of low contrast
if not os.path.isdir(path_results + '/T2/errsm_02'):
    os.makedirs(path_results + '/T2/errsm_02')
os.chdir(path_results + '/T2/errsm_02')
sct.run('dcm2nii -o . -r N '+os.path.join(folder_data_errsm, 'errsm_02', '28-SPINE_T2', '*.dcm'))
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 25,63,169,20:26,58,200,19:25,54,229,18:25,53,256,17:25,52,282,16:25,52,307,15:24,55,333,14:23,58,356,13:24,63,379,12:27,69,400,11:29,76,421,10:29,86,440,9:30,96,458,8:31,101,474,7:31,103,489,6:31,105,505,5:29,107,521,4:26,108,538,3:26,114,594,2:22,122,617,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 100 -end 620')
f_crop = open('crop.txt', 'w')
f_crop.write('100,620,0,485')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 28,66,0,1:27,60,24,1:26,55,45,1:26,52,69,1:27,51,89,1:27,47,112,1:26,46,134,1:26,46,153,1:25,46,176,1:25,47,203,1:24,49,223,1:24,51,240,1:24,54,259,1:26,57,278,1:26,63,298,1:27,69,315,1:29,76,334,1:30,84,354,1:31,90,372,1:31,94,392,1:31,97,413,1:30,98,432,1:29,99,448,1:28,99,461,1:27,100,474,1:26,104,483,1:25,109,493,1:23,112,503,1:24,116,511,1:22,118,520,1')
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o labels_updown.nii.gz -t create -x 25,107,486,1:25,111,496,1:24,116,509,1:23,121,520,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')
"""

# Preprocessing for subject errsm_04
if not os.path.isdir(path_results + '/T2/errsm_04'):
    os.makedirs(path_results + '/T2/errsm_04')
os.chdir(path_results + '/T2/errsm_04')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_04/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 34,144,77,20:33,140,108,19:34,137,138,18:33,136,166,17:33,135,192,16:33,135,218,15:34,137,244,14:33,143,267,13:34,150,290,12:35,160,311,11:37,169,331,10:38,178,350,9:38,187,368,8:38,192,385,7:37,192,402,6:35,193,418,5:35,195,435,4:35,198,452,3:35,202,508,2:36,208,531,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 73 -end 549')
f_crop = open('crop.txt', 'w')
f_crop.write('73,549,47,420')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 34,132,0,1:34,132,3,1:34,131,6,1:34,132,9,1:34,132,12,1:34,131,15,1:34,131,18,1:34,131,21,1:34,131,24,1:34,130,27,1:34,130,30,1:34,130,33,1:34,129,36,1:34,129,39,1:34,129,42,1:34,129,45,1:34,129,48,1:34,129,51,1:34,129,54,1:34,128,57,1:34,128,60,1:34,128,63,1:34,128,66,1:34,128,69,1:34,128,72,1:34,128,75,1:34,128,78,1:34,129,81,1:34,129,84,1:34,129,87,1:34,128,90,1:34,128,93,1:34,128,96,1:34,128,99,1:34,128,102,1:34,128,105,1:34,128,108,1:34,128,111,1:34,128,114,1:34,128,117,1:34,128,120,1:34,128,123,1:34,128,126,1:34,128,129,1:33,128,132,1:33,128,135,1:33,129,138,1:34,129,141,1:33,129,144,1:33,129,147,1:33,129,150,1:34,130,153,1:33,130,156,1:33,130,159,1:33,131,162,1:33,131,165,1:33,132,168,1:33,132,171,1:33,132,174,1:33,133,177,1:33,134,180,1:33,134,183,1:33,135,186,1:33,135,189,1:33,136,192,1:33,137,195,1:33,138,198,1:33,139,201,1:33,140,204,1:33,141,207,1:33,142,210,1:34,143,213,1:34,144,216,1:34,145,219,1:34,146,222,1:34,147,225,1:34,148,228,1:35,150,231,1:35,150,234,1:35,152,237,1:35,154,240,1:35,155,243,1:35,156,246,1:35,157,249,1:35,159,252,1:36,160,255,1:36,161,258,1:36,162,261,1:36,164,264,1:36,165,267,1:36,166,270,1:36,168,273,1:36,169,276,1:36,170,279,1:36,170,282,1:37,172,285,1:37,173,288,1:37,174,291,1:37,175,294,1:37,176,297,1:37,177,300,1:37,178,303,1:37,179,306,1:37,180,309,1:37,180,312,1:38,181,315,1:38,182,318,1:37,182,321,1:37,182,324,1:37,183,327,1:37,184,330,1:37,184,333,1:37,184,336,1:37,185,339,1:37,185,342,1:37,185,345,1:37,186,348,1:37,186,351,1:36,187,354,1:36,187,357,1:36,187,360,1:36,187,363,1:36,187,366,1:36,188,369,1:36,188,372,1:36,188,375,1:36,188,378,1:36,189,381,1:36,189,384,1:36,189,387,1:36,189,390,1:36,189,393,1:36,189,396,1:36,189,399,1:36,189,402,1:37,189,405,1:37,189,408,1:37,189,411,1:37,189,414,1:37,189,417,1:37,189,420,1:36,190,423,1:36,190,426,1:36,191,429,1:36,191,432,1:36,192,435,1:36,193,438,1:36,193,441,1:36,194,444,1:36,195,447,1:36,195,450,1:36,197,453,1:36,197,456,1:36,198,459,1:36,198,462,1:36,199,465,1:36,201,468,1:36,203,471,1:36,206,474,1:37,214,476,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_05
if not os.path.isdir(path_results + '/T2/errsm_05'):
    os.makedirs(path_results + '/T2/errsm_05')
os.chdir(path_results + '/T2/errsm_05')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_05/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 24,140,105,20:24,133,135,19:25,126,161,18:25,120,184,17:23,116,206,16:25,112,229,15:24,113,250,14:24,116,272,13:24,121,292,12:25,128,312,11:27,139,329,10:26,151,344,9:28,162,360,8:28,170,375,7:28,176,388,6:28,181,402,5:27,184,416,4:27,186,431,3:24,186,488,2:24,190,514,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 35 -end 528')
f_crop = open('crop.txt', 'w')
f_crop.write('35,528,70,435')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 22,135,0,1:22,135,3,1:22,135,6,1:22,134,9,1:22,134,12,1:22,134,15,1:21,134,18,1:22,134,21,1:22,134,24,1:22,133,27,1:22,132,30,1:22,132,33,1:22,132,36,1:22,132,39,1:22,131,42,1:22,130,45,1:22,130,48,1:22,130,51,1:22,129,54,1:22,129,57,1:22,129,60,1:22,128,63,1:22,128,66,1:22,127,69,1:23,127,72,1:23,126,75,1:23,126,78,1:23,126,81,1:23,125,84,1:23,125,87,1:23,124,90,1:24,124,93,1:24,123,96,1:24,123,99,1:24,122,102,1:24,122,105,1:24,121,108,1:24,120,111,1:24,120,114,1:24,119,117,1:24,119,120,1:24,118,123,1:24,118,126,1:24,117,129,1:24,116,132,1:24,116,135,1:24,115,138,1:24,114,141,1:24,114,144,1:24,114,147,1:24,113,150,1:25,112,153,1:24,112,156,1:24,112,159,1:24,111,162,1:24,110,165,1:24,110,168,1:24,109,171,1:25,108,174,1:25,108,177,1:25,108,180,1:25,107,183,1:25,107,186,1:25,106,189,1:25,106,192,1:25,106,195,1:25,106,198,1:25,106,201,1:24,107,204,1:24,107,207,1:24,107,210,1:24,107,213,1:24,107,216,1:24,108,219,1:24,108,222,1:24,108,225,1:24,109,228,1:24,109,231,1:24,110,234,1:24,110,237,1:24,111,240,1:24,112,243,1:24,112,246,1:24,113,249,1:24,114,252,1:24,114,255,1:25,115,258,1:25,117,261,1:25,118,264,1:25,118,267,1:25,120,270,1:25,121,273,1:25,122,276,1:26,124,279,1:25,125,282,1:25,127,285,1:25,129,288,1:26,130,291,1:26,132,294,1:26,134,297,1:26,136,300,1:26,137,303,1:27,139,306,1:27,141,309,1:27,143,312,1:27,144,315,1:27,146,318,1:28,148,321,1:28,150,324,1:28,152,327,1:28,154,330,1:29,156,333,1:29,158,336,1:29,159,339,1:29,161,342,1:29,163,345,1:29,165,348,1:29,166,351,1:29,167,354,1:29,168,357,1:29,169,360,1:29,170,363,1:29,171,366,1:29,172,369,1:29,173,372,1:29,173,375,1:28,174,378,1:28,174,381,1:28,175,384,1:27,175,387,1:28,175,390,1:28,176,393,1:28,176,396,1:27,176,399,1:27,176,402,1:27,176,405,1:26,176,408,1:26,176,411,1:26,176,414,1:26,176,417,1:26,176,420,1:25,176,423,1:25,176,426,1:25,176,429,1:25,176,432,1:25,176,435,1:25,175,438,1:25,176,441,1:25,176,444,1:25,176,447,1:25,177,450,1:25,177,453,1:24,177,456,1:24,177,459,1:24,177,462,1:24,178,465,1:25,179,468,1:25,180,471,1:25,181,474,1:24,180,477,1:24,180,480,1:24,181,483,1:24,181,486,1:24,183,489,1:24,186,492,1:24,187,493,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_09
if not os.path.isdir(path_results + '/T2/errsm_09'):
    os.makedirs(path_results + '/T2/errsm_09')
os.chdir(path_results + '/T2/errsm_09')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_09/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 22,139,117,20:22,136,144,19:23,134,169,18:23,134,191,17:24,133,213,16:24,134,235,15:25,136,256,14:25,139,276,13:25,144,295,12:26,151,313,11:27,158,331,10:27,167,348,9:26,175,364,8:26,180,381,7:26,182,398,6:27,183,413,5:27,185,430,4:28,188,446,3:29,192,503,2:29,202,525,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  52 -end 540 ')
f_crop = open('crop.txt', 'w')
f_crop.write('52,540,0,430')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 18,135,0,1:18,135,3,1:18,134,6,1:18,134,9,1:18,133,12,1:18,133,15,1:18,133,18,1:18,133,21,1:18,132,24,1:19,132,27,1:19,131,30,1:19,131,33,1:19,131,36,1:19,131,39,1:19,131,42,1:19,130,45,1:19,130,48,1:20,130,51,1:20,130,54,1:20,129,57,1:20,128,60,1:20,129,63,1:20,129,66,1:20,128,69,1:20,128,72,1:20,128,75,1:20,127,78,1:20,127,81,1:20,127,84,1:21,127,87,1:21,127,90,1:21,127,93,1:21,127,96,1:21,127,99,1:21,127,102,1:21,127,105,1:22,127,108,1:21,127,111,1:22,126,114,1:22,126,117,1:22,126,120,1:22,126,123,1:22,126,126,1:22,126,129,1:23,126,132,1:23,126,135,1:23,126,138,1:23,126,141,1:23,126,144,1:23,126,147,1:23,126,150,1:23,126,153,1:23,126,156,1:23,126,159,1:23,126,162,1:23,126,165,1:23,126,168,1:23,126,171,1:23,126,174,1:23,127,177,1:24,127,180,1:24,127,183,1:24,127,186,1:24,128,189,1:24,128,192,1:24,128,195,1:24,128,198,1:24,129,201,1:24,129,204,1:24,130,207,1:24,130,210,1:24,131,213,1:24,131,216,1:25,132,219,1:25,132,222,1:25,133,225,1:25,134,228,1:25,134,231,1:25,135,234,1:25,136,237,1:25,137,240,1:25,137,243,1:25,138,246,1:25,139,249,1:26,140,252,1:26,142,255,1:26,143,258,1:26,144,261,1:26,144,264,1:26,146,267,1:27,147,270,1:27,148,273,1:27,149,276,1:27,150,279,1:27,151,282,1:27,153,285,1:27,154,288,1:27,155,291,1:27,156,294,1:27,158,297,1:27,159,300,1:27,160,303,1:27,162,306,1:27,163,309,1:27,164,312,1:27,165,315,1:27,167,318,1:27,168,321,1:27,169,324,1:27,170,327,1:27,171,330,1:27,172,333,1:27,173,336,1:27,173,339,1:27,174,342,1:27,174,345,1:27,174,348,1:27,175,351,1:27,175,354,1:27,176,357,1:27,176,360,1:27,176,363,1:27,177,366,1:27,177,369,1:27,177,372,1:27,178,375,1:27,178,378,1:28,178,381,1:27,179,384,1:27,179,387,1:27,179,390,1:27,179,393,1:27,179,396,1:27,179,399,1:27,179,402,1:27,179,405,1:27,179,408,1:28,179,411,1:28,179,414,1:28,179,417,1:28,179,420,1:28,179,423,1:28,179,426,1:28,180,429,1:28,180,432,1:28,180,435,1:28,180,438,1:28,181,441,1:28,182,444,1:28,182,447,1:28,183,450,1:28,184,453,1:28,185,456,1:28,186,459,1:28,187,462,1:28,188,465,1:28,190,468,1:28,191,471,1:28,191,474,1:27,193,477,1:28,195,480,1:28,197,483,1:27,198,486,1:28,200,488,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_10
if not os.path.isdir(path_results + '/T2/errsm_10'):
    os.makedirs(path_results + '/T2/errsm_10')
os.chdir(path_results + '/T2/errsm_10')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_10/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 24,176,99,20:24,167,130,19:24,159,161,18:24,156,188,17:24,154,214,16:23,154,238,15:24,158,262,14:24,164,285,13:23,171,307,12:23,180,326,11:23,189,345,10:24,198,364,9:24,207,383,8:27,213,401,7:28,216,418,6:28,218,435,5:28,221,452,4:28,222,470,3:28,222,533,2:28,228,554,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 23 -end 568')
f_crop = open('crop.txt', 'w')
f_crop.write('23,568,50,482')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 32,177,0,1:32,176,3,1:32,175,6,1:32,175,9,1:32,175,12,1:32,174,15,1:32,174,18,1:31,174,21,1:31,173,24,1:31,173,27,1:30,172,30,1:30,172,33,1:30,171,36,1:29,170,39,1:29,170,42,1:29,169,45,1:29,169,48,1:28,168,51,1:28,168,54,1:28,167,57,1:28,166,60,1:27,166,63,1:27,165,66,1:27,164,69,1:27,164,72,1:26,163,75,1:26,162,78,1:26,162,81,1:26,161,84,1:26,161,87,1:26,160,90,1:25,159,93,1:25,159,96,1:25,158,99,1:25,158,102,1:25,157,105,1:25,157,108,1:25,156,111,1:25,156,114,1:25,155,117,1:25,155,120,1:25,154,123,1:25,154,126,1:24,153,129,1:24,153,132,1:24,153,135,1:24,152,138,1:24,152,141,1:24,152,144,1:24,151,147,1:24,151,150,1:24,151,153,1:24,150,156,1:24,150,159,1:24,149,162,1:24,149,165,1:24,149,168,1:24,149,171,1:24,149,174,1:24,148,177,1:24,148,180,1:24,148,183,1:23,148,186,1:24,148,189,1:24,148,192,1:24,148,195,1:23,148,198,1:24,148,201,1:24,148,204,1:24,148,207,1:23,148,210,1:24,148,213,1:24,148,216,1:24,149,219,1:24,149,222,1:24,149,225,1:24,150,228,1:24,150,231,1:24,151,234,1:24,151,237,1:24,152,240,1:24,152,243,1:24,153,246,1:24,154,249,1:24,155,252,1:24,155,255,1:24,156,258,1:24,157,261,1:24,157,264,1:24,159,267,1:24,159,270,1:24,160,273,1:24,162,276,1:24,163,279,1:24,164,282,1:24,165,285,1:24,166,288,1:24,168,291,1:24,169,294,1:24,170,297,1:24,171,300,1:24,172,303,1:24,174,306,1:24,175,309,1:24,177,312,1:24,178,315,1:24,180,318,1:24,181,321,1:24,182,324,1:24,184,327,1:24,185,330,1:24,186,333,1:24,187,336,1:24,189,339,1:24,190,342,1:24,192,345,1:25,193,348,1:25,194,351,1:25,195,354,1:25,196,357,1:25,198,360,1:25,199,363,1:25,200,366,1:25,201,369,1:26,202,372,1:26,203,375,1:25,204,378,1:25,204,381,1:26,205,384,1:26,206,387,1:26,206,390,1:26,207,393,1:26,207,396,1:26,208,399,1:26,208,402,1:27,209,405,1:27,210,408,1:27,210,411,1:27,211,414,1:28,211,417,1:28,211,420,1:28,212,423,1:28,212,426,1:28,212,429,1:28,212,432,1:28,212,435,1:28,212,438,1:28,212,441,1:28,212,444,1:28,212,447,1:28,212,450,1:28,213,453,1:28,213,456,1:28,212,459,1:28,212,462,1:28,212,465,1:28,212,468,1:28,212,471,1:28,212,474,1:28,212,477,1:28,212,480,1:28,212,483,1:28,212,486,1:28,212,489,1:28,212,492,1:28,212,495,1:28,212,498,1:28,213,501,1:28,214,504,1:28,214,507,1:28,214,510,1:28,215,513,1:28,215,516,1:28,216,519,1:28,217,522,1:28,217,525,1:28,217,528,1:28,218,531,1:28,219,534,1:28,220,537,1:28,221,540,1:28,224,543,1:28,227,545,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_11
if not os.path.isdir(path_results + '/T2/errsm_11'):
    os.makedirs(path_results + '/T2/errsm_11')
os.chdir(path_results + '/T2/errsm_11')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_11/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 28,137,90,20:26,130,120,19:22,123,151,18:21,119,179,17:19,117,205,16:19,118,231,15:19,118,257,14:20,121,282,13:20,130,304,12:20,140,326,11:18,154,345,10:18,170,363,9:22,184,378,8:21,193,393,7:22,198,408,6:22,201,424,5:23,202,441,4:22,202,459,3:23,194,522,2:23,199,543,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 17 -end 557')
f_crop = open('crop.txt', 'w')
f_crop.write('17,557,85,485')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 31,136,0,1:30,136,3,1:31,135,6,1:31,135,9,1:31,134,12,1:31,134,15,1:30,134,18,1:30,133,21,1:30,133,24,1:30,132,27,1:30,131,30,1:30,130,33,1:30,129,36,1:30,129,39,1:30,128,42,1:30,128,45,1:29,128,48,1:29,127,51,1:29,126,54,1:29,126,57,1:29,126,60,1:29,125,63,1:29,125,66,1:29,124,69,1:29,124,72,1:28,124,75,1:28,124,78,1:28,124,81,1:28,123,84,1:28,123,87,1:27,123,90,1:28,122,93,1:28,122,96,1:27,122,99,1:27,122,102,1:27,121,105,1:27,121,108,1:26,120,111,1:26,120,114,1:26,119,117,1:26,118,120,1:26,118,123,1:26,118,126,1:26,118,129,1:25,116,132,1:25,116,135,1:25,116,138,1:25,116,141,1:25,115,144,1:24,115,147,1:24,114,150,1:23,114,153,1:23,114,156,1:23,114,159,1:22,113,162,1:22,112,165,1:22,112,168,1:22,112,171,1:21,112,174,1:21,112,177,1:21,112,180,1:21,112,183,1:21,111,186,1:21,111,189,1:20,111,192,1:20,111,195,1:20,111,198,1:19,111,201,1:19,111,204,1:19,111,207,1:20,111,210,1:19,111,213,1:19,111,216,1:19,112,219,1:19,112,222,1:19,112,225,1:19,112,228,1:19,112,231,1:19,112,234,1:19,113,237,1:19,113,240,1:19,113,243,1:19,114,246,1:20,114,249,1:19,115,252,1:19,115,255,1:19,116,258,1:19,116,261,1:19,117,264,1:19,118,267,1:19,118,270,1:19,119,273,1:20,120,276,1:20,121,279,1:20,122,282,1:20,124,285,1:20,125,288,1:20,126,291,1:20,127,294,1:20,129,297,1:20,130,300,1:19,131,303,1:19,133,306,1:20,134,309,1:19,136,312,1:19,138,315,1:19,140,318,1:18,143,321,1:18,145,324,1:18,147,327,1:18,149,330,1:17,150,333,1:18,153,336,1:18,155,339,1:17,158,342,1:17,160,345,1:17,162,348,1:17,165,351,1:17,167,354,1:17,169,357,1:17,171,360,1:18,174,363,1:17,176,366,1:17,178,369,1:18,180,372,1:18,182,375,1:18,183,378,1:18,184,381,1:19,186,384,1:19,187,387,1:19,188,390,1:20,189,393,1:20,190,396,1:20,191,399,1:20,191,402,1:21,191,405,1:21,192,408,1:22,193,411,1:22,193,414,1:22,193,417,1:22,193,420,1:22,193,423,1:22,193,426,1:22,193,429,1:22,193,432,1:21,193,435,1:22,193,438,1:22,193,441,1:22,192,444,1:22,192,447,1:22,192,450,1:23,192,453,1:23,191,456,1:23,191,459,1:23,190,462,1:23,191,465,1:23,190,468,1:23,190,471,1:24,190,474,1:23,190,477,1:23,190,480,1:24,190,483,1:23,189,486,1:23,189,489,1:23,188,492,1:23,188,495,1:23,187,498,1:24,187,501,1:24,186,504,1:24,186,507,1:24,187,510,1:24,188,513,1:24,188,516,1:24,189,519,1:24,189,522,1:24,189,525,1:24,189,528,1:24,190,531,1:24,191,534,1:24,193,537,1:25,195,540,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_12
if not os.path.isdir(path_results + '/T2/errsm_12'):
    os.makedirs(path_results + '/T2/errsm_12')
os.chdir(path_results + '/T2/errsm_12')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_12/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 26,136,181,20:28,128,210,19:28,123,237,18:28,120,261,17:28,119,284,16:28,120,306,15:28,123,329,14:27,127,350,13:27,133,370,12:24,140,388,11:24,147,406,10:22,155,423,9:22,159,441,8:22,163,458,7:22,165,473,6:22,168,488,5:22,171,504,4:21,176,521,3:23,191,575,2:23,195,597,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 115 -end 610')
f_crop = open('crop.txt', 'w')
f_crop.write('115,610,0,440')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 23,139,0,1:23,139,3,1:23,138,6,1:23,137,9,1:23,137,12,1:24,136,15,1:24,135,18,1:24,134,21,1:24,134,24,1:24,132,27,1:24,131,30,1:24,131,33,1:24,130,36,1:25,129,39,1:25,129,42,1:25,128,45,1:25,127,48,1:25,126,51,1:25,125,54,1:25,125,57,1:25,124,60,1:25,124,63,1:26,123,66,1:26,122,69,1:26,121,72,1:26,120,75,1:26,120,78,1:26,119,81,1:26,119,84,1:26,118,87,1:26,117,90,1:26,117,93,1:26,117,96,1:27,116,99,1:27,116,102,1:27,116,105,1:27,116,108,1:27,115,111,1:27,114,114,1:27,114,117,1:27,114,120,1:27,114,123,1:27,114,126,1:27,113,129,1:27,113,132,1:27,113,135,1:28,113,138,1:27,112,141,1:27,113,144,1:28,112,147,1:27,112,150,1:27,112,153,1:27,112,156,1:27,112,159,1:27,112,162,1:27,112,165,1:27,112,168,1:27,113,171,1:27,113,174,1:27,113,177,1:27,113,180,1:27,113,183,1:27,113,186,1:27,113,189,1:27,113,192,1:27,113,195,1:27,114,198,1:27,114,201,1:27,115,204,1:27,115,207,1:27,116,210,1:27,116,213,1:27,116,216,1:27,117,219,1:27,118,222,1:27,118,225,1:27,119,228,1:27,119,231,1:27,120,234,1:27,121,237,1:27,122,240,1:26,122,243,1:26,123,246,1:26,124,249,1:26,125,252,1:26,126,255,1:26,127,258,1:26,127,261,1:26,128,264,1:25,129,267,1:25,130,270,1:25,131,273,1:25,132,276,1:25,133,279,1:25,134,282,1:24,135,285,1:24,136,288,1:24,137,291,1:24,139,294,1:24,140,297,1:24,140,300,1:24,141,303,1:24,142,306,1:24,143,309,1:24,144,312,1:23,145,315,1:23,146,318,1:23,147,321,1:23,148,324,1:23,149,327,1:23,150,330,1:23,151,333,1:23,152,336,1:23,153,339,1:23,153,342,1:23,154,345,1:22,155,348,1:22,156,351,1:22,157,354,1:22,157,357,1:23,158,360,1:22,158,363,1:22,159,366,1:22,160,369,1:22,160,372,1:22,161,375,1:21,162,378,1:21,163,381,1:21,164,384,1:22,164,387,1:21,165,390,1:21,165,393,1:21,166,396,1:21,167,399,1:21,168,402,1:21,168,405,1:21,169,408,1:22,170,411,1:22,171,414,1:21,172,417,1:22,172,420,1:22,173,423,1:22,174,426,1:22,174,429,1:22,175,432,1:22,175,435,1:22,176,438,1:23,176,441,1:22,176,444,1:23,176,447,1:23,175,450,1:23,176,453,1:23,177,456,1:23,178,459,1:23,178,462,1:23,179,465,1:24,181,468,1:23,182,471,1:23,183,474,1:23,184,477,1:23,184,480,1:23,184,483,1:23,186,486,1:22,187,489,1:23,190,492,1:22,192,495,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_13
if not os.path.isdir(path_results + '/T2/errsm_13'):
    os.makedirs(path_results + '/T2/errsm_13')
os.chdir(path_results + '/T2/errsm_13')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_13/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 36,126,102,20:32,122,135,19:27,120,166,18:24,120,195,17:24,121,222,16:24,123,249,15:24,129,276,14:24,135,301,13:25,142,326,12:26,149,349,11:26,158,372,10:26,166,393,9:24,173,413,8:24,177,432,7:25,180,451,6:26,184,470,5:26,187,488,4:27,187,509,3:27,187,578,2:29,192,603,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 21 -end 618')
f_crop = open('crop.txt', 'w')
f_crop.write('21,618,80,530')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o labels_updown.nii.gz -t create -x 39,124,0,1:39,123,3,1:39,123,6,1:39,122,9,1:38,122,12,1:38,121,15,1:38,121,18,1:38,121,21,1:37,120,24,1:37,120,27,1:37,119,30,1:37,119,33,1:37,119,36,1:37,118,39,1:37,118,42,1:37,118,45,1:37,118,48,1:36,118,51,1:36,117,54,1:36,117,57,1:36,117,60,1:36,117,63,1:35,116,66,1:35,116,69,1:35,116,72,1:35,115,75,1:35,115,78,1:35,115,81,1:35,115,84,1:34,115,87,1:34,115,90,1:34,115,93,1:34,115,96,1:33,115,99,1:33,115,102,1:33,114,105,1:33,114,108,1:33,114,111,1:32,114,114,1:32,114,117,1:32,114,120,1:31,114,123,1:31,114,126,1:31,113,129,1:30,114,132,1:30,114,135,1:30,113,138,1:29,113,141,1:29,113,144,1:29,113,147,1:28,113,150,1:28,113,153,1:28,113,156,1:27,113,159,1:27,113,162,1:27,113,165,1:27,113,168,1:26,113,171,1:26,113,174,1:26,114,177,1:26,114,180,1:26,114,183,1:25,114,186,1:25,114,189,1:25,114,192,1:25,114,195,1:25,114,198,1:25,114,201,1:25,115,204,1:24,115,207,1:24,115,210,1:24,116,213,1:24,116,216,1:24,116,219,1:24,117,222,1:24,117,225,1:23,117,228,1:24,118,231,1:23,119,234,1:23,119,237,1:23,120,240,1:23,120,243,1:23,120,246,1:23,121,249,1:23,122,252,1:23,122,255,1:23,123,258,1:23,124,261,1:23,124,264,1:23,125,267,1:23,126,270,1:23,126,273,1:24,127,276,1:24,128,279,1:23,129,282,1:24,129,285,1:23,130,288,1:24,131,291,1:24,132,294,1:24,133,297,1:24,134,300,1:24,134,303,1:24,135,306,1:24,136,309,1:24,137,312,1:25,138,315,1:25,139,318,1:25,140,321,1:25,141,324,1:25,142,327,1:25,143,330,1:25,144,333,1:25,145,336,1:25,146,339,1:25,147,342,1:26,148,345,1:25,149,348,1:25,150,351,1:26,151,354,1:25,152,357,1:25,153,360,1:25,154,363,1:25,155,366,1:25,156,369,1:25,157,372,1:25,158,375,1:25,159,378,1:25,160,381,1:25,161,384,1:25,161,387,1:24,162,390,1:25,163,393,1:25,164,396,1:25,165,399,1:25,166,402,1:25,167,405,1:25,167,408,1:24,168,411,1:24,168,414,1:25,170,417,1:25,169,420,1:25,171,423,1:25,171,426,1:25,172,429,1:25,172,432,1:25,173,435,1:25,173,438,1:25,174,441,1:25,174,444,1:25,174,447,1:25,174,450,1:25,175,453,1:25,175,456,1:26,175,459,1:26,175,462,1:26,175,465,1:26,175,468,1:26,176,471,1:26,176,474,1:26,176,477,1:26,176,480,1:26,175,483,1:26,176,486,1:26,176,489,1:26,175,492,1:26,175,495,1:26,175,498,1:26,175,501,1:27,175,504,1:27,175,507,1:27,175,510,1:26,174,513,1:26,175,516,1:27,175,519,1:27,175,522,1:27,175,525,1:27,175,528,1:27,175,531,1:27,175,534,1:26,175,537,1:27,175,540,1:26,175,543,1:26,176,546,1:26,177,549,1:27,178,552,1:26,178,555,1:27,178,558,1:27,179,561,1:26,180,564,1:26,180,567,1:27,181,570,1:27,181,573,1:26,182,576,1:27,182,579,1:27,182,582,1:27,182,585,1:27,183,588,1:27,184,591,1:28,189,594,1:28,192,597,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_14
if not os.path.isdir(path_results + '/T2/errsm_14'):
    os.makedirs(path_results + '/T2/errsm_14')
os.chdir(path_results + '/T2/errsm_14')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_14/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 25,159,102,20:25,150,127,19:25,142,151,18:24,140,174,17:24,139,196,16:23,138,218,15:23,138,238,14:23,139,258,13:23,141,278,12:23,144,296,11:23,147,314,10:23,152,331,9:23,157,348,8:23,161,364,7:24,165,378,6:24,169,392,5:24,171,407,4:23,173,422,3:26,187,477,2:27,195,500,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 42 -end 515')
f_crop = open('crop.txt', 'w')
f_crop.write('42,515,80,410')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 29,160,0,1:28,160,3,1:28,159,6,1:28,159,9,1:29,159,12,1:28,159,15,1:28,158,18,1:28,158,21,1:28,157,24,1:28,156,27,1:28,155,30,1:28,154,33,1:28,154,36,1:28,153,39,1:28,153,42,1:27,151,45,1:27,150,48,1:27,149,51,1:27,148,54,1:26,147,57,1:26,146,60,1:26,145,63,1:26,145,66,1:26,144,69,1:25,144,72,1:25,143,75,1:25,142,78,1:25,142,81,1:25,141,84,1:25,140,87,1:26,139,90,1:25,138,93,1:25,137,96,1:25,137,99,1:25,136,102,1:25,136,105,1:25,135,108,1:25,134,111,1:25,134,114,1:25,134,117,1:25,134,120,1:25,134,123,1:25,133,126,1:25,133,129,1:25,133,132,1:24,133,135,1:24,132,138,1:24,132,141,1:24,132,144,1:24,132,147,1:24,132,150,1:24,132,153,1:24,132,156,1:24,132,159,1:24,132,162,1:24,131,165,1:24,132,168,1:24,132,171,1:24,132,174,1:24,132,177,1:24,131,180,1:24,132,183,1:24,132,186,1:24,132,189,1:24,132,192,1:23,132,195,1:23,132,198,1:23,132,201,1:23,133,204,1:23,133,207,1:23,133,210,1:23,133,213,1:23,133,216,1:23,133,219,1:23,134,222,1:23,134,225,1:23,134,228,1:23,135,231,1:23,135,234,1:23,135,237,1:23,136,240,1:23,136,243,1:23,136,246,1:23,137,249,1:23,137,252,1:23,138,255,1:23,138,258,1:23,139,261,1:23,139,264,1:23,140,267,1:23,140,270,1:23,141,273,1:24,142,276,1:23,143,279,1:23,143,282,1:23,144,285,1:23,144,288,1:23,145,291,1:23,146,294,1:23,146,297,1:23,147,300,1:23,148,303,1:23,149,306,1:23,150,309,1:23,151,312,1:23,152,315,1:23,152,318,1:23,153,321,1:23,154,324,1:23,154,327,1:23,155,330,1:23,156,333,1:23,157,336,1:23,157,339,1:23,158,342,1:23,159,345,1:24,159,348,1:24,160,351,1:24,160,354,1:24,161,357,1:24,162,360,1:24,162,363,1:24,163,366,1:24,163,369,1:24,164,372,1:24,164,375,1:24,165,378,1:24,165,381,1:24,166,384,1:24,166,387,1:24,167,390,1:24,167,393,1:24,167,396,1:24,167,399,1:24,168,402,1:24,168,405,1:25,169,408,1:25,170,411,1:25,171,414,1:25,173,417,1:25,173,420,1:25,173,423,1:26,173,426,1:26,174,429,1:26,176,432,1:26,177,435,1:26,177,438,1:27,178,441,1:27,179,444,1:27,180,447,1:27,182,450,1:27,183,453,1:28,184,456,1:27,185,459,1:27,186,462,1:28,188,465,1:28,190,468,1:28,193,471,1:28,195,473,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_16
if not os.path.isdir(path_results + '/T2/errsm_16'):
    os.makedirs(path_results + '/T2/errsm_16')
os.chdir(path_results + '/T2/errsm_16')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_16/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 28,135,179,20:25,127,206,19:23,120,232,18:21,118,255,17:20,117,279,16:18,117,301,15:18,118,324,14:18,121,345,13:19,126,365,12:21,130,385,11:22,138,403,10:23,145,421,9:23,151,439,8:23,154,456,7:24,156,472,6:24,159,490,5:25,163,506,4:25,168,524,3:26,175,583,2:25,183,605,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 114 -end 618')
f_crop = open('crop.txt', 'w')
f_crop.write('114,618,86,445')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 33,137,0,1:34,137,3,1:34,136,6,1:34,136,9,1:34,135,12,1:34,135,15,1:34,134,18,1:34,134,21,1:34,133,24,1:33,132,27,1:33,132,30,1:33,131,33,1:33,131,36,1:33,130,39,1:32,129,42,1:31,129,45,1:31,128,48,1:31,127,51,1:30,127,54,1:30,126,57,1:30,125,60,1:29,125,63,1:29,125,66,1:28,123,69,1:28,123,72,1:28,122,75,1:27,122,78,1:27,121,81,1:27,120,84,1:26,120,87,1:26,119,90,1:25,119,93,1:25,118,96,1:25,118,99,1:24,117,102,1:24,117,105,1:23,116,108,1:23,116,111,1:23,115,114,1:22,115,117,1:22,115,120,1:22,115,123,1:21,114,126,1:21,114,129,1:21,114,132,1:20,114,135,1:20,113,138,1:20,113,141,1:19,113,144,1:20,112,147,1:19,112,150,1:19,112,153,1:19,111,156,1:18,111,159,1:18,111,162,1:18,111,165,1:18,111,168,1:18,111,171,1:18,111,174,1:18,111,177,1:18,111,180,1:18,111,183,1:17,111,186,1:17,111,189,1:17,112,192,1:17,112,195,1:17,112,198,1:17,112,201,1:17,112,204,1:17,112,207,1:17,113,210,1:18,113,213,1:17,113,216,1:17,114,219,1:18,114,222,1:18,114,225,1:18,115,228,1:18,116,231,1:18,116,234,1:19,117,237,1:19,118,240,1:19,118,243,1:19,118,246,1:19,119,249,1:19,120,252,1:19,121,255,1:20,121,258,1:20,122,261,1:21,123,264,1:21,124,267,1:21,125,270,1:21,125,273,1:21,127,276,1:21,127,279,1:22,128,282,1:22,129,285,1:22,130,288,1:22,131,291,1:22,132,294,1:22,133,297,1:22,134,300,1:23,135,303,1:23,136,306,1:23,136,309,1:23,138,312,1:23,139,315,1:23,139,318,1:23,140,321,1:23,141,324,1:23,142,327,1:23,143,330,1:23,143,333,1:23,144,336,1:23,145,339,1:23,146,342,1:24,146,345,1:24,147,348,1:23,148,351,1:24,148,354,1:24,148,357,1:24,149,360,1:25,150,363,1:25,150,366,1:25,151,369,1:25,152,372,1:25,152,375,1:24,152,378,1:24,153,381,1:24,154,384,1:24,154,387,1:24,155,390,1:24,156,393,1:24,157,396,1:25,158,399,1:25,158,402,1:25,158,405,1:25,159,408,1:25,160,411,1:25,160,414,1:25,160,417,1:25,161,420,1:25,161,423,1:25,161,426,1:25,161,429,1:25,161,432,1:25,161,435,1:25,162,438,1:26,163,441,1:26,164,444,1:26,164,447,1:26,165,450,1:26,165,453,1:26,165,456,1:26,165,459,1:26,165,462,1:26,165,465,1:26,166,468,1:26,166,471,1:26,167,474,1:26,169,477,1:25,169,480,1:25,171,483,1:25,172,486,1:25,172,489,1:25,173,492,1:26,174,495,1:25,175,498,1:25,178,501,1:25,181,504,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_17
if not os.path.isdir(path_results + '/T2/errsm_17'):
    os.makedirs(path_results + '/T2/errsm_17')
os.chdir(path_results + '/T2/errsm_17')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_17/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 22,140,156,20:25,134,183,19:26,126,211,18:28,121,236,17:28,119,259,16:28,118,282,15:29,120,305,14:30,123,326,13:31,127,347,12:31,133,367,11:31,141,385,10:32,151,402,9:32,158,419,8:31,163,435,7:31,166,451,6:30,168,467,5:30,170,484,4:29,172,500,3:24,172,558,2:23,181,581,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 86 -end 595')
f_crop = open('crop.txt', 'w')
f_crop.write('86,595,110,440')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 23,145,0,1:23,145,3,1:23,144,6,1:23,143,9,1:22,142,12,1:22,142,15,1:22,141,18,1:22,140,21,1:23,140,24,1:23,139,27,1:23,138,30,1:23,138,33,1:23,137,36,1:23,135,39,1:23,135,42,1:23,134,45,1:23,134,48,1:23,133,51,1:24,133,54,1:24,132,57,1:24,131,60,1:24,130,63,1:24,130,66,1:24,130,69,1:24,129,72,1:25,129,75,1:24,127,78,1:25,127,81,1:25,127,84,1:25,126,87,1:25,126,90,1:25,125,93,1:25,124,96,1:26,124,99,1:26,123,102,1:26,122,105,1:26,122,108,1:26,121,111,1:26,121,114,1:26,121,117,1:26,120,120,1:26,120,123,1:27,119,126,1:27,119,129,1:27,118,132,1:27,118,135,1:27,118,138,1:27,117,141,1:27,117,144,1:28,117,147,1:28,116,150,1:28,116,153,1:28,115,156,1:28,115,159,1:28,115,162,1:28,115,165,1:28,115,168,1:28,114,171,1:28,114,174,1:28,114,177,1:28,114,180,1:29,114,183,1:29,114,186,1:29,114,189,1:29,114,192,1:29,114,195,1:29,114,198,1:29,114,201,1:29,114,204,1:29,114,207,1:30,114,210,1:30,115,213,1:30,115,216,1:30,115,219,1:30,115,222,1:30,116,225,1:30,116,228,1:30,116,231,1:31,117,234,1:30,117,237,1:31,118,240,1:31,118,243,1:31,119,246,1:31,120,249,1:31,120,252,1:31,121,255,1:31,122,258,1:31,122,261,1:31,123,264,1:31,124,267,1:31,124,270,1:31,126,273,1:31,126,276,1:32,128,279,1:31,128,282,1:31,129,285,1:32,131,288,1:32,132,291,1:32,133,294,1:31,134,297,1:32,136,300,1:32,137,303,1:32,138,306,1:32,139,309,1:32,140,312,1:32,141,315,1:32,142,318,1:32,144,321,1:32,145,324,1:32,146,327,1:32,147,330,1:32,149,333,1:32,150,336,1:32,150,339,1:32,151,342,1:32,153,345,1:32,154,348,1:32,154,351,1:32,156,354,1:32,156,357,1:32,157,360,1:32,158,363,1:31,158,366,1:31,158,369,1:32,159,372,1:31,160,375,1:31,160,378,1:31,160,381,1:31,161,384,1:31,161,387,1:30,162,390,1:30,162,393,1:30,162,396,1:30,162,399,1:30,162,402,1:29,163,405,1:29,163,408,1:29,163,411,1:29,163,414,1:29,163,417,1:29,163,420,1:28,163,423,1:27,163,426,1:27,163,429,1:27,163,432,1:27,163,435,1:26,163,438,1:26,162,441,1:26,162,444,1:26,162,447,1:26,162,450,1:25,162,453,1:25,162,456,1:25,161,459,1:25,161,462,1:25,162,465,1:24,162,468,1:24,163,471,1:24,164,474,1:24,164,477,1:24,165,480,1:23,167,483,1:23,168,486,1:23,169,489,1:23,170,492,1:22,172,495,1:22,172,498,1:22,174,501,1:22,175,504,1:22,179,507,1:22,181,509,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_18
if not os.path.isdir(path_results + '/T2/errsm_18'):
    os.makedirs(path_results + '/T2/errsm_18')
os.chdir(path_results + '/T2/errsm_18')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_18/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 24,151,88,20:24,145,119,19:24,141,150,18:24,140,176,17:23,137,203,16:23,135,230,15:22,135,254,14:24,137,278,13:24,142,301,12:25,148,324,11:26,155,344,10:24,163,363,9:23,171,383,8:22,175,401,7:23,178,417,6:22,182,434,5:23,187,453,4:24,192,472,3:23,199,533,2:24,204,555,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 15 -end 568')
f_crop = open('crop.txt', 'w')
f_crop.write('15,568,120,490')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 24,157,0,1:24,156,3,1:24,155,6,1:24,154,9,1:24,153,12,1:24,152,15,1:24,151,18,1:24,150,21,1:25,150,24,1:25,149,27,1:24,147,30,1:24,147,33,1:24,146,36,1:25,146,39,1:25,145,42,1:24,144,45,1:25,144,48,1:25,144,51,1:25,143,54,1:25,143,57,1:25,142,60,1:25,141,63,1:25,141,66,1:25,140,69,1:25,139,72,1:25,139,75,1:25,138,78,1:25,138,81,1:25,138,84,1:24,138,87,1:24,137,90,1:24,137,93,1:24,136,96,1:24,136,99,1:24,136,102,1:24,136,105,1:24,136,108,1:24,135,111,1:24,135,114,1:24,135,117,1:24,135,120,1:24,135,123,1:24,134,126,1:24,134,129,1:24,134,132,1:24,133,135,1:24,133,138,1:24,133,141,1:24,133,144,1:24,132,147,1:24,132,150,1:24,132,153,1:24,131,156,1:24,132,159,1:24,131,162,1:24,131,165,1:24,131,168,1:24,131,171,1:23,131,174,1:23,130,177,1:23,130,180,1:23,130,183,1:23,130,186,1:23,130,189,1:23,129,192,1:23,129,195,1:23,129,198,1:23,129,201,1:23,129,204,1:23,129,207,1:23,129,210,1:23,129,213,1:23,129,216,1:23,129,219,1:22,128,222,1:23,129,225,1:23,129,228,1:23,129,231,1:23,129,234,1:23,129,237,1:23,129,240,1:23,129,243,1:23,129,246,1:23,130,249,1:23,130,252,1:23,130,255,1:23,130,258,1:24,130,261,1:24,131,264,1:24,131,267,1:24,132,270,1:24,132,273,1:24,133,276,1:24,134,279,1:24,135,282,1:24,135,285,1:24,136,288,1:25,136,291,1:25,138,294,1:25,139,297,1:25,139,300,1:25,140,303,1:24,141,306,1:24,141,309,1:24,142,312,1:24,143,315,1:24,144,318,1:24,145,321,1:24,146,324,1:24,147,327,1:24,148,330,1:25,149,333,1:24,150,336,1:24,150,339,1:25,152,342,1:24,152,345,1:24,154,348,1:24,154,351,1:24,156,354,1:23,156,357,1:23,157,360,1:24,159,363,1:24,160,366,1:23,161,369,1:23,162,372,1:23,162,375,1:23,163,378,1:22,164,381,1:23,165,384,1:23,166,387,1:22,167,390,1:23,168,393,1:23,168,396,1:23,169,399,1:23,169,402,1:22,170,405,1:23,171,408,1:23,172,411,1:23,172,414,1:23,172,417,1:23,173,420,1:23,174,423,1:23,174,426,1:23,175,429,1:23,176,432,1:23,177,435,1:23,177,438,1:23,178,441,1:24,179,444,1:24,179,447,1:24,179,450,1:24,180,453,1:24,181,456,1:24,182,459,1:25,182,462,1:25,182,465,1:25,183,468,1:25,184,471,1:25,184,474,1:25,185,477,1:25,186,480,1:25,187,483,1:25,187,486,1:25,188,489,1:25,188,492,1:25,188,495,1:25,188,498,1:25,188,501,1:25,187,504,1:25,189,507,1:25,190,510,1:25,191,513,1:24,192,516,1:24,192,519,1:24,193,522,1:24,193,525,1:24,193,528,1:24,193,531,1:24,194,534,1:24,194,537,1:24,194,540,1:25,194,543,1:25,195,546,1:25,197,549,1:24,199,552,1:24,201,553,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_21
if not os.path.isdir(path_results + '/T2/errsm_21'):
    os.makedirs(path_results + '/T2/errsm_21')
os.chdir(path_results + '/T2/errsm_21')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_21/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 21,127,121,20:19,121,151,19:19,118,181,18:18,117,207,17:18,118,233,16:18,119,259,15:18,122,284,14:18,127,307,13:18,134,328,12:19,142,349,11:19,152,368,10:22,164,385,9:24,175,403,8:27,181,421,7:28,181,438,6:28,179,454,5:28,176,472,4:27,176,492,3:24,176,551,2:23,175,577,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 48 -end 591')
f_crop = open('crop.txt', 'w')
f_crop.write('48,591,75,480')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 22,127,0,1:22,126,3,1:22,125,6,1:22,125,9,1:22,124,12,1:22,124,15,1:21,123,18,1:21,123,21,1:21,122,24,1:21,122,27,1:21,121,30,1:21,120,33,1:21,120,36,1:20,119,39,1:20,118,42,1:20,118,45,1:20,118,48,1:20,117,51,1:20,117,54,1:20,117,57,1:20,117,60,1:20,116,63,1:20,116,66,1:20,115,69,1:20,115,72,1:20,115,75,1:20,115,78,1:20,115,81,1:20,114,84,1:20,113,87,1:19,113,90,1:19,113,93,1:19,113,96,1:19,113,99,1:19,112,102,1:19,112,105,1:19,112,108,1:19,112,111,1:19,112,114,1:19,111,117,1:19,111,120,1:19,111,123,1:19,111,126,1:19,111,129,1:19,111,132,1:19,110,135,1:19,110,138,1:19,111,141,1:19,110,144,1:19,110,147,1:18,110,150,1:18,110,153,1:18,110,156,1:18,110,159,1:18,110,162,1:18,110,165,1:18,111,168,1:18,111,171,1:18,111,174,1:18,111,177,1:18,111,180,1:18,111,183,1:18,111,186,1:18,111,189,1:18,111,192,1:18,111,195,1:18,111,198,1:18,112,201,1:18,112,204,1:18,112,207,1:18,113,210,1:18,113,213,1:18,113,216,1:18,113,219,1:18,113,222,1:18,114,225,1:18,114,228,1:18,115,231,1:17,115,234,1:18,115,237,1:18,116,240,1:18,116,243,1:17,117,246,1:18,118,249,1:18,118,252,1:18,119,255,1:18,120,258,1:18,121,261,1:18,122,264,1:18,123,267,1:18,124,270,1:18,124,273,1:18,126,276,1:18,127,279,1:18,128,282,1:19,129,285,1:19,131,288,1:19,131,291,1:19,132,294,1:19,133,297,1:19,135,300,1:19,136,303,1:20,137,306,1:20,139,309,1:20,140,312,1:20,141,315,1:21,143,318,1:21,145,321,1:21,146,324,1:21,147,327,1:21,149,330,1:22,151,333,1:22,152,336,1:22,154,339,1:22,155,342,1:23,158,345,1:23,159,348,1:24,161,351,1:24,162,354,1:24,164,357,1:24,165,360,1:25,166,363,1:25,168,366,1:25,168,369,1:26,170,372,1:26,170,375,1:26,171,378,1:26,171,381,1:26,171,384,1:26,172,387,1:26,172,390,1:27,172,393,1:27,171,396,1:27,171,399,1:27,171,402,1:27,170,405,1:27,170,408,1:27,170,411,1:27,170,414,1:27,170,417,1:27,169,420,1:27,169,423,1:27,169,426,1:27,168,429,1:27,168,432,1:27,168,435,1:27,168,438,1:27,168,441,1:27,167,444,1:27,167,447,1:27,167,450,1:27,167,453,1:27,167,456,1:26,167,459,1:26,166,462,1:26,166,465,1:26,166,468,1:26,166,471,1:26,166,474,1:26,166,477,1:26,166,480,1:26,166,483,1:25,166,486,1:25,164,489,1:25,165,492,1:25,165,495,1:25,165,498,1:25,165,501,1:24,165,504,1:24,165,507,1:24,165,510,1:24,165,513,1:24,165,516,1:24,165,519,1:24,165,522,1:24,166,525,1:23,166,528,1:23,167,531,1:23,167,534,1:23,168,537,1:23,171,540,1:23,173,543,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')

"""
# Preprocessing for subject errsm_22
if not os.path.isdir(path_results + '/T2/errsm_22'):
    os.makedirs(path_results + '/T2/errsm_22')
os.chdir(path_results + '/T2/errsm_22')
sct.run('dcm2nii -o . -r N '+os.path.join(folder_data_errsm, 'errsm_22', '25-SPINE_T2', '*.dcm'))
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 23,123,140,20:23,121,171,19:23,120,198,18:23,118,224,17:22,116,247,16:22,115,269,15:22,115,292,14:22,117,313,13:23,121,334,12:23,128,354,11:23,135,373,10:23,143,390,9:24,150,407,8:24,150,424,7:24,149,441,6:24,151,458,5:23,153,474,4:21,157,492,3:23,162,547,2:25,171,569,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 65 -end 582')
f_crop = open('crop.txt', 'w')
f_crop.write('65,582,0,464')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 20,122,0,1:20,118,25,1:21,114,54,1:22,112,86,1:23,111,112,1:23,110,133,1:23,110,154,1:23,109,176,1:22,109,194,1:22,109,213,1:22,111,236,1:22,114,257,1:23,118,276,1:23,125,296,1:23,131,313,1:23,136,329,1:23,141,347,1:24,143,362,1:23,143,376,1:23,144,390,1:22,145,407,1:21,148,423,1:20,149,436,1:20,150,450,1:20,152,465,1:21,154,474,1:23,158,483,1:24,161,491,1:24,163,499,1:24,168,508,1:25,174,517,1')
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o labels_updown.nii.gz -t create -x 20,151,465,1:21,157,475,1:23,159,483,1:23,163,492,1:24,166,499,1:24,169,507,1:25,176,517,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')
"""

# Preprocessing for subject errsm_23
if not os.path.isdir(path_results + '/T2/errsm_23'):
    os.makedirs(path_results + '/T2/errsm_23')
os.chdir(path_results + '/T2/errsm_23')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_23/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 17,143,136,20:19,140,165,19:19,138,192,18:19,136,216,17:22,135,239,16:22,134,262,15:23,135,286,14:25,137,307,13:25,141,327,12:22,145,346,11:20,149,365,10:20,154,384,9:20,158,402,8:20,159,419,7:21,157,436,6:21,157,453,5:22,161,470,4:22,166,486,3:21,173,542,2:23,182,563,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 62 -end 582')
f_crop = open('crop.txt', 'w')
f_crop.write('62,582,100,455')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 16,141,0,1:16,140,3,1:16,140,6,1:16,139,9,1:16,139,12,1:16,138,15,1:16,137,18,1:16,137,21,1:16,136,24,1:16,136,27,1:16,135,30,1:16,135,33,1:16,135,36,1:16,134,39,1:16,133,42,1:16,133,45,1:16,133,48,1:16,133,51,1:16,133,54,1:17,133,57,1:17,133,60,1:17,133,63,1:17,133,66,1:17,133,69,1:17,133,72,1:17,133,75,1:17,133,78,1:17,132,81,1:17,132,84,1:18,132,87,1:18,132,90,1:18,132,93,1:18,132,96,1:18,131,99,1:18,131,102,1:18,131,105,1:18,131,108,1:18,131,111,1:18,131,114,1:18,131,117,1:18,131,120,1:19,130,123,1:19,130,126,1:19,130,129,1:19,130,132,1:19,130,135,1:19,130,138,1:19,130,141,1:19,130,144,1:19,129,147,1:19,129,150,1:19,129,153,1:20,129,156,1:20,129,159,1:20,129,162,1:20,129,165,1:20,129,168,1:20,128,171,1:20,128,174,1:20,128,177,1:20,129,180,1:20,128,183,1:20,129,186,1:20,129,189,1:20,129,192,1:21,128,195,1:21,129,198,1:21,129,201,1:21,128,204,1:21,129,207,1:21,129,210,1:21,129,213,1:22,129,216,1:22,129,219,1:22,130,222,1:22,130,225,1:22,130,228,1:22,130,231,1:22,130,234,1:22,130,237,1:23,131,240,1:23,132,243,1:23,132,246,1:23,132,249,1:23,133,252,1:23,133,255,1:23,134,258,1:23,134,261,1:23,135,264,1:23,135,267,1:23,136,270,1:23,137,273,1:23,137,276,1:23,137,279,1:23,138,282,1:22,139,285,1:22,139,288,1:22,140,291,1:22,140,294,1:22,141,297,1:22,142,300,1:22,142,303,1:22,143,306,1:22,143,309,1:22,143,312,1:22,144,315,1:22,145,318,1:21,145,321,1:21,146,324,1:21,146,327,1:21,146,330,1:21,147,333,1:21,147,336,1:21,148,339,1:21,149,342,1:21,149,345,1:20,149,348,1:20,149,351,1:20,150,354,1:20,150,357,1:20,151,360,1:20,151,363,1:20,151,366,1:20,151,369,1:20,151,372,1:20,150,375,1:20,150,378,1:21,151,381,1:21,151,384,1:21,151,387,1:21,152,390,1:21,152,393,1:21,153,396,1:21,153,399,1:21,153,402,1:21,154,405,1:21,154,408,1:21,155,411,1:21,155,414,1:21,156,417,1:21,156,420,1:21,157,423,1:21,157,426,1:21,158,429,1:21,158,432,1:21,158,435,1:21,159,438,1:21,159,441,1:21,159,444,1:21,160,447,1:21,160,450,1:21,160,453,1:21,161,456,1:21,162,459,1:21,162,462,1:21,162,465,1:21,162,468,1:21,162,471,1:21,163,474,1:21,164,477,1:21,165,480,1:21,166,483,1:21,167,486,1:21,167,489,1:22,169,492,1:21,170,495,1:22,172,498,1:22,172,501,1:22,173,504,1:22,174,507,1:22,175,510,1:23,178,513,1:23,180,516,1:23,182,519,1:23,182,520,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_24
if not os.path.isdir(path_results + '/T2/errsm_24'):
    os.makedirs(path_results + '/T2/errsm_24')
os.chdir(path_results + '/T2/errsm_24')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_24/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 14,133,106,20:14,131,138,19:14,128,168,18:15,126,196,17:16,124,223,16:16,122,250,15:17,125,274,14:17,129,300,13:20,136,323,12:20,146,347,11:21,157,367,10:21,172,383,9:21,183,399,8:23,186,415,7:23,186,432,6:23,186,448,5:23,187,467,4:23,188,483,3:23,190,541,2:25,195,564,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  26 -end 579 ')
f_crop = open('crop.txt', 'w')
f_crop.write('26,579,90,490')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 15,131,0,1:14,130,3,1:14,130,6,1:15,129,9,1:14,128,12,1:14,128,15,1:14,128,18,1:14,128,21,1:14,127,24,1:14,127,27,1:14,127,30,1:14,126,33,1:14,126,36,1:14,125,39,1:14,125,42,1:13,125,45,1:13,124,48,1:13,124,51,1:13,124,54,1:12,124,57,1:12,124,60,1:12,124,63,1:13,124,66,1:13,124,69,1:13,124,72,1:12,124,75,1:12,124,78,1:12,124,81,1:12,123,84,1:12,123,87,1:12,123,90,1:13,122,93,1:13,122,96,1:13,122,99,1:13,122,102,1:13,122,105,1:13,121,108,1:13,121,111,1:13,121,114,1:13,121,117,1:13,121,120,1:13,121,123,1:13,121,126,1:13,121,129,1:13,121,132,1:13,120,135,1:13,120,138,1:13,120,141,1:13,120,144,1:13,120,147,1:14,120,150,1:13,120,153,1:14,119,156,1:14,119,159,1:14,119,162,1:14,119,165,1:14,119,168,1:15,119,171,1:15,119,174,1:15,118,177,1:15,118,180,1:15,118,183,1:15,118,186,1:15,118,189,1:15,117,192,1:15,117,195,1:16,117,198,1:16,117,201,1:16,117,204,1:16,117,207,1:15,117,210,1:15,117,213,1:15,117,216,1:16,118,219,1:16,118,222,1:16,118,225,1:16,118,228,1:16,118,231,1:16,118,234,1:16,118,237,1:16,119,240,1:16,119,243,1:16,120,246,1:16,120,249,1:16,120,252,1:16,121,255,1:16,121,258,1:16,121,261,1:16,122,264,1:17,123,267,1:17,123,270,1:17,124,273,1:17,125,276,1:17,125,279,1:17,126,282,1:17,127,285,1:17,128,288,1:18,128,291,1:18,129,294,1:18,130,297,1:18,131,300,1:19,132,303,1:19,133,306,1:19,135,309,1:19,136,312,1:19,138,315,1:19,139,318,1:19,140,321,1:19,142,324,1:20,143,327,1:19,145,330,1:20,147,333,1:20,148,336,1:20,149,339,1:20,151,342,1:21,154,345,1:21,156,348,1:21,158,351,1:21,159,354,1:21,161,357,1:22,163,360,1:22,165,363,1:22,167,366,1:22,169,369,1:22,170,372,1:22,172,375,1:22,173,378,1:22,175,381,1:22,176,384,1:22,177,387,1:22,177,390,1:22,178,393,1:22,178,396,1:23,178,399,1:23,178,402,1:23,179,405,1:22,179,408,1:22,179,411,1:22,180,414,1:22,180,417,1:22,180,420,1:22,180,423,1:22,180,426,1:22,180,429,1:22,180,432,1:22,180,435,1:22,180,438,1:22,180,441,1:22,180,444,1:22,180,447,1:22,180,450,1:22,180,453,1:22,180,456,1:22,180,459,1:22,180,462,1:22,180,465,1:23,180,468,1:23,179,471,1:23,179,474,1:22,179,477,1:23,179,480,1:23,179,483,1:23,179,486,1:23,179,489,1:23,180,492,1:23,180,495,1:23,180,498,1:23,180,501,1:23,178,504,1:23,179,507,1:24,180,510,1:24,181,513,1:24,181,516,1:24,181,519,1:24,181,522,1:24,182,525,1:24,183,528,1:24,184,531,1:24,184,534,1:24,184,537,1:25,184,540,1:25,184,543,1:25,185,546,1:25,187,549,1:25,188,552,1:25,189,553,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_25
if not os.path.isdir(path_results + '/T2/errsm_25'):
    os.makedirs(path_results + '/T2/errsm_25')
os.chdir(path_results + '/T2/errsm_25')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_25/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 26,132,173,20:24,128,204,19:24,124,232,18:23,122,257,17:23,121,279,16:24,121,302,15:24,124,324,14:24,128,345,13:24,133,365,12:24,138,384,11:24,145,401,10:24,153,419,9:24,162,438,8:24,168,455,7:25,172,469,6:24,178,484,5:23,183,500,4:23,186,517,3:24,197,577,2:27,210,600,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 105 -end 614')
f_crop = open('crop.txt', 'w')
f_crop.write('105,614,35,440')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 29,136,0,1:30,136,3,1:29,136,6,1:29,135,9,1:29,134,12,1:29,133,15,1:29,133,18,1:29,132,21,1:29,131,24,1:28,131,27,1:28,130,30,1:28,129,33,1:28,128,36,1:28,127,39,1:29,126,42,1:28,126,45,1:28,125,48,1:28,125,51,1:27,124,54,1:28,123,57,1:27,123,60,1:27,123,63,1:27,122,66,1:27,122,69,1:27,121,72,1:26,121,75,1:26,121,78,1:26,121,81,1:26,120,84,1:26,119,87,1:26,119,90,1:26,119,93,1:26,118,96,1:26,118,99,1:25,118,102,1:25,118,105,1:25,118,108,1:25,118,111,1:25,117,114,1:25,116,117,1:25,116,120,1:24,116,123,1:24,116,126,1:24,116,129,1:24,116,132,1:24,116,135,1:23,115,138,1:23,115,141,1:23,115,144,1:23,115,147,1:23,115,150,1:23,115,153,1:23,115,156,1:23,115,159,1:23,115,162,1:23,115,165,1:22,115,168,1:22,115,171,1:22,115,174,1:22,115,177,1:22,115,180,1:22,115,183,1:23,115,186,1:23,115,189,1:22,114,192,1:23,115,195,1:23,115,198,1:23,116,201,1:23,116,204,1:23,116,207,1:23,116,210,1:24,117,213,1:24,117,216,1:24,117,219,1:24,118,222,1:24,119,225,1:24,119,228,1:24,119,231,1:24,120,234,1:24,120,237,1:25,121,240,1:25,122,243,1:25,122,246,1:25,123,249,1:25,124,252,1:25,125,255,1:25,125,258,1:24,127,261,1:24,127,264,1:24,128,267,1:24,128,270,1:24,130,273,1:24,131,276,1:25,131,279,1:25,132,282,1:25,133,285,1:24,135,288,1:24,136,291,1:24,137,294,1:24,138,297,1:25,139,300,1:25,140,303,1:25,142,306,1:25,143,309,1:24,144,312,1:24,146,315,1:24,148,318,1:24,148,321,1:24,150,324,1:24,152,327,1:24,153,330,1:24,155,333,1:24,156,336,1:24,157,339,1:24,158,342,1:23,160,345,1:24,160,348,1:24,161,351,1:23,161,354,1:24,163,357,1:24,164,360,1:24,165,363,1:23,165,366,1:23,167,369,1:23,168,372,1:23,169,375,1:23,170,378,1:23,171,381,1:23,173,384,1:23,173,387,1:23,174,390,1:23,174,393,1:23,175,396,1:23,176,399,1:23,177,402,1:23,177,405,1:23,177,408,1:24,178,411,1:23,179,414,1:23,179,417,1:23,179,420,1:23,179,423,1:23,179,426,1:23,180,429,1:23,180,432,1:24,181,435,1:24,182,438,1:24,182,441,1:24,182,444,1:24,183,447,1:24,184,450,1:25,184,453,1:25,184,456,1:24,185,459,1:24,185,462,1:24,185,465,1:24,185,468,1:24,187,471,1:25,188,474,1:25,188,477,1:25,190,480,1:25,192,483,1:25,193,486,1:25,195,489,1:26,196,492,1:26,197,495,1:26,199,498,1:26,201,501,1:26,202,504,1:27,204,507,1:26,208,509,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_30
if not os.path.isdir(path_results + '/T2/errsm_30'):
    os.makedirs(path_results + '/T2/errsm_30')
os.chdir(path_results + '/T2/errsm_30')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_30/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 15,134,115,20:15,126,145,19:15,121,174,18:17,117,199,17:18,115,224,16:19,114,247,15:19,116,271,14:19,121,294,13:20,127,317,12:20,135,337,11:22,145,357,10:24,157,374,9:26,168,391,8:27,175,407,7:26,178,422,6:26,179,438,5:26,180,456,4:24,181,476,3:22,181,536,2:22,184,561,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 37 -end 576')
f_crop = open('crop.txt', 'w')
f_crop.write('37,576,80,475')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 12,136,0,1:12,135,3,1:12,135,6,1:12,134,9,1:12,133,12,1:12,132,15,1:12,132,18,1:11,131,21,1:12,131,24,1:12,130,27,1:12,130,30,1:12,129,33,1:12,129,36,1:12,128,39,1:12,128,42,1:12,127,45,1:13,127,48,1:13,127,51,1:13,127,54,1:13,126,57,1:13,126,60,1:13,125,63,1:13,125,66,1:13,124,69,1:13,124,72,1:13,123,75,1:13,123,78,1:14,123,81,1:14,122,84,1:14,122,87,1:14,121,90,1:14,121,93,1:14,121,96,1:14,120,99,1:14,119,102,1:14,119,105,1:14,119,108,1:15,118,111,1:14,118,114,1:14,117,117,1:15,117,120,1:14,116,123,1:14,116,126,1:15,115,129,1:15,115,132,1:15,114,135,1:15,114,138,1:14,114,141,1:14,114,144,1:14,113,147,1:14,113,150,1:14,112,153,1:15,112,156,1:15,112,159,1:14,111,162,1:14,111,165,1:14,111,168,1:14,111,171,1:14,111,174,1:14,110,177,1:15,110,180,1:15,110,183,1:15,110,186,1:15,110,189,1:15,110,192,1:15,110,195,1:15,110,198,1:15,110,201,1:15,110,204,1:15,110,207,1:15,110,210,1:15,110,213,1:15,110,216,1:15,110,219,1:15,111,222,1:16,111,225,1:16,111,228,1:16,111,231,1:16,111,234,1:16,112,237,1:16,112,240,1:16,112,243,1:16,113,246,1:16,113,249,1:17,114,252,1:18,115,255,1:18,115,258,1:18,116,261,1:18,117,264,1:18,118,267,1:18,119,270,1:18,119,273,1:18,120,276,1:19,121,279,1:19,121,282,1:19,122,285,1:20,124,288,1:20,125,291,1:20,126,294,1:20,127,297,1:21,129,300,1:21,130,303,1:21,131,306,1:22,133,309,1:22,134,312,1:22,136,315,1:22,137,318,1:22,139,321,1:23,141,324,1:23,142,327,1:23,144,330,1:23,146,333,1:23,147,336,1:23,149,339,1:24,151,342,1:24,153,345,1:24,154,348,1:24,156,351,1:24,158,354,1:24,160,357,1:24,161,360,1:24,163,363,1:25,164,366,1:25,165,369,1:25,166,372,1:25,168,375,1:25,169,378,1:25,169,381,1:26,170,384,1:26,170,387,1:26,171,390,1:26,172,393,1:26,172,396,1:26,172,399,1:26,172,402,1:26,172,405,1:26,172,408,1:26,173,411,1:26,172,414,1:26,172,417,1:25,172,420,1:26,172,423,1:25,172,426,1:25,172,429,1:25,172,432,1:25,172,435,1:24,173,438,1:24,172,441,1:24,172,444,1:24,172,447,1:24,172,450,1:24,172,453,1:23,172,456,1:23,172,459,1:23,172,462,1:23,172,465,1:23,172,468,1:23,172,471,1:23,172,474,1:23,173,477,1:23,173,480,1:23,173,483,1:22,173,486,1:22,173,489,1:22,171,492,1:22,171,495,1:22,171,498,1:22,171,501,1:22,171,504,1:22,172,507,1:22,172,510,1:22,173,513,1:22,173,516,1:22,174,519,1:22,174,522,1:22,174,525,1:22,175,528,1:22,176,531,1:22,177,534,1:22,180,537,1:22,181,539,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_31
if not os.path.isdir(path_results + '/T2/errsm_31'):
    os.makedirs(path_results + '/T2/errsm_31')
os.chdir(path_results + '/T2/errsm_31')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_31/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 34,139,75,20:32,137,108,19:30,131,140,18:27,128,170,17:27,124,199,16:26,122,228,15:25,123,254,14:25,127,280,13:24,132,305,12:24,139,329,11:24,146,351,10:24,154,373,9:24,160,395,8:26,164,414,7:26,167,433,6:27,171,453,5:28,173,472,4:28,173,492,3:22,166,555,2:22,171,578,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 593')
f_crop = open('crop.txt', 'w')
f_crop.write('0,593,120,530')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 35,133,0,1:35,134,3,1:35,133,6,1:35,133,9,1:35,133,12,1:35,133,15,1:35,133,18,1:35,133,21,1:35,132,24,1:35,132,27,1:35,132,30,1:35,131,33,1:35,131,36,1:35,130,39,1:35,130,42,1:35,130,45,1:35,129,48,1:35,128,51,1:35,128,54,1:35,128,57,1:35,128,60,1:35,127,63,1:35,127,66,1:34,127,69,1:34,127,72,1:34,126,75,1:34,126,78,1:34,126,81,1:34,126,84,1:34,125,87,1:34,125,90,1:33,125,93,1:33,125,96,1:33,124,99,1:33,124,102,1:33,124,105,1:33,124,108,1:33,124,111,1:32,124,114,1:32,124,117,1:32,123,120,1:32,123,123,1:32,123,126,1:32,123,129,1:32,123,132,1:32,123,135,1:31,122,138,1:31,122,141,1:31,122,144,1:31,122,147,1:31,122,150,1:30,121,153,1:30,121,156,1:30,121,159,1:30,121,162,1:29,120,165,1:29,120,168,1:29,120,171,1:29,119,174,1:28,119,177,1:28,119,180,1:28,119,183,1:28,119,186,1:28,118,189,1:28,118,192,1:27,118,195,1:27,118,198,1:27,118,201,1:27,118,204,1:27,117,207,1:27,118,210,1:26,117,213,1:26,117,216,1:26,117,219,1:26,117,222,1:26,117,225,1:26,117,228,1:26,117,231,1:26,117,234,1:26,117,237,1:26,118,240,1:26,118,243,1:26,118,246,1:25,118,249,1:25,118,252,1:25,118,255,1:25,119,258,1:25,119,261,1:25,119,264,1:25,120,267,1:25,120,270,1:25,121,273,1:25,121,276,1:25,122,279,1:25,122,282,1:25,123,285,1:25,123,288,1:25,124,291,1:25,124,294,1:25,125,297,1:25,126,300,1:25,126,303,1:25,127,306,1:25,127,309,1:25,128,312,1:25,129,315,1:24,130,318,1:24,130,321,1:24,131,324,1:24,132,327,1:24,133,330,1:24,134,333,1:24,134,336,1:23,136,339,1:23,136,342,1:23,137,345,1:23,138,348,1:24,139,351,1:24,140,354,1:24,140,357,1:24,141,360,1:24,142,363,1:24,143,366,1:24,143,369,1:24,144,372,1:24,145,375,1:24,146,378,1:24,146,381,1:23,147,384,1:24,148,387,1:24,149,390,1:24,150,393,1:24,150,396,1:24,151,399,1:24,152,402,1:24,153,405,1:24,154,408,1:25,155,411,1:25,155,414,1:25,156,417,1:25,157,420,1:25,158,423,1:25,158,426,1:25,159,429,1:25,159,432,1:25,160,435,1:25,160,438,1:25,161,441,1:25,161,444,1:25,162,447,1:25,162,450,1:25,162,453,1:25,163,456,1:25,163,459,1:25,163,462,1:26,163,465,1:26,163,468,1:25,163,471,1:25,164,474,1:25,163,477,1:25,164,480,1:25,164,483,1:24,163,486,1:24,163,489,1:24,162,492,1:24,162,495,1:25,162,498,1:24,161,501,1:24,161,504,1:24,161,507,1:24,160,510,1:24,160,513,1:24,159,516,1:23,160,519,1:23,159,522,1:23,159,525,1:23,159,528,1:22,160,531,1:22,159,534,1:22,159,537,1:22,159,540,1:22,159,543,1:22,158,546,1:22,158,549,1:22,158,552,1:21,158,555,1:21,158,558,1:21,158,561,1:21,159,564,1:21,160,567,1:21,160,570,1:20,161,573,1:20,161,576,1:20,161,579,1:20,162,582,1:20,163,585,1:20,166,588,1:21,168,591,1:21,169,593,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_32
if not os.path.isdir(path_results + '/T2/errsm_32'):
    os.makedirs(path_results + '/T2/errsm_32')
os.chdir(path_results + '/T2/errsm_32')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_32/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 16,125,75,20:17,121,107,19:19,121,137,18:19,120,165,17:20,118,190,16:21,117,216,15:22,118,240,14:22,122,264,13:24,128,286,12:24,136,307,11:24,146,326,10:24,156,345,9:24,166,362,8:25,171,380,7:25,169,396,6:25,168,413,5:24,168,431,4:23,167,451,3:21,162,511,2:20,167,538,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 552')
f_crop = open('crop.txt', 'w')
f_crop.write('0,552,80,485')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 12,126,0,1:12,124,3,1:12,123,6,1:12,123,9,1:12,122,12,1:12,122,15,1:12,122,18,1:12,121,21,1:13,120,24,1:12,120,27,1:13,120,30,1:13,119,33,1:13,119,36,1:13,118,39,1:13,118,42,1:13,118,45,1:13,118,48,1:13,118,51,1:13,117,54,1:13,117,57,1:13,117,60,1:13,116,63,1:14,116,66,1:14,116,69,1:14,115,72,1:14,115,75,1:14,115,78,1:14,115,81,1:14,115,84,1:15,115,87,1:15,115,90,1:15,114,93,1:15,114,96,1:15,114,99,1:15,114,102,1:16,114,105,1:16,114,108,1:16,113,111,1:16,113,114,1:16,113,117,1:16,113,120,1:17,113,123,1:17,113,126,1:17,112,129,1:17,112,132,1:17,112,135,1:18,112,138,1:18,112,141,1:18,112,144,1:18,112,147,1:18,112,150,1:18,112,153,1:18,112,156,1:18,112,159,1:19,112,162,1:19,112,165,1:19,112,168,1:19,112,171,1:19,111,174,1:19,111,177,1:19,111,180,1:19,111,183,1:20,111,186,1:20,111,189,1:20,111,192,1:20,111,195,1:20,111,198,1:20,111,201,1:20,111,204,1:20,111,207,1:21,111,210,1:21,111,213,1:21,111,216,1:21,111,219,1:21,111,222,1:21,111,225,1:21,112,228,1:21,112,231,1:21,112,234,1:21,112,237,1:21,113,240,1:21,113,243,1:22,113,246,1:22,114,249,1:22,114,252,1:22,115,255,1:23,116,258,1:23,116,261,1:23,117,264,1:23,118,267,1:23,118,270,1:23,119,273,1:24,120,276,1:24,120,279,1:23,121,282,1:24,122,285,1:24,123,288,1:24,123,291,1:24,125,294,1:24,126,297,1:24,127,300,1:24,128,303,1:24,129,306,1:24,130,309,1:24,131,312,1:24,133,315,1:24,135,318,1:24,136,321,1:24,137,324,1:24,139,327,1:24,140,330,1:24,141,333,1:24,143,336,1:24,144,339,1:24,145,342,1:23,146,345,1:24,147,348,1:24,149,351,1:24,150,354,1:24,151,357,1:24,153,360,1:24,154,363,1:24,155,366,1:24,156,369,1:24,157,372,1:24,158,375,1:24,159,378,1:24,160,381,1:24,161,384,1:24,161,387,1:24,161,390,1:24,161,393,1:25,161,396,1:24,161,399,1:24,161,402,1:24,161,405,1:24,161,408,1:24,160,411,1:24,160,414,1:24,160,417,1:24,160,420,1:24,160,423,1:24,160,426,1:24,160,429,1:24,160,432,1:23,160,435,1:23,160,438,1:23,159,441,1:23,159,444,1:23,159,447,1:23,159,450,1:23,158,453,1:23,158,456,1:23,158,459,1:23,157,462,1:23,157,465,1:23,157,468,1:23,156,471,1:23,155,474,1:22,155,477,1:22,155,480,1:22,155,483,1:22,155,486,1:22,155,489,1:22,155,492,1:22,155,495,1:21,153,498,1:21,154,501,1:22,154,504,1:21,154,507,1:21,155,510,1:21,154,513,1:21,154,516,1:21,155,519,1:20,155,522,1:20,156,525,1:20,156,528,1:20,156,531,1:20,156,534,1:20,156,537,1:20,157,540,1:20,158,543,1:19,160,546,1:19,163,549,1:19,164,552,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_33
if not os.path.isdir(path_results + '/T2/errsm_33'):
    os.makedirs(path_results + '/T2/errsm_33')
os.chdir(path_results + '/T2/errsm_33')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_33/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 19,126,71,20:19,121,101,19:20,119,135,18:21,121,162,17:22,121,189,16:22,121,215,15:22,123,243,14:23,126,267,13:24,133,290,12:25,143,313,11:26,154,331,10:26,166,350,9:26,177,367,8:25,183,385,7:25,186,401,6:25,186,417,5:25,186,435,4:25,185,452,3:25,181,512,2:25,187,536,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 548')
f_crop = open('crop.txt', 'w')
f_crop.write('0,548,130,485')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 20,128,0,1:20,127,3,1:20,126,6,1:20,126,9,1:19,125,12,1:19,124,15,1:20,123,18,1:19,122,21,1:20,122,24,1:20,121,27,1:19,120,30,1:19,120,33,1:19,120,36,1:19,118,39,1:19,118,42,1:19,117,45,1:19,117,48,1:19,116,51,1:20,116,54,1:19,115,57,1:19,114,60,1:19,114,63,1:20,113,66,1:19,113,69,1:20,114,72,1:19,113,75,1:19,113,78,1:19,113,81,1:19,113,84,1:19,113,87,1:20,114,90,1:20,113,93,1:20,113,96,1:20,113,99,1:20,112,102,1:20,112,105,1:20,113,108,1:20,113,111,1:20,113,114,1:20,113,117,1:20,113,120,1:20,112,123,1:20,112,126,1:20,112,129,1:20,112,132,1:20,112,135,1:21,112,138,1:20,112,141,1:20,112,144,1:20,113,147,1:21,113,150,1:21,113,153,1:20,113,156,1:21,113,159,1:21,113,162,1:21,114,165,1:21,114,168,1:21,114,171,1:21,114,174,1:21,114,177,1:21,114,180,1:21,114,183,1:21,114,186,1:21,114,189,1:21,114,192,1:21,114,195,1:22,114,198,1:22,114,201,1:22,114,204,1:22,115,207,1:22,115,210,1:22,115,213,1:22,115,216,1:22,115,219,1:22,115,222,1:22,116,225,1:22,116,228,1:22,117,231,1:22,117,234,1:22,117,237,1:22,117,240,1:22,117,243,1:22,118,246,1:22,118,249,1:22,119,252,1:22,120,255,1:22,120,258,1:23,121,261,1:23,121,264,1:23,122,267,1:23,123,270,1:23,123,273,1:23,123,276,1:23,125,279,1:23,125,282,1:23,126,285,1:23,127,288,1:24,128,291,1:24,129,294,1:24,130,297,1:24,132,300,1:25,133,303,1:25,134,306,1:25,135,309,1:25,136,312,1:26,138,315,1:26,140,318,1:25,141,321,1:26,142,324,1:25,144,327,1:25,145,330,1:26,146,333,1:26,148,336,1:25,149,339,1:26,151,342,1:26,152,345,1:26,154,348,1:26,156,351,1:26,157,354,1:26,159,357,1:26,160,360,1:26,161,363,1:27,163,366,1:26,164,369,1:26,166,372,1:27,166,375,1:27,168,378,1:27,169,381,1:26,170,384,1:26,171,387,1:27,172,390,1:27,173,393,1:27,174,396,1:27,174,399,1:26,175,402,1:26,175,405,1:26,175,408,1:26,175,411,1:26,175,414,1:26,175,417,1:26,176,420,1:26,176,423,1:26,176,426,1:26,176,429,1:26,176,432,1:26,175,435,1:26,175,438,1:25,175,441,1:25,175,444,1:25,174,447,1:25,174,450,1:25,173,453,1:25,173,456,1:25,173,459,1:25,172,462,1:25,172,465,1:25,171,468,1:26,171,471,1:25,171,474,1:25,170,477,1:25,170,480,1:25,170,483,1:25,170,486,1:25,170,489,1:25,171,492,1:25,170,495,1:24,170,498,1:24,170,501,1:24,170,504,1:24,171,507,1:24,172,510,1:24,172,513,1:24,172,516,1:24,173,519,1:24,173,522,1:24,174,525,1:24,174,528,1:24,175,531,1:24,175,534,1:23,175,537,1:23,176,540,1:23,178,543,1:23,180,546,1:23,181,548,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_34
if not os.path.isdir(path_results + '/T2/errsm_34'):
    os.makedirs(path_results + '/T2/errsm_34')
os.chdir(path_results + '/T2/errsm_34')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_34/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 19,131,107,20:21,127,139,19:23,125,170,18:25,123,197,17:25,120,223,16:27,117,247,15:27,117,271,14:28,120,295,13:28,124,318,12:28,131,341,11:27,138,363,10:27,151,381,9:27,161,400,8:26,167,416,7:26,170,434,6:24,173,452,5:23,178,471,4:21,183,490,3:20,187,556,2:19,190,581,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 597')
f_crop = open('crop.txt', 'w')
f_crop.write('0,597,130,525')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 17,130,0,1:17,129,3,1:17,129,6,1:17,129,9,1:17,129,12,1:17,130,15,1:17,130,18,1:17,129,21,1:17,129,24,1:17,128,27,1:17,128,30,1:17,127,33,1:17,127,36,1:17,126,39,1:17,126,42,1:17,126,45,1:17,126,48,1:18,126,51,1:18,125,54,1:18,124,57,1:18,124,60,1:18,124,63,1:18,123,66,1:18,123,69,1:18,123,72,1:18,122,75,1:18,122,78,1:18,122,81,1:18,122,84,1:19,122,87,1:19,122,90,1:19,122,93,1:19,122,96,1:19,122,99,1:19,122,102,1:19,121,105,1:19,121,108,1:20,121,111,1:20,121,114,1:20,121,117,1:20,121,120,1:20,121,123,1:20,121,126,1:21,121,129,1:21,120,132,1:21,120,135,1:21,120,138,1:21,120,141,1:22,120,144,1:22,120,147,1:22,120,150,1:22,120,153,1:22,119,156,1:22,119,159,1:22,119,162,1:23,118,165,1:23,118,168,1:23,118,171,1:23,118,174,1:23,117,177,1:23,117,180,1:23,117,183,1:24,116,186,1:24,116,189,1:24,116,192,1:24,116,195,1:24,115,198,1:25,115,201,1:25,115,204,1:25,115,207,1:25,115,210,1:25,115,213,1:26,114,216,1:26,113,219,1:26,113,222,1:26,113,225,1:26,113,228,1:26,113,231,1:26,112,234,1:26,112,237,1:26,112,240,1:26,112,243,1:27,112,246,1:27,112,249,1:27,112,252,1:27,112,255,1:27,112,258,1:27,112,261,1:27,112,264,1:28,112,267,1:28,112,270,1:28,112,273,1:28,112,276,1:28,112,279,1:28,113,282,1:28,113,285,1:28,114,288,1:28,114,291,1:28,114,294,1:28,115,297,1:28,115,300,1:28,115,303,1:28,116,306,1:28,117,309,1:28,117,312,1:28,118,315,1:28,118,318,1:28,119,321,1:28,120,324,1:28,121,327,1:28,121,330,1:28,122,333,1:28,123,336,1:28,124,339,1:28,125,342,1:28,126,345,1:28,127,348,1:28,128,351,1:28,129,354,1:28,130,357,1:28,132,360,1:28,133,363,1:27,134,366,1:28,136,369,1:28,138,372,1:28,139,375,1:28,140,378,1:28,141,381,1:28,143,384,1:28,145,387,1:28,146,390,1:27,148,393,1:27,149,396,1:27,150,399,1:27,151,402,1:27,152,405,1:27,154,408,1:26,155,411,1:27,156,414,1:27,157,417,1:26,158,420,1:26,159,423,1:26,159,426,1:26,160,429,1:26,161,432,1:26,162,435,1:26,162,438,1:26,163,441,1:25,164,444,1:25,165,447,1:25,165,450,1:24,165,453,1:24,167,456,1:24,167,459,1:24,168,462,1:23,169,465,1:23,170,468,1:23,170,471,1:23,171,474,1:22,171,477,1:22,172,480,1:22,172,483,1:22,173,486,1:22,173,489,1:22,173,492,1:22,173,495,1:21,174,498,1:21,174,501,1:21,174,504,1:21,174,507,1:21,174,510,1:21,174,513,1:21,175,516,1:21,175,519,1:21,175,522,1:21,176,525,1:21,176,528,1:21,177,531,1:21,177,534,1:22,177,537,1:22,176,540,1:22,175,543,1:22,176,546,1:22,177,549,1:22,177,552,1:22,178,555,1:21,178,558,1:21,178,561,1:21,178,564,1:21,179,567,1:21,179,570,1:21,179,573,1:21,179,576,1:21,180,579,1:21,179,582,1:21,180,585,1:21,181,588,1:21,183,591,1:21,185,594,1:20,189,597,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject sct_001
if not os.path.isdir(path_results + '/T2/sct_001'):
    os.makedirs(path_results + '/T2/sct_001')
os.chdir(path_results + '/T2/sct_001')
sct.run('dcm2nii -o . -r N '+new_folder+'/sct_001/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 5,165,19,23:10,159,53,22:12,151,87,21:14,144,119,20:16,135,150,19:17,129,180,18:18,127,208,17:18,125,234,16:19,125,260,15:19,126,284,14:20,130,308,13:20,137,331,12:20,146,351,11:20,155,371,10:20,166,390,9:21,175,407,8:22,179,423,7:23,181,439,6:25,182,456,5:26,183,474,4:27,185,492,3:28,185,551,2:26,193,571,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 40 -end 588')
f_crop = open('crop.txt', 'w')
f_crop.write('40,588,100,485')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 8,150,0,1:9,149,3,1:9,149,6,1:9,148,9,1:10,147,12,1:10,146,15,1:10,146,18,1:10,146,21,1:11,145,24,1:10,144,27,1:11,144,30,1:11,143,33,1:11,141,36,1:12,140,39,1:12,139,42,1:12,139,45,1:12,138,48,1:12,138,51,1:13,137,54,1:13,137,57,1:13,136,60,1:13,136,63,1:13,135,66,1:13,134,69,1:14,134,72,1:14,134,75,1:14,133,78,1:14,132,81,1:14,132,84,1:14,131,87,1:15,131,90,1:15,130,93,1:15,129,96,1:15,129,99,1:15,128,102,1:15,128,105,1:15,127,108,1:16,126,111,1:16,126,114,1:16,126,117,1:16,125,120,1:16,125,123,1:16,125,126,1:16,124,129,1:16,124,132,1:17,123,135,1:17,123,138,1:17,123,141,1:17,123,144,1:17,123,147,1:17,123,150,1:18,122,153,1:18,122,156,1:18,122,159,1:18,121,162,1:18,121,165,1:18,121,168,1:18,121,171,1:18,121,174,1:18,120,177,1:18,120,180,1:18,120,183,1:19,120,186,1:19,120,189,1:19,120,192,1:19,120,195,1:19,119,198,1:19,119,201,1:19,120,204,1:19,120,207,1:19,119,210,1:19,119,213,1:19,119,216,1:19,119,219,1:19,119,222,1:19,119,225,1:19,120,228,1:19,120,231,1:19,120,234,1:20,120,237,1:20,121,240,1:20,121,243,1:20,121,246,1:20,122,249,1:20,123,252,1:20,123,255,1:20,124,258,1:20,124,261,1:20,124,264,1:20,126,267,1:20,126,270,1:20,127,273,1:20,127,276,1:20,128,279,1:20,129,282,1:20,131,285,1:20,132,288,1:20,132,291,1:20,134,294,1:20,135,297,1:20,136,300,1:20,137,303,1:20,139,306,1:20,140,309,1:20,141,312,1:20,142,315,1:20,144,318,1:20,145,321,1:21,147,324,1:20,148,327,1:20,149,330,1:20,150,333,1:20,152,336,1:20,153,339,1:20,155,342,1:20,156,345,1:20,158,348,1:20,159,351,1:21,161,354,1:20,162,357,1:21,164,360,1:21,165,363,1:21,165,366,1:21,167,369,1:22,169,372,1:22,170,375,1:22,170,378,1:22,171,381,1:22,172,384,1:22,173,387,1:22,174,390,1:22,174,393,1:23,174,396,1:23,174,399,1:23,175,402,1:24,175,405,1:24,176,408,1:24,176,411,1:24,176,414,1:24,176,417,1:25,176,420,1:25,177,423,1:25,177,426,1:25,177,429,1:25,177,432,1:26,177,435,1:26,177,438,1:26,177,441,1:26,177,444,1:26,177,447,1:26,177,450,1:27,177,453,1:27,177,456,1:27,177,459,1:27,176,462,1:28,176,465,1:28,175,468,1:28,175,471,1:28,174,474,1:28,174,477,1:28,174,480,1:28,174,483,1:28,174,486,1:28,174,489,1:28,174,492,1:28,175,495,1:28,175,498,1:28,174,501,1:28,175,504,1:28,176,507,1:28,177,510,1:28,178,513,1:28,179,516,1:28,179,519,1:28,180,522,1:28,181,525,1:28,183,528,1:27,183,531,1:27,184,534,1:27,185,537,1:27,187,540,1:27,190,543,1:26,193,546,1:27,194,548,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject sct_002
if not os.path.isdir(path_results + '/T2/sct_002'):
    os.makedirs(path_results + '/T2/sct_002')
os.chdir(path_results + '/T2/sct_002')
sct.run('dcm2nii -o . -r N '+new_folder+'/sct_002/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 20,132,10,24:21,127,41,23:21,124,76,22:21,120,110,21:20,118,142,20:20,116,170,19:20,113,195,18:20,112,220,17:21,112,244,16:22,111,267,15:23,112,290,14:24,115,311,13:24,120,331,12:25,125,351,11:26,132,370,10:26,140,389,9:25,146,405,8:24,149,421,7:24,152,437,6:24,156,451,5:24,159,465,4:26,161,479,3:26,167,536,2:26,173,554,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 65 -end 571')
f_crop = open('crop.txt', 'w')
f_crop.write('65,571,100,445')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 21,114,0,1:21,114,3,1:21,113,6,1:21,112,9,1:21,112,12,1:21,112,15,1:21,111,18,1:21,111,21,1:21,110,24,1:21,110,27,1:21,110,30,1:21,109,33,1:22,109,36,1:22,109,39,1:22,109,42,1:22,108,45,1:21,108,48,1:21,109,51,1:21,108,54,1:21,108,57,1:20,108,60,1:20,108,63,1:20,107,66,1:20,108,69,1:20,108,72,1:20,108,75,1:20,108,78,1:20,108,81,1:20,108,84,1:20,107,87,1:20,107,90,1:20,107,93,1:20,107,96,1:20,107,99,1:20,107,102,1:20,106,105,1:20,106,108,1:20,107,111,1:20,107,114,1:20,107,117,1:20,106,120,1:20,106,123,1:20,106,126,1:20,106,129,1:20,106,132,1:20,106,135,1:20,106,138,1:20,106,141,1:20,106,144,1:20,106,147,1:20,106,150,1:20,106,153,1:20,106,156,1:20,106,159,1:20,106,162,1:20,106,165,1:21,106,168,1:21,106,171,1:21,106,174,1:21,106,177,1:21,106,180,1:21,106,183,1:21,106,186,1:21,106,189,1:22,106,192,1:22,106,195,1:22,106,198,1:22,106,201,1:22,106,204,1:22,106,207,1:22,106,210,1:22,107,213,1:22,107,216,1:23,107,219,1:23,107,222,1:23,108,225,1:23,108,228,1:23,108,231,1:23,109,234,1:24,109,237,1:24,110,240,1:24,110,243,1:24,110,246,1:24,111,249,1:24,112,252,1:24,112,255,1:24,113,258,1:24,114,261,1:24,114,264,1:24,115,267,1:24,116,270,1:25,116,273,1:25,118,276,1:25,119,279,1:25,120,282,1:25,120,285,1:25,121,288,1:25,122,291,1:26,123,294,1:26,124,297,1:26,125,300,1:26,126,303,1:26,127,306,1:26,128,309,1:26,129,312,1:26,130,315,1:26,131,318,1:25,132,321,1:25,133,324,1:25,134,327,1:26,135,330,1:26,136,333,1:25,137,336,1:25,138,339,1:25,138,342,1:25,139,345,1:25,140,348,1:25,141,351,1:25,142,354,1:25,142,357,1:24,143,360,1:24,144,363,1:24,145,366,1:24,145,369,1:24,146,372,1:24,146,375,1:24,147,378,1:24,147,381,1:24,148,384,1:25,148,387,1:25,149,390,1:25,150,393,1:25,150,396,1:25,151,399,1:25,151,402,1:25,151,405,1:25,152,408,1:25,152,411,1:26,152,414,1:26,152,417,1:26,152,420,1:26,152,423,1:26,152,426,1:26,152,429,1:26,152,432,1:26,153,435,1:26,153,438,1:26,153,441,1:26,153,444,1:26,154,447,1:27,154,450,1:27,155,453,1:27,155,456,1:27,155,459,1:26,155,462,1:26,157,465,1:26,158,468,1:26,159,471,1:25,160,474,1:25,161,477,1:26,162,480,1:26,163,483,1:26,164,486,1:26,165,489,1:25,165,492,1:25,167,495,1:25,168,498,1:26,171,501,1:26,173,504,1:26,175,506,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject ALT
if not os.path.isdir(path_results + '/T2/ALT'):
    os.makedirs(path_results + '/T2/ALT')
os.chdir(path_results + '/T2/ALT')
sct.run('dcm2nii -o . -r N '+new_folder+'/ALT/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 15,82,53,20:16,76,84,19:15,71,113,18:16,67,140,17:16,65,165,16:16,62,190,15:18,64,214,14:19,69,238,13:21,77,260,12:21,85,282,11:22,96,301,10:23,108,320,9:26,120,337,8:27,128,355,7:27,133,373,6:29,137,391,5:32,138,410,4:33,137,430,3:33,121,492,2:32,120,516,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 40 -end 533')
f_crop = open('crop.txt', 'w')
f_crop.write('40,533,50,420')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 14,72,0,1:14,72,3,1:14,71,6,1:14,71,9,1:14,70,12,1:14,70,15,1:14,70,18,1:14,69,21,1:14,68,24,1:14,68,27,1:14,67,30,1:15,67,33,1:15,67,36,1:15,66,39,1:14,66,42,1:14,66,45,1:14,65,48,1:14,65,51,1:14,65,54,1:14,65,57,1:14,64,60,1:14,64,63,1:14,63,66,1:14,63,69,1:14,62,72,1:14,62,75,1:15,62,78,1:15,62,81,1:15,61,84,1:15,61,87,1:15,61,90,1:15,60,93,1:15,60,96,1:15,60,99,1:15,59,102,1:15,59,105,1:15,59,108,1:15,59,111,1:15,58,114,1:15,58,117,1:16,58,120,1:16,58,123,1:16,58,126,1:16,58,129,1:16,57,132,1:16,57,135,1:16,57,138,1:16,57,141,1:16,56,144,1:16,56,147,1:17,56,150,1:17,56,153,1:17,56,156,1:16,57,159,1:16,58,162,1:17,57,165,1:17,58,168,1:17,58,171,1:17,59,174,1:17,59,177,1:17,60,180,1:18,61,183,1:18,61,186,1:18,62,189,1:18,62,192,1:18,63,195,1:18,64,198,1:18,65,201,1:18,66,204,1:18,66,207,1:18,68,210,1:18,69,213,1:19,70,216,1:19,71,219,1:19,72,222,1:20,73,225,1:20,74,228,1:20,75,231,1:20,76,234,1:20,77,237,1:20,78,240,1:21,80,243,1:21,81,246,1:21,83,249,1:21,84,252,1:22,86,255,1:21,87,258,1:21,89,261,1:22,90,264,1:22,92,267,1:22,94,270,1:23,96,273,1:23,97,276,1:23,99,279,1:24,101,282,1:24,103,285,1:24,105,288,1:24,106,291,1:24,108,294,1:24,109,297,1:24,111,300,1:24,113,303,1:24,114,306,1:24,115,309,1:25,117,312,1:25,119,315,1:25,121,318,1:26,122,321,1:26,123,324,1:26,124,327,1:26,125,330,1:26,125,333,1:27,127,336,1:27,127,339,1:27,128,342,1:28,128,345,1:28,129,348,1:28,129,351,1:28,130,354,1:29,130,357,1:29,130,360,1:29,130,363,1:29,130,366,1:30,130,369,1:30,129,372,1:31,129,375,1:31,129,378,1:31,129,381,1:31,128,384,1:31,128,387,1:32,127,390,1:32,127,393,1:32,126,396,1:33,126,399,1:33,124,402,1:34,124,405,1:34,123,408,1:34,122,411,1:34,122,414,1:34,121,417,1:34,121,420,1:34,120,423,1:34,120,426,1:34,119,429,1:34,119,432,1:34,117,435,1:34,116,438,1:34,115,441,1:33,115,444,1:33,115,447,1:33,114,450,1:33,114,453,1:33,112,456,1:33,112,459,1:33,111,462,1:33,111,465,1:32,110,468,1:32,109,471,1:32,109,474,1:32,109,477,1:31,109,480,1:31,110,483,1:31,113,486,1:31,117,489,1:31,119,492,1:31,120,493,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject JD
if not os.path.isdir(path_results + '/T2/JD'):
    os.makedirs(path_results + '/T2/JD')
os.chdir(path_results + '/T2/JD')
sct.run('dcm2nii -o . -r N '+new_folder+'/JD/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 24,82,7,20:23,79,38,19:22,77,70,18:22,77,102,17:23,76,130,16:23,76,160,15:24,78,187,14:24,82,213,13:25,89,241,12:26,96,264,11:27,106,289,10:27,118,311,9:27,129,331,8:27,134,351,7:27,134,371,6:25,133,392,5:24,132,413,4:24,132,435,3:27,117,500,2:30,123,529,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 3 -end 545')
f_crop = open('crop.txt', 'w')
f_crop.write('3,545,20,460')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 24,70,0,1:24,70,3,1:24,70,6,1:24,69,9,1:24,69,12,1:23,69,15,1:23,69,18,1:23,69,21,1:24,69,24,1:24,69,27,1:24,69,30,1:24,69,33,1:24,69,36,1:24,68,39,1:23,68,42,1:23,69,45,1:23,69,48,1:23,69,51,1:23,69,54,1:23,69,57,1:23,69,60,1:23,69,63,1:23,69,66,1:23,69,69,1:23,69,72,1:23,69,75,1:23,69,78,1:23,69,81,1:23,69,84,1:23,69,87,1:23,69,90,1:23,69,93,1:23,69,96,1:23,69,99,1:23,69,102,1:23,69,105,1:23,69,108,1:23,69,111,1:23,69,114,1:23,69,117,1:23,69,120,1:23,69,123,1:23,70,126,1:23,69,129,1:23,69,132,1:23,69,135,1:23,69,138,1:22,70,141,1:22,69,144,1:23,70,147,1:22,70,150,1:23,70,153,1:23,70,156,1:23,70,159,1:23,70,162,1:23,70,165,1:23,71,168,1:23,71,171,1:23,71,174,1:23,72,177,1:23,72,180,1:23,72,183,1:23,72,186,1:23,73,189,1:23,73,192,1:23,74,195,1:23,74,198,1:23,75,201,1:24,75,204,1:24,76,207,1:24,76,210,1:24,77,213,1:24,78,216,1:24,78,219,1:24,79,222,1:24,79,225,1:24,80,228,1:24,81,231,1:24,82,234,1:24,83,237,1:24,83,240,1:24,84,243,1:25,85,246,1:25,86,249,1:25,87,252,1:25,88,255,1:25,89,258,1:25,90,261,1:25,90,264,1:26,92,267,1:26,93,270,1:26,94,273,1:26,95,276,1:26,96,279,1:26,97,282,1:26,99,285,1:26,100,288,1:27,101,291,1:27,103,294,1:27,104,297,1:27,105,300,1:27,107,303,1:27,108,306,1:27,110,309,1:27,111,312,1:27,113,315,1:27,114,318,1:27,116,321,1:27,117,324,1:27,118,327,1:27,120,330,1:27,121,333,1:27,121,336,1:27,123,339,1:27,124,342,1:27,124,345,1:27,125,348,1:27,126,351,1:27,126,354,1:27,126,357,1:27,126,360,1:27,126,363,1:27,126,366,1:27,126,369,1:27,126,372,1:27,126,375,1:27,126,378,1:26,126,381,1:26,127,384,1:26,126,387,1:26,126,390,1:26,126,393,1:26,126,396,1:26,126,399,1:25,126,402,1:25,126,405,1:25,125,408,1:25,125,411,1:25,124,414,1:25,124,417,1:25,124,420,1:25,123,423,1:25,123,426,1:25,122,429,1:24,121,432,1:24,121,435,1:24,120,438,1:24,119,441,1:24,118,444,1:24,117,447,1:24,116,450,1:24,115,453,1:24,115,456,1:24,114,459,1:25,113,462,1:25,113,465,1:25,112,468,1:25,112,471,1:25,112,474,1:25,111,477,1:25,111,480,1:25,110,483,1:26,109,486,1:26,109,489,1:27,109,492,1:27,109,495,1:27,109,498,1:27,109,501,1:29,109,504,1:28,109,507,1:28,110,510,1:29,113,513,1:29,112,516,1:30,113,519,1:30,113,522,1:30,113,525,1:30,113,528,1:31,114,531,1:31,115,534,1:31,118,537,1:32,121,540,1:32,123,542,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject JW
if not os.path.isdir(path_results + '/T2/JW'):
    os.makedirs(path_results + '/T2/JW')
os.chdir(path_results + '/T2/JW')
sct.run('dcm2nii -o . -r N '+new_folder+'/JW/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 36,109,29,20:35,105,57,19:32,99,87,18:31,97,116,17:29,96,143,16:27,97,170,15:24,100,196,14:23,104,219,13:26,110,242,12:26,118,263,11:26,127,284,10:27,136,303,9:27,143,323,8:27,146,342,7:27,146,359,6:26,146,376,5:24,145,394,4:24,144,413,3:25,134,475,2:25,131,501,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  20 -end 516 ')
f_crop = open('crop.txt', 'w')
f_crop.write('20,516,40,425')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 36,99,0,1:36,98,3,1:36,98,6,1:36,98,9,1:36,97,12,1:36,97,15,1:36,98,18,1:35,97,21,1:35,97,24,1:35,96,27,1:35,96,30,1:35,95,33,1:35,95,36,1:35,95,39,1:35,95,42,1:35,94,45,1:35,94,48,1:35,94,51,1:35,94,54,1:34,93,57,1:34,93,60,1:34,93,63,1:34,93,66,1:34,92,69,1:33,92,72,1:33,92,75,1:33,92,78,1:33,92,81,1:33,92,84,1:32,92,87,1:32,92,90,1:32,91,93,1:32,91,96,1:31,91,99,1:31,91,102,1:31,91,105,1:31,90,108,1:31,90,111,1:31,91,114,1:30,90,117,1:30,90,120,1:30,90,123,1:30,90,126,1:29,90,129,1:29,91,132,1:29,91,135,1:28,91,138,1:28,91,141,1:28,91,144,1:28,91,147,1:28,91,150,1:28,92,153,1:28,92,156,1:27,92,159,1:27,92,162,1:27,92,165,1:27,93,168,1:27,93,171,1:27,94,174,1:27,94,177,1:27,94,180,1:26,95,183,1:26,95,186,1:26,96,189,1:26,97,192,1:25,97,195,1:25,98,198,1:26,98,201,1:26,99,204,1:26,100,207,1:26,100,210,1:26,101,213,1:26,102,216,1:25,103,219,1:25,104,222,1:26,105,225,1:26,105,228,1:26,107,231,1:25,108,234,1:25,109,237,1:25,110,240,1:26,111,243,1:26,112,246,1:26,113,249,1:26,114,252,1:26,115,255,1:26,116,258,1:26,117,261,1:26,118,264,1:26,120,267,1:26,121,270,1:26,121,273,1:26,123,276,1:26,124,279,1:27,125,282,1:27,126,285,1:27,127,288,1:26,128,291,1:27,129,294,1:27,130,297,1:27,131,300,1:27,131,303,1:27,132,306,1:27,133,309,1:27,134,312,1:27,134,315,1:27,135,318,1:27,136,321,1:27,136,324,1:27,137,327,1:27,137,330,1:26,137,333,1:26,137,336,1:26,138,339,1:26,138,342,1:26,138,345,1:26,138,348,1:26,138,351,1:26,138,354,1:25,138,357,1:25,138,360,1:25,137,363,1:25,137,366,1:25,137,369,1:25,137,372,1:25,137,375,1:24,137,378,1:24,136,381,1:24,136,384,1:24,136,387,1:24,136,390,1:24,135,393,1:24,135,396,1:24,134,399,1:24,134,402,1:23,134,405,1:23,133,408,1:23,133,411,1:23,132,414,1:23,132,417,1:23,131,420,1:23,131,423,1:24,131,426,1:23,131,429,1:23,131,432,1:24,131,435,1:24,130,438,1:24,128,441,1:24,127,444,1:24,126,447,1:24,126,450,1:24,125,453,1:24,124,456,1:24,124,459,1:24,123,462,1:24,122,465,1:24,122,468,1:24,122,471,1:24,121,474,1:24,120,477,1:24,121,480,1:24,121,483,1:24,122,486,1:24,124,489,1:25,129,492,1:26,132,495,1:26,133,496,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject MLL
if not os.path.isdir(path_results + '/T2/MLL'):
    os.makedirs(path_results + '/T2/MLL')
os.chdir(path_results + '/T2/MLL')
sct.run('dcm2nii -o . -r N '+new_folder+'/MLL/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 34,98,85,20:32,93,116,19:31,88,145,18:30,86,170,17:30,84,195,16:28,84,218,15:27,85,242,14:26,87,265,13:26,92,287,12:26,99,308,11:26,107,329,10:26,117,346,9:24,126,363,8:24,131,380,7:23,133,397,6:22,135,415,5:22,134,433,4:22,132,451,3:17,120,507,2:16,125,530,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 14 -end 542')
f_crop = open('crop.txt', 'w')
f_crop.write('14,542,100,470')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 34,102,0,1:34,101,3,1:34,101,6,1:34,100,9,1:34,99,12,1:34,99,15,1:34,98,18,1:34,97,21,1:34,97,24,1:34,96,27,1:34,94,30,1:34,94,33,1:35,93,36,1:35,93,39,1:35,92,42,1:34,91,45,1:34,90,48,1:35,90,51,1:34,90,54,1:34,89,57,1:34,89,60,1:34,88,63,1:34,88,66,1:34,87,69,1:34,87,72,1:34,86,75,1:34,86,78,1:34,86,81,1:33,85,84,1:33,85,87,1:33,84,90,1:33,84,93,1:33,83,96,1:33,83,99,1:33,82,102,1:33,82,105,1:33,82,108,1:33,81,111,1:32,81,114,1:32,81,117,1:32,81,120,1:32,81,123,1:32,80,126,1:32,80,129,1:32,80,132,1:32,80,135,1:32,80,138,1:32,80,141,1:31,79,144,1:31,79,147,1:31,79,150,1:31,79,153,1:31,79,156,1:31,79,159,1:31,79,162,1:31,79,165,1:31,79,168,1:31,78,171,1:30,78,174,1:30,78,177,1:30,78,180,1:30,78,183,1:30,78,186,1:30,78,189,1:30,78,192,1:30,78,195,1:29,78,198,1:29,78,201,1:29,78,204,1:29,78,207,1:29,78,210,1:29,78,213,1:28,79,216,1:28,79,219,1:28,79,222,1:28,79,225,1:28,80,228,1:28,80,231,1:28,80,234,1:28,80,237,1:27,80,240,1:27,81,243,1:27,81,246,1:27,82,249,1:27,82,252,1:27,83,255,1:27,83,258,1:27,84,261,1:27,85,264,1:27,86,267,1:27,86,270,1:27,87,273,1:27,88,276,1:27,89,279,1:27,90,282,1:27,91,285,1:27,92,288,1:27,92,291,1:26,93,294,1:26,94,297,1:26,95,300,1:26,96,303,1:26,97,306,1:26,98,309,1:26,100,312,1:26,101,315,1:26,102,318,1:26,104,321,1:26,105,324,1:26,106,327,1:26,107,330,1:26,109,333,1:25,110,336,1:25,112,339,1:25,113,342,1:25,114,345,1:25,115,348,1:25,117,351,1:25,118,354,1:25,119,357,1:25,120,360,1:24,121,363,1:24,121,366,1:24,123,369,1:24,123,372,1:24,124,375,1:24,125,378,1:24,125,381,1:24,126,384,1:23,126,387,1:23,126,390,1:23,126,393,1:23,126,396,1:23,126,399,1:23,126,402,1:23,126,405,1:23,126,408,1:23,126,411,1:22,125,414,1:22,125,417,1:22,124,420,1:22,123,423,1:22,122,426,1:22,121,429,1:22,121,432,1:21,120,435,1:21,119,438,1:21,119,441,1:21,118,444,1:20,117,447,1:20,116,450,1:20,115,453,1:20,114,456,1:20,113,459,1:19,113,462,1:19,112,465,1:19,112,468,1:18,113,471,1:18,113,474,1:18,112,477,1:17,112,480,1:17,113,483,1:17,113,486,1:17,113,489,1:17,113,492,1:16,113,495,1:16,113,498,1:16,114,501,1:16,115,504,1:16,115,507,1:16,115,510,1:15,115,513,1:16,116,516,1:15,117,519,1:15,119,522,1:15,122,525,1:15,124,528,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject MT
if not os.path.isdir(path_results + '/T2/MT'):
    os.makedirs(path_results + '/T2/MT')
os.chdir(path_results + '/T2/MT')
sct.run('dcm2nii -o . -r N '+new_folder+'/MT/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 32,72,41,20:29,66,72,19:28,65,102,18:27,63,129,17:28,64,156,16:26,65,182,15:26,69,206,14:26,74,232,13:25,83,254,12:28,93,276,11:28,103,296,10:28,115,314,9:26,126,332,8:26,133,348,7:25,134,366,6:25,133,382,5:25,131,399,4:25,130,417,3:25,114,474,2:27,111,499,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  8 -end 515 ')
f_crop = open('crop.txt', 'w')
f_crop.write('8,515,70,435')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 32,62,0,1:32,62,3,1:32,62,6,1:32,61,9,1:32,61,12,1:32,61,15,1:32,60,18,1:32,60,21,1:32,60,24,1:32,60,27,1:31,59,30,1:31,60,33,1:31,59,36,1:30,59,39,1:31,59,42,1:31,59,45,1:31,59,48,1:30,59,51,1:30,59,54,1:30,59,57,1:30,59,60,1:30,58,63,1:29,58,66,1:29,59,69,1:29,59,72,1:29,59,75,1:29,59,78,1:29,58,81,1:29,58,84,1:29,58,87,1:29,58,90,1:29,58,93,1:29,57,96,1:29,58,99,1:29,57,102,1:29,57,105,1:29,57,108,1:29,57,111,1:29,57,114,1:29,57,117,1:29,57,120,1:29,57,123,1:29,57,126,1:28,57,129,1:28,58,132,1:28,58,135,1:28,58,138,1:28,58,141,1:28,58,144,1:28,58,147,1:28,58,150,1:28,58,153,1:28,59,156,1:28,59,159,1:28,59,162,1:27,59,165,1:27,59,168,1:27,59,171,1:27,60,174,1:27,60,177,1:27,60,180,1:27,61,183,1:27,62,186,1:27,62,189,1:26,62,192,1:26,63,195,1:26,63,198,1:26,64,201,1:26,65,204,1:26,65,207,1:26,66,210,1:26,67,213,1:26,67,216,1:26,68,219,1:26,69,222,1:26,70,225,1:26,70,228,1:26,71,231,1:26,72,234,1:26,73,237,1:26,75,240,1:26,76,243,1:27,77,246,1:27,78,249,1:27,79,252,1:27,81,255,1:27,82,258,1:27,83,261,1:27,84,264,1:28,86,267,1:28,87,270,1:28,89,273,1:28,90,276,1:28,92,279,1:28,93,282,1:28,95,285,1:28,96,288,1:28,98,291,1:29,100,294,1:29,101,297,1:29,103,300,1:29,104,303,1:28,106,306,1:28,108,309,1:28,109,312,1:28,111,315,1:28,113,318,1:28,114,321,1:28,116,324,1:28,117,327,1:28,119,330,1:27,120,333,1:27,121,336,1:27,122,339,1:27,124,342,1:26,124,345,1:26,125,348,1:26,126,351,1:26,126,354,1:26,126,357,1:26,126,360,1:26,126,363,1:26,126,366,1:26,126,369,1:26,126,372,1:26,126,375,1:25,126,378,1:25,125,381,1:25,125,384,1:25,125,387,1:25,124,390,1:25,124,393,1:25,123,396,1:25,123,399,1:25,122,402,1:25,122,405,1:25,121,408,1:25,121,411,1:25,120,414,1:25,120,417,1:25,119,420,1:25,118,423,1:25,117,426,1:25,116,429,1:25,116,432,1:25,115,435,1:25,115,438,1:25,114,441,1:25,113,444,1:25,112,447,1:26,111,450,1:26,111,453,1:26,109,456,1:26,107,459,1:26,106,462,1:26,105,465,1:26,105,468,1:26,104,471,1:26,104,474,1:27,104,477,1:27,103,480,1:27,103,483,1:27,102,486,1:28,101,489,1:27,101,492,1:27,102,495,1:27,103,498,1:27,106,501,1:28,111,504,1:28,113,507,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject T045
if not os.path.isdir(path_results + '/T2/T045'):
    os.makedirs(path_results + '/T2/T045')
os.chdir(path_results + '/T2/T045')
sct.run('dcm2nii -o . -r N '+new_folder+'/T045/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 23,87,98,20:23,84,128,19:24,80,156,18:25,77,183,17:26,76,207,16:26,73,230,15:27,74,254,14:27,75,277,13:28,80,300,12:28,87,323,11:28,93,342,10:28,102,363,9:28,109,381,8:27,114,400,7:26,117,418,6:25,118,435,5:24,119,453,4:22,118,472,3:18,118,537,2:18,119,563,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 29 -end 580')
f_crop = open('crop.txt', 'w')
f_crop.write('29,580,200,375')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 23,78,0,1:23,78,3,1:23,77,6,1:23,77,9,1:23,77,12,1:24,77,15,1:24,77,18,1:24,77,21,1:24,77,24,1:23,77,27,1:24,76,30,1:24,76,33,1:23,76,36,1:23,76,39,1:23,76,42,1:23,76,45,1:23,77,48,1:23,77,51,1:23,77,54,1:23,77,57,1:23,77,60,1:23,77,63,1:22,77,66,1:22,77,69,1:23,76,72,1:23,77,75,1:23,77,78,1:23,76,81,1:23,76,84,1:23,76,87,1:23,75,90,1:23,75,93,1:23,75,96,1:23,74,99,1:24,74,102,1:24,74,105,1:24,74,108,1:24,74,111,1:24,74,114,1:24,73,117,1:24,73,120,1:24,72,123,1:24,72,126,1:24,72,129,1:24,71,132,1:24,71,135,1:24,71,138,1:25,70,141,1:25,70,144,1:25,70,147,1:25,69,150,1:25,69,153,1:25,69,156,1:25,69,159,1:25,69,162,1:25,68,165,1:25,68,168,1:26,68,171,1:26,67,174,1:26,67,177,1:26,67,180,1:26,67,183,1:26,67,186,1:27,67,189,1:27,67,192,1:27,67,195,1:27,66,198,1:27,66,201,1:27,66,204,1:27,66,207,1:27,66,210,1:27,67,213,1:27,67,216,1:27,67,219,1:27,67,222,1:27,67,225,1:27,68,228,1:27,68,231,1:27,68,234,1:27,68,237,1:27,69,240,1:27,69,243,1:27,69,246,1:27,69,249,1:27,69,252,1:27,70,255,1:28,70,258,1:28,71,261,1:28,72,264,1:27,73,267,1:28,73,270,1:28,74,273,1:27,75,276,1:27,76,279,1:28,76,282,1:28,77,285,1:28,78,288,1:28,79,291,1:28,79,294,1:28,80,297,1:28,81,300,1:28,82,303,1:28,84,306,1:28,85,309,1:28,86,312,1:28,86,315,1:28,87,318,1:28,89,321,1:28,90,324,1:27,92,327,1:28,92,330,1:27,93,333,1:28,95,336,1:28,96,339,1:28,97,342,1:28,98,345,1:28,99,348,1:27,100,351,1:27,101,354,1:27,102,357,1:28,103,360,1:28,104,363,1:27,105,366,1:27,106,369,1:27,107,372,1:27,108,375,1:27,109,378,1:27,109,381,1:27,109,384,1:27,110,387,1:27,110,390,1:27,110,393,1:27,111,396,1:27,111,399,1:26,111,402,1:26,111,405,1:26,112,408,1:25,112,411,1:25,112,414,1:25,112,417,1:24,112,420,1:24,112,423,1:24,112,426,1:24,112,429,1:23,112,432,1:23,112,435,1:23,112,438,1:22,111,441,1:22,111,444,1:22,111,447,1:22,110,450,1:21,110,453,1:21,110,456,1:21,110,459,1:21,110,462,1:21,110,465,1:21,109,468,1:20,109,471,1:20,109,474,1:20,109,477,1:20,109,480,1:20,108,483,1:20,108,486,1:20,108,489,1:20,107,492,1:20,107,495,1:20,108,498,1:20,108,501,1:19,109,504,1:19,108,507,1:19,108,510,1:19,108,513,1:19,108,516,1:19,108,519,1:19,108,522,1:19,109,525,1:20,109,528,1:19,109,531,1:19,108,534,1:19,109,537,1:19,109,540,1:19,111,543,1:18,114,546,1:18,116,549,1:18,117,551,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject T047
if not os.path.isdir(path_results + '/T2/T047'):
    os.makedirs(path_results + '/T2/T047')
os.chdir(path_results + '/T2/T047')
sct.run('dcm2nii -o . -r N '+new_folder+'/T047/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 22,96,74,20:22,91,105,19:22,87,135,18:22,83,161,17:22,81,187,16:22,81,210,15:22,82,235,14:22,86,259,13:22,89,281,12:22,96,302,11:22,102,321,10:22,110,340,9:22,118,358,8:23,123,375,7:24,124,392,6:24,124,410,5:25,123,428,4:25,123,445,3:23,120,513,2:23,123,538,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 6 -end 553')
f_crop = open('crop.txt', 'w')
f_crop.write('6,553,100,475')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 24,91,0,1:24,91,3,1:24,90,6,1:24,90,9,1:24,90,12,1:24,89,15,1:24,89,18,1:24,89,21,1:24,88,24,1:24,87,27,1:24,87,30,1:24,86,33,1:24,86,36,1:24,85,39,1:24,85,42,1:24,84,45,1:24,84,48,1:24,84,51,1:24,84,54,1:24,83,57,1:24,82,60,1:24,82,63,1:24,82,66,1:24,82,69,1:23,82,72,1:23,82,75,1:23,82,78,1:24,81,81,1:23,81,84,1:23,81,87,1:23,80,90,1:23,80,93,1:23,80,96,1:23,79,99,1:23,79,102,1:22,78,105,1:23,78,108,1:22,78,111,1:22,78,114,1:22,78,117,1:22,78,120,1:22,78,123,1:23,77,126,1:23,77,129,1:23,77,132,1:22,77,135,1:22,77,138,1:22,77,141,1:22,77,144,1:22,76,147,1:22,76,150,1:22,76,153,1:22,76,156,1:23,76,159,1:23,76,162,1:22,76,165,1:22,76,168,1:22,75,171,1:22,75,174,1:22,75,177,1:22,75,180,1:22,75,183,1:23,75,186,1:23,75,189,1:23,75,192,1:23,75,195,1:23,75,198,1:23,75,201,1:23,75,204,1:23,75,207,1:23,75,210,1:23,76,213,1:23,76,216,1:23,76,219,1:23,76,222,1:23,76,225,1:23,77,228,1:23,77,231,1:23,77,234,1:23,78,237,1:23,78,240,1:23,78,243,1:23,79,246,1:23,79,249,1:23,80,252,1:23,81,255,1:23,81,258,1:23,81,261,1:23,82,264,1:22,83,267,1:22,83,270,1:22,84,273,1:22,84,276,1:22,85,279,1:22,86,282,1:23,87,285,1:22,87,288,1:22,88,291,1:22,89,294,1:22,90,297,1:22,91,300,1:22,92,303,1:22,93,306,1:22,94,309,1:22,95,312,1:22,96,315,1:22,97,318,1:22,98,321,1:22,100,324,1:22,100,327,1:22,101,330,1:22,102,333,1:22,103,336,1:23,104,339,1:23,105,342,1:23,105,345,1:23,106,348,1:23,107,351,1:23,108,354,1:23,109,357,1:23,110,360,1:23,110,363,1:23,112,366,1:23,113,369,1:23,113,372,1:24,114,375,1:24,115,378,1:24,115,381,1:24,115,384,1:24,115,387,1:24,115,390,1:25,116,393,1:25,117,396,1:25,116,399,1:25,116,402,1:25,116,405,1:25,116,408,1:25,116,411,1:25,116,414,1:25,116,417,1:25,116,420,1:25,116,423,1:25,116,426,1:25,115,429,1:25,115,432,1:25,115,435,1:25,115,438,1:25,114,441,1:25,114,444,1:24,114,447,1:24,114,450,1:24,113,453,1:24,113,456,1:24,113,459,1:24,113,462,1:23,113,465,1:23,113,468,1:23,113,471,1:23,113,474,1:23,113,477,1:23,114,480,1:24,114,483,1:24,114,486,1:23,113,489,1:24,112,492,1:23,113,495,1:23,113,498,1:23,113,501,1:23,113,504,1:23,113,507,1:23,112,510,1:23,112,513,1:23,112,516,1:23,113,519,1:23,113,522,1:23,113,525,1:23,113,528,1:23,113,531,1:23,114,534,1:23,115,537,1:23,116,540,1:23,119,543,1:23,122,546,1:23,123,547,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject pain_pilot_1
if not os.path.isdir(path_results + '/T2/pain_pilot_1'):
    os.makedirs(path_results + '/T2/pain_pilot_1')
os.chdir(path_results + '/T2/pain_pilot_1')
sct.run('dcm2nii -o . -r N '+new_folder+'/pain_pilot_1/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 24,157,95,20:24,153,127,19:24,149,157,18:23,146,184,17:24,145,210,16:24,144,235,15:23,145,259,14:23,148,282,13:24,152,305,12:25,159,326,11:25,165,349,10:25,171,368,9:25,174,389,8:25,175,406,7:23,175,422,6:23,175,439,5:23,176,456,4:22,176,472,3:23,170,527,2:22,173,551,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 17 -end 567')
f_crop = open('crop.txt', 'w')
f_crop.write('17,567,100,485')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 21,150,0,1:21,150,3,1:21,150,6,1:21,149,9,1:21,149,12,1:21,149,15,1:21,149,18,1:22,149,21,1:22,149,24,1:22,148,27,1:22,148,30,1:22,147,33,1:22,147,36,1:22,147,39,1:23,146,42,1:23,146,45,1:23,146,48,1:23,146,51,1:23,145,54,1:23,145,57,1:23,144,60,1:23,144,63,1:24,144,66,1:23,144,69,1:24,144,72,1:24,144,75,1:24,143,78,1:24,143,81,1:24,143,84,1:24,143,87,1:24,143,90,1:23,143,93,1:24,142,96,1:24,142,99,1:24,141,102,1:23,141,105,1:23,141,108,1:24,141,111,1:24,141,114,1:24,141,117,1:24,141,120,1:24,140,123,1:24,140,126,1:24,139,129,1:23,139,132,1:24,139,135,1:24,139,138,1:24,139,141,1:24,139,144,1:24,139,147,1:24,139,150,1:24,138,153,1:24,138,156,1:24,138,159,1:24,138,162,1:23,138,165,1:23,138,168,1:23,138,171,1:23,138,174,1:24,138,177,1:24,137,180,1:24,137,183,1:24,137,186,1:24,137,189,1:23,137,192,1:24,136,195,1:24,137,198,1:24,137,201,1:24,137,204,1:23,137,207,1:23,136,210,1:23,137,213,1:24,137,216,1:24,137,219,1:24,137,222,1:24,137,225,1:24,137,228,1:23,137,231,1:23,137,234,1:23,137,237,1:23,138,240,1:23,138,243,1:23,138,246,1:23,139,249,1:23,139,252,1:23,139,255,1:23,140,258,1:23,140,261,1:24,141,264,1:24,141,267,1:23,141,270,1:24,142,273,1:24,143,276,1:24,143,279,1:24,144,282,1:24,144,285,1:24,144,288,1:24,145,291,1:24,146,294,1:24,147,297,1:24,148,300,1:24,149,303,1:24,149,306,1:24,150,309,1:24,151,312,1:24,152,315,1:25,152,318,1:25,153,321,1:25,154,324,1:25,155,327,1:25,156,330,1:25,156,333,1:25,157,336,1:25,158,339,1:25,158,342,1:25,159,345,1:25,160,348,1:25,161,351,1:26,162,354,1:26,162,357,1:25,163,360,1:25,163,363,1:25,164,366,1:25,164,369,1:25,165,372,1:25,165,375,1:25,165,378,1:25,166,381,1:25,166,384,1:25,166,387,1:25,166,390,1:25,166,393,1:24,167,396,1:24,166,399,1:24,166,402,1:24,166,405,1:23,166,408,1:23,166,411,1:23,167,414,1:23,166,417,1:22,166,420,1:22,166,423,1:22,166,426,1:22,166,429,1:22,166,432,1:22,166,435,1:22,166,438,1:22,165,441,1:22,165,444,1:22,165,447,1:22,165,450,1:22,165,453,1:22,164,456,1:22,164,459,1:22,163,462,1:23,163,465,1:23,162,468,1:23,162,471,1:23,161,474,1:23,161,477,1:23,161,480,1:24,161,483,1:24,160,486,1:24,160,489,1:24,160,492,1:24,159,495,1:24,159,498,1:25,160,501,1:24,161,504,1:24,161,507,1:24,161,510,1:23,161,513,1:23,162,516,1:23,162,519,1:23,163,522,1:23,163,525,1:23,163,528,1:23,164,531,1:23,164,534,1:22,164,537,1:22,165,540,1:22,167,543,1:22,171,546,1:22,173,549,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject pain_pilot_2
if not os.path.isdir(path_results + '/T2/pain_pilot_2'):
    os.makedirs(path_results + '/T2/pain_pilot_2')
os.chdir(path_results + '/T2/pain_pilot_2')
sct.run('dcm2nii -o . -r N '+new_folder+'/pain_pilot_2/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 23,143,53,20:20,139,85,19:20,140,113,18:19,138,140,17:19,137,164,16:19,137,189,15:19,138,214,14:19,139,238,13:19,143,262,12:19,149,284,11:19,155,305,10:21,163,325,9:22,171,345,8:23,175,365,7:22,177,384,6:21,175,402,5:19,176,420,4:16,176,440,3:16,172,502,2:20,182,524,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 538')
f_crop = open('crop.txt', 'w')
f_crop.write('0,538,75,475')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 26,137,0,1:27,137,3,1:26,136,6,1:26,136,9,1:26,135,12,1:26,135,15,1:26,135,18,1:26,134,21,1:25,134,24,1:25,134,27,1:25,134,30,1:25,134,33,1:24,134,36,1:24,134,39,1:24,134,42,1:24,133,45,1:23,133,48,1:23,133,51,1:23,133,54,1:22,132,57,1:22,132,60,1:23,133,63,1:22,133,66,1:22,133,69,1:22,132,72,1:22,132,75,1:22,132,78,1:22,132,81,1:22,132,84,1:22,132,87,1:22,132,90,1:22,132,93,1:21,132,96,1:21,132,99,1:21,132,102,1:21,132,105,1:21,132,108,1:21,132,111,1:21,132,114,1:21,132,117,1:20,132,120,1:20,132,123,1:20,132,126,1:20,132,129,1:20,131,132,1:20,131,135,1:20,131,138,1:20,131,141,1:19,132,144,1:19,132,147,1:19,131,150,1:19,131,153,1:19,131,156,1:19,131,159,1:20,130,162,1:19,130,165,1:19,130,168,1:19,130,171,1:19,130,174,1:19,131,177,1:19,131,180,1:18,131,183,1:18,131,186,1:18,131,189,1:18,131,192,1:18,131,195,1:18,131,198,1:18,131,201,1:18,131,204,1:19,131,207,1:19,131,210,1:18,131,213,1:18,131,216,1:18,132,219,1:18,132,222,1:18,132,225,1:18,132,228,1:18,133,231,1:19,133,234,1:18,133,237,1:18,134,240,1:18,134,243,1:18,134,246,1:19,135,249,1:19,135,252,1:19,136,255,1:19,136,258,1:19,137,261,1:19,137,264,1:19,138,267,1:19,139,270,1:19,139,273,1:19,140,276,1:19,141,279,1:19,142,282,1:19,143,285,1:19,143,288,1:19,144,291,1:19,145,294,1:20,146,297,1:20,147,300,1:20,147,303,1:20,149,306,1:20,150,309,1:20,151,312,1:20,152,315,1:20,153,318,1:20,154,321,1:21,155,324,1:21,156,327,1:21,157,330,1:21,158,333,1:21,159,336,1:22,160,339,1:22,160,342,1:22,161,345,1:22,162,348,1:22,163,351,1:22,164,354,1:23,165,357,1:22,165,360,1:22,166,363,1:23,166,366,1:23,167,369,1:23,167,372,1:23,167,375,1:23,168,378,1:23,168,381,1:23,168,384,1:23,168,387,1:22,169,390,1:22,168,393,1:22,168,396,1:21,168,399,1:21,168,402,1:21,168,405,1:21,168,408,1:21,168,411,1:21,168,414,1:20,168,417,1:20,167,420,1:20,167,423,1:20,167,426,1:19,167,429,1:19,166,432,1:19,166,435,1:18,166,438,1:18,166,441,1:18,166,444,1:17,165,447,1:17,165,450,1:17,165,453,1:17,164,456,1:16,164,459,1:16,164,462,1:16,164,465,1:16,164,468,1:15,163,471,1:15,164,474,1:15,164,477,1:15,164,480,1:15,164,483,1:15,164,486,1:15,163,489,1:14,162,492,1:15,163,495,1:15,164,498,1:16,165,501,1:16,165,504,1:16,166,507,1:16,167,510,1:17,168,513,1:17,169,516,1:18,170,519,1:18,170,522,1:18,171,525,1:19,173,528,1:19,174,531,1:20,177,534,1:20,179,537,1:20,180,538,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject pain_pilot_4
if not os.path.isdir(path_results + '/T2/pain_pilot_4'):
    os.makedirs(path_results + '/T2/pain_pilot_4')
os.chdir(path_results + '/T2/pain_pilot_4')
sct.run('dcm2nii -o . -r N '+new_folder+'/pain_pilot_4/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 18,132,94,20:18,129,125,19:19,127,154,18:20,125,182,17:21,124,209,16:21,123,234,15:21,124,259,14:21,127,283,13:24,132,305,12:28,140,327,11:28,146,348,10:25,155,368,9:24,162,387,8:21,166,405,7:21,168,422,6:22,169,440,5:21,170,458,4:21,171,477,3:21,180,546,2:22,187,567,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 16 -end 585')
f_crop = open('crop.txt', 'w')
f_crop.write('16,585,110,505')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 15,131,0,1:15,131,3,1:15,130,6,1:15,129,9,1:15,128,12,1:15,128,15,1:15,127,18,1:15,127,21,1:16,127,24,1:16,126,27,1:16,125,30,1:16,125,33,1:16,124,36,1:16,124,39,1:16,123,42,1:16,122,45,1:16,122,48,1:16,122,51,1:16,122,54,1:16,121,57,1:16,121,60,1:17,121,63,1:17,121,66,1:17,121,69,1:17,121,72,1:18,121,75,1:17,121,78,1:18,120,81,1:18,120,84,1:18,120,87,1:18,120,90,1:18,120,93,1:19,120,96,1:18,119,99,1:18,119,102,1:18,119,105,1:19,119,108,1:19,119,111,1:19,119,114,1:19,120,117,1:19,120,120,1:19,120,123,1:19,120,126,1:19,119,129,1:19,120,132,1:20,119,135,1:20,119,138,1:20,119,141,1:20,119,144,1:20,119,147,1:19,119,150,1:20,119,153,1:20,119,156,1:20,119,159,1:20,119,162,1:20,119,165,1:20,118,168,1:20,118,171,1:20,118,174,1:20,118,177,1:21,118,180,1:21,118,183,1:21,118,186,1:21,118,189,1:21,118,192,1:21,118,195,1:21,117,198,1:21,117,201,1:21,117,204,1:21,117,207,1:21,117,210,1:21,118,213,1:21,117,216,1:21,117,219,1:21,117,222,1:21,117,225,1:21,118,228,1:21,118,231,1:21,118,234,1:21,118,237,1:22,119,240,1:22,119,243,1:22,119,246,1:22,119,249,1:22,120,252,1:22,120,255,1:22,121,258,1:22,121,261,1:23,121,264,1:23,122,267,1:23,122,270,1:23,123,273,1:23,123,276,1:24,124,279,1:24,125,282,1:24,126,285,1:24,127,288,1:25,127,291,1:25,128,294,1:25,129,297,1:25,130,300,1:25,131,303,1:26,131,306,1:26,132,309,1:26,133,312,1:26,134,315,1:26,135,318,1:26,136,321,1:26,137,324,1:27,138,327,1:26,139,330,1:26,141,333,1:27,141,336,1:26,142,339,1:26,144,342,1:26,144,345,1:26,145,348,1:26,146,351,1:26,147,354,1:26,148,357,1:26,149,360,1:26,150,363,1:26,151,366,1:25,152,369,1:25,153,372,1:24,153,375,1:24,154,378,1:24,155,381,1:24,156,384,1:24,157,387,1:23,157,390,1:23,157,393,1:23,158,396,1:23,158,399,1:23,159,402,1:23,159,405,1:22,160,408,1:22,161,411,1:22,161,414,1:22,161,417,1:22,161,420,1:22,161,423,1:22,161,426,1:22,162,429,1:23,162,432,1:23,162,435,1:22,162,438,1:22,162,441,1:22,162,444,1:22,163,447,1:22,163,450,1:22,163,453,1:22,163,456,1:22,163,459,1:21,163,462,1:21,164,465,1:21,164,468,1:21,164,471,1:21,164,474,1:21,164,477,1:21,164,480,1:21,164,483,1:21,165,486,1:21,165,489,1:21,165,492,1:21,166,495,1:21,167,498,1:21,167,501,1:21,168,504,1:21,169,507,1:22,170,510,1:22,169,513,1:22,168,516,1:22,168,519,1:22,170,522,1:22,171,525,1:21,172,528,1:22,172,531,1:22,172,534,1:22,173,537,1:22,174,540,1:22,175,543,1:22,175,546,1:22,176,549,1:22,176,552,1:22,176,555,1:23,176,558,1:23,179,561,1:23,181,564,1:23,184,567,1:22,186,569,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')

"""
# Preprocessing for subject TM - removed because of stitching issue
if not os.path.isdir(path_results + '/T2/TM'):
    os.makedirs(path_results + '/T2/TM')
os.chdir(path_results + '/T2/TM')
sct.run('dcm2nii -o . -r N '+new_folder+'/TM/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 32,101,20,20:31,94,56,19:31,88,88,18:30,84,117,17:28,82,145,16:29,80,171,15:28,81,197,14:28,85,222,13:28,91,247,12:29,98,270,11:29,109,291,10:28,122,310,9:28,134,329,8:28,141,347,7:27,143,365,6:27,143,385,5:25,142,403,4:24,139,422,3:22,119,484,2:22,118,511,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 1 -end 532')
f_crop = open('crop.txt', 'w')
f_crop.write('1,532,0,1')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o labels_updown.nii.gz -t create -x 33,93,0,1:33,91,17,1:33,87,29,1:32,84,48,1:32,84,50,1:31,83,58,1:31,82,65,1:30,81,72,1:30,80,79,1:31,80,83,1:31,79,88,1:30,78,89,1:31,78,93,1:30,78,99,1:29,76,119,1:29,76,123,1:29,75,126,1:28,75,132,1:29,74,151,1:29,74,160,1:29,74,172,1:29,74,182,1:28,75,198,1:28,78,219,1:28,80,224,1:28,80,227,1:28,84,244,1:28,92,267,1:28,94,271,1:28,97,278,1:28,99,282,1:28,109,300,1:28,109,301,1:27,123,326,1:27,126,332,1:27,127,336,1:27,133,353,1:27,134,360,1:26,134,377,1:25,133,398,1:25,132,403,1:24,127,423,1:24,122,439,1:24,118,452,1:23,115,466,1:23,116,477,1:22,117,484,1:22,119,501,1:21,120,531,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')
"""

# Preprocessing for subject errsm_20
# VERY BAD CONTRAST AROUND T2 vertebral level
if not os.path.isdir(path_results + '/T2/errsm_20'):
    os.makedirs(path_results + '/T2/errsm_20')
os.chdir(path_results + '/T2/errsm_20')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_20/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 24,134,118,20:25,124,151,19:25,116,182,18:24,113,211,17:23,111,240,16:22,112,267,15:21,117,296,14:20,125,321,13:20,136,345,12:20,150,364,11:20,164,382,10:21,182,398,9:22,195,414,8:23,203,430,7:24,206,446,6:24,206,463,5:24,202,480,4:23,199,498,3:23,189,562,2:23,195,590,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 39 -end 604')
f_crop = open('crop.txt', 'w')
f_crop.write('39,604,100,329')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 26,145,0,1:26,144,3,1:26,143,6,1:26,141,9,1:26,141,12,1:26,140,15,1:26,139,18,1:25,138,21,1:25,137,24,1:25,136,27,1:25,135,30,1:25,134,33,1:25,133,36,1:25,132,39,1:25,131,42,1:25,130,45,1:25,129,48,1:26,128,51,1:26,128,54,1:25,127,57,1:25,126,60,1:26,126,63,1:25,125,66,1:25,125,69,1:25,123,72,1:25,123,75,1:25,122,78,1:25,122,81,1:25,121,84,1:25,120,87,1:25,120,90,1:25,119,93,1:25,118,96,1:25,117,99,1:25,116,102,1:25,116,105,1:25,116,108,1:25,115,111,1:25,115,114,1:25,114,117,1:25,114,120,1:24,113,123,1:25,112,126,1:25,112,129,1:25,112,132,1:25,111,135,1:25,111,138,1:25,110,141,1:25,110,144,1:25,109,147,1:24,109,150,1:24,108,153,1:24,108,156,1:24,108,159,1:25,107,162,1:24,107,165,1:24,107,168,1:24,107,171,1:24,106,174,1:24,106,177,1:24,106,180,1:24,106,183,1:24,106,186,1:24,106,189,1:24,106,192,1:24,105,195,1:24,105,198,1:24,105,201,1:23,105,204,1:24,105,207,1:24,105,210,1:23,106,213,1:23,106,216,1:23,106,219,1:23,106,222,1:23,107,225,1:23,107,228,1:23,107,231,1:23,107,234,1:22,108,237,1:23,108,240,1:23,108,243,1:22,109,246,1:22,109,249,1:22,110,252,1:22,111,255,1:22,112,258,1:22,112,261,1:22,113,264,1:22,114,267,1:22,115,270,1:21,116,273,1:21,117,276,1:21,118,279,1:21,119,282,1:21,120,285,1:21,122,288,1:21,123,291,1:21,124,294,1:21,126,297,1:21,127,300,1:21,129,303,1:21,130,306,1:21,133,309,1:21,134,312,1:21,136,315,1:21,138,318,1:22,140,321,1:21,142,324,1:22,144,327,1:22,146,330,1:22,149,333,1:21,150,336,1:21,152,339,1:21,155,342,1:21,157,345,1:21,161,348,1:20,164,351,1:20,166,354,1:21,169,357,1:21,171,360,1:21,174,363,1:21,176,366,1:21,178,369,1:21,181,372,1:21,183,375,1:21,185,378,1:21,187,381,1:21,189,384,1:21,190,387,1:22,192,390,1:22,193,393,1:22,194,396,1:22,195,399,1:23,196,402,1:23,196,405,1:23,196,408,1:23,196,411,1:23,196,414,1:23,196,417,1:23,196,420,1:24,196,423,1:24,195,426,1:23,195,429,1:23,195,432,1:24,194,435,1:24,194,438,1:24,193,441,1:24,193,444,1:24,192,447,1:24,191,450,1:24,190,453,1:24,190,456,1:24,189,459,1:24,188,462,1:24,188,465,1:24,187,468,1:24,186,471,1:25,185,474,1:25,185,477,1:25,184,480,1:25,183,483,1:25,183,486,1:25,182,489,1:25,182,492,1:25,182,495,1:25,182,498,1:25,181,501,1:25,180,504,1:25,179,507,1:25,178,510,1:25,178,513,1:25,179,516,1:25,179,519,1:25,179,522,1:25,179,525,1:25,179,528,1:25,180,531,1:25,181,534,1:25,181,537,1:25,181,540,1:25,182,543,1:25,182,546,1:25,182,549,1:25,184,552,1:25,184,555,1:25,185,558,1:24,188,561,1:24,194,564,1:24,197,565,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject pain_pilot_3
if not os.path.isdir(path_results + '/T2/pain_pilot_3'):
    os.makedirs(path_results + '/T2/pain_pilot_3')
os.chdir(path_results + '/T2/pain_pilot_3')
sct.run('dcm2nii -o . -r N '+new_folder+'/pain_pilot_3/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 15,119,95,20:16,118,128,19:16,119,159,18:19,121,186,17:21,122,212,16:22,123,237,15:23,125,261,14:25,129,286,13:26,135,308,12:27,141,330,11:27,149,349,10:27,161,367,9:26,169,385,8:26,176,402,7:25,181,418,6:25,184,434,5:25,189,450,4:26,189,468,3:30,185,527,2:33,191,554,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 18 -end 568')
f_crop = open('crop.txt', 'w')
f_crop.write('18,568,100,480')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 13,117,0,1:13,116,3,1:13,115,6,1:13,114,9,1:13,114,12,1:13,114,15,1:13,113,18,1:14,112,21,1:14,112,24,1:14,111,27,1:14,110,30,1:14,110,33,1:14,110,36,1:14,109,39,1:14,108,42,1:14,107,45,1:14,107,48,1:14,107,51,1:15,108,54,1:15,108,57,1:15,108,60,1:15,108,63,1:15,107,66,1:15,107,69,1:15,107,72,1:15,107,75,1:15,107,78,1:15,106,81,1:15,106,84,1:15,107,87,1:15,107,90,1:15,107,93,1:15,107,96,1:15,107,99,1:16,107,102,1:16,107,105,1:16,107,108,1:16,107,111,1:16,108,114,1:16,108,117,1:17,108,120,1:17,109,123,1:17,109,126,1:17,109,129,1:18,109,132,1:18,110,135,1:18,110,138,1:18,110,141,1:18,110,144,1:18,110,147,1:18,110,150,1:18,111,153,1:19,111,156,1:19,111,159,1:19,111,162,1:19,111,165,1:19,111,168,1:19,112,171,1:19,112,174,1:20,112,177,1:20,112,180,1:20,112,183,1:20,112,186,1:20,113,189,1:20,113,192,1:20,113,195,1:20,113,198,1:20,113,201,1:20,113,204,1:21,114,207,1:21,114,210,1:21,114,213,1:21,114,216,1:21,115,219,1:22,115,222,1:22,115,225,1:22,116,228,1:22,116,231,1:22,116,234,1:23,116,237,1:23,117,240,1:23,117,243,1:23,118,246,1:23,119,249,1:23,119,252,1:23,120,255,1:24,120,258,1:24,120,261,1:24,121,264,1:24,122,267,1:24,122,270,1:24,123,273,1:24,123,276,1:25,124,279,1:25,126,282,1:25,126,285,1:25,127,288,1:25,128,291,1:25,129,294,1:26,130,297,1:26,130,300,1:26,131,303,1:26,132,306,1:26,133,309,1:26,134,312,1:27,136,315,1:27,137,318,1:27,139,321,1:27,140,324,1:28,141,327,1:28,142,330,1:28,143,333,1:28,143,336,1:28,145,339,1:28,147,342,1:28,148,345,1:28,150,348,1:28,151,351,1:28,153,354,1:28,155,357,1:27,156,360,1:27,158,363,1:27,159,366,1:27,160,369,1:27,162,372,1:27,164,375,1:27,165,378,1:27,166,381,1:27,167,384,1:27,168,387,1:27,170,390,1:27,171,393,1:26,171,396,1:27,172,399,1:27,173,402,1:27,174,405,1:27,174,408,1:27,175,411,1:26,176,414,1:26,177,417,1:27,177,420,1:27,178,423,1:27,179,426,1:27,178,429,1:27,178,432,1:27,179,435,1:27,179,438,1:27,179,441,1:27,179,444,1:26,179,447,1:26,179,450,1:27,179,453,1:27,179,456,1:27,178,459,1:27,177,462,1:27,178,465,1:27,177,468,1:27,177,471,1:27,176,474,1:27,177,477,1:27,177,480,1:28,177,483,1:28,177,486,1:29,177,489,1:29,177,492,1:29,177,495,1:29,176,498,1:30,176,501,1:30,176,504,1:30,176,507,1:30,176,510,1:30,176,513,1:31,176,516,1:32,177,519,1:32,178,522,1:32,178,525,1:32,178,528,1:33,179,531,1:33,179,534,1:33,179,537,1:34,180,540,1:34,182,543,1:34,184,546,1:34,186,549,1:34,187,550,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_35
if not os.path.isdir(path_results + '/T2/errsm_35'):
    os.makedirs(path_results + '/T2/errsm_35')
os.chdir(path_results + '/T2/errsm_35')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_35/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 24,128,83,20:22,122,114,19:22,118,144,18:21,115,172,17:20,113,197,16:20,113,223,15:19,114,247,14:18,117,271,13:18,122,293,12:18,127,314,11:19,132,333,10:20,141,351,9:18,150,369,8:17,154,384,7:18,157,399,6:18,159,415,5:19,161,431,4:19,164,448,3:22,172,508,2:23,182,530,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 16 -end 550')
f_crop = open('crop.txt', 'w')
f_crop.write('16,550,120,465')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 26,122,0,1:26,122,3,1:26,121,6,1:26,121,9,1:26,120,12,1:26,120,15,1:26,120,18,1:26,119,21,1:26,118,24,1:26,118,27,1:26,117,30,1:25,116,33,1:25,116,36,1:25,115,39,1:25,115,42,1:25,115,45,1:25,115,48,1:25,114,51,1:24,113,54,1:24,113,57,1:23,113,60,1:23,113,63,1:24,112,66,1:23,112,69,1:23,112,72,1:23,112,75,1:23,112,78,1:23,112,81,1:22,111,84,1:22,111,87,1:22,111,90,1:22,110,93,1:22,110,96,1:22,110,99,1:22,110,102,1:22,110,105,1:22,110,108,1:22,110,111,1:22,110,114,1:22,109,117,1:22,109,120,1:22,109,123,1:22,109,126,1:22,108,129,1:22,108,132,1:22,108,135,1:21,107,138,1:21,107,141,1:21,107,144,1:21,107,147,1:21,107,150,1:21,107,153,1:21,107,156,1:21,107,159,1:21,107,162,1:21,107,165,1:21,107,168,1:20,107,171,1:20,107,174,1:20,107,177,1:20,107,180,1:20,107,183,1:20,107,186,1:20,106,189,1:20,106,192,1:19,106,195,1:19,107,198,1:20,107,201,1:19,107,204,1:19,107,207,1:19,107,210,1:19,107,213,1:19,107,216,1:19,108,219,1:19,108,222,1:19,108,225,1:19,108,228,1:19,108,231,1:19,109,234,1:19,109,237,1:18,110,240,1:18,110,243,1:18,110,246,1:18,111,249,1:19,111,252,1:19,112,255,1:19,112,258,1:19,112,261,1:18,113,264,1:18,113,267,1:18,114,270,1:18,115,273,1:19,115,276,1:18,116,279,1:18,117,282,1:18,117,285,1:18,118,288,1:18,118,291,1:18,119,294,1:19,120,297,1:19,121,300,1:18,121,303,1:18,122,306,1:19,123,309,1:19,124,312,1:19,125,315,1:19,126,318,1:19,127,321,1:19,128,324,1:19,130,327,1:19,130,330,1:19,131,333,1:19,132,336,1:18,133,339,1:18,134,342,1:18,136,345,1:18,137,348,1:18,138,351,1:18,139,354,1:18,140,357,1:18,141,360,1:18,142,363,1:18,143,366,1:18,144,369,1:18,145,372,1:18,146,375,1:18,146,378,1:18,147,381,1:18,148,384,1:18,149,387,1:18,149,390,1:18,150,393,1:18,150,396,1:18,150,399,1:18,151,402,1:18,151,405,1:18,152,408,1:18,152,411,1:18,152,414,1:19,153,417,1:19,153,420,1:18,153,423,1:19,153,426,1:19,153,429,1:19,153,432,1:19,153,435,1:20,153,438,1:20,154,441,1:20,154,444,1:20,153,447,1:20,153,450,1:21,154,453,1:21,154,456,1:21,154,459,1:21,155,462,1:21,156,465,1:21,157,468,1:21,157,471,1:22,158,474,1:22,158,477,1:23,158,480,1:22,159,483,1:22,160,486,1:23,161,489,1:23,162,492,1:23,163,495,1:23,163,498,1:23,164,501,1:23,166,504,1:23,167,507,1:23,169,510,1:23,169,513,1:23,170,516,1:23,172,519,1:23,174,522,1:24,177,525,1:24,180,528,1:24,183,531,1:24,184,534,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject pain_pilot_7
if not os.path.isdir(path_results + '/T2/pain_pilot_7'):
    os.makedirs(path_results + '/T2/pain_pilot_7')
os.chdir(path_results + '/T2/pain_pilot_7')
sct.run('dcm2nii -o . -r N '+new_folder+'/pain_pilot_7/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 34,143,82,20:32,135,115,19:31,129,143,18:29,123,169,17:27,118,195,16:26,115,221,15:25,113,246,14:22,116,271,13:21,121,295,12:21,130,317,11:21,140,339,10:19,151,359,9:19,163,379,8:19,171,397,7:20,177,416,6:22,182,434,5:23,187,453,4:25,190,473,3:25,185,535,2:25,191,558,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 14 -end 575')
f_crop = open('crop.txt', 'w')
f_crop.write('14,575,90,495')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 35,142,0,1:36,142,3,1:36,141,6,1:36,141,9,1:36,140,12,1:36,140,15,1:36,140,18,1:36,139,21,1:36,139,24,1:36,138,27,1:36,137,30,1:36,137,33,1:36,136,36,1:36,136,39,1:36,135,42,1:36,134,45,1:36,134,48,1:35,134,51,1:35,133,54,1:35,133,57,1:34,132,60,1:34,131,63,1:34,130,66,1:34,130,69,1:34,130,72,1:33,129,75,1:33,129,78,1:33,128,81,1:34,127,84,1:34,127,87,1:34,126,90,1:33,126,93,1:33,125,96,1:33,125,99,1:33,124,102,1:33,123,105,1:33,123,108,1:33,122,111,1:32,122,114,1:32,121,117,1:31,121,120,1:31,121,123,1:31,120,126,1:31,120,129,1:31,119,132,1:30,119,135,1:30,118,138,1:30,118,141,1:30,118,144,1:30,117,147,1:30,117,150,1:29,116,153,1:29,115,156,1:29,115,159,1:28,115,162,1:28,114,165,1:28,114,168,1:28,114,171,1:28,113,174,1:28,113,177,1:27,112,180,1:27,112,183,1:27,111,186,1:27,111,189,1:26,111,192,1:26,111,195,1:26,110,198,1:25,110,201,1:25,110,204,1:25,110,207,1:25,110,210,1:25,110,213,1:25,110,216,1:24,109,219,1:24,109,222,1:24,109,225,1:24,109,228,1:24,110,231,1:23,110,234,1:23,110,237,1:23,110,240,1:23,111,243,1:23,111,246,1:23,111,249,1:23,112,252,1:23,112,255,1:23,112,258,1:22,113,261,1:22,113,264,1:22,114,267,1:22,115,270,1:23,115,273,1:22,116,276,1:22,117,279,1:21,118,282,1:21,119,285,1:21,120,288,1:21,121,291,1:21,122,294,1:21,123,297,1:21,124,300,1:21,125,303,1:21,127,306,1:21,128,309,1:21,129,312,1:21,130,315,1:20,132,318,1:20,133,321,1:20,134,324,1:20,135,327,1:20,137,330,1:20,138,333,1:20,139,336,1:19,141,339,1:19,142,342,1:19,143,345,1:19,145,348,1:19,146,351,1:20,148,354,1:19,149,357,1:19,151,360,1:19,152,363,1:19,154,366,1:19,156,369,1:19,156,372,1:19,158,375,1:19,159,378,1:19,160,381,1:20,162,384,1:20,163,387,1:20,164,390,1:20,165,393,1:20,166,396,1:20,167,399,1:21,169,402,1:21,169,405,1:22,171,408,1:22,171,411,1:22,172,414,1:23,173,417,1:23,174,420,1:23,175,423,1:23,176,426,1:23,176,429,1:23,177,432,1:24,178,435,1:24,178,438,1:24,178,441,1:24,179,444,1:24,179,447,1:24,180,450,1:24,180,453,1:25,180,456,1:25,180,459,1:25,180,462,1:25,180,465,1:25,180,468,1:26,180,471,1:26,180,474,1:26,180,477,1:26,180,480,1:26,180,483,1:26,180,486,1:26,180,489,1:26,180,492,1:26,180,495,1:26,180,498,1:26,180,501,1:26,180,504,1:26,179,507,1:26,178,510,1:26,178,513,1:26,178,516,1:26,178,519,1:25,178,522,1:25,178,525,1:25,178,528,1:25,179,531,1:25,180,534,1:25,180,537,1:25,180,540,1:25,181,543,1:25,181,546,1:25,183,549,1:26,184,552,1:26,189,555,1:26,191,558,1:26,192,561,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_03
if not os.path.isdir(path_results + '/T2/errsm_03'):
    os.makedirs(path_results + '/T2/errsm_03')
os.chdir(path_results + '/T2/errsm_03')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_03/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 25,144,101,20:26,142,133,19:26,139,162,18:27,136,189,17:28,136,214,16:28,137,239,15:29,139,264,14:30,141,287,13:30,145,310,12:30,151,332,11:30,160,352,10:31,173,370,9:31,186,388,8:30,193,404,7:29,194,419,6:29,192,434,5:29,192,451,4:29,193,468,3:28,194,530,2:28,200,554,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 30 -end 572')
f_crop = open('crop.txt', 'w')
f_crop.write('30,572,100,475')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 25,135,0,1:25,134,3,1:25,134,6,1:25,134,9,1:25,134,12,1:25,134,15,1:25,134,18,1:25,134,21,1:25,133,24,1:25,133,27,1:25,132,30,1:25,132,33,1:25,132,36,1:25,132,39,1:25,132,42,1:25,132,45,1:25,132,48,1:25,132,51,1:25,132,54,1:25,132,57,1:26,132,60,1:26,132,63,1:26,133,66,1:26,133,69,1:26,133,72,1:26,133,75,1:26,133,78,1:26,133,81,1:26,133,84,1:26,133,87,1:26,133,90,1:26,133,93,1:26,132,96,1:26,132,99,1:26,132,102,1:26,132,105,1:27,132,108,1:27,132,111,1:27,132,114,1:27,132,117,1:27,132,120,1:27,132,123,1:27,131,126,1:27,131,129,1:27,131,132,1:27,131,135,1:27,131,138,1:27,130,141,1:27,130,144,1:27,130,147,1:27,130,150,1:28,130,153,1:28,129,156,1:28,129,159,1:28,129,162,1:28,129,165,1:28,129,168,1:28,129,171,1:28,129,174,1:28,129,177,1:28,129,180,1:28,129,183,1:28,129,186,1:28,129,189,1:28,129,192,1:29,130,195,1:29,130,198,1:29,129,201,1:29,130,204,1:29,130,207,1:29,130,210,1:29,130,213,1:29,130,216,1:29,130,219,1:29,131,222,1:29,131,225,1:29,132,228,1:29,132,231,1:29,132,234,1:29,132,237,1:29,132,240,1:29,133,243,1:29,133,246,1:30,134,249,1:30,134,252,1:30,135,255,1:30,135,258,1:30,136,261,1:30,136,264,1:30,137,267,1:30,137,270,1:30,138,273,1:30,139,276,1:30,139,279,1:30,140,282,1:30,141,285,1:30,142,288,1:30,142,291,1:30,143,294,1:30,144,297,1:30,145,300,1:30,146,303,1:31,147,306,1:31,148,309,1:30,150,312,1:30,151,315,1:30,153,318,1:31,154,321,1:31,155,324,1:31,157,327,1:31,159,330,1:31,161,333,1:31,163,336,1:30,164,339,1:31,166,342,1:31,168,345,1:31,169,348,1:31,171,351,1:30,173,354,1:31,174,357,1:31,176,360,1:30,178,363,1:30,179,366,1:31,180,369,1:30,181,372,1:30,182,375,1:30,183,378,1:30,183,381,1:30,184,384,1:30,184,387,1:30,185,390,1:30,185,393,1:30,185,396,1:30,185,399,1:30,185,402,1:30,185,405,1:30,185,408,1:30,185,411,1:30,185,414,1:30,185,417,1:30,185,420,1:30,184,423,1:30,184,426,1:30,184,429,1:30,184,432,1:30,184,435,1:30,184,438,1:30,184,441,1:30,184,444,1:30,183,447,1:29,183,450,1:29,183,453,1:29,183,456,1:29,183,459,1:29,183,462,1:29,183,465,1:29,183,468,1:29,183,471,1:29,184,474,1:29,184,477,1:29,185,480,1:28,185,483,1:29,184,486,1:29,184,489,1:29,184,492,1:30,185,495,1:29,185,498,1:28,186,501,1:29,185,504,1:29,185,507,1:28,186,510,1:28,187,513,1:28,188,516,1:28,188,519,1:28,188,522,1:28,189,525,1:29,189,528,1:28,190,531,1:28,192,534,1:28,197,537,1:28,200,540,1:28,202,542,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject FR
if not os.path.isdir(path_results + '/T2/FR'):
    os.makedirs(path_results + '/T2/FR')
os.chdir(path_results + '/T2/FR')
sct.run('dcm2nii -o . -r N '+new_folder+'/FR/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 30,96,60,20:30,91,95,19:30,86,128,18:29,81,157,17:28,76,186,16:27,73,215,15:25,72,249,14:24,71,275,13:23,72,298,12:23,77,324,11:24,83,347,10:24,94,369,9:23,103,389,8:22,112,409,7:22,115,429,6:21,115,449,5:21,116,471,4:21,116,491,3:22,108,558,2:22,111,584,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 605')
f_crop = open('crop.txt', 'w')
f_crop.write('0,605,245,530')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 32,96,0,1:32,95,3,1:32,94,6,1:32,94,9,1:32,94,12,1:31,93,15,1:31,92,18,1:31,91,21,1:31,90,24,1:31,90,27,1:31,89,30,1:31,88,33,1:31,88,36,1:31,87,39,1:31,87,42,1:31,86,45,1:31,85,48,1:31,84,51,1:30,84,54,1:30,83,57,1:30,82,60,1:30,81,63,1:30,81,66,1:30,80,69,1:30,80,72,1:30,79,75,1:30,79,78,1:30,79,81,1:31,79,84,1:31,78,87,1:31,77,90,1:30,77,93,1:30,77,96,1:30,77,99,1:30,77,102,1:30,76,105,1:30,76,108,1:30,76,111,1:30,76,114,1:30,76,117,1:30,74,120,1:30,74,123,1:30,74,126,1:29,73,129,1:29,73,132,1:29,73,135,1:29,73,138,1:29,73,141,1:29,72,144,1:29,72,147,1:29,71,150,1:29,71,153,1:29,70,156,1:29,70,159,1:29,69,162,1:29,69,165,1:29,69,168,1:28,69,171,1:28,69,174,1:28,68,177,1:28,68,180,1:27,68,183,1:27,67,186,1:27,67,189,1:27,67,192,1:27,67,195,1:28,66,198,1:28,66,201,1:27,66,204,1:27,65,207,1:26,65,210,1:26,65,213,1:26,65,216,1:26,65,219,1:26,65,222,1:26,65,225,1:26,65,228,1:26,65,231,1:26,65,234,1:25,65,237,1:25,65,240,1:25,65,243,1:25,65,246,1:24,65,249,1:24,65,252,1:24,65,255,1:24,65,258,1:24,65,261,1:24,65,264,1:24,65,267,1:24,65,270,1:24,65,273,1:24,65,276,1:24,65,279,1:23,65,282,1:23,65,285,1:23,66,288,1:23,66,291,1:23,66,294,1:23,66,297,1:23,67,300,1:23,67,303,1:23,68,306,1:23,69,309,1:23,69,312,1:23,70,315,1:23,70,318,1:23,71,321,1:24,71,324,1:24,72,327,1:24,73,330,1:24,73,333,1:24,74,336,1:24,75,339,1:24,76,342,1:24,77,345,1:24,78,348,1:24,79,351,1:24,80,354,1:23,81,357,1:24,82,360,1:23,83,363,1:23,84,366,1:24,86,369,1:23,87,372,1:23,88,375,1:23,89,378,1:23,91,381,1:23,92,384,1:23,92,387,1:23,94,390,1:23,95,393,1:22,96,396,1:22,97,399,1:22,99,402,1:22,100,405,1:22,101,408,1:22,102,411,1:22,102,414,1:22,103,417,1:22,104,420,1:21,105,423,1:21,105,426,1:21,106,429,1:21,106,432,1:21,106,435,1:21,106,438,1:21,106,441,1:21,107,444,1:21,107,447,1:22,108,450,1:22,108,453,1:22,108,456,1:21,107,459,1:21,107,462,1:21,107,465,1:21,107,468,1:22,107,471,1:21,107,474,1:21,106,477,1:21,106,480,1:21,106,483,1:21,106,486,1:21,105,489,1:21,105,492,1:21,105,495,1:21,104,498,1:22,104,501,1:22,104,504,1:22,103,507,1:21,103,510,1:21,102,513,1:22,101,516,1:22,101,519,1:22,101,522,1:22,101,525,1:22,101,528,1:22,101,531,1:22,102,534,1:22,102,537,1:22,102,540,1:23,101,543,1:23,100,546,1:22,100,549,1:22,100,552,1:22,100,555,1:22,100,558,1:22,100,561,1:22,100,564,1:22,100,567,1:22,100,570,1:22,100,573,1:22,100,576,1:22,100,579,1:22,100,582,1:22,100,585,1:22,100,588,1:22,102,591,1:22,105,594,1:22,108,597,1:22,108,600,1:22,110,603,1:22,110,605,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject GB
if not os.path.isdir(path_results + '/T2/GB'):
    os.makedirs(path_results + '/T2/GB')
os.chdir(path_results + '/T2/GB')
sct.run('dcm2nii -o . -r N '+new_folder+'/GB/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 31,99,63,20:31,99,95,19:32,96,125,18:32,92,151,17:32,90,176,16:32,88,199,15:32,89,223,14:32,92,245,13:32,97,268,12:32,105,289,11:32,114,309,10:30,125,328,9:29,134,347,8:28,138,364,7:28,140,381,6:28,140,398,5:28,137,415,4:28,135,433,3:26,128,495,2:24,130,522,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 1 -end 539')
f_crop = open('crop.txt', 'w')
f_crop.write('1,539,100,465')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 32,88,0,1:32,88,3,1:32,88,6,1:32,88,9,1:32,88,12,1:32,88,15,1:32,88,18,1:32,88,21,1:32,87,24,1:32,87,27,1:32,86,30,1:32,86,33,1:32,86,36,1:32,86,39,1:32,86,42,1:32,86,45,1:32,85,48,1:32,85,51,1:32,84,54,1:32,84,57,1:32,84,60,1:32,84,63,1:32,84,66,1:32,84,69,1:32,84,72,1:32,84,75,1:32,85,78,1:32,85,81,1:32,85,84,1:32,85,87,1:32,84,90,1:32,84,93,1:32,84,96,1:32,84,99,1:32,84,102,1:32,84,105,1:32,84,108,1:32,85,111,1:32,85,114,1:32,85,117,1:32,84,120,1:32,84,123,1:33,84,126,1:33,84,129,1:33,84,132,1:33,83,135,1:33,83,138,1:32,83,141,1:32,83,144,1:33,83,147,1:33,83,150,1:33,82,153,1:33,82,156,1:33,82,159,1:33,82,162,1:33,82,165,1:33,81,168,1:33,81,171,1:33,81,174,1:33,81,177,1:33,81,180,1:33,81,183,1:33,81,186,1:33,81,189,1:32,81,192,1:32,81,195,1:32,81,198,1:33,81,201,1:33,81,204,1:33,81,207,1:33,81,210,1:33,82,213,1:33,82,216,1:33,82,219,1:32,82,222,1:32,82,225,1:32,83,228,1:32,84,231,1:32,84,234,1:32,84,237,1:32,85,240,1:32,85,243,1:32,86,246,1:32,87,249,1:32,87,252,1:32,88,255,1:32,89,258,1:33,90,261,1:33,91,264,1:33,91,267,1:32,92,270,1:32,93,273,1:32,94,276,1:32,94,279,1:32,96,282,1:33,97,285,1:32,99,288,1:32,99,291,1:32,101,294,1:32,101,297,1:32,103,300,1:32,104,303,1:32,105,306,1:31,106,309,1:31,107,312,1:31,109,315,1:31,111,318,1:30,112,321,1:30,113,324,1:30,114,327,1:30,116,330,1:30,117,333,1:30,118,336,1:30,120,339,1:30,121,342,1:30,122,345,1:30,123,348,1:30,124,351,1:30,125,354,1:30,127,357,1:29,128,360,1:29,129,363,1:29,129,366,1:29,130,369,1:29,130,372,1:29,131,375,1:29,131,378,1:29,131,381,1:29,131,384,1:29,131,387,1:29,131,390,1:29,131,393,1:29,130,396,1:29,130,399,1:29,130,402,1:29,130,405,1:29,129,408,1:29,129,411,1:29,128,414,1:29,128,417,1:29,128,420,1:29,127,423,1:29,127,426,1:29,126,429,1:29,126,432,1:29,126,435,1:29,125,438,1:29,125,441,1:29,124,444,1:28,124,447,1:28,123,450,1:28,123,453,1:28,123,456,1:28,122,459,1:28,122,462,1:28,122,465,1:28,123,468,1:28,123,471,1:28,123,474,1:28,122,477,1:27,122,480,1:27,122,483,1:27,122,486,1:27,122,489,1:27,122,492,1:26,121,495,1:25,121,498,1:25,121,501,1:25,121,504,1:25,120,507,1:25,120,510,1:25,120,513,1:25,119,516,1:24,119,519,1:24,119,522,1:23,119,525,1:23,120,528,1:23,122,531,1:23,126,534,1:23,127,537,1:23,127,538,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject 1
if not os.path.isdir(path_results + '/T2/ED'):
    os.makedirs(path_results + '/T2/ED')
os.chdir(path_results + '/T2/ED')
sct.run('dcm2nii -o . -r N '+new_folder+'/ED/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 14,88,100,20:15,83,132,19:15,77,160,18:15,75,186,17:16,73,210,16:16,73,235,15:16,75,260,14:18,79,283,13:20,86,305,12:21,93,326,11:22,101,345,10:21,111,362,9:21,119,380,8:21,123,397,7:20,123,414,6:20,124,431,5:20,126,449,4:22,126,466,3:19,118,524,2:19,124,544,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 27 -end 559')
f_crop = open('crop.txt', 'w')
f_crop.write('27,559,100,470')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 8,87,0,1:8,86,3,1:8,85,6,1:8,85,9,1:8,85,12,1:9,85,15,1:9,85,18,1:8,84,21,1:9,84,24,1:9,83,27,1:9,83,30,1:10,82,33,1:10,82,36,1:10,81,39,1:10,81,42,1:10,81,45,1:10,80,48,1:10,80,51,1:10,80,54,1:10,79,57,1:11,79,60,1:11,78,63,1:11,78,66,1:11,77,69,1:11,77,72,1:12,76,75,1:12,76,78,1:12,75,81,1:13,75,84,1:13,75,87,1:13,75,90,1:13,74,93,1:13,73,96,1:13,73,99,1:13,73,102,1:14,73,105,1:14,73,108,1:14,73,111,1:14,72,114,1:14,72,117,1:14,72,120,1:14,72,123,1:14,71,126,1:14,71,129,1:15,71,132,1:15,71,135,1:15,70,138,1:15,70,141,1:15,70,144,1:15,70,147,1:15,70,150,1:15,69,153,1:15,69,156,1:15,69,159,1:15,69,162,1:15,69,165,1:15,69,168,1:15,68,171,1:15,68,174,1:16,68,177,1:16,67,180,1:16,67,183,1:16,67,186,1:16,68,189,1:16,68,192,1:16,67,195,1:16,67,198,1:16,67,201,1:16,68,204,1:16,68,207,1:16,68,210,1:16,68,213,1:16,68,216,1:16,68,219,1:17,68,222,1:17,68,225,1:17,69,228,1:17,69,231,1:17,70,234,1:17,70,237,1:17,71,240,1:17,71,243,1:18,71,246,1:18,72,249,1:18,73,252,1:18,73,255,1:18,74,258,1:18,74,261,1:19,75,264,1:19,76,267,1:19,77,270,1:19,78,273,1:19,78,276,1:19,80,279,1:19,81,282,1:20,82,285,1:20,82,288,1:20,84,291,1:20,85,294,1:21,86,297,1:21,87,300,1:21,88,303,1:21,90,306,1:21,91,309,1:21,92,312,1:21,93,315,1:21,95,318,1:21,96,321,1:22,97,324,1:22,98,327,1:22,99,330,1:21,101,333,1:22,102,336,1:21,103,339,1:21,105,342,1:21,106,345,1:22,107,348,1:22,108,351,1:21,109,354,1:22,110,357,1:22,111,360,1:22,112,363,1:22,113,366,1:22,113,369,1:22,114,372,1:22,114,375,1:22,115,378,1:22,115,381,1:22,116,384,1:22,116,387,1:22,116,390,1:22,116,393,1:22,116,396,1:22,116,399,1:22,116,402,1:22,116,405,1:21,117,408,1:22,117,411,1:22,117,414,1:22,117,417,1:22,117,420,1:22,117,423,1:22,116,426,1:22,116,429,1:22,116,432,1:22,116,435,1:22,115,438,1:22,115,441,1:22,114,444,1:22,114,447,1:22,114,450,1:22,113,453,1:22,112,456,1:21,112,459,1:21,112,462,1:21,111,465,1:21,111,468,1:21,111,471,1:20,111,474,1:20,111,477,1:20,111,480,1:21,111,483,1:21,111,486,1:21,110,489,1:20,110,492,1:20,111,495,1:20,112,498,1:20,112,501,1:19,113,504,1:19,114,507,1:19,115,510,1:19,115,513,1:19,116,516,1:19,117,519,1:19,117,522,1:19,118,525,1:18,121,528,1:19,122,531,1:19,123,532,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject VC
if not os.path.isdir(path_results + '/T2/VC'):
    os.makedirs(path_results + '/T2/VC')
os.chdir(path_results + '/T2/VC')
sct.run('dcm2nii -o . -r N '+new_folder+'/VC/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 25,103,137,20:24,96,169,19:24,90,197,18:24,88,223,17:24,83,247,16:24,78,270,15:24,78,293,14:24,79,315,13:24,86,337,12:24,93,357,11:25,103,376,10:26,113,395,9:24,123,411,8:24,128,429,7:23,131,444,6:23,132,459,5:23,133,474,4:23,132,490,3:25,127,550,2:25,130,575,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 1,2 -start 11,67 -end 245,589')
f_crop = open('crop.txt', 'w')
f_crop.write('67,589,100,450,11,245')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 24,97,0,1:24,97,3,1:24,97,6,1:24,97,9,1:24,96,12,1:24,96,15,1:24,96,18,1:24,95,21,1:24,94,24,1:24,93,27,1:24,92,30,1:24,91,33,1:24,90,36,1:24,89,39,1:24,89,42,1:24,88,45,1:24,88,48,1:24,87,51,1:25,85,54,1:25,84,57,1:25,84,60,1:25,83,63,1:25,83,66,1:25,82,69,1:25,82,72,1:25,81,75,1:25,80,78,1:25,80,81,1:25,79,84,1:25,78,87,1:25,77,90,1:25,77,93,1:25,76,96,1:25,76,99,1:25,75,102,1:25,75,105,1:25,74,108,1:25,74,111,1:25,73,114,1:25,73,117,1:25,72,120,1:25,72,123,1:24,72,126,1:24,71,129,1:25,71,132,1:25,71,135,1:25,71,138,1:24,70,141,1:24,70,144,1:24,69,147,1:24,69,150,1:24,69,153,1:24,68,156,1:24,68,159,1:24,68,162,1:24,67,165,1:24,67,168,1:24,66,171,1:24,66,174,1:24,66,177,1:25,65,180,1:25,65,183,1:25,64,186,1:25,64,189,1:24,64,192,1:25,63,195,1:25,63,198,1:25,62,201,1:25,62,204,1:25,62,207,1:25,62,210,1:25,62,213,1:25,62,216,1:25,62,219,1:25,62,222,1:25,62,225,1:25,62,228,1:25,62,231,1:25,62,234,1:25,62,237,1:25,62,240,1:25,63,243,1:25,63,246,1:25,63,249,1:25,64,252,1:25,65,255,1:25,66,258,1:25,66,261,1:24,67,264,1:24,68,267,1:24,69,270,1:24,70,273,1:24,71,276,1:24,72,279,1:25,73,282,1:24,74,285,1:24,75,288,1:25,76,291,1:25,78,294,1:25,79,297,1:25,80,300,1:25,82,303,1:25,83,306,1:25,84,309,1:25,86,312,1:25,88,315,1:25,89,318,1:25,90,321,1:25,92,324,1:25,93,327,1:25,95,330,1:25,96,333,1:25,97,336,1:25,98,339,1:25,100,342,1:25,101,345,1:25,103,348,1:25,104,351,1:25,105,354,1:25,107,357,1:25,108,360,1:25,109,363,1:25,109,366,1:25,111,369,1:25,111,372,1:25,112,375,1:25,112,378,1:24,113,381,1:24,113,384,1:24,113,387,1:24,113,390,1:24,113,393,1:24,114,396,1:24,114,399,1:24,114,402,1:24,114,405,1:24,114,408,1:24,114,411,1:24,113,414,1:24,113,417,1:24,113,420,1:24,113,423,1:23,112,426,1:23,112,429,1:24,111,432,1:24,111,435,1:24,110,438,1:25,110,441,1:25,110,444,1:25,110,447,1:25,109,450,1:25,109,453,1:25,109,456,1:25,109,459,1:25,109,462,1:25,108,465,1:25,108,468,1:25,107,471,1:25,106,474,1:25,106,477,1:26,106,480,1:25,106,483,1:25,106,486,1:26,106,489,1:26,107,492,1:26,107,495,1:26,108,498,1:26,108,501,1:26,108,504,1:26,109,507,1:26,110,510,1:26,111,513,1:27,112,516,1:27,115,519,1:26,117,522,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject VG
if not os.path.isdir(path_results + '/T2/VG'):
    os.makedirs(path_results + '/T2/VG')
os.chdir(path_results + '/T2/VG')
sct.run('dcm2nii -o . -r N '+new_folder+'/VG/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 19,98,138,20:21,91,167,19:21,84,192,18:25,79,217,17:25,75,240,16:26,73,262,15:26,73,283,14:28,75,302,13:29,81,320,12:30,89,339,11:32,98,358,10:32,107,371,9:32,116,389,8:32,123,404,7:33,126,419,6:32,129,433,5:31,132,448,4:31,134,461,3:27,135,513,2:25,137,535,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 1,2 -start 11,71 -end 246,549')
f_crop = open('crop.txt', 'w')
f_crop.write('71,549,90,420,11,246')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 16,87,0,1:17,86,3,1:17,85,6,1:17,85,9,1:17,85,12,1:17,85,15,1:17,85,18,1:17,85,21,1:16,84,24,1:16,83,27,1:16,83,30,1:16,82,33,1:16,82,36,1:16,81,39,1:16,80,42,1:17,80,45,1:17,80,48,1:17,80,51,1:17,80,54,1:17,79,57,1:17,79,60,1:18,78,63,1:18,78,66,1:18,77,69,1:18,76,72,1:18,75,75,1:19,75,78,1:19,74,81,1:19,74,84,1:19,73,87,1:19,72,90,1:19,72,93,1:20,71,96,1:20,70,99,1:20,70,102,1:20,69,105,1:21,69,108,1:21,67,111,1:21,67,114,1:21,67,117,1:21,66,120,1:22,65,123,1:22,65,126,1:22,64,129,1:22,63,132,1:22,63,135,1:22,63,138,1:23,62,141,1:22,62,144,1:23,61,147,1:23,61,150,1:23,61,153,1:23,60,156,1:24,59,159,1:24,59,162,1:24,58,165,1:24,58,168,1:25,57,171,1:24,57,174,1:24,57,177,1:24,57,180,1:25,57,183,1:25,57,186,1:25,56,189,1:25,56,192,1:25,56,195,1:25,56,198,1:26,56,201,1:26,56,204,1:26,56,207,1:27,56,210,1:27,56,213,1:27,57,216,1:27,57,219,1:27,58,222,1:27,59,225,1:28,59,228,1:27,59,231,1:28,60,234,1:28,60,237,1:28,61,240,1:28,62,243,1:29,62,246,1:29,64,249,1:29,65,252,1:29,66,255,1:29,67,258,1:30,69,261,1:30,70,264,1:30,71,267,1:31,72,270,1:31,74,273,1:31,75,276,1:31,77,279,1:32,78,282,1:32,80,285,1:32,81,288,1:32,83,291,1:32,84,294,1:32,86,297,1:32,87,300,1:33,89,303,1:33,91,306,1:33,92,309,1:33,93,312,1:33,95,315,1:33,96,318,1:33,98,321,1:33,100,324,1:33,101,327,1:33,102,330,1:33,103,333,1:33,104,336,1:33,105,339,1:33,107,342,1:33,107,345,1:33,108,348,1:33,108,351,1:33,109,354,1:33,110,357,1:33,111,360,1:33,112,363,1:33,112,366,1:33,113,369,1:33,113,372,1:32,114,375,1:32,114,378,1:32,115,381,1:32,115,384,1:32,115,387,1:32,115,390,1:32,115,393,1:32,116,396,1:31,116,399,1:31,116,402,1:31,116,405,1:31,116,408,1:31,116,411,1:30,116,414,1:30,116,417,1:30,116,420,1:30,116,423,1:30,117,426,1:30,116,429,1:29,116,432,1:29,115,435,1:29,115,438,1:29,115,441,1:29,115,444,1:29,116,447,1:28,116,450,1:28,116,453,1:28,116,456,1:27,116,459,1:26,116,462,1:26,116,465,1:26,116,468,1:26,117,471,1:25,119,474,1:25,120,477,1:25,122,478,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject example
if not os.path.isdir(path_results + '/T2/VP'):
    os.makedirs(path_results + '/T2/VP')
os.chdir(path_results + '/T2/VP')
sct.run('dcm2nii -o . -r N '+new_folder+'/VP/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 29,101,37,20:29,93,68,19:29,86,100,18:29,82,130,17:28,80,157,16:27,82,183,15:26,84,207,14:27,87,232,13:27,91,253,12:26,96,275,11:26,104,296,10:24,116,315,9:23,127,334,8:21,135,353,7:20,139,368,6:18,140,385,5:16,140,404,4:14,138,423,3:12,120,487,2:12,123,510,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 525')
f_crop = open('crop.txt', 'w')
f_crop.write('0,525,235,450')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 27,99,0,1:29,98,3,1:29,98,6,1:29,97,9,1:29,97,12,1:28,96,15,1:28,95,18,1:28,95,21,1:28,94,24,1:29,93,27,1:29,92,30,1:29,92,33,1:29,91,36,1:29,90,39,1:29,90,42,1:29,90,45,1:29,90,48,1:29,89,51,1:29,88,54,1:29,87,57,1:29,87,60,1:29,86,63,1:29,85,66,1:30,85,69,1:30,84,72,1:30,84,75,1:30,84,78,1:30,83,81,1:30,83,84,1:29,83,87,1:30,82,90,1:30,82,93,1:30,81,96,1:29,81,99,1:30,81,102,1:30,80,105,1:29,80,108,1:29,79,111,1:29,79,114,1:29,79,117,1:29,79,120,1:29,78,123,1:29,78,126,1:29,77,129,1:29,77,132,1:29,77,135,1:29,77,138,1:28,76,141,1:28,76,144,1:28,76,147,1:28,76,150,1:29,76,153,1:29,75,156,1:28,76,159,1:28,76,162,1:28,75,165,1:28,75,168,1:28,76,171,1:28,76,174,1:28,76,177,1:28,76,180,1:28,76,183,1:28,76,186,1:28,76,189,1:28,77,192,1:28,77,195,1:28,77,198,1:28,78,201,1:27,78,204,1:27,78,207,1:27,79,210,1:27,79,213,1:27,79,216,1:26,79,219,1:26,80,222,1:26,80,225,1:26,81,228,1:27,81,231,1:27,82,234,1:27,82,237,1:27,83,240,1:27,84,243,1:27,84,246,1:26,85,249,1:26,85,252,1:26,86,255,1:26,86,258,1:26,87,261,1:26,88,264,1:26,89,267,1:26,90,270,1:26,91,273,1:26,91,276,1:26,92,279,1:26,94,282,1:26,95,285,1:26,96,288,1:26,96,291,1:26,97,294,1:26,99,297,1:26,100,300,1:25,103,303,1:25,104,306,1:25,105,309,1:25,106,312,1:25,107,315,1:25,109,318,1:25,110,321,1:24,112,324,1:24,113,327,1:24,115,330,1:23,116,333,1:23,118,336,1:23,119,339,1:23,121,342,1:23,122,345,1:23,123,348,1:23,124,351,1:22,126,354,1:22,127,357,1:21,127,360,1:20,128,363,1:20,129,366,1:20,130,369,1:20,130,372,1:19,130,375,1:19,131,378,1:18,131,381,1:18,131,384,1:18,131,387,1:18,131,390,1:17,132,393,1:17,131,396,1:17,131,399,1:16,131,402,1:15,131,405,1:15,130,408,1:15,131,411,1:15,130,414,1:15,129,417,1:14,129,420,1:14,128,423,1:14,127,426,1:13,126,429,1:13,126,432,1:13,126,435,1:13,125,438,1:12,125,441,1:12,124,444,1:12,123,447,1:12,122,450,1:12,122,453,1:11,121,456,1:11,121,459,1:12,121,462,1:12,120,465,1:12,118,468,1:12,117,471,1:12,117,474,1:12,118,477,1:12,117,480,1:12,116,483,1:12,116,486,1:12,116,489,1:12,116,492,1:12,115,495,1:12,115,498,1:12,115,501,1:12,114,504,1:12,113,507,1:11,113,510,1:11,113,513,1:11,113,516,1:11,115,519,1:11,117,522,1:11,121,525,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject example
if not os.path.isdir(path_results + '/T2/AM'):
    os.makedirs(path_results + '/T2/AM')
os.chdir(path_results + '/T2/AM')
sct.run('dcm2nii -o . -r N '+new_folder+'/AM/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
# sct_label_utils -i labels_vertebral.nii.gz -t display-voxel
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 25,96,32,20:22,91,66,19:21,89,98,18:19,89,128,17:19,88,155,16:19,87,182,15:21,88,209,14:23,91,234,13:25,96,258,12:28,104,281,11:30,113,303,10:32,122,324,9:33,129,344,8:34,133,360,7:35,134,377,6:35,133,393,5:35,133,411,4:35,132,430,3:39,124,498,2:36,127,523,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 539')
f_crop = open('crop.txt', 'w')
f_crop.write('0,539,80,470')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 25,90,0,1:26,85,3,1:26,84,6,1:25,83,9,1:25,82,12,1:26,82,15,1:25,82,18,1:24,81,21,1:25,81,24,1:25,81,27,1:25,82,30,1:25,82,33,1:25,81,36,1:24,82,39,1:24,82,42,1:23,82,45,1:23,81,48,1:23,81,51,1:23,81,54,1:23,81,57,1:23,80,60,1:22,80,63,1:22,80,66,1:22,80,69,1:22,80,72,1:22,80,75,1:22,81,78,1:22,81,81,1:22,81,84,1:21,81,87,1:21,81,90,1:21,81,93,1:21,81,96,1:21,81,99,1:21,81,102,1:21,81,105,1:21,81,108,1:21,81,111,1:21,80,114,1:20,80,117,1:20,80,120,1:20,80,123,1:20,80,126,1:20,80,129,1:20,80,132,1:20,80,135,1:20,80,138,1:20,80,141,1:20,80,144,1:20,80,147,1:20,80,150,1:20,80,153,1:20,80,156,1:20,80,159,1:20,80,162,1:20,80,165,1:20,80,168,1:20,80,171,1:20,80,174,1:20,80,177,1:20,80,180,1:20,81,183,1:20,81,186,1:21,81,189,1:21,81,192,1:21,81,195,1:21,82,198,1:21,82,201,1:22,82,204,1:22,82,207,1:22,82,210,1:22,83,213,1:22,83,216,1:22,83,219,1:23,84,222,1:23,84,225,1:23,85,228,1:23,85,231,1:24,85,234,1:24,86,237,1:24,87,240,1:24,87,243,1:24,88,246,1:25,89,249,1:25,89,252,1:26,90,255,1:26,91,258,1:26,91,261,1:27,92,264,1:27,93,267,1:27,93,270,1:27,95,273,1:28,96,276,1:28,97,279,1:28,98,282,1:28,99,285,1:29,100,288,1:29,101,291,1:29,102,294,1:29,103,297,1:30,104,300,1:30,105,303,1:30,106,306,1:30,108,309,1:31,109,312,1:31,110,315,1:31,111,318,1:31,112,321,1:32,113,324,1:32,114,327,1:32,115,330,1:32,116,333,1:32,117,336,1:32,118,339,1:33,119,342,1:33,119,345,1:33,121,348,1:33,122,351,1:34,122,354,1:34,123,357,1:34,124,360,1:35,124,363,1:34,125,366,1:34,126,369,1:35,126,372,1:35,126,375,1:35,127,378,1:35,127,381,1:35,127,384,1:35,127,387,1:35,127,390,1:35,127,393,1:35,127,396,1:35,127,399,1:35,126,402,1:35,126,405,1:35,125,408,1:35,125,411,1:34,125,414,1:35,124,417,1:35,124,420,1:35,124,423,1:35,124,426,1:35,122,429,1:35,123,432,1:36,122,435,1:36,121,438,1:36,121,441,1:36,121,444,1:37,120,447,1:37,120,450,1:37,120,453,1:38,119,456,1:38,118,459,1:38,118,462,1:39,117,465,1:39,117,468,1:40,117,471,1:40,116,474,1:40,115,477,1:40,114,480,1:40,112,483,1:40,112,486,1:39,112,489,1:39,113,492,1:39,113,495,1:39,113,498,1:39,113,501,1:39,113,504,1:39,114,507,1:39,114,510,1:39,115,513,1:39,115,516,1:38,116,519,1:38,115,522,1:38,115,525,1:38,116,528,1:37,117,531,1:37,118,534,1:37,122,537,1:37,125,539,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject HB
if not os.path.isdir(path_results + '/T2/HB'):
    os.makedirs(path_results + '/T2/HB')
os.chdir(path_results + '/T2/HB')
sct.run('dcm2nii -o . -r N '+new_folder+'/HB/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 38,101,7,20:37,95,44,19:35,88,77,18:35,87,108,17:35,86,138,16:34,87,168,15:34,90,195,14:33,94,221,13:31,101,247,12:30,110,272,11:28,118,294,10:25,128,317,9:24,135,338,8:23,138,357,7:23,137,375,6:22,138,391,5:23,136,411,4:23,137,431,3:24,129,496,2:23,129,520,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 536')
f_crop = open('crop.txt', 'w')
f_crop.write('0,536,100,470')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 38,88,0,1:38,89,3,1:38,89,6,1:38,88,9,1:38,88,12,1:37,88,15,1:37,87,18,1:37,87,21,1:37,87,24,1:37,87,27,1:37,87,30,1:37,86,33,1:37,86,36,1:37,85,39,1:37,85,42,1:37,85,45,1:37,85,48,1:36,84,51,1:36,84,54,1:36,84,57,1:36,83,60,1:36,83,63,1:36,83,66,1:36,82,69,1:36,81,72,1:35,81,75,1:35,81,78,1:35,80,81,1:35,81,84,1:35,81,87,1:35,81,90,1:35,81,93,1:35,81,96,1:35,81,99,1:35,81,102,1:35,81,105,1:35,81,108,1:35,81,111,1:35,81,114,1:35,81,117,1:35,81,120,1:35,81,123,1:35,81,126,1:35,81,129,1:34,80,132,1:35,80,135,1:35,80,138,1:35,81,141,1:35,81,144,1:35,81,147,1:35,81,150,1:35,81,153,1:35,81,156,1:35,82,159,1:35,82,162,1:35,82,165,1:35,82,168,1:34,82,171,1:34,82,174,1:34,83,177,1:34,83,180,1:34,83,183,1:34,83,186,1:34,83,189,1:34,84,192,1:34,84,195,1:34,85,198,1:34,85,201,1:33,85,204,1:33,86,207,1:33,86,210,1:33,87,213,1:33,87,216,1:33,87,219,1:33,88,222,1:33,89,225,1:32,89,228,1:32,90,231,1:32,91,234,1:32,92,237,1:32,92,240,1:31,93,243,1:31,94,246,1:31,95,249,1:31,96,252,1:31,97,255,1:31,98,258,1:30,98,261,1:30,100,264,1:29,101,267,1:29,101,270,1:29,103,273,1:29,104,276,1:29,105,279,1:28,106,282,1:28,107,285,1:28,108,288,1:28,109,291,1:27,111,294,1:27,112,297,1:27,113,300,1:26,114,303,1:26,115,306,1:26,116,309,1:26,117,312,1:26,119,315,1:25,119,318,1:25,120,321,1:24,122,324,1:24,123,327,1:24,124,330,1:24,124,333,1:24,125,336,1:24,126,339,1:24,127,342,1:24,128,345,1:24,128,348,1:23,129,351,1:23,130,354,1:23,130,357,1:23,130,360,1:23,130,363,1:23,131,366,1:23,131,369,1:23,131,372,1:23,131,375,1:23,131,378,1:23,131,381,1:23,132,384,1:22,132,387,1:22,132,390,1:22,132,393,1:22,132,396,1:22,132,399,1:22,132,402,1:23,131,405,1:23,131,408,1:23,131,411,1:23,131,414,1:23,131,417,1:23,131,420,1:23,130,423,1:24,130,426,1:24,130,429,1:24,130,432,1:24,129,435,1:24,129,438,1:24,128,441,1:24,127,444,1:25,127,447,1:25,126,450,1:25,125,453,1:25,125,456,1:25,124,459,1:25,123,462,1:26,123,465,1:25,122,468,1:26,122,471,1:25,121,474,1:25,120,477,1:26,120,480,1:26,119,483,1:26,119,486,1:26,120,489,1:26,120,492,1:25,119,495,1:25,119,498,1:25,119,501,1:25,119,504,1:25,120,507,1:25,119,510,1:25,119,513,1:25,118,516,1:26,118,519,1:25,119,522,1:25,119,525,1:25,120,528,1:25,123,531,1:24,128,534,1:23,130,536,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject PA
if not os.path.isdir(path_results + '/T2/PA'):
    os.makedirs(path_results + '/T2/PA')
os.chdir(path_results + '/T2/PA')
sct.run('dcm2nii -o . -r N '+new_folder+'/PA/T2/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 24,93,80,20:23,85,110,19:23,77,139,18:23,74,165,17:22,72,191,16:21,71,215,15:21,74,237,14:21,78,261,13:22,83,283,12:22,91,303,11:22,102,325,10:23,112,342,9:23,123,357,8:23,131,373,7:23,135,388,6:24,137,403,5:25,137,419,4:26,137,436,3:27,122,500,2:26,123,523,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 1,2 -start 20,0 -end 240,538')
f_crop = open('crop.txt', 'w')
f_crop.write('0,538,90,470,20,240')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 29,80,0,1:25,84,3,1:27,82,6,1:26,79,9,1:26,79,12,1:26,78,15,1:27,77,18,1:26,76,21,1:25,75,24,1:25,75,27,1:25,75,30,1:25,74,33,1:25,73,36,1:25,72,39,1:24,71,42,1:24,70,45,1:24,69,48,1:24,69,51,1:24,68,54,1:24,67,57,1:24,66,60,1:24,66,63,1:24,66,66,1:24,64,69,1:24,64,72,1:24,63,75,1:24,63,78,1:24,62,81,1:24,61,84,1:23,60,87,1:23,60,90,1:23,59,93,1:23,59,96,1:23,58,99,1:23,57,102,1:23,56,105,1:23,55,108,1:24,55,111,1:24,55,114,1:24,55,117,1:23,54,120,1:23,54,123,1:23,53,126,1:23,52,129,1:23,52,132,1:23,52,135,1:23,51,138,1:23,51,141,1:23,51,144,1:23,50,147,1:23,50,150,1:23,49,153,1:23,49,156,1:23,49,159,1:23,48,162,1:23,48,165,1:23,47,168,1:23,47,171,1:23,47,174,1:23,47,177,1:23,47,180,1:23,46,183,1:23,46,186,1:23,46,189,1:23,46,192,1:22,46,195,1:22,46,198,1:22,46,201,1:22,46,204,1:22,46,207,1:22,46,210,1:22,46,213,1:22,46,216,1:22,46,219,1:22,47,222,1:21,47,225,1:21,47,228,1:21,48,231,1:22,48,234,1:22,49,237,1:22,49,240,1:22,50,243,1:22,50,246,1:21,50,249,1:21,51,252,1:21,51,255,1:21,52,258,1:21,53,261,1:21,54,264,1:21,54,267,1:21,55,270,1:22,56,273,1:22,56,276,1:22,57,279,1:22,58,282,1:22,59,285,1:22,60,288,1:22,61,291,1:22,62,294,1:21,64,297,1:21,64,300,1:22,66,303,1:22,66,306,1:22,68,309,1:22,70,312,1:22,71,315,1:22,72,318,1:22,74,321,1:22,75,324,1:22,77,327,1:22,79,330,1:22,80,333,1:22,82,336,1:22,84,339,1:22,85,342,1:23,87,345,1:22,89,348,1:22,91,351,1:22,93,354,1:23,95,357,1:23,97,360,1:23,98,363,1:23,100,366,1:23,101,369,1:23,102,372,1:23,104,375,1:23,105,378,1:23,106,381,1:23,107,384,1:24,108,387,1:24,108,390,1:23,109,393,1:23,110,396,1:24,110,399,1:24,110,402,1:24,111,405,1:24,111,408,1:24,110,411,1:24,110,414,1:25,110,417,1:25,110,420,1:26,110,423,1:26,110,426,1:26,110,429,1:26,109,432,1:27,108,435,1:27,108,438,1:27,107,441,1:27,106,444,1:27,106,447,1:27,105,450,1:27,104,453,1:27,103,456,1:27,103,459,1:27,103,462,1:27,102,465,1:28,101,468,1:28,100,471,1:28,100,474,1:28,100,477,1:27,99,480,1:27,98,483,1:27,97,486,1:26,97,489,1:26,96,492,1:26,95,495,1:26,95,498,1:26,95,501,1:26,95,504,1:26,95,507,1:26,95,510,1:26,95,513,1:25,94,516,1:25,93,519,1:25,94,522,1:25,93,525,1:25,94,528,1:25,95,531,1:26,99,534,1:26,101,537,1:26,102,538,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Creation of necessary files for T1 preprocessing
"""
# Preprocessing for subject errsm_02 - removed because of low contrast
if not os.path.isdir(path_results + '/T1/errsm_02'):
    os.makedirs(path_results + '/T1/errsm_02')
os.chdir(path_results + '/T1/errsm_02')
sct.run('dcm2nii -o . -r N '+os.path.join(folder_data_errsm, 'errsm_02', '22-SPINE_T1', '*.dcm'))
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 89,74,199,20:89,70,229,19:89,66,258,18:87,64,285,17:87,63,310,16:87,64,336,15:87,66,362,14:87,71,385,13:87,76,407,12:88,81,428,11:89,89,449,10:91,98,469,9:92,108,486,8:94,112,502,7:93,115,517,6:92,118,532,5:92,119,548,4:90,120,566,3:87,127,622,2:85,134,647,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 130 -end 650')
f_crop = open('crop.txt', 'w')
f_crop.write('130,650,0,max')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 90,78,0,1:89,72,25,1:89,66,44,1:89,64,61,1:89,62,82,1:89,60,96,1:89,59,114,1:88,58,133,1:88,58,149,1:87,57,169,1:87,58,185,1:87,59,201,1:87,61,215,1:87,62,233,1:87,65,247,1:87,67,259,1:87,69,272,1:88,73,285,1:89,76,298,1:89,80,310,1:90,85,326,1:91,91,339,1:92,96,350,1:92,101,365,1:93,105,378,1:93,107,391,1:92,109,404,1:92,110,416,1:92,111,428,1:91,111,444,1:90,111,459,1:89,112,470,1:88,116,479,1')
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o labels_updown.nii.gz -t create -x 88,115,478,1:88,119,486,1:88,122,493,1:88,125,501,1:88,127,508,1:88,128,514,1:88,130,520,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')
"""

# Preprocessing for subject errsm_04
if not os.path.isdir(path_results + '/T1/errsm_04'):
    os.makedirs(path_results + '/T1/errsm_04')
os.chdir(path_results + '/T1/errsm_04')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_04/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 85,83,80,20:86,80,110,19:86,77,139,18:85,75,168,17:85,74,194,16:85,74,220,15:85,77,245,14:84,82,269,13:84,90,292,12:86,99,313,11:87,108,333,10:88,118,352,9:89,126,370,8:89,130,386,7:89,130,403,6:87,132,420,5:87,135,436,4:87,138,453,3:88,135,472,2:88,140,490,1:88,145,507,51:88,150,533,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 72 -end 548')
f_crop = open('crop.txt', 'w')
f_crop.write('72,548,50,405')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 87,71,0,1:87,71,3,1:87,71,6,1:87,72,9,1:86,72,12,1:86,72,15,1:86,72,18,1:86,71,21,1:86,72,24,1:86,72,27,1:86,71,30,1:86,71,33,1:86,70,36,1:86,70,39,1:86,70,42,1:86,69,45,1:86,69,48,1:86,70,51,1:86,70,54,1:86,69,57,1:86,69,60,1:85,69,63,1:85,69,66,1:86,69,69,1:86,69,72,1:86,69,75,1:86,69,78,1:86,69,81,1:86,69,84,1:86,69,87,1:86,69,90,1:86,69,93,1:86,68,96,1:86,68,99,1:85,68,102,1:85,68,105,1:86,68,108,1:86,68,111,1:86,68,114,1:86,68,117,1:86,68,120,1:85,68,123,1:85,68,126,1:85,68,129,1:85,68,132,1:85,68,135,1:85,68,138,1:85,68,141,1:85,69,144,1:85,69,147,1:85,69,150,1:85,70,153,1:85,70,156,1:85,70,159,1:85,70,162,1:85,70,165,1:85,71,168,1:85,71,171,1:85,72,174,1:85,72,177,1:84,73,180,1:84,74,183,1:85,74,186,1:84,75,189,1:84,76,192,1:84,77,195,1:85,77,198,1:85,78,201,1:85,79,204,1:85,80,207,1:85,81,210,1:85,82,213,1:85,83,216,1:85,84,219,1:85,85,222,1:85,86,225,1:85,88,228,1:86,89,231,1:86,90,234,1:86,91,237,1:86,93,240,1:86,93,243,1:87,95,246,1:87,97,249,1:87,98,252,1:87,99,255,1:87,100,258,1:87,101,261,1:87,102,264,1:87,104,267,1:87,105,270,1:87,107,273,1:88,107,276,1:88,109,279,1:88,110,282,1:88,111,285,1:88,112,288,1:88,113,291,1:88,114,294,1:88,115,297,1:89,116,300,1:89,117,303,1:89,118,306,1:89,118,309,1:89,119,312,1:89,120,315,1:89,121,318,1:89,121,321,1:89,122,324,1:89,122,327,1:89,123,330,1:89,123,333,1:88,123,336,1:88,124,339,1:88,124,342,1:88,125,345,1:88,125,348,1:88,125,351,1:88,126,354,1:88,126,357,1:88,126,360,1:88,127,363,1:88,127,366,1:88,128,369,1:88,128,372,1:87,128,375,1:87,128,378,1:87,129,381,1:87,129,384,1:87,129,387,1:88,129,390,1:88,129,393,1:88,130,396,1:88,130,399,1:88,130,402,1:88,130,405,1:89,131,408,1:89,131,411,1:89,131,414,1:89,131,417,1:89,131,420,1:88,130,423,1:88,131,426,1:88,131,429,1:88,132,432,1:88,133,435,1:88,133,438,1:87,133,441,1:88,134,444,1:88,135,447,1:88,136,450,1:88,137,453,1:88,138,456,1:88,138,459,1:88,139,462,1:88,141,465,1:88,141,468,1:88,142,471,1:89,144,474,1:89,148,476,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_05
if not os.path.isdir(path_results + '/T1/errsm_05'):
    os.makedirs(path_results + '/T1/errsm_05')
os.chdir(path_results + '/T1/errsm_05')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_05/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 84,78,106,20:84,72,133,19:85,65,160,18:85,60,184,17:85,55,206,16:86,53,228,15:86,53,251,14:85,57,272,13:85,61,293,12:86,69,312,11:88,78,330,10:88,90,345,9:89,102,360,8:90,109,375,7:90,115,388,6:90,119,402,5:89,122,416,4:88,125,431,3:88,121,445,2:87,124,468,1:86,127,488,51:86,131,514,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  35 -end 528 ')
f_crop = open('crop.txt', 'w')
f_crop.write('35,528,80,425')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 84,75,0,1:83,74,3,1:83,74,6,1:83,73,9,1:83,74,12,1:83,74,15,1:83,74,18,1:83,73,21,1:83,73,24,1:83,73,27,1:83,73,30,1:83,72,33,1:83,72,36,1:83,71,39,1:83,71,42,1:83,71,45,1:84,70,48,1:84,70,51,1:83,69,54,1:84,69,57,1:84,69,60,1:84,69,63,1:84,68,66,1:84,67,69,1:84,67,72,1:84,67,75,1:84,67,78,1:85,66,81,1:85,66,84,1:84,65,87,1:85,64,90,1:85,64,93,1:85,63,96,1:85,63,99,1:85,62,102,1:85,62,105,1:86,61,108,1:85,61,111,1:86,60,114,1:86,60,117,1:86,59,120,1:86,58,123,1:86,58,126,1:86,57,129,1:86,56,132,1:86,56,135,1:86,55,138,1:86,54,141,1:86,54,144,1:86,53,147,1:86,53,150,1:86,52,153,1:86,51,156,1:86,51,159,1:86,50,162,1:86,49,165,1:86,49,168,1:86,49,171,1:86,48,174,1:86,48,177,1:86,48,180,1:86,47,183,1:86,46,186,1:86,46,189,1:86,46,192,1:87,46,195,1:86,46,198,1:86,46,201,1:86,46,204,1:86,46,207,1:86,47,210,1:86,47,213,1:86,47,216,1:86,48,219,1:86,48,222,1:86,49,225,1:86,49,228,1:86,49,231,1:86,50,234,1:86,51,237,1:86,51,240,1:86,52,243,1:86,53,246,1:86,53,249,1:86,54,252,1:87,55,255,1:87,55,258,1:87,56,261,1:87,57,264,1:87,59,267,1:87,60,270,1:87,61,273,1:87,62,276,1:87,64,279,1:87,66,282,1:87,67,285,1:87,69,288,1:87,70,291,1:88,72,294,1:88,73,297,1:88,75,300,1:88,77,303,1:89,79,306,1:89,81,309,1:89,83,312,1:89,84,315,1:89,86,318,1:89,88,321,1:90,90,324,1:90,92,327,1:90,94,330,1:90,96,333,1:90,98,336,1:90,99,339,1:90,101,342,1:90,102,345,1:90,103,348,1:91,105,351,1:91,107,354,1:91,107,357,1:91,109,360,1:90,110,363,1:90,110,366,1:90,111,369,1:90,112,372,1:90,113,375,1:90,113,378,1:90,114,381,1:90,114,384,1:89,114,387,1:89,115,390,1:89,115,393,1:89,115,396,1:88,115,399,1:88,116,402,1:88,116,405,1:88,116,408,1:88,116,411,1:88,116,414,1:88,116,417,1:88,116,420,1:87,116,423,1:86,116,426,1:87,118,429,1:87,118,432,1:87,117,435,1:87,117,438,1:87,116,441,1:86,116,444,1:86,116,447,1:86,117,450,1:86,117,453,1:86,117,456,1:86,117,459,1:86,117,462,1:86,118,465,1:87,118,468,1:86,120,471,1:86,120,474,1:86,119,477,1:86,120,480,1:86,120,483,1:86,121,486,1:86,124,489,1:85,127,492,1:86,129,493,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_09
if not os.path.isdir(path_results + '/T1/errsm_09'):
    os.makedirs(path_results + '/T1/errsm_09')
os.chdir(path_results + '/T1/errsm_09')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_09/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 82,67,96,20:83,63,123,19:83,63,148,18:84,62,171,17:85,61,193,16:85,62,214,15:86,65,235,14:86,68,256,13:87,73,275,12:88,79,293,11:88,86,312,10:88,94,329,9:88,102,345,8:88,106,361,7:88,108,377,6:88,110,393,5:88,112,410,4:89,115,426,3:89,112,442,2:89,115,459,1:89,121,482,51:89,132,504,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 32 -end 520')
f_crop = open('crop.txt', 'w')
f_crop.write('32,520,70,425')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 80,65,0,1:80,65,3,1:80,65,6,1:80,65,9,1:80,64,12,1:80,64,15,1:81,64,18,1:81,63,21,1:81,63,24,1:82,62,27,1:82,62,30,1:82,61,33,1:82,61,36,1:82,61,39,1:82,61,42,1:82,60,45,1:82,60,48,1:82,60,51,1:82,60,54,1:82,60,57,1:82,60,60,1:82,60,63,1:82,59,66,1:82,59,69,1:82,58,72,1:82,58,75,1:82,58,78,1:82,58,81,1:83,58,84,1:83,58,87,1:83,58,90,1:83,58,93,1:83,58,96,1:83,57,99,1:83,57,102,1:84,57,105,1:84,57,108,1:84,57,111,1:84,57,114,1:84,57,117,1:84,57,120,1:84,57,123,1:84,57,126,1:84,57,129,1:84,57,132,1:84,56,135,1:84,56,138,1:84,56,141,1:84,56,144,1:84,57,147,1:84,57,150,1:85,56,153,1:85,56,156,1:85,57,159,1:85,57,162,1:85,57,165,1:85,57,168,1:85,57,171,1:85,57,174,1:85,57,177,1:85,57,180,1:85,57,183,1:85,58,186,1:86,58,189,1:86,58,192,1:86,58,195,1:86,58,198,1:86,59,201,1:86,59,204,1:86,60,207,1:86,60,210,1:86,61,213,1:86,62,216,1:86,62,219,1:86,63,222,1:86,64,225,1:86,64,228,1:87,65,231,1:87,65,234,1:87,66,237,1:87,67,240,1:87,68,243,1:87,69,246,1:87,70,249,1:87,71,252,1:87,72,255,1:87,73,258,1:87,73,261,1:87,75,264,1:88,76,267,1:88,77,270,1:88,78,273,1:88,79,276,1:88,80,279,1:88,82,282,1:88,83,285,1:88,84,288,1:88,86,291,1:88,87,294,1:88,88,297,1:88,89,300,1:88,91,303,1:88,92,306,1:88,93,309,1:89,95,312,1:89,96,315,1:89,97,318,1:89,98,321,1:89,99,324,1:89,100,327,1:89,101,330,1:89,101,333,1:89,102,336,1:89,102,339,1:89,102,342,1:89,103,345,1:89,103,348,1:89,103,351,1:89,104,354,1:89,104,357,1:89,105,360,1:89,105,363,1:89,105,366,1:89,105,369,1:89,106,372,1:89,106,375,1:89,106,378,1:89,107,381,1:89,107,384,1:89,107,387,1:89,107,390,1:89,108,393,1:89,107,396,1:89,107,399,1:89,108,402,1:89,108,405,1:89,108,408,1:89,108,411,1:89,108,414,1:89,108,417,1:89,108,420,1:89,108,423,1:89,108,426,1:89,108,429,1:89,108,432,1:89,108,435,1:89,108,438,1:89,109,441,1:89,110,444,1:89,111,447,1:89,112,450,1:89,113,453,1:89,114,456,1:89,116,459,1:89,117,462,1:88,118,465,1:88,119,468,1:88,120,471,1:88,121,474,1:88,123,477,1:88,124,480,1:88,127,483,1:88,129,486,1:89,132,488,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_10
if not os.path.isdir(path_results + '/T1/errsm_10'):
    os.makedirs(path_results + '/T1/errsm_10')
os.chdir(path_results + '/T1/errsm_10')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_10/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 75,78,125,20:75,69,155,19:74,62,187,18:75,59,215,17:74,56,240,16:75,56,264,15:75,60,289,14:76,66,313,13:76,73,334,12:77,81,353,11:77,89,372,10:78,97,391,9:78,104,411,8:79,110,428,7:80,113,445,6:82,116,462,5:83,118,478,4:84,121,497,3:84,118,511,2:85,121,533,1:85,125,558,51:86,132,581,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 50 -end 595')
f_crop = open('crop.txt', 'w')
f_crop.write('50,595,100,480')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 78,80,0,1:78,79,3,1:78,78,6,1:78,78,9,1:78,78,12,1:79,77,15,1:79,77,18,1:79,77,21,1:78,77,24,1:78,77,27,1:78,77,30,1:78,77,33,1:78,77,36,1:77,75,39,1:77,74,42,1:77,74,45,1:76,74,48,1:76,73,51,1:76,73,54,1:75,72,57,1:75,72,60,1:75,71,63,1:75,70,66,1:75,70,69,1:75,69,72,1:75,68,75,1:75,67,78,1:75,66,81,1:74,65,84,1:74,65,87,1:74,64,90,1:74,63,93,1:74,63,96,1:74,62,99,1:74,62,102,1:74,61,105,1:74,61,108,1:74,60,111,1:74,60,114,1:74,60,117,1:74,59,120,1:74,59,123,1:74,58,126,1:74,57,129,1:74,57,132,1:75,57,135,1:74,56,138,1:74,56,141,1:74,56,144,1:74,54,147,1:74,55,150,1:74,55,153,1:75,54,156,1:75,54,159,1:75,53,162,1:75,53,165,1:75,52,168,1:75,52,171,1:75,52,174,1:74,52,177,1:74,52,180,1:74,52,183,1:75,51,186,1:75,51,189,1:75,51,192,1:75,51,195,1:74,51,198,1:75,51,201,1:75,51,204,1:75,52,207,1:75,52,210,1:75,52,213,1:75,52,216,1:75,52,219,1:75,53,222,1:75,53,225,1:75,54,228,1:75,54,231,1:75,54,234,1:76,55,237,1:76,55,240,1:76,56,243,1:76,57,246,1:76,57,249,1:76,58,252,1:76,59,255,1:76,60,258,1:76,60,261,1:76,61,264,1:76,62,267,1:76,63,270,1:76,64,273,1:76,65,276,1:76,66,279,1:77,68,282,1:77,69,285,1:77,69,288,1:77,71,291,1:77,72,294,1:77,73,297,1:77,74,300,1:77,75,303,1:77,76,306,1:77,77,309,1:77,79,312,1:77,80,315,1:77,82,318,1:77,83,321,1:77,84,324,1:77,85,327,1:78,87,330,1:78,88,333,1:78,90,336,1:78,90,339,1:78,92,342,1:78,93,345,1:78,94,348,1:78,95,351,1:79,96,354,1:79,97,357,1:79,99,360,1:79,100,363,1:79,101,366,1:79,101,369,1:80,102,372,1:80,103,375,1:80,104,378,1:80,104,381,1:80,105,384,1:80,106,387,1:80,106,390,1:81,107,393,1:81,107,396,1:81,107,399,1:82,108,402,1:82,109,405,1:82,110,408,1:82,111,411,1:82,111,414,1:82,111,417,1:82,112,420,1:83,112,423,1:83,112,426,1:83,112,429,1:83,113,432,1:83,113,435,1:84,113,438,1:84,113,441,1:84,113,444,1:84,113,447,1:84,113,450,1:84,113,453,1:84,113,456,1:84,113,459,1:84,113,462,1:84,113,465,1:84,113,468,1:84,113,471,1:84,113,474,1:84,114,477,1:84,114,480,1:85,115,483,1:85,115,486,1:85,116,489,1:85,116,492,1:85,116,495,1:85,115,498,1:85,115,501,1:84,116,504,1:84,116,507,1:85,116,510,1:85,117,513,1:85,118,516,1:85,119,519,1:85,119,522,1:85,120,525,1:85,121,528,1:85,121,531,1:85,122,534,1:85,123,537,1:85,125,540,1:85,127,543,1:86,129,545,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_11
if not os.path.isdir(path_results + '/T1/errsm_11'):
    os.makedirs(path_results + '/T1/errsm_11')
os.chdir(path_results + '/T1/errsm_11')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_11/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 91,73,91,20:90,67,121,19:88,61,151,18:86,57,180,17:84,55,205,16:83,56,231,15:83,57,258,14:83,62,283,13:83,71,306,12:82,82,327,11:80,94,346,10:79,112,361,9:79,127,377,8:79,139,391,7:79,142,406,6:81,144,421,5:81,145,437,4:82,143,455,3:84,136,477,2:84,136,496,1:84,133,517,51:85,137,540,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  15 -end 555 ')
f_crop = open('crop.txt', 'w')
f_crop.write('15,555,85,475')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 92,75,0,1:92,74,3,1:92,74,6,1:92,73,9,1:92,73,12,1:92,73,15,1:92,73,18,1:92,72,21,1:92,71,24,1:92,71,27,1:91,70,30,1:91,69,33,1:91,68,36,1:91,67,39,1:91,66,42,1:91,66,45,1:91,65,48,1:91,65,51,1:91,65,54,1:91,64,57,1:91,64,60,1:90,63,63,1:90,63,66,1:90,63,69,1:91,63,72,1:90,62,75,1:90,62,78,1:90,62,81,1:90,62,84,1:90,62,87,1:90,62,90,1:90,61,93,1:90,61,96,1:90,61,99,1:90,60,102,1:89,60,105,1:89,60,108,1:89,60,111,1:89,59,114,1:89,58,117,1:89,58,120,1:89,57,123,1:89,57,126,1:89,57,129,1:88,56,132,1:88,56,135,1:88,56,138,1:88,55,141,1:88,54,144,1:88,54,147,1:87,54,150,1:87,54,153,1:87,53,156,1:86,53,159,1:86,53,162,1:86,52,165,1:86,52,168,1:86,52,171,1:86,52,174,1:86,51,177,1:85,51,180,1:85,51,183,1:85,51,186,1:84,51,189,1:84,51,192,1:84,50,195,1:84,50,198,1:84,50,201,1:84,50,204,1:84,51,207,1:84,51,210,1:83,51,213,1:84,51,216,1:84,51,219,1:84,51,222,1:84,51,225,1:84,51,228,1:83,52,231,1:83,52,234,1:83,53,237,1:84,53,240,1:83,53,243,1:83,53,246,1:83,54,249,1:83,55,252,1:83,55,255,1:84,56,258,1:84,56,261,1:84,57,264,1:83,57,267,1:83,58,270,1:83,59,273,1:83,60,276,1:83,61,279,1:83,63,282,1:83,64,285,1:83,65,288,1:83,66,291,1:83,68,294,1:83,69,297,1:83,71,300,1:82,72,303,1:82,74,306,1:82,75,309,1:82,77,312,1:81,79,315,1:81,80,318,1:81,83,321,1:80,85,324,1:80,86,327,1:80,89,330,1:80,91,333,1:79,93,336,1:79,96,339,1:79,98,342,1:79,101,345,1:79,104,348,1:78,107,351,1:79,109,354,1:78,112,357,1:78,115,360,1:78,118,363,1:78,120,366,1:78,122,369,1:78,124,372,1:78,126,375,1:79,127,378,1:79,129,381,1:79,131,384,1:79,132,387,1:79,133,390,1:80,134,393,1:80,134,396,1:80,135,399,1:81,136,402,1:81,136,405,1:81,136,408,1:81,137,411,1:81,137,414,1:81,136,417,1:81,136,420,1:81,137,423,1:81,136,426,1:81,136,429,1:81,136,432,1:82,135,435,1:82,135,438,1:82,135,441,1:82,135,444,1:83,135,447,1:83,133,450,1:83,133,453,1:83,132,456,1:84,132,459,1:84,131,462,1:84,131,465,1:84,130,468,1:84,130,471,1:84,130,474,1:84,129,477,1:84,129,480,1:84,128,483,1:85,127,486,1:85,126,489,1:85,125,492,1:85,125,495,1:85,125,498,1:85,125,501,1:85,124,504,1:85,125,507,1:85,126,510,1:85,126,513,1:85,126,516,1:85,126,519,1:86,127,522,1:86,127,525,1:85,127,528,1:86,128,531,1:86,129,534,1:86,132,537,1:85,133,540,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_12
if not os.path.isdir(path_results + '/T1/errsm_12'):
    os.makedirs(path_results + '/T1/errsm_12')
os.chdir(path_results + '/T1/errsm_12')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_12/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 87,74,161,20:88,66,189,19:89,62,216,18:89,59,240,17:89,57,264,16:89,59,286,15:89,61,308,14:89,65,330,13:89,72,349,12:88,79,367,11:88,85,386,10:87,91,404,9:87,98,421,8:86,101,438,7:86,105,452,6:84,108,468,5:83,111,483,4:83,115,499,3:84,117,516,2:84,122,535,1:85,130,554,51:85,135,576,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  94 -end 589 ')
f_crop = open('crop.txt', 'w')
f_crop.write('94,589,75,435')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 85,77,0,1:85,76,3,1:85,76,6,1:85,77,9,1:86,76,12,1:86,75,15,1:86,75,18,1:86,74,21,1:86,73,24,1:86,72,27,1:86,71,30,1:86,70,33,1:86,70,36,1:87,69,39,1:87,68,42,1:87,68,45,1:87,67,48,1:87,66,51,1:88,65,54,1:87,65,57,1:87,64,60,1:87,63,63,1:87,62,66,1:88,61,69,1:88,61,72,1:88,60,75,1:88,59,78,1:88,59,81,1:88,59,84,1:89,59,87,1:88,59,90,1:88,58,93,1:89,57,96,1:88,57,99,1:88,57,102,1:89,56,105,1:89,55,108,1:90,54,111,1:90,55,114,1:89,55,117,1:89,55,120,1:89,54,123,1:90,54,126,1:90,53,129,1:90,53,132,1:89,53,135,1:89,52,138,1:90,53,141,1:90,52,144,1:89,52,147,1:89,52,150,1:90,52,153,1:90,52,156,1:90,52,159,1:90,52,162,1:90,52,165,1:90,52,168,1:90,52,171,1:90,52,174,1:90,52,177,1:90,52,180,1:90,52,183,1:90,52,186,1:89,53,189,1:89,53,192,1:89,53,195,1:89,54,198,1:89,54,201,1:89,54,204,1:89,54,207,1:89,55,210,1:89,56,213,1:89,56,216,1:89,56,219,1:89,57,222,1:89,57,225,1:89,57,228,1:89,58,231,1:89,59,234,1:89,60,237,1:89,60,240,1:89,61,243,1:89,62,246,1:89,63,249,1:89,64,252,1:89,65,255,1:89,66,258,1:88,66,261,1:88,68,264,1:88,69,267,1:88,69,270,1:88,70,273,1:88,72,276,1:88,72,279,1:88,74,282,1:87,74,285,1:87,75,288,1:88,76,291,1:88,78,294,1:87,80,297,1:87,80,300,1:87,82,303,1:87,83,306,1:87,84,309,1:87,84,312,1:87,85,315,1:87,86,318,1:87,87,321,1:86,88,324,1:86,89,327,1:86,90,330,1:86,91,333,1:86,92,336,1:86,93,339,1:86,93,342,1:86,94,345,1:86,95,348,1:86,96,351,1:85,97,354,1:85,97,357,1:85,98,360,1:85,98,363,1:85,100,366,1:85,100,369,1:85,100,372,1:85,101,375,1:84,102,378,1:84,103,381,1:84,103,384,1:84,104,387,1:84,104,390,1:84,105,393,1:84,106,396,1:84,107,399,1:84,107,402,1:83,108,405,1:83,109,408,1:83,109,411,1:84,111,414,1:84,111,417,1:84,112,420,1:84,113,423,1:84,113,426,1:84,114,429,1:84,114,432,1:84,114,435,1:84,115,438,1:84,115,441,1:85,116,444,1:85,115,447,1:85,114,450,1:86,115,453,1:85,115,456,1:85,116,459,1:85,117,462,1:85,118,465,1:85,120,468,1:85,121,471,1:85,122,474,1:85,123,477,1:85,123,480,1:85,123,483,1:84,125,486,1:84,126,489,1:84,129,492,1:84,131,495,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_13
if not os.path.isdir(path_results + '/T1/errsm_13'):
    os.makedirs(path_results + '/T1/errsm_13')
os.chdir(path_results + '/T1/errsm_13')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_13/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 95,66,117,20:92,63,151,19:89,60,183,18:86,59,213,17:84,61,239,16:83,64,265,15:83,68,292,14:83,75,317,13:83,82,343,12:83,89,367,11:84,97,389,10:84,106,409,9:84,115,428,8:84,117,449,7:85,120,467,6:85,123,486,5:86,125,504,4:86,126,525,3:86,120,542,2:87,121,562,1:87,126,594,51:89,132,619,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  38 -end 635 ')
f_crop = open('crop.txt', 'w')
f_crop.write('38,635,75,520')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 99,65,0,1:99,64,3,1:98,63,6,1:98,63,9,1:98,63,12,1:98,63,15,1:97,63,18,1:97,62,21,1:97,61,24,1:98,60,27,1:97,60,30,1:97,60,33,1:97,60,36,1:97,59,39,1:96,59,42,1:97,58,45,1:97,58,48,1:97,58,51,1:95,58,54,1:96,58,57,1:95,57,60,1:95,58,63,1:95,57,66,1:95,57,69,1:94,57,72,1:94,57,75,1:94,56,78,1:94,56,81,1:95,56,84,1:95,56,87,1:94,56,90,1:94,56,93,1:93,56,96,1:93,56,99,1:93,56,102,1:93,56,105,1:92,55,108,1:92,55,111,1:92,55,114,1:92,55,117,1:92,55,120,1:92,55,123,1:91,54,126,1:91,54,129,1:90,54,132,1:90,55,135,1:89,54,138,1:89,54,141,1:89,54,144,1:88,54,147,1:89,54,150,1:88,54,153,1:88,54,156,1:87,54,159,1:87,54,162,1:87,54,165,1:87,54,168,1:86,54,171,1:86,54,174,1:86,54,177,1:85,54,180,1:85,54,183,1:85,54,186,1:85,55,189,1:84,55,192,1:84,55,195,1:84,55,198,1:84,55,201,1:84,56,204,1:84,56,207,1:84,56,210,1:84,56,213,1:84,57,216,1:84,57,219,1:83,57,222,1:83,57,225,1:83,58,228,1:83,58,231,1:83,59,234,1:83,59,237,1:83,60,240,1:83,60,243,1:83,61,246,1:83,61,249,1:83,62,252,1:83,63,255,1:83,63,258,1:83,64,261,1:83,64,264,1:83,66,267,1:83,66,270,1:83,66,273,1:83,67,276,1:83,68,279,1:83,69,282,1:83,70,285,1:83,70,288,1:83,71,291,1:83,72,294,1:83,72,297,1:83,73,300,1:83,75,303,1:83,76,306,1:83,77,309,1:83,77,312,1:83,78,315,1:83,79,318,1:83,80,321,1:83,81,324,1:83,82,327,1:84,83,330,1:84,85,333,1:84,85,336,1:84,86,339,1:84,87,342,1:84,88,345,1:84,89,348,1:84,90,351,1:84,91,354,1:84,93,357,1:84,94,360,1:84,94,363,1:84,95,366,1:84,96,369,1:85,98,372,1:84,98,375,1:84,100,378,1:84,101,381,1:84,102,384,1:84,103,387,1:84,103,390,1:84,104,393,1:84,104,396,1:84,105,399,1:84,106,402,1:84,108,405,1:84,108,408,1:84,109,411,1:84,109,414,1:85,110,417,1:85,110,420,1:85,111,423,1:84,112,426,1:85,113,429,1:85,113,432,1:85,114,435,1:85,114,438,1:85,114,441,1:85,114,444,1:85,114,447,1:85,115,450,1:85,115,453,1:85,115,456,1:85,115,459,1:85,115,462,1:85,115,465,1:85,115,468,1:86,115,471,1:86,115,474,1:86,115,477,1:86,115,480,1:86,115,483,1:86,115,486,1:86,115,489,1:86,115,492,1:86,115,495,1:86,115,498,1:86,115,501,1:86,115,504,1:86,114,507,1:86,114,510,1:86,114,513,1:86,114,516,1:86,114,519,1:87,114,522,1:86,115,525,1:87,115,528,1:86,115,531,1:86,115,534,1:86,115,537,1:87,115,540,1:87,115,543,1:86,116,546,1:86,116,549,1:86,117,552,1:87,117,555,1:87,118,558,1:86,118,561,1:86,119,564,1:86,119,567,1:86,120,570,1:87,120,573,1:87,121,576,1:87,121,579,1:87,121,582,1:87,121,585,1:87,122,588,1:87,124,591,1:88,127,594,1:88,130,597,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_14
if not os.path.isdir(path_results + '/T1/errsm_14'):
    os.makedirs(path_results + '/T1/errsm_14')
os.chdir(path_results + '/T1/errsm_14')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_14/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 89,96,103,20:88,89,126,19:87,82,152,18:87,79,175,17:87,77,198,16:86,77,218,15:86,77,239,14:86,78,258,13:86,80,278,12:86,83,297,11:86,87,315,10:86,91,332,9:85,96,349,8:86,100,364,7:85,103,379,6:85,107,393,5:86,110,407,4:86,113,421,3:86,113,440,2:87,118,454,1:88,126,477,51:89,136,500,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  41 -end 514 ')
f_crop = open('crop.txt', 'w')
f_crop.write('41,514,80,415')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 91,99,0,1:91,99,3,1:91,99,6,1:91,99,9,1:91,99,12,1:91,98,15,1:91,97,18,1:91,97,21,1:89,96,24,1:90,95,27,1:90,95,30,1:90,94,33,1:90,92,36,1:90,92,39,1:90,91,42,1:90,90,45,1:90,90,48,1:89,89,51,1:90,87,54,1:90,86,57,1:89,86,60,1:89,86,63,1:88,84,66,1:88,84,69,1:88,84,72,1:88,83,75,1:88,83,78,1:88,81,81,1:88,81,84,1:88,80,87,1:88,79,90,1:88,78,93,1:87,78,96,1:87,77,99,1:87,76,102,1:88,77,105,1:87,75,108,1:87,74,111,1:87,74,114,1:87,74,117,1:87,73,120,1:87,73,123,1:87,73,126,1:87,73,129,1:87,73,132,1:87,73,135,1:87,72,138,1:87,72,141,1:87,72,144,1:87,72,147,1:87,72,150,1:87,71,153,1:87,71,156,1:87,71,159,1:87,72,162,1:87,71,165,1:87,71,168,1:87,71,171,1:86,71,174,1:86,71,177,1:86,71,180,1:86,71,183,1:86,71,186,1:86,71,189,1:86,71,192,1:86,71,195,1:86,71,198,1:86,72,201,1:85,72,204,1:86,72,207,1:86,72,210,1:86,72,213,1:86,72,216,1:86,73,219,1:86,73,222,1:86,73,225,1:85,74,228,1:85,74,231,1:86,74,234,1:86,75,237,1:85,75,240,1:86,75,243,1:86,76,246,1:86,76,249,1:86,76,252,1:86,77,255,1:86,77,258,1:86,78,261,1:86,79,264,1:86,80,267,1:86,80,270,1:86,80,273,1:85,81,276,1:86,81,279,1:86,82,282,1:86,83,285,1:85,84,288,1:85,84,291,1:85,85,294,1:85,86,297,1:85,87,300,1:85,88,303,1:85,88,306,1:86,89,309,1:86,90,312,1:86,90,315,1:85,91,318,1:85,92,321,1:85,93,324,1:85,94,327,1:85,94,330,1:86,95,333,1:86,96,336,1:86,97,339,1:86,98,342,1:86,98,345,1:86,99,348,1:86,100,351,1:86,100,354,1:86,101,357,1:86,101,360,1:86,102,363,1:85,102,366,1:85,103,369,1:85,104,372,1:85,104,375,1:85,105,378,1:85,105,381,1:85,106,384,1:86,106,387,1:86,107,390,1:86,107,393,1:86,107,396,1:86,108,399,1:86,108,402,1:86,109,405,1:87,110,408,1:87,110,411,1:87,112,414,1:87,113,417,1:87,113,420,1:87,113,423,1:88,112,426,1:88,113,429,1:88,115,432,1:88,116,435,1:89,117,438,1:89,118,441,1:89,119,444,1:89,120,447,1:89,121,450,1:89,123,453,1:89,124,456,1:90,125,459,1:89,126,462,1:90,128,465,1:90,130,468,1:90,133,471,1:90,134,473,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_16
if not os.path.isdir(path_results + '/T1/errsm_16'):
    os.makedirs(path_results + '/T1/errsm_16')
os.chdir(path_results + '/T1/errsm_16')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_16/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 91,73,179,20:88,66,206,19:85,61,232,18:82,58,255,17:80,56,278,16:79,57,301,15:80,58,323,14:80,61,344,13:81,65,364,12:82,70,385,11:84,76,403,10:85,84,423,9:85,90,440,8:85,93,456,7:86,96,473,6:86,99,489,5:86,103,506,4:87,108,524,3:87,106,540,2:88,109,559,1:88,116,582,51:87,124,605,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  114 -end 618 ')
f_crop = open('crop.txt', 'w')
f_crop.write('114,618,70,440')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 96,75,0,1:96,75,3,1:96,75,6,1:96,74,9,1:96,74,12,1:96,74,15,1:97,73,18,1:96,73,21,1:96,72,24,1:96,71,27,1:95,70,30,1:95,69,33,1:95,69,36,1:95,68,39,1:95,68,42,1:94,68,45,1:94,68,48,1:93,68,51,1:93,67,54,1:92,67,57,1:92,66,60,1:92,65,63,1:91,64,66,1:90,63,69,1:90,63,72,1:90,63,75,1:89,62,78,1:88,61,81,1:88,60,84,1:88,59,87,1:88,59,90,1:87,59,93,1:87,58,96,1:87,58,99,1:87,57,102,1:86,57,105,1:86,57,108,1:86,56,111,1:85,56,114,1:85,56,117,1:84,55,120,1:84,54,123,1:84,54,126,1:84,54,129,1:83,54,132,1:82,53,135,1:82,53,138,1:82,53,141,1:82,52,144,1:81,52,147,1:82,52,150,1:81,52,153,1:81,51,156,1:81,52,159,1:80,51,162,1:80,51,165,1:80,51,168,1:80,52,171,1:80,51,174,1:80,51,177,1:80,51,180,1:79,51,183,1:79,51,186,1:79,51,189,1:79,51,192,1:79,51,195,1:80,52,198,1:80,52,201,1:80,52,204,1:80,52,207,1:79,53,210,1:80,53,213,1:79,53,216,1:79,54,219,1:79,54,222,1:80,54,225,1:80,55,228,1:80,56,231,1:80,56,234,1:80,57,237,1:81,58,240,1:81,58,243,1:81,59,246,1:81,59,249,1:82,60,252,1:81,60,255,1:81,61,258,1:82,61,261,1:82,62,264,1:82,64,267,1:82,64,270,1:83,65,273,1:83,66,276,1:83,67,279,1:84,68,282,1:84,68,285,1:84,70,288,1:84,70,291,1:84,72,294,1:84,73,297,1:84,74,300,1:85,74,303,1:85,76,306,1:85,77,309,1:85,77,312,1:85,78,315,1:85,79,318,1:85,80,321,1:85,81,324,1:85,82,327,1:86,83,330,1:86,83,333,1:86,84,336,1:86,85,339,1:86,86,342,1:86,86,345,1:85,87,348,1:85,88,351,1:85,88,354,1:86,89,357,1:86,89,360,1:86,90,363,1:86,90,366,1:86,91,369,1:86,91,372,1:86,92,375,1:86,92,378,1:86,93,381,1:86,94,384,1:87,94,387,1:87,95,390,1:87,96,393,1:87,96,396,1:87,97,399,1:87,98,402,1:87,98,405,1:87,99,408,1:87,99,411,1:87,99,414,1:87,100,417,1:87,100,420,1:87,100,423,1:87,100,426,1:87,101,429,1:88,101,432,1:88,101,435,1:88,102,438,1:88,102,441,1:87,103,444,1:87,104,447,1:88,104,450,1:88,104,453,1:88,104,456,1:88,104,459,1:88,104,462,1:88,105,465,1:88,106,468,1:88,106,471,1:88,107,474,1:88,108,477,1:88,109,480,1:88,110,483,1:87,112,486,1:87,112,489,1:87,112,492,1:88,114,495,1:87,115,498,1:87,117,501,1:87,119,504,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_17
if not os.path.isdir(path_results + '/T1/errsm_17'):
    os.makedirs(path_results + '/T1/errsm_17')
os.chdir(path_results + '/T1/errsm_17')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_17/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 84,80,156,20:87,73,184,19:88,68,210,18:88,61,236,17:90,59,259,16:90,59,282,15:91,60,304,14:92,63,326,13:93,67,347,12:93,74,365,11:94,81,384,10:94,90,401,9:94,98,418,8:93,104,433,7:92,107,449,6:91,109,466,5:90,112,482,4:90,113,498,3:89,108,514,2:87,108,534,1:85,112,556,51:85,121,579,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 84 -end 593')
f_crop = open('crop.txt', 'w')
f_crop.write('84,593,100,445')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 84,86,0,1:84,85,3,1:84,84,6,1:84,83,9,1:84,82,12,1:83,82,15,1:83,82,18,1:83,80,21,1:83,80,24,1:83,79,27,1:83,78,30,1:83,77,33,1:83,76,36,1:82,74,39,1:83,74,42,1:82,73,45,1:83,74,48,1:83,73,51,1:82,72,54,1:83,72,57,1:84,71,60,1:84,71,63,1:85,70,66,1:85,70,69,1:86,70,72,1:86,69,75,1:86,68,78,1:86,68,81,1:86,67,84,1:87,67,87,1:87,66,90,1:87,65,93,1:87,65,96,1:87,65,99,1:87,64,102,1:87,63,105,1:87,63,108,1:87,62,111,1:87,62,114,1:87,61,117,1:88,61,120,1:88,60,123,1:88,60,126,1:88,59,129,1:88,59,132,1:88,58,135,1:88,58,138,1:89,58,141,1:89,57,144,1:89,57,147,1:89,56,150,1:89,56,153,1:90,55,156,1:90,55,159,1:90,56,162,1:89,55,165,1:89,55,168,1:90,54,171,1:90,54,174,1:90,54,177,1:90,54,180,1:90,54,183,1:90,54,186,1:90,54,189,1:90,54,192,1:91,54,195,1:91,54,198,1:91,54,201,1:91,54,204,1:91,54,207,1:91,54,210,1:91,55,213,1:91,55,216,1:91,55,219,1:91,56,222,1:92,56,225,1:92,56,228,1:92,57,231,1:92,57,234,1:92,57,237,1:92,58,240,1:92,59,243,1:93,59,246,1:93,60,249,1:93,60,252,1:93,61,255,1:93,62,258,1:93,62,261,1:93,63,264,1:94,64,267,1:94,65,270,1:94,66,273,1:94,67,276,1:94,68,279,1:94,69,282,1:94,70,285,1:94,71,288,1:94,72,291,1:94,74,294,1:94,75,297,1:94,76,300,1:94,77,303,1:94,79,306,1:94,79,309,1:95,81,312,1:95,82,315,1:94,83,318,1:95,85,321,1:95,86,324,1:94,87,327,1:94,88,330,1:94,89,333,1:94,90,336,1:94,91,339,1:94,93,342,1:94,94,345,1:94,95,348,1:94,96,351,1:94,96,354,1:94,96,357,1:93,98,360,1:93,98,363,1:93,99,366,1:93,100,369,1:93,100,372,1:92,101,375,1:92,101,378,1:92,101,381,1:92,102,384,1:92,102,387,1:92,103,390,1:92,103,393,1:91,103,396,1:91,103,399,1:91,103,402,1:90,103,405,1:90,103,408,1:90,103,411,1:90,103,414,1:89,103,417,1:89,103,420,1:89,103,423,1:89,103,426,1:88,103,429,1:89,103,432,1:88,102,435,1:88,103,438,1:88,102,441,1:88,102,444,1:88,102,447,1:87,102,450,1:87,102,453,1:87,102,456,1:87,102,459,1:87,102,462,1:87,101,465,1:86,102,468,1:86,102,471,1:86,103,474,1:86,104,477,1:86,105,480,1:85,106,483,1:85,108,486,1:85,109,489,1:85,110,492,1:85,111,495,1:85,112,498,1:84,114,501,1:84,115,504,1:84,118,507,1:84,119,509,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_18
if not os.path.isdir(path_results + '/T1/errsm_18'):
    os.makedirs(path_results + '/T1/errsm_18')
os.chdir(path_results + '/T1/errsm_18')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_18/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 86,82,88,20:86,76,120,19:86,72,151,18:86,71,178,17:85,69,204,16:85,67,230,15:85,67,255,14:85,68,279,13:85,74,302,12:85,79,325,11:86,87,345,10:85,95,365,9:84,102,385,8:83,106,402,7:83,109,419,6:82,114,436,5:83,118,454,4:85,123,473,3:86,121,496,2:86,126,512,1:85,132,531,51:85,135,555,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 16 -end 569')
f_crop = open('crop.txt', 'w')
f_crop.write('16,569,80,490')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 86,87,0,1:86,86,3,1:86,85,6,1:87,84,9,1:87,84,12,1:87,83,15,1:87,83,18,1:87,82,21,1:87,81,24,1:87,81,27,1:87,80,30,1:87,79,33,1:87,77,36,1:87,76,39,1:87,76,42,1:87,76,45,1:87,75,48,1:87,75,51,1:87,75,54,1:87,74,57,1:87,74,60,1:87,73,63,1:87,73,66,1:86,71,69,1:87,71,72,1:87,70,75,1:87,70,78,1:87,70,81,1:87,69,84,1:87,69,87,1:86,69,90,1:86,69,93,1:86,69,96,1:87,68,99,1:86,67,102,1:86,68,105,1:86,68,108,1:87,67,111,1:86,67,114,1:86,67,117,1:86,67,120,1:86,67,123,1:86,67,126,1:86,66,129,1:86,66,132,1:86,65,135,1:86,65,138,1:86,65,141,1:85,64,144,1:86,64,147,1:86,64,150,1:86,64,153,1:86,64,156,1:86,63,159,1:86,63,162,1:85,64,165,1:86,63,168,1:86,63,171,1:86,62,174,1:86,62,177,1:85,62,180,1:85,62,183,1:85,62,186,1:85,62,189,1:85,61,192,1:85,61,195,1:85,61,198,1:85,61,201,1:85,61,204,1:85,61,207,1:85,61,210,1:85,61,213,1:85,61,216,1:85,61,219,1:85,61,222,1:85,60,225,1:85,60,228,1:85,61,231,1:85,61,234,1:85,61,237,1:85,61,240,1:85,61,243,1:85,61,246,1:85,62,249,1:85,62,252,1:85,62,255,1:85,62,258,1:85,63,261,1:86,63,264,1:86,63,267,1:86,64,270,1:85,64,273,1:86,65,276,1:86,66,279,1:86,66,282,1:86,67,285,1:86,68,288,1:86,69,291,1:86,69,294,1:86,70,297,1:86,71,300,1:86,72,303,1:86,72,306,1:86,73,309,1:86,74,312,1:86,75,315,1:85,76,318,1:86,77,321,1:86,78,324,1:86,79,327,1:86,80,330,1:86,80,333,1:85,81,336,1:86,82,339,1:86,84,342,1:85,84,345,1:85,86,348,1:85,86,351,1:85,88,354,1:85,89,357,1:85,90,360,1:85,91,363,1:84,91,366,1:84,92,369,1:84,93,372,1:84,94,375,1:84,95,378,1:84,96,381,1:84,97,384,1:83,98,387,1:83,98,390,1:83,99,393,1:83,100,396,1:83,101,399,1:83,102,402,1:83,102,405,1:83,102,408,1:83,103,411,1:83,104,414,1:83,104,417,1:83,105,420,1:83,105,423,1:83,106,426,1:83,107,429,1:83,108,432,1:83,108,435,1:83,108,438,1:84,109,441,1:84,110,444,1:84,110,447,1:84,111,450,1:85,111,453,1:85,111,456,1:85,112,459,1:85,113,462,1:85,113,465,1:85,114,468,1:85,115,471,1:85,115,474,1:85,115,477,1:85,116,480,1:86,116,483,1:86,117,486,1:86,118,489,1:86,119,492,1:86,119,495,1:86,120,498,1:86,120,501,1:86,120,504,1:86,119,507,1:85,120,510,1:85,121,513,1:85,121,516,1:85,122,519,1:85,123,522,1:85,123,525,1:85,124,528,1:85,124,531,1:85,123,534,1:85,123,537,1:86,123,540,1:85,124,543,1:85,125,546,1:85,128,549,1:85,131,552,1:85,132,553,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_21
if not os.path.isdir(path_results + '/T1/errsm_21'):
    os.makedirs(path_results + '/T1/errsm_21')
os.chdir(path_results + '/T1/errsm_21')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_21/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 83,64,120,20:82,60,152,19:82,57,180,18:81,57,207,17:81,57,233,16:80,59,258,15:81,61,284,14:81,65,307,13:81,73,328,12:81,82,349,11:81,91,367,10:84,103,385,9:86,115,403,8:88,121,419,7:88,122,435,6:89,120,452,5:89,118,470,4:89,117,490,3:88,112,506,2:88,112,524,1:85,114,549,51:85,116,575,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 46 -end 589')
f_crop = open('crop.txt', 'w')
f_crop.write('46,589,80,475')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 84,67,0,1:84,66,3,1:84,65,6,1:84,65,9,1:84,64,12,1:84,63,15,1:85,63,18,1:85,63,21,1:85,62,24,1:85,61,27,1:85,61,30,1:84,60,33,1:84,59,36,1:84,59,39,1:84,59,42,1:84,58,45,1:84,58,48,1:83,57,51,1:83,57,54,1:83,57,57,1:83,56,60,1:83,56,63,1:83,56,66,1:83,55,69,1:83,55,72,1:83,55,75,1:83,54,78,1:83,54,81,1:83,54,84,1:83,54,87,1:83,53,90,1:83,53,93,1:83,53,96,1:83,53,99,1:83,52,102,1:83,52,105,1:82,52,108,1:82,52,111,1:82,52,114,1:82,52,117,1:82,51,120,1:82,51,123,1:82,51,126,1:83,51,129,1:82,51,132,1:82,51,135,1:82,51,138,1:82,50,141,1:82,50,144,1:82,50,147,1:82,50,150,1:82,50,153,1:82,50,156,1:82,50,159,1:82,50,162,1:82,50,165,1:81,50,168,1:81,50,171,1:81,50,174,1:81,50,177,1:81,50,180,1:81,50,183,1:81,50,186,1:81,51,189,1:81,51,192,1:81,51,195,1:82,51,198,1:81,51,201,1:81,51,204,1:81,52,207,1:81,52,210,1:80,52,213,1:80,52,216,1:81,53,219,1:81,53,222,1:81,53,225,1:81,54,228,1:81,54,231,1:81,54,234,1:81,54,237,1:81,55,240,1:81,56,243,1:81,56,246,1:80,58,249,1:80,58,252,1:80,59,255,1:80,59,258,1:81,60,261,1:81,61,264,1:81,62,267,1:81,63,270,1:81,64,273,1:81,64,276,1:81,66,279,1:81,67,282,1:81,68,285,1:81,69,288,1:81,70,291,1:82,72,294,1:82,72,297,1:81,74,300,1:82,75,303,1:82,77,306,1:82,77,309,1:82,79,312,1:82,80,315,1:82,82,318,1:82,83,321,1:83,85,324,1:83,87,327,1:83,89,330,1:83,90,333,1:83,91,336,1:84,93,339,1:84,95,342,1:84,97,345,1:84,98,348,1:85,100,351,1:85,102,354,1:86,103,357,1:86,105,360,1:86,106,363,1:86,108,366,1:87,109,369,1:87,110,372,1:87,110,375,1:87,111,378,1:87,111,381,1:87,111,384,1:88,112,387,1:88,112,390,1:88,112,393,1:88,112,396,1:88,112,399,1:88,112,402,1:88,112,405,1:88,111,408,1:89,111,411,1:89,110,414,1:88,110,417,1:88,110,420,1:88,110,423,1:88,109,426,1:89,109,429,1:89,109,432,1:89,108,435,1:89,108,438,1:88,108,441,1:88,108,444,1:88,108,447,1:88,107,450,1:89,107,453,1:89,107,456,1:89,107,459,1:89,107,462,1:88,106,465,1:88,106,468,1:88,106,471,1:88,106,474,1:88,106,477,1:88,107,480,1:87,107,483,1:87,106,486,1:87,106,489,1:87,105,492,1:87,105,495,1:86,105,498,1:86,105,501,1:86,105,504,1:86,105,507,1:86,105,510,1:86,105,513,1:86,105,516,1:85,105,519,1:85,105,522,1:85,105,525,1:85,105,528,1:85,106,531,1:84,106,534,1:85,107,537,1:85,109,540,1:85,112,543,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')

"""
# Preprocessing for subject errsm_22 - removed because of artefacts
if not os.path.isdir(path_results + '/T1/errsm_22'):
    os.makedirs(path_results + '/T1/errsm_22')
os.chdir(path_results + '/T1/errsm_22')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_22/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 84,61,140,20:85,59,172,19:85,59,198,18:85,56,224,17:84,55,247,16:84,54,269,15:84,55,292,14:84,57,313,13:84,61,334,12:84,67,354,11:85,75,373,10:86,84,390,9:87,90,406,8:86,92,423,7:87,91,440,6:86,91,457,5:86,94,474,4:84,97,493,3:86,101,546,2:86,111,569,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 65 -end 582')
f_crop = open('crop.txt', 'w')
f_crop.write('65,582,0,460')
f_crop.close()
#sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x ')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
#os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')
"""

# Preprocessing for subject errsm_23
if not os.path.isdir(path_results + '/T1/errsm_23'):
    os.makedirs(path_results + '/T1/errsm_23')
os.chdir(path_results + '/T1/errsm_23')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_23/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 79,82,135,20:80,80,165,19:80,77,191,18:81,76,216,17:82,75,239,16:83,74,262,15:84,75,285,14:85,77,307,13:85,80,327,12:85,84,346,11:85,89,365,10:83,94,384,9:83,98,401,8:82,99,418,7:83,98,435,6:83,99,451,5:84,102,469,4:84,107,485,3:83,104,500,2:84,107,519,1:84,112,541,51:86,122,562,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 60 -end 580')
f_crop = open('crop.txt', 'w')
f_crop.write('60,580,90,455')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 78,80,0,1:78,79,3,1:78,79,6,1:79,79,9,1:78,79,12,1:78,79,15,1:78,78,18,1:78,77,21,1:78,77,24,1:78,77,27,1:78,76,30,1:78,76,33,1:79,75,36,1:79,73,39,1:78,73,42,1:78,72,45,1:78,72,48,1:78,72,51,1:79,74,54,1:79,73,57,1:79,73,60,1:79,73,63,1:79,73,66,1:79,73,69,1:79,73,72,1:79,73,75,1:79,73,78,1:79,73,81,1:79,73,84,1:79,73,87,1:80,72,90,1:80,72,93,1:80,72,96,1:80,72,99,1:80,71,102,1:80,71,105,1:80,71,108,1:80,71,111,1:80,71,114,1:80,71,117,1:80,71,120,1:81,71,123,1:81,70,126,1:81,70,129,1:81,70,132,1:81,70,135,1:81,70,138,1:81,70,141,1:81,70,144,1:81,70,147,1:81,69,150,1:81,69,153,1:81,69,156,1:81,69,159,1:81,69,162,1:81,69,165,1:82,69,168,1:82,69,171,1:82,69,174,1:82,69,177,1:82,69,180,1:82,69,183,1:82,69,186,1:82,69,189,1:83,68,192,1:83,68,195,1:83,68,198,1:83,68,201,1:83,68,204,1:83,68,207,1:83,68,210,1:84,69,213,1:84,69,216,1:84,69,219,1:84,69,222,1:84,69,225,1:84,69,228,1:84,69,231,1:84,70,234,1:84,70,237,1:84,71,240,1:84,71,243,1:85,71,246,1:85,72,249,1:85,72,252,1:85,72,255,1:85,73,258,1:84,74,261,1:85,74,264,1:85,74,267,1:85,75,270,1:85,76,273,1:85,77,276,1:85,77,279,1:85,77,282,1:85,77,285,1:85,78,288,1:85,79,291,1:85,79,294,1:85,80,297,1:84,81,300,1:84,81,303,1:84,82,306,1:84,83,309,1:84,83,312,1:84,84,315,1:83,84,318,1:84,85,321,1:83,85,324,1:84,86,327,1:83,87,330,1:83,87,333,1:83,87,336,1:82,88,339,1:83,88,342,1:83,89,345,1:83,89,348,1:83,89,351,1:83,90,354,1:83,90,357,1:82,91,360,1:83,91,363,1:83,91,366,1:83,91,369,1:83,92,372,1:83,92,375,1:84,92,378,1:84,92,381,1:83,92,384,1:83,92,387,1:84,92,390,1:84,93,393,1:83,94,396,1:83,95,399,1:83,95,402,1:84,95,405,1:84,95,408,1:84,95,411,1:84,96,414,1:84,97,417,1:84,97,420,1:84,98,423,1:84,98,426,1:84,98,429,1:84,98,432,1:84,99,435,1:84,99,438,1:84,99,441,1:84,99,444,1:84,99,447,1:84,100,450,1:84,100,453,1:84,101,456,1:84,101,459,1:84,102,462,1:84,103,465,1:84,103,468,1:84,103,471,1:84,102,474,1:84,103,477,1:83,104,480,1:83,104,483,1:84,106,486,1:84,106,489,1:84,107,492,1:84,109,495,1:85,111,498,1:85,112,501,1:85,112,504,1:85,114,507,1:85,115,510,1:86,116,513,1:86,119,516,1:86,121,519,1:86,122,520,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_24
if not os.path.isdir(path_results + '/T1/errsm_24'):
    os.makedirs(path_results + '/T1/errsm_24')
os.chdir(path_results + '/T1/errsm_24')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_24/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 75,72,106,20:75,72,138,19:75,68,167,18:76,66,195,17:77,63,222,16:77,63,249,15:78,65,275,14:79,69,300,13:81,76,324,12:82,86,346,11:83,97,367,10:84,111,384,9:85,123,399,8:85,128,416,7:85,128,432,6:85,128,449,5:84,127,466,4:86,130,483,3:86,124,499,2:87,126,519,1:87,130,541,51:89,135,564,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 26 -end 579')
f_crop = open('crop.txt', 'w')
f_crop.write('26,579,85,490')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 77,71,0,1:77,70,3,1:76,69,6,1:75,69,9,1:76,69,12,1:76,68,15,1:76,68,18,1:76,68,21,1:76,67,24,1:76,67,27,1:76,66,30,1:76,66,33,1:76,65,36,1:76,64,39,1:76,64,42,1:75,64,45,1:75,63,48,1:75,62,51,1:75,63,54,1:75,63,57,1:75,63,60,1:75,63,63,1:75,64,66,1:75,64,69,1:75,63,72,1:75,63,75,1:75,63,78,1:75,63,81,1:75,63,84,1:75,63,87,1:75,63,90,1:75,62,93,1:75,62,96,1:75,62,99,1:75,61,102,1:75,61,105,1:75,61,108,1:75,62,111,1:75,61,114,1:75,61,117,1:75,61,120,1:75,61,123,1:75,61,126,1:75,61,129,1:75,61,132,1:75,60,135,1:75,60,138,1:75,60,141,1:75,60,144,1:75,59,147,1:76,59,150,1:76,59,153,1:76,59,156,1:76,59,159,1:76,59,162,1:76,59,165,1:76,59,168,1:76,59,171,1:77,58,174,1:77,58,177,1:77,58,180,1:77,58,183,1:77,58,186,1:77,58,189,1:77,57,192,1:77,57,195,1:77,57,198,1:77,57,201,1:78,57,204,1:78,57,207,1:78,57,210,1:78,57,213,1:78,57,216,1:78,57,219,1:78,57,222,1:78,57,225,1:78,58,228,1:78,58,231,1:79,58,234,1:79,58,237,1:79,59,240,1:79,59,243,1:79,59,246,1:79,59,249,1:79,60,252,1:79,60,255,1:79,61,258,1:79,62,261,1:79,62,264,1:79,63,267,1:79,63,270,1:79,64,273,1:79,65,276,1:80,66,279,1:80,67,282,1:80,67,285,1:80,68,288,1:81,69,291,1:81,70,294,1:81,71,297,1:81,72,300,1:81,73,303,1:81,74,306,1:82,75,309,1:82,77,312,1:82,77,315,1:82,78,318,1:82,80,321,1:82,82,324,1:82,83,327,1:83,84,330,1:83,86,333,1:83,88,336,1:84,90,339,1:83,92,342,1:84,94,345,1:84,95,348,1:84,97,351,1:84,99,354,1:84,101,357,1:84,103,360,1:85,105,363,1:85,107,366,1:85,108,369,1:85,110,372,1:85,112,375,1:85,114,378,1:85,114,381,1:85,116,384,1:85,117,387,1:85,118,390,1:85,119,393,1:85,119,396,1:85,119,399,1:85,119,402,1:86,120,405,1:85,120,408,1:85,120,411,1:85,120,414,1:85,120,417,1:85,120,420,1:85,121,423,1:85,120,426,1:85,120,429,1:85,120,432,1:85,120,435,1:85,120,438,1:85,120,441,1:85,120,444,1:85,120,447,1:85,120,450,1:85,120,453,1:85,120,456,1:86,120,459,1:86,120,462,1:86,120,465,1:86,120,468,1:87,120,471,1:86,119,474,1:87,119,477,1:87,119,480,1:87,119,483,1:87,119,486,1:87,119,489,1:87,119,492,1:87,119,495,1:87,119,498,1:87,118,501,1:87,118,504,1:88,118,507,1:88,120,510,1:88,120,513,1:88,121,516,1:88,122,519,1:89,122,522,1:88,122,525,1:88,122,528,1:89,123,531,1:89,123,534,1:89,124,537,1:89,123,540,1:89,123,543,1:89,124,546,1:89,126,549,1:89,129,552,1:89,131,553,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_25
if not os.path.isdir(path_results + '/T1/errsm_25'):
    os.makedirs(path_results + '/T1/errsm_25')
os.chdir(path_results + '/T1/errsm_25')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_25/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 89,70,174,20:88,67,204,19:85,63,232,18:85,61,256,17:84,61,280,16:85,61,302,15:85,63,324,14:85,66,346,13:86,72,366,12:86,77,384,11:86,83,402,10:86,92,420,9:86,101,438,8:86,107,454,7:86,112,469,6:85,117,484,5:85,121,500,4:85,126,518,3:86,124,538,2:87,129,557,1:87,137,577,51:89,150,601,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 105 -end 614')
f_crop = open('crop.txt', 'w')
f_crop.write('105,614,80,450')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 91,76,0,1:91,75,3,1:91,74,6,1:91,73,9,1:91,72,12,1:91,72,15,1:90,72,18,1:91,70,21,1:91,70,24,1:90,70,27,1:91,69,30,1:90,68,33,1:90,67,36,1:90,66,39,1:90,65,42,1:90,64,45,1:90,62,48,1:90,62,51,1:90,61,54,1:90,62,57,1:90,62,60,1:89,61,63,1:89,61,66,1:89,60,69,1:89,60,72,1:88,60,75,1:88,59,78,1:88,59,81,1:88,59,84,1:88,58,87,1:88,58,90,1:87,57,93,1:87,57,96,1:87,56,99,1:87,56,102,1:87,56,105,1:87,56,108,1:86,56,111,1:86,56,114,1:86,55,117,1:86,55,120,1:86,55,123,1:85,55,126,1:85,55,129,1:85,55,132,1:85,54,135,1:85,54,138,1:85,54,141,1:84,54,144,1:84,54,147,1:84,54,150,1:84,54,153,1:84,54,156,1:84,53,159,1:84,53,162,1:84,53,165,1:84,53,168,1:84,53,171,1:84,53,174,1:84,54,177,1:84,54,180,1:84,53,183,1:84,54,186,1:84,54,189,1:84,54,192,1:84,54,195,1:84,54,198,1:85,55,201,1:85,55,204,1:85,55,207,1:85,55,210,1:85,56,213,1:85,56,216,1:85,56,219,1:85,57,222,1:85,57,225,1:85,58,228,1:86,58,231,1:86,59,234,1:86,59,237,1:86,61,240,1:86,61,243,1:86,61,246,1:86,62,249,1:86,63,252,1:86,63,255,1:86,64,258,1:86,65,261,1:86,66,264,1:86,66,267,1:86,67,270,1:86,68,273,1:86,69,276,1:86,70,279,1:86,71,282,1:86,72,285,1:86,73,288,1:86,74,291,1:86,76,294,1:86,77,297,1:86,78,300,1:86,79,303,1:87,80,306,1:86,82,309,1:86,83,312,1:86,85,315,1:86,87,318,1:86,88,321,1:86,89,324,1:86,91,327,1:86,92,330,1:86,93,333,1:86,95,336,1:86,96,339,1:86,97,342,1:86,98,345,1:86,99,348,1:86,100,351,1:86,101,354,1:85,101,357,1:85,102,360,1:85,103,363,1:85,104,366,1:85,105,369,1:85,106,372,1:85,107,375,1:85,108,378,1:85,109,381,1:85,110,384,1:85,111,387,1:85,112,390,1:85,113,393,1:85,114,396,1:85,114,399,1:85,115,402,1:85,115,405,1:85,116,408,1:85,116,411,1:85,117,414,1:85,117,417,1:86,117,420,1:86,118,423,1:86,118,426,1:86,118,429,1:86,119,432,1:86,120,435,1:86,120,438,1:86,120,441,1:86,121,444,1:86,121,447,1:86,122,450,1:87,123,453,1:87,123,456,1:87,123,459,1:87,122,462,1:87,122,465,1:87,123,468,1:87,125,471,1:87,126,474,1:87,127,477,1:87,128,480,1:87,130,483,1:87,132,486,1:87,133,489,1:87,134,492,1:88,135,495,1:88,136,498,1:88,140,501,1:88,141,504,1:88,144,507,1:89,146,509,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_30
if not os.path.isdir(path_results + '/T1/errsm_30'):
    os.makedirs(path_results + '/T1/errsm_30')
os.chdir(path_results + '/T1/errsm_30')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_30/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 74,73,114,20:76,66,144,19:76,61,173,18:76,58,199,17:76,56,224,16:76,55,247,15:77,57,271,14:78,60,294,13:81,67,317,12:82,75,337,11:84,83,357,10:85,97,374,9:86,108,391,8:87,114,407,7:87,118,422,6:88,121,437,5:88,121,455,4:87,123,475,3:86,119,491,2:84,118,512,1:84,121,535,51:84,124,560,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 36 -end 575')
f_crop = open('crop.txt', 'w')
f_crop.write('36,575,70,470')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 73,75,0,1:73,75,3,1:73,74,6,1:73,73,9,1:73,73,12,1:73,72,15,1:73,71,18,1:73,71,21,1:73,70,24,1:73,70,27,1:74,70,30,1:73,69,33,1:73,68,36,1:74,68,39,1:74,67,42,1:74,67,45,1:74,67,48,1:74,67,51,1:75,66,54,1:75,66,57,1:75,66,60,1:74,65,63,1:74,65,66,1:74,64,69,1:74,64,72,1:75,64,75,1:75,63,78,1:75,63,81,1:75,62,84,1:75,62,87,1:76,61,90,1:76,61,93,1:76,61,96,1:76,60,99,1:76,59,102,1:76,59,105,1:76,59,108,1:76,57,111,1:76,57,114,1:76,57,117,1:76,57,120,1:76,56,123,1:76,55,126,1:76,55,129,1:76,55,132,1:76,54,135,1:76,54,138,1:76,54,141,1:76,53,144,1:76,53,147,1:75,52,150,1:76,52,153,1:76,52,156,1:76,51,159,1:76,51,162,1:76,51,165,1:76,51,168,1:76,50,171,1:76,50,174,1:76,50,177,1:76,50,180,1:76,50,183,1:76,49,186,1:76,49,189,1:76,49,192,1:76,49,195,1:76,49,198,1:76,49,201,1:76,49,204,1:76,49,207,1:77,50,210,1:77,50,213,1:77,50,216,1:77,50,219,1:77,50,222,1:77,50,225,1:77,50,228,1:77,50,231,1:77,50,234,1:77,51,237,1:78,52,240,1:78,52,243,1:78,52,246,1:78,53,249,1:78,54,252,1:78,54,255,1:79,55,258,1:79,55,261,1:79,56,264,1:79,57,267,1:80,58,270,1:80,59,273,1:80,60,276,1:80,61,279,1:80,62,282,1:81,63,285,1:81,64,288,1:82,65,291,1:82,66,294,1:82,68,297,1:83,68,300,1:83,70,303,1:83,71,306,1:83,72,309,1:84,73,312,1:84,75,315,1:84,76,318,1:84,78,321,1:85,80,324,1:85,81,327,1:85,83,330,1:85,85,333,1:85,86,336,1:85,88,339,1:86,90,342,1:86,92,345,1:86,94,348,1:86,95,351,1:86,97,354,1:86,99,357,1:86,101,360,1:86,102,363,1:86,103,366,1:87,105,369,1:87,106,372,1:87,107,375,1:87,108,378,1:87,109,381,1:87,110,384,1:87,110,387,1:87,111,390,1:87,111,393,1:87,112,396,1:88,112,399,1:88,113,402,1:88,113,405,1:88,113,408,1:88,113,411,1:88,113,414,1:88,113,417,1:88,113,420,1:88,113,423,1:88,113,426,1:87,113,429,1:87,113,432,1:87,113,435,1:87,113,438,1:87,113,441,1:86,113,444,1:86,113,447,1:86,113,450,1:86,113,453,1:86,113,456,1:86,113,459,1:85,112,462,1:85,112,465,1:85,112,468,1:85,112,471,1:84,112,474,1:84,113,477,1:84,113,480,1:84,113,483,1:84,113,486,1:84,111,489,1:84,111,492,1:83,111,495,1:83,111,498,1:83,111,501,1:83,111,504,1:83,112,507,1:84,112,510,1:84,113,513,1:84,113,516,1:84,113,519,1:84,114,522,1:83,114,525,1:83,114,528,1:83,115,531,1:83,117,534,1:83,119,537,1:83,122,539,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_31
if not os.path.isdir(path_results + '/T1/errsm_31'):
    os.makedirs(path_results + '/T1/errsm_31')
os.chdir(path_results + '/T1/errsm_31')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_31/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 97,82,90,20:95,78,123,19:94,74,154,18:91,70,186,17:90,66,214,16:88,64,241,15:88,65,268,14:87,69,295,13:87,73,320,12:87,79,343,11:87,88,365,10:86,95,388,9:86,102,409,8:86,106,429,7:86,111,448,6:87,113,467,5:90,115,486,4:89,116,505,3:86,106,526,2:84,107,545,1:85,107,568,51:85,114,591,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  14 -end 607 ')
f_crop = open('crop.txt', 'w')
f_crop.write('14,607,110,525')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 100,76,0,1:100,75,3,1:100,75,6,1:100,75,9,1:100,75,12,1:100,75,15,1:99,75,18,1:99,75,21,1:100,75,24,1:99,74,27,1:99,74,30,1:99,73,33,1:98,73,36,1:98,72,39,1:99,72,42,1:99,71,45,1:98,71,48,1:98,71,51,1:98,71,54,1:98,71,57,1:98,70,60,1:98,70,63,1:98,69,66,1:98,68,69,1:98,67,72,1:98,67,75,1:97,67,78,1:97,67,81,1:97,67,84,1:97,67,87,1:97,67,90,1:97,67,93,1:96,67,96,1:96,67,99,1:95,67,102,1:95,66,105,1:95,66,108,1:95,66,111,1:95,66,114,1:95,66,117,1:95,65,120,1:95,65,123,1:94,65,126,1:94,65,129,1:94,64,132,1:94,64,135,1:94,64,138,1:94,64,141,1:94,64,144,1:94,64,147,1:94,64,150,1:93,63,153,1:93,62,156,1:92,62,159,1:92,62,162,1:92,62,165,1:92,61,168,1:92,61,171,1:91,60,174,1:91,60,177,1:91,60,180,1:91,60,183,1:91,60,186,1:91,60,189,1:90,60,192,1:90,59,195,1:90,59,198,1:90,59,201,1:90,58,204,1:89,58,207,1:89,58,210,1:90,58,213,1:89,58,216,1:89,58,219,1:89,58,222,1:89,58,225,1:89,58,228,1:88,58,231,1:88,58,234,1:88,58,237,1:88,58,240,1:88,58,243,1:88,59,246,1:88,59,249,1:88,59,252,1:88,59,255,1:88,60,258,1:88,60,261,1:88,60,264,1:88,60,267,1:88,61,270,1:88,61,273,1:88,62,276,1:88,62,279,1:88,63,282,1:87,63,285,1:87,63,288,1:87,64,291,1:87,65,294,1:87,65,297,1:87,66,300,1:87,67,303,1:87,68,306,1:87,68,309,1:87,69,312,1:87,69,315,1:87,70,318,1:87,71,321,1:87,72,324,1:86,72,327,1:86,73,330,1:86,74,333,1:86,75,336,1:86,76,339,1:86,77,342,1:86,78,345,1:86,79,348,1:86,79,351,1:86,80,354,1:86,81,357,1:86,82,360,1:86,83,363,1:86,83,366,1:86,84,369,1:86,85,372,1:86,85,375,1:86,87,378,1:86,88,381,1:86,89,384,1:86,89,387,1:86,91,390,1:86,92,393,1:86,92,396,1:86,92,399,1:86,93,402,1:86,94,405,1:86,95,408,1:86,96,411,1:86,96,414,1:86,97,417,1:86,98,420,1:86,99,423,1:86,100,426,1:86,101,429,1:86,101,432,1:86,101,435,1:86,102,438,1:87,103,441,1:87,104,444,1:87,104,447,1:87,104,450,1:87,104,453,1:87,104,456,1:87,104,459,1:87,105,462,1:87,105,465,1:87,105,468,1:87,105,471,1:87,105,474,1:87,105,477,1:87,105,480,1:86,104,483,1:86,104,486,1:87,104,489,1:87,104,492,1:87,103,495,1:87,103,498,1:86,102,501,1:86,102,504,1:86,102,507,1:86,102,510,1:86,101,513,1:86,101,516,1:86,101,519,1:85,101,522,1:85,101,525,1:85,101,528,1:85,101,531,1:84,101,534,1:84,101,537,1:84,101,540,1:84,101,543,1:84,98,546,1:84,99,549,1:84,99,552,1:83,99,555,1:83,99,558,1:83,99,561,1:83,100,564,1:84,100,567,1:84,102,570,1:83,103,573,1:83,102,576,1:83,103,579,1:83,103,582,1:83,105,585,1:83,108,588,1:84,111,591,1:84,112,593,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_32
if not os.path.isdir(path_results + '/T1/errsm_32'):
    os.makedirs(path_results + '/T1/errsm_32')
os.chdir(path_results + '/T1/errsm_32')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_32/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 78,64,80,20:80,61,113,19:81,59,143,18:82,58,170,17:84,57,196,16:84,56,221,15:86,58,245,14:87,62,269,13:87,67,292,12:89,76,312,11:89,85,332,10:89,97,351,9:89,106,369,8:89,110,386,7:89,109,402,6:89,108,418,5:89,108,436,4:88,107,456,3:88,101,472,2:88,100,492,1:87,102,517,51:86,107,544,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 7 -end 559')
f_crop = open('crop.txt', 'w')
f_crop.write('7,559,70,480')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 76,63,0,1:75,62,3,1:76,62,6,1:76,61,9,1:76,61,12,1:76,61,15,1:76,60,18,1:76,60,21,1:76,59,24,1:77,59,27,1:77,59,30,1:77,59,33,1:77,59,36,1:77,58,39,1:77,58,42,1:77,58,45,1:77,57,48,1:77,57,51,1:77,57,54,1:77,57,57,1:78,56,60,1:78,56,63,1:78,55,66,1:78,55,69,1:78,55,72,1:78,55,75,1:79,55,78,1:79,55,81,1:79,55,84,1:79,55,87,1:79,54,90,1:79,54,93,1:79,54,96,1:80,54,99,1:80,53,102,1:80,53,105,1:80,53,108,1:80,53,111,1:81,53,114,1:81,53,117,1:81,52,120,1:81,52,123,1:81,52,126,1:81,52,129,1:81,52,132,1:81,52,135,1:82,52,138,1:82,51,141,1:82,51,144,1:83,51,147,1:83,51,150,1:83,51,153,1:83,51,156,1:83,51,159,1:83,51,162,1:84,51,165,1:84,51,168,1:84,51,171,1:84,51,174,1:84,50,177,1:84,50,180,1:84,50,183,1:84,50,186,1:84,50,189,1:84,50,192,1:83,51,195,1:84,50,198,1:84,50,201,1:84,50,204,1:85,50,207,1:85,50,210,1:85,50,213,1:85,50,216,1:85,50,219,1:86,50,222,1:86,51,225,1:86,51,228,1:86,51,231,1:86,52,234,1:86,52,237,1:86,52,240,1:86,52,243,1:86,53,246,1:86,53,249,1:86,54,252,1:86,55,255,1:87,55,258,1:87,56,261,1:87,56,264,1:87,57,267,1:87,58,270,1:87,59,273,1:87,59,276,1:88,60,279,1:88,61,282,1:88,62,285,1:88,63,288,1:88,64,291,1:88,64,294,1:88,66,297,1:89,67,300,1:88,68,303,1:89,70,306,1:89,71,309,1:89,72,312,1:89,73,315,1:89,75,318,1:89,76,321,1:89,77,324,1:89,79,327,1:89,80,330,1:89,81,333,1:89,83,336,1:89,83,339,1:89,85,342,1:89,86,345,1:89,88,348,1:89,89,351,1:89,91,354,1:89,92,357,1:88,93,360,1:88,94,363,1:88,95,366,1:88,96,369,1:88,97,372,1:88,98,375,1:88,99,378,1:88,99,381,1:88,100,384,1:88,100,387,1:88,100,390,1:88,100,393,1:88,100,396,1:88,100,399,1:88,99,402,1:88,99,405,1:88,99,408,1:88,99,411,1:88,99,414,1:88,99,417,1:88,99,420,1:88,100,423,1:88,99,426,1:88,99,429,1:88,99,432,1:88,99,435,1:88,98,438,1:88,98,441,1:88,98,444,1:88,98,447,1:88,98,450,1:88,97,453,1:88,97,456,1:88,96,459,1:88,96,462,1:88,95,465,1:88,95,468,1:88,95,471,1:88,95,474,1:88,95,477,1:88,94,480,1:88,94,483,1:88,94,486,1:88,94,489,1:88,94,492,1:88,93,495,1:87,93,498,1:87,93,501,1:87,93,504,1:87,93,507,1:87,93,510,1:87,93,513,1:87,93,516,1:86,94,519,1:86,94,522,1:86,94,525,1:86,95,528,1:86,95,531,1:86,95,534,1:86,96,537,1:86,97,540,1:86,98,543,1:86,100,546,1:86,103,549,1:86,105,552,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_33
if not os.path.isdir(path_results + '/T1/errsm_33'):
    os.makedirs(path_results + '/T1/errsm_33')
os.chdir(path_results + '/T1/errsm_33')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_33/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 85,75,66,20:84,70,98,19:85,68,131,18:85,69,160,17:86,69,187,16:86,69,212,15:87,72,238,14:87,74,264,13:88,81,287,12:89,90,309,11:90,101,329,10:90,114,348,9:90,124,364,8:91,129,382,7:90,133,397,6:90,133,414,5:90,133,431,4:90,133,448,3:89,124,463,2:89,125,485,1:90,127,509,51:89,135,532,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 26 -end 549')
f_crop = open('crop.txt', 'w')
f_crop.write('26,549,100,450')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 84,69,0,1:84,68,3,1:84,67,6,1:84,67,9,1:84,66,12,1:84,66,15,1:84,66,18,1:84,66,21,1:84,65,24,1:84,65,27,1:84,64,30,1:84,63,33,1:84,62,36,1:84,63,39,1:84,62,42,1:84,62,45,1:84,62,48,1:84,62,51,1:84,61,54,1:84,61,57,1:84,61,60,1:84,61,63,1:84,61,66,1:85,61,69,1:85,61,72,1:85,61,75,1:85,61,78,1:85,61,81,1:85,61,84,1:85,60,87,1:85,60,90,1:85,60,93,1:85,60,96,1:85,60,99,1:85,60,102,1:85,60,105,1:84,60,108,1:85,60,111,1:85,60,114,1:85,61,117,1:85,61,120,1:85,61,123,1:85,61,126,1:85,61,129,1:85,62,132,1:85,62,135,1:86,62,138,1:86,62,141,1:86,62,144,1:86,62,147,1:86,62,150,1:86,62,153,1:86,62,156,1:86,62,159,1:86,62,162,1:86,62,165,1:86,62,168,1:86,62,171,1:86,62,174,1:86,62,177,1:87,63,180,1:87,63,183,1:87,63,186,1:87,63,189,1:87,63,192,1:87,63,195,1:87,63,198,1:87,63,201,1:87,63,204,1:87,63,207,1:87,65,210,1:87,65,213,1:87,65,216,1:87,66,219,1:87,67,222,1:87,67,225,1:87,68,228,1:87,68,231,1:87,69,234,1:87,69,237,1:87,70,240,1:87,71,243,1:87,72,246,1:88,72,249,1:88,73,252,1:88,74,255,1:88,75,258,1:88,76,261,1:89,77,264,1:89,78,267,1:89,79,270,1:89,80,273,1:89,81,276,1:89,83,279,1:90,84,282,1:90,85,285,1:90,87,288,1:90,88,291,1:90,89,294,1:90,91,297,1:90,93,300,1:90,94,303,1:90,96,306,1:90,97,309,1:90,99,312,1:90,99,315,1:91,102,318,1:91,103,321,1:91,104,324,1:91,106,327,1:91,107,330,1:91,109,333,1:91,110,336,1:91,111,339,1:91,113,342,1:91,114,345,1:91,115,348,1:91,117,351,1:91,118,354,1:91,119,357,1:91,119,360,1:91,121,363,1:91,121,366,1:91,121,369,1:91,121,372,1:91,121,375,1:91,122,378,1:90,123,381,1:90,123,384,1:91,123,387,1:91,123,390,1:91,123,393,1:91,123,396,1:91,123,399,1:91,123,402,1:91,123,405,1:91,123,408,1:90,122,411,1:90,122,414,1:90,122,417,1:90,121,420,1:91,121,423,1:91,121,426,1:90,120,429,1:90,120,432,1:90,119,435,1:90,119,438,1:90,119,441,1:90,118,444,1:90,118,447,1:90,118,450,1:89,118,453,1:89,118,456,1:89,118,459,1:90,118,462,1:90,117,465,1:89,116,468,1:89,116,471,1:89,117,474,1:89,118,477,1:89,119,480,1:89,119,483,1:89,120,486,1:89,120,489,1:89,121,492,1:89,122,495,1:88,122,498,1:88,122,501,1:88,123,504,1:88,124,507,1:88,124,510,1:88,125,513,1:88,128,516,1:88,131,519,1:88,132,522,1:88,132,523,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject sct_001
if not os.path.isdir(path_results + '/T1/sct_001'):
    os.makedirs(path_results + '/T1/sct_001')
os.chdir(path_results + '/T1/sct_001')
sct.run('dcm2nii -o . -r N '+new_folder+'/sct_001/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 63,86,19,23:68,81,52,22:71,72,86,21:73,64,119,20:73,56,150,19:75,50,179,18:76,48,208,17:77,46,233,16:77,45,259,15:77,46,283,14:78,50,308,13:78,57,330,12:79,64,351,11:79,73,370,10:80,83,389,9:80,91,407,8:81,96,423,7:82,99,438,6:83,101,454,5:84,102,472,4:85,102,490,3:86,100,511,2:87,100,526,1:86,104,551,51:86,110,570,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 40 -end 586')
f_crop = open('crop.txt', 'w')
f_crop.write('40,586,90,480')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 66,71,0,1:66,70,3,1:66,69,6,1:67,69,9,1:67,68,12,1:68,67,15,1:68,67,18,1:68,66,21,1:69,65,24,1:70,65,27,1:70,64,30,1:70,64,33,1:70,62,36,1:71,61,39,1:71,60,42,1:71,59,45,1:71,59,48,1:71,58,51,1:71,58,54,1:71,58,57,1:71,57,60,1:72,56,63,1:72,56,66,1:72,56,69,1:72,55,72,1:73,53,75,1:73,53,78,1:73,53,81,1:73,53,84,1:73,52,87,1:73,51,90,1:73,51,93,1:73,50,96,1:73,50,99,1:74,49,102,1:74,49,105,1:74,48,108,1:74,47,111,1:75,47,114,1:75,46,117,1:75,46,120,1:75,45,123,1:75,45,126,1:75,45,129,1:75,44,132,1:75,44,135,1:76,44,138,1:76,44,141,1:76,43,144,1:76,43,147,1:76,43,150,1:76,43,153,1:76,43,156,1:76,43,159,1:77,41,162,1:76,42,165,1:77,41,168,1:77,41,171,1:77,41,174,1:77,41,177,1:77,41,180,1:77,40,183,1:77,40,186,1:77,40,189,1:77,40,192,1:77,40,195,1:77,40,198,1:77,40,201,1:77,40,204,1:77,40,207,1:77,40,210,1:77,40,213,1:77,39,216,1:78,40,219,1:78,40,222,1:78,39,225,1:78,40,228,1:78,40,231,1:78,41,234,1:78,41,237,1:78,41,240,1:78,41,243,1:78,42,246,1:78,42,249,1:78,42,252,1:78,43,255,1:78,43,258,1:78,45,261,1:79,45,264,1:78,46,267,1:78,47,270,1:78,47,273,1:79,48,276,1:79,48,279,1:78,49,282,1:78,51,285,1:78,52,288,1:79,52,291,1:79,53,294,1:79,55,297,1:79,56,300,1:79,57,303,1:79,59,306,1:79,60,309,1:79,62,312,1:79,62,315,1:79,64,318,1:79,65,321,1:79,66,324,1:79,68,327,1:79,69,330,1:80,71,333,1:80,73,336,1:80,74,339,1:80,75,342,1:80,77,345,1:80,78,348,1:80,80,351,1:80,81,354,1:80,82,357,1:80,84,360,1:80,85,363,1:80,86,366,1:81,88,369,1:81,89,372,1:81,90,375,1:81,91,378,1:81,92,381,1:81,93,384,1:82,94,387,1:82,94,390,1:82,95,393,1:82,95,396,1:83,95,399,1:83,95,402,1:83,96,405,1:83,97,408,1:83,97,411,1:84,97,414,1:84,97,417,1:84,97,420,1:84,97,423,1:84,98,426,1:84,98,429,1:84,98,432,1:84,98,435,1:84,98,438,1:84,98,441,1:85,97,444,1:85,97,447,1:85,98,450,1:85,98,453,1:86,97,456,1:86,97,459,1:86,96,462,1:86,96,465,1:86,95,468,1:87,95,471,1:87,95,474,1:86,94,477,1:86,95,480,1:87,95,483,1:87,95,486,1:87,95,489,1:87,96,492,1:87,95,495,1:87,95,498,1:87,95,501,1:87,96,504,1:87,97,507,1:87,97,510,1:87,99,513,1:87,99,516,1:87,100,519,1:87,101,522,1:87,102,525,1:87,103,528,1:87,103,531,1:86,105,534,1:86,106,537,1:86,108,540,1:86,112,543,1:86,115,546,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject sct_002
if not os.path.isdir(path_results + '/T1/sct_002'):
    os.makedirs(path_results + '/T1/sct_002')
os.chdir(path_results + '/T1/sct_002')
sct.run('dcm2nii -o . -r N '+new_folder+'/sct_002/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 83,83,10,24:84,78,41,23:84,75,75,22:83,70,110,21:83,69,141,20:83,66,169,19:83,64,195,18:83,63,220,17:84,62,243,16:85,63,266,15:86,63,288,14:87,66,310,13:87,71,331,12:88,76,350,11:88,82,370,10:88,91,388,9:88,98,405,8:87,101,420,7:87,104,435,6:87,108,450,5:88,111,463,4:88,113,479,3:88,109,492,2:89,111,511,1:89,119,534,51:88,123,553,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 65 -end 570')
f_crop = open('crop.txt', 'w')
f_crop.write('65,570,100,445')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 84,64,0,1:84,64,3,1:84,63,6,1:85,63,9,1:85,63,12,1:85,62,15,1:85,62,18,1:84,61,21,1:84,60,24,1:84,60,27,1:84,60,30,1:84,60,33,1:84,59,36,1:84,59,39,1:84,59,42,1:83,58,45,1:83,58,48,1:84,58,51,1:84,58,54,1:83,57,57,1:83,57,60,1:83,57,63,1:83,57,66,1:84,57,69,1:84,58,72,1:84,58,75,1:84,58,78,1:84,58,81,1:84,58,84,1:83,58,87,1:83,57,90,1:83,57,93,1:83,57,96,1:83,57,99,1:83,57,102,1:83,57,105,1:83,57,108,1:83,57,111,1:83,57,114,1:83,57,117,1:83,57,120,1:83,56,123,1:83,56,126,1:83,56,129,1:83,56,132,1:83,56,135,1:83,56,138,1:83,56,141,1:83,56,144,1:84,56,147,1:84,56,150,1:84,56,153,1:84,56,156,1:84,56,159,1:84,56,162,1:84,56,165,1:84,56,168,1:84,56,171,1:84,56,174,1:84,56,177,1:85,56,180,1:85,56,183,1:85,56,186,1:85,56,189,1:85,56,192,1:85,56,195,1:85,57,198,1:86,57,201,1:86,57,204,1:86,56,207,1:86,56,210,1:86,57,213,1:86,57,216,1:86,57,219,1:86,57,222,1:86,58,225,1:86,58,228,1:86,58,231,1:86,59,234,1:87,60,237,1:87,60,240,1:87,60,243,1:87,61,246,1:87,61,249,1:87,62,252,1:87,62,255,1:87,63,258,1:87,64,261,1:88,65,264,1:88,65,267,1:88,66,270,1:88,66,273,1:88,68,276,1:88,68,279,1:88,69,282,1:88,69,285,1:88,70,288,1:88,71,291,1:88,73,294,1:88,74,297,1:88,75,300,1:88,76,303,1:88,76,306,1:88,77,309,1:88,79,312,1:88,80,315,1:88,81,318,1:88,82,321,1:88,84,324,1:88,84,327,1:88,85,330,1:88,86,333,1:88,87,336,1:88,89,339,1:88,90,342,1:88,91,345,1:87,92,348,1:87,93,351,1:87,94,354,1:87,94,357,1:87,95,360,1:87,96,363,1:87,96,366,1:87,97,369,1:87,98,372,1:87,98,375,1:87,98,378,1:87,100,381,1:87,100,384,1:88,102,387,1:87,102,390,1:87,102,393,1:87,102,396,1:88,103,399,1:88,103,402,1:88,103,405,1:88,104,408,1:88,104,411,1:88,104,414,1:88,104,417,1:88,104,420,1:88,104,423,1:89,104,426,1:89,104,429,1:89,104,432,1:89,104,435,1:89,104,438,1:89,104,441,1:90,105,444,1:90,105,447,1:90,106,450,1:90,106,453,1:89,105,456,1:89,106,459,1:89,106,462,1:89,107,465,1:89,109,468,1:89,109,471,1:89,111,474,1:89,112,477,1:89,113,480,1:89,114,483,1:89,116,486,1:89,116,489,1:89,116,492,1:89,118,495,1:88,119,498,1:88,121,501,1:88,124,504,1:88,127,505,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject 1
if not os.path.isdir(path_results + '/T1/ED'):
    os.makedirs(path_results + '/T1/ED')
os.chdir(path_results + '/T1/ED')
sct.run('dcm2nii -o . -r N '+new_folder+'/ED/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 83,100,128,20:85,93,160,19:85,88,187,18:85,85,214,17:84,84,238,16:83,83,263,15:84,87,288,14:85,93,311,13:86,101,333,12:86,110,353,11:87,119,371,10:86,129,388,9:85,137,405,8:84,143,421,7:84,145,439,6:83,146,455,5:82,149,472,4:82,150,490,3:81,143,505,2:81,144,525,1:80,148,548,51:80,156,570,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 42 -end 574')
f_crop = open('crop.txt', 'w')
f_crop.write('42,574,100,480')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 80,107,0,1:80,107,3,1:80,106,6,1:79,105,9,1:79,104,12,1:79,103,15,1:79,102,18,1:79,102,21,1:79,101,24,1:79,100,27,1:80,100,30,1:80,100,33,1:80,98,36,1:80,98,39,1:80,97,42,1:80,97,45,1:80,95,48,1:81,95,51,1:81,94,54,1:81,94,57,1:81,94,60,1:81,93,63,1:81,93,66,1:81,92,69,1:81,92,72,1:82,91,75,1:82,90,78,1:82,90,81,1:82,89,84,1:82,88,87,1:82,88,90,1:83,87,93,1:82,87,96,1:82,87,99,1:83,87,102,1:83,86,105,1:83,85,108,1:83,85,111,1:83,85,114,1:83,84,117,1:83,84,120,1:84,84,123,1:84,83,126,1:84,83,129,1:84,83,132,1:84,83,135,1:84,82,138,1:84,82,141,1:84,81,144,1:84,81,147,1:84,81,150,1:85,80,153,1:85,80,156,1:85,80,159,1:85,80,162,1:85,80,165,1:85,80,168,1:85,79,171,1:85,78,174,1:85,78,177,1:85,78,180,1:85,78,183,1:84,78,186,1:84,78,189,1:84,78,192,1:84,78,195,1:84,78,198,1:85,78,201,1:85,78,204,1:85,78,207,1:85,78,210,1:85,78,213,1:85,78,216,1:85,78,219,1:84,78,222,1:85,78,225,1:85,79,228,1:85,79,231,1:85,80,234,1:85,80,237,1:85,80,240,1:85,81,243,1:85,82,246,1:85,82,249,1:85,83,252,1:85,83,255,1:85,84,258,1:85,85,261,1:85,86,264,1:85,86,267,1:86,88,270,1:86,88,273,1:86,90,276,1:86,90,279,1:86,92,282,1:86,93,285,1:86,94,288,1:86,95,291,1:86,96,294,1:86,98,297,1:86,100,300,1:86,101,303,1:86,102,306,1:86,103,309,1:86,104,312,1:86,105,315,1:86,107,318,1:86,109,321,1:86,110,324,1:86,111,327,1:86,113,330,1:86,115,333,1:86,116,336,1:86,117,339,1:86,118,342,1:86,120,345,1:86,121,348,1:85,123,351,1:85,124,354,1:85,125,357,1:85,127,360,1:85,128,363,1:85,129,366,1:85,130,369,1:85,132,372,1:85,133,375,1:85,133,378,1:85,134,381,1:84,135,384,1:84,135,387,1:84,136,390,1:84,137,393,1:84,137,396,1:84,137,399,1:84,138,402,1:84,138,405,1:83,139,408,1:83,139,411,1:83,139,414,1:83,139,417,1:83,140,420,1:82,140,423,1:82,140,426,1:82,140,429,1:82,140,432,1:82,140,435,1:82,140,438,1:82,140,441,1:82,140,444,1:82,140,447,1:82,139,450,1:82,139,453,1:82,139,456,1:82,139,459,1:82,139,462,1:81,138,465,1:81,138,468,1:81,138,471,1:81,138,474,1:81,138,477,1:81,138,480,1:81,138,483,1:81,139,486,1:81,139,489,1:81,139,492,1:81,139,495,1:81,139,498,1:81,140,501,1:81,140,504,1:80,141,507,1:80,141,510,1:80,142,513,1:80,143,516,1:80,145,519,1:80,146,522,1:79,147,525,1:79,148,528,1:79,149,531,1:79,150,532,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject ALT
if not os.path.isdir(path_results + '/T1/ALT'):
    os.makedirs(path_results + '/T1/ALT')
os.chdir(path_results + '/T1/ALT')
sct.run('dcm2nii -o . -r N '+new_folder+'/ALT/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 76,95,73,20:76,88,105,19:76,82,133,18:76,78,160,17:76,75,186,16:77,74,210,15:78,76,235,14:79,81,259,13:81,89,282,12:82,98,302,11:83,108,321,10:85,119,341,9:87,131,360,8:87,139,377,7:89,143,394,6:91,146,412,5:93,147,430,4:94,145,451,3:95,139,469,2:95,137,487,1:93,133,513,51:92,131,539,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 63 -end 556')
f_crop = open('crop.txt', 'w')
f_crop.write('63,556,50,420')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 76,85,0,1:76,84,3,1:76,84,6,1:76,84,9,1:76,83,12,1:76,83,15,1:76,81,18,1:76,81,21,1:76,81,24,1:76,80,27,1:76,80,30,1:76,80,33,1:77,79,36,1:77,79,39,1:77,79,42,1:77,78,45,1:76,78,48,1:76,78,51,1:76,77,54,1:76,77,57,1:76,77,60,1:76,76,63,1:76,76,66,1:76,75,69,1:76,75,72,1:76,74,75,1:76,74,78,1:76,74,81,1:76,73,84,1:76,73,87,1:76,73,90,1:76,72,93,1:76,71,96,1:76,71,99,1:77,71,102,1:77,71,105,1:77,71,108,1:77,70,111,1:77,70,114,1:77,70,117,1:77,70,120,1:77,69,123,1:77,69,126,1:77,69,129,1:77,69,132,1:77,69,135,1:77,69,138,1:78,68,141,1:78,68,144,1:78,68,147,1:78,68,150,1:78,68,153,1:78,68,156,1:78,68,159,1:78,69,162,1:78,70,165,1:78,70,168,1:78,70,171,1:78,71,174,1:79,72,177,1:79,72,180,1:79,73,183,1:79,73,186,1:79,74,189,1:79,75,192,1:79,76,195,1:80,76,198,1:80,78,201,1:80,78,204,1:80,79,207,1:81,80,210,1:81,81,213,1:81,83,216,1:81,83,219,1:81,85,222,1:81,86,225,1:82,87,228,1:82,88,231,1:82,90,234,1:82,91,237,1:83,92,240,1:83,94,243,1:83,95,246,1:83,97,249,1:84,98,252,1:84,100,255,1:84,101,258,1:84,104,261,1:85,105,264,1:85,107,267,1:85,108,270,1:85,109,273,1:85,111,276,1:85,112,279,1:86,114,282,1:86,116,285,1:86,117,288,1:86,118,291,1:86,120,294,1:86,122,297,1:87,124,300,1:86,125,303,1:87,126,306,1:87,128,309,1:87,130,312,1:87,131,315,1:87,132,318,1:88,133,321,1:88,134,324,1:88,135,327,1:88,136,330,1:89,137,333,1:89,137,336,1:89,138,339,1:90,139,342,1:90,139,345,1:90,140,348,1:90,140,351,1:90,140,354,1:91,140,357,1:92,140,360,1:91,141,363,1:92,140,366,1:92,140,369,1:93,139,372,1:93,139,375,1:93,139,378,1:93,139,381,1:94,138,384,1:94,137,387,1:94,137,390,1:94,137,393,1:94,136,396,1:95,136,399,1:95,135,402,1:95,134,405,1:95,134,408,1:95,132,411,1:95,132,414,1:95,132,417,1:95,132,420,1:95,131,423,1:95,131,426,1:95,131,429,1:95,130,432,1:95,128,435,1:94,128,438,1:93,126,441,1:93,126,444,1:93,125,447,1:93,125,450,1:93,125,453,1:93,124,456,1:93,123,459,1:93,122,462,1:92,122,465,1:92,122,468,1:92,121,471,1:91,121,474,1:91,121,477,1:91,121,480,1:91,122,483,1:91,125,486,1:91,128,489,1:91,128,492,1:91,128,493,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject JD
if not os.path.isdir(path_results + '/T1/JD'):
    os.makedirs(path_results + '/T1/JD')
os.chdir(path_results + '/T1/JD')
sct.run('dcm2nii -o . -r N '+new_folder+'/JD/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 77,76,13,20:75,70,51,19:74,69,84,18:74,68,115,17:74,67,144,16:74,67,172,15:73,69,199,14:74,72,226,13:75,80,253,12:76,87,278,11:77,96,302,10:79,109,324,9:79,118,342,8:78,123,363,7:78,124,382,6:76,124,403,5:76,122,423,4:75,122,445,3:75,111,461,2:75,107,483,1:77,105,512,51:80,112,539,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 13 -end 555')
f_crop = open('crop.txt', 'w')
f_crop.write('13,555,35,450')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 77,65,0,1:76,64,3,1:76,63,6,1:76,63,9,1:76,63,12,1:75,63,15,1:75,62,18,1:75,62,21,1:75,62,24,1:75,62,27,1:75,62,30,1:75,62,33,1:75,61,36,1:75,61,39,1:75,61,42,1:75,61,45,1:75,61,48,1:74,61,51,1:74,61,54,1:74,61,57,1:74,61,60,1:74,61,63,1:74,61,66,1:74,61,69,1:74,60,72,1:74,60,75,1:74,60,78,1:74,60,81,1:74,60,84,1:74,60,87,1:74,60,90,1:74,60,93,1:74,60,96,1:74,60,99,1:74,60,102,1:74,60,105,1:73,60,108,1:73,60,111,1:73,60,114,1:73,60,117,1:73,60,120,1:73,60,123,1:73,60,126,1:73,60,129,1:73,60,132,1:73,60,135,1:73,60,138,1:73,60,141,1:73,60,144,1:73,60,147,1:73,60,150,1:73,60,153,1:73,60,156,1:73,60,159,1:73,60,162,1:73,60,165,1:73,60,168,1:73,61,171,1:73,61,174,1:73,61,177,1:73,61,180,1:73,62,183,1:73,62,186,1:73,62,189,1:73,62,192,1:74,63,195,1:74,63,198,1:74,63,201,1:74,64,204,1:74,65,207,1:74,65,210,1:74,66,213,1:74,66,216,1:74,67,219,1:74,68,222,1:75,68,225,1:75,69,228,1:75,69,231,1:75,70,234,1:75,71,237,1:76,72,240,1:76,73,243,1:76,74,246,1:76,74,249,1:76,75,252,1:76,76,255,1:76,77,258,1:76,78,261,1:77,79,264,1:77,81,267,1:77,82,270,1:77,83,273,1:77,84,276,1:77,85,279,1:77,86,282,1:77,88,285,1:78,89,288,1:78,91,291,1:78,92,294,1:78,93,297,1:78,95,300,1:78,96,303,1:78,97,306,1:79,99,309,1:79,101,312,1:79,102,315,1:79,104,318,1:79,105,321,1:79,106,324,1:79,108,327,1:78,109,330,1:78,110,333,1:78,111,336,1:78,112,339,1:78,113,342,1:78,114,345,1:77,114,348,1:78,115,351,1:78,115,354,1:78,115,357,1:78,115,360,1:78,116,363,1:78,116,366,1:78,116,369,1:78,116,372,1:77,116,375,1:77,116,378,1:77,116,381,1:77,116,384,1:77,116,387,1:77,117,390,1:76,117,393,1:76,117,396,1:76,116,399,1:76,116,402,1:76,116,405,1:75,115,408,1:75,115,411,1:75,114,414,1:75,114,417,1:75,113,420,1:75,112,423,1:75,112,426,1:75,111,429,1:75,111,432,1:75,110,435,1:75,109,438,1:75,108,441,1:74,107,444,1:74,106,447,1:74,106,450,1:74,105,453,1:75,104,456,1:75,103,459,1:75,102,462,1:75,102,465,1:75,101,468,1:75,101,471,1:75,101,474,1:75,100,477,1:75,100,480,1:76,99,483,1:76,98,486,1:76,98,489,1:76,97,492,1:76,97,495,1:78,97,498,1:78,97,501,1:78,97,504,1:78,97,507,1:78,98,510,1:79,99,513,1:79,99,516,1:79,100,519,1:80,101,522,1:80,100,525,1:80,101,528,1:80,101,531,1:80,102,534,1:81,104,537,1:81,107,540,1:81,110,542,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject JW
if not os.path.isdir(path_results + '/T1/JW'):
    os.makedirs(path_results + '/T1/JW')
os.chdir(path_results + '/T1/JW')
sct.run('dcm2nii -o . -r N '+new_folder+'/JW/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 99,107,46,20:98,103,79,19:97,96,108,18:95,93,138,17:93,92,164,16:91,92,190,15:90,95,217,14:90,99,241,13:90,105,263,12:90,114,285,11:90,123,305,10:90,132,325,9:89,136,346,8:89,140,364,7:89,141,380,6:89,141,398,5:88,140,415,4:86,139,434,3:87,133,449,2:86,131,470,1:88,129,495,51:88,126,521,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 42 -end 538')
f_crop = open('crop.txt', 'w')
f_crop.write('42,538,0,420')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 98,97,0,1:98,97,3,1:98,97,6,1:98,96,9,1:98,95,12,1:98,95,15,1:98,95,18,1:98,95,21,1:99,94,24,1:98,93,27,1:98,93,30,1:98,92,33,1:98,92,36,1:98,92,39,1:98,92,42,1:98,92,45,1:98,92,48,1:98,92,51,1:98,91,54,1:98,91,57,1:97,91,60,1:97,90,63,1:97,90,66,1:97,89,69,1:97,89,72,1:96,89,75,1:96,89,78,1:96,88,81,1:96,88,84,1:96,88,87,1:96,87,90,1:96,87,93,1:96,87,96,1:96,87,99,1:95,87,102,1:95,87,105,1:95,87,108,1:94,87,111,1:94,86,114,1:94,86,117,1:93,86,120,1:93,86,123,1:94,86,126,1:93,86,129,1:93,86,132,1:92,86,135,1:92,86,138,1:92,86,141,1:92,86,144,1:92,86,147,1:91,87,150,1:92,87,153,1:91,87,156,1:91,87,159,1:90,87,162,1:90,87,165,1:91,88,168,1:90,88,171,1:90,89,174,1:90,89,177,1:90,90,180,1:90,91,183,1:90,91,186,1:90,91,189,1:90,92,192,1:90,93,195,1:90,93,198,1:90,94,201,1:90,94,204,1:90,96,207,1:90,96,210,1:90,97,213,1:90,98,216,1:90,99,219,1:90,100,222,1:89,100,225,1:89,101,228,1:90,102,231,1:89,104,234,1:90,105,237,1:89,106,240,1:89,107,243,1:90,108,246,1:90,109,249,1:90,110,252,1:89,111,255,1:89,112,258,1:90,114,261,1:90,115,264,1:90,116,267,1:90,117,270,1:90,118,273,1:90,119,276,1:90,120,279,1:90,121,282,1:89,122,285,1:89,122,288,1:89,124,291,1:89,124,294,1:89,125,297,1:89,125,300,1:89,127,303,1:88,127,306,1:88,128,309,1:89,129,312,1:89,130,315,1:89,130,318,1:89,130,321,1:89,131,324,1:89,131,327,1:89,132,330,1:89,132,333,1:89,132,336,1:89,132,339,1:89,132,342,1:89,132,345,1:89,132,348,1:88,132,351,1:88,132,354,1:88,132,357,1:88,132,360,1:88,132,363,1:88,132,366,1:88,132,369,1:87,131,372,1:88,131,375,1:88,130,378,1:87,131,381,1:87,131,384,1:87,130,387,1:87,130,390,1:87,130,393,1:87,129,396,1:87,129,399,1:86,128,402,1:86,128,405,1:86,128,408,1:86,127,411,1:86,127,414,1:86,126,417,1:86,125,420,1:86,125,423,1:87,125,426,1:87,125,429,1:87,125,432,1:87,124,435,1:87,123,438,1:87,122,441,1:87,121,444,1:87,120,447,1:87,120,450,1:87,119,453,1:87,118,456,1:87,118,459,1:87,117,462,1:87,117,465,1:87,117,468,1:87,116,471,1:87,115,474,1:87,115,477,1:87,115,480,1:87,115,483,1:87,116,486,1:87,119,489,1:88,121,492,1:88,124,495,1:89,124,496,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject MLL
if not os.path.isdir(path_results + '/T1/MLL'):
    os.makedirs(path_results + '/T1/MLL')
os.chdir(path_results + '/T1/MLL')
sct.run('dcm2nii -o . -r N '+new_folder+'/MLL/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 100,95,121,20:99,91,153,19:98,86,181,18:97,83,206,17:97,82,230,16:95,82,254,15:94,84,278,14:93,87,301,13:92,93,323,12:91,99,343,11:91,108,363,10:90,118,381,9:89,126,399,8:89,129,415,7:89,132,432,6:89,133,449,5:87,133,467,4:88,130,485,3:86,117,505,2:84,118,522,1:83,118,543,51:82,126,565,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 1,2 -start 25,50 -end 252,578')
f_crop = open('crop.txt', 'w')
f_crop.write('50,578,100,360,25,252')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 100,76,0,1:101,75,3,1:101,75,6,1:101,73,9,1:101,73,12,1:101,73,15,1:101,72,18,1:101,71,21,1:101,70,24,1:101,69,27,1:101,68,30,1:101,67,33,1:101,66,36,1:101,66,39,1:100,65,42,1:100,64,45,1:100,64,48,1:100,64,51,1:100,64,54,1:100,63,57,1:101,62,60,1:101,61,63,1:100,61,66,1:100,61,69,1:100,60,72,1:100,60,75,1:100,61,78,1:100,60,81,1:100,59,84,1:100,58,87,1:99,58,90,1:99,58,93,1:99,57,96,1:99,57,99,1:99,57,102,1:99,57,105,1:99,56,108,1:99,56,111,1:98,55,114,1:98,55,117,1:98,55,120,1:98,54,123,1:98,54,126,1:98,54,129,1:98,53,132,1:98,53,135,1:98,53,138,1:98,53,141,1:98,53,144,1:98,53,147,1:98,53,150,1:98,52,153,1:98,52,156,1:97,52,159,1:97,51,162,1:97,51,165,1:97,51,168,1:97,51,171,1:97,51,174,1:96,51,177,1:96,51,180,1:96,51,183,1:96,51,186,1:96,51,189,1:96,52,192,1:96,51,195,1:96,51,198,1:96,51,201,1:95,52,204,1:95,52,207,1:95,52,210,1:95,52,213,1:95,52,216,1:95,52,219,1:95,53,222,1:95,53,225,1:94,53,228,1:94,53,231,1:94,54,234,1:94,55,237,1:94,55,240,1:94,56,243,1:94,56,246,1:93,57,249,1:93,57,252,1:93,58,255,1:93,59,258,1:93,59,261,1:93,60,264,1:93,60,267,1:92,61,270,1:92,62,273,1:92,63,276,1:92,65,279,1:92,65,282,1:92,66,285,1:92,67,288,1:92,68,291,1:91,69,294,1:90,70,297,1:90,72,300,1:90,72,303,1:90,73,306,1:90,74,309,1:90,75,312,1:90,76,315,1:90,78,318,1:90,79,321,1:90,80,324,1:90,81,327,1:90,82,330,1:90,83,333,1:90,85,336,1:90,86,339,1:90,87,342,1:90,89,345,1:90,89,348,1:90,91,351,1:90,92,354,1:90,93,357,1:90,94,360,1:90,95,363,1:90,96,366,1:89,97,369,1:89,97,372,1:89,98,375,1:89,98,378,1:89,99,381,1:89,99,384,1:89,100,387,1:89,100,390,1:89,100,393,1:89,100,396,1:89,100,399,1:89,99,402,1:89,99,405,1:89,99,408,1:89,98,411,1:88,98,414,1:88,97,417,1:88,97,420,1:88,96,423,1:88,96,426,1:87,95,429,1:87,94,432,1:87,93,435,1:87,92,438,1:87,91,441,1:87,91,444,1:86,90,447,1:86,89,450,1:86,88,453,1:86,87,456,1:86,86,459,1:85,86,462,1:85,86,465,1:85,86,468,1:85,86,471,1:85,86,474,1:84,85,477,1:83,86,480,1:83,86,483,1:83,86,486,1:83,86,489,1:83,86,492,1:83,87,495,1:83,87,498,1:82,88,501,1:82,89,504,1:82,89,507,1:82,90,510,1:82,90,513,1:81,91,516,1:81,92,519,1:81,94,522,1:81,96,525,1:81,99,528,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject MT
if not os.path.isdir(path_results + '/T1/MT'):
    os.makedirs(path_results + '/T1/MT')
os.chdir(path_results + '/T1/MT')
sct.run('dcm2nii -o . -r N '+new_folder+'/MT/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 93,82,50,20:93,77,81,19:93,76,108,18:90,72,137,17:91,73,163,16:89,74,189,15:89,78,215,14:89,82,239,13:89,91,263,12:90,101,284,11:89,112,304,10:89,123,322,9:88,133,339,8:87,137,358,7:86,138,374,6:86,138,391,5:86,135,408,4:86,134,427,3:86,128,442,2:85,125,463,1:86,122,484,51:87,117,507,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 19 -end 526')
f_crop = open('crop.txt', 'w')
f_crop.write('19,526,60,430')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 95,75,0,1:95,75,3,1:95,74,6,1:95,73,9,1:94,72,12,1:94,73,15,1:94,72,18,1:93,71,21,1:94,71,24,1:94,70,27,1:94,70,30,1:94,70,33,1:94,70,36,1:94,71,39,1:94,71,42,1:93,71,45,1:93,71,48,1:93,70,51,1:93,70,54,1:93,70,57,1:93,70,60,1:92,70,63,1:93,69,66,1:92,69,69,1:92,69,72,1:92,69,75,1:92,69,78,1:91,68,81,1:91,68,84,1:91,68,87,1:91,68,90,1:91,67,93,1:91,67,96,1:91,67,99,1:91,67,102,1:91,67,105,1:91,67,108,1:91,66,111,1:92,66,114,1:92,66,117,1:92,66,120,1:91,66,123,1:91,66,126,1:91,66,129,1:91,66,132,1:91,66,135,1:91,66,138,1:91,66,141,1:91,67,144,1:91,67,147,1:91,67,150,1:91,67,153,1:90,67,156,1:90,68,159,1:90,68,162,1:90,68,165,1:90,68,168,1:90,68,171,1:90,68,174,1:90,69,177,1:89,69,180,1:89,69,183,1:89,70,186,1:89,70,189,1:89,71,192,1:89,71,195,1:88,72,198,1:88,72,201,1:88,73,204,1:88,74,207,1:88,74,210,1:88,75,213,1:88,76,216,1:88,77,219,1:89,78,222,1:89,78,225,1:89,79,228,1:89,81,231,1:89,82,234,1:89,83,237,1:89,84,240,1:89,85,243,1:89,86,246,1:90,87,249,1:90,88,252,1:90,90,255,1:89,91,258,1:89,92,261,1:90,93,264,1:90,95,267,1:90,97,270,1:90,98,273,1:90,100,276,1:90,101,279,1:90,102,282,1:90,104,285,1:90,105,288,1:90,107,291,1:90,108,294,1:90,110,297,1:90,112,300,1:90,113,303,1:90,115,306,1:89,117,309,1:89,118,312,1:89,119,315,1:89,121,318,1:89,121,321,1:88,123,324,1:88,123,327,1:88,124,330,1:87,126,333,1:87,127,336,1:87,127,339,1:87,128,342,1:87,128,345,1:87,129,348,1:87,130,351,1:87,130,354,1:87,130,357,1:87,130,360,1:86,130,363,1:86,130,366,1:86,130,369,1:86,130,372,1:86,130,375,1:86,129,378,1:86,129,381,1:86,129,384,1:86,129,387,1:86,128,390,1:86,128,393,1:86,128,396,1:86,128,399,1:86,127,402,1:86,127,405,1:86,126,408,1:86,125,411,1:86,125,414,1:86,124,417,1:85,123,420,1:85,123,423,1:85,122,426,1:85,122,429,1:85,121,432,1:85,121,435,1:85,120,438,1:85,120,441,1:85,118,444,1:86,117,447,1:86,115,450,1:86,113,453,1:87,113,456,1:87,112,459,1:87,112,462,1:87,111,465,1:87,111,468,1:87,110,471,1:87,110,474,1:87,110,477,1:88,110,480,1:88,108,483,1:88,107,486,1:88,107,489,1:88,107,492,1:88,108,495,1:89,109,498,1:89,111,501,1:89,114,504,1:89,117,507,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject T045
if not os.path.isdir(path_results + '/T1/T045'):
    os.makedirs(path_results + '/T1/T045')
os.chdir(path_results + '/T1/T045')
sct.run('dcm2nii -o . -r N '+new_folder+'/T045/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 82,90,120,20:82,89,151,19:84,85,179,18:85,81,203,17:86,78,227,16:86,77,252,15:86,78,276,14:86,81,300,13:86,87,323,12:87,92,343,11:86,99,362,10:87,107,383,9:88,113,404,8:88,118,421,7:89,120,438,6:88,123,455,5:87,123,474,4:86,122,492,3:84,121,510,2:84,121,531,1:85,123,559,51:86,124,583,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 1,2 -start 12,80 -end 254,602')
f_crop = open('crop.txt', 'w')
f_crop.write('80,602,80,330,12,254')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 82,71,0,1:83,70,3,1:83,70,6,1:83,71,9,1:83,71,12,1:83,71,15,1:83,71,18,1:83,70,21,1:83,71,24,1:83,71,27,1:82,71,30,1:82,71,33,1:82,71,36,1:82,70,39,1:83,70,42,1:83,70,45,1:83,70,48,1:83,70,51,1:83,70,54,1:83,69,57,1:83,68,60,1:83,68,63,1:83,68,66,1:83,68,69,1:83,68,72,1:83,68,75,1:83,67,78,1:84,67,81,1:83,66,84,1:83,66,87,1:83,66,90,1:83,66,93,1:83,65,96,1:84,65,99,1:84,64,102,1:84,64,105,1:84,64,108,1:84,63,111,1:84,63,114,1:84,63,117,1:84,62,120,1:85,62,123,1:85,62,126,1:85,62,129,1:85,61,132,1:85,61,135,1:85,61,138,1:86,61,141,1:86,61,144,1:86,60,147,1:86,60,150,1:86,60,153,1:86,60,156,1:86,59,159,1:86,59,162,1:86,59,165,1:86,59,168,1:86,59,171,1:86,59,174,1:86,59,177,1:86,60,180,1:86,60,183,1:86,60,186,1:86,60,189,1:86,61,192,1:86,61,195,1:86,61,198,1:86,61,201,1:86,62,204,1:86,62,207,1:86,62,210,1:86,62,213,1:86,63,216,1:86,63,219,1:86,63,222,1:86,64,225,1:86,64,228,1:86,65,231,1:86,66,234,1:86,67,237,1:86,68,240,1:86,68,243,1:86,69,246,1:86,70,249,1:86,70,252,1:86,72,255,1:86,72,258,1:86,73,261,1:86,74,264,1:86,75,267,1:86,77,270,1:86,78,273,1:86,78,276,1:86,79,279,1:86,81,282,1:86,81,285,1:87,82,288,1:87,83,291,1:87,85,294,1:87,85,297,1:87,86,300,1:87,87,303,1:87,88,306,1:87,89,309,1:87,90,312,1:88,92,315,1:88,92,318,1:88,93,321,1:88,94,324,1:88,95,327,1:88,96,330,1:88,97,333,1:88,98,336,1:88,99,339,1:88,100,342,1:89,100,345,1:89,101,348,1:89,102,351,1:89,102,354,1:89,102,357,1:88,102,360,1:88,103,363,1:88,103,366,1:88,103,369,1:88,103,372,1:88,103,375,1:88,103,378,1:88,104,381,1:88,104,384,1:88,104,387,1:87,104,390,1:87,104,393,1:87,104,396,1:86,104,399,1:86,104,402,1:86,104,405,1:86,104,408,1:86,104,411,1:85,104,414,1:85,104,417,1:85,104,420,1:85,103,423,1:85,103,426,1:85,103,429,1:85,103,432,1:84,103,435,1:84,103,438,1:84,103,441,1:84,103,444,1:84,103,447,1:85,103,450,1:85,103,453,1:85,103,456,1:85,102,459,1:85,100,462,1:85,101,465,1:85,101,468,1:85,101,471,1:85,102,474,1:85,102,477,1:85,102,480,1:85,102,483,1:86,103,486,1:86,103,489,1:86,103,492,1:86,103,495,1:86,104,498,1:86,103,501,1:86,103,504,1:86,103,507,1:86,103,510,1:86,104,513,1:86,107,516,1:86,109,519,1:86,112,522,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject T047
if not os.path.isdir(path_results + '/T1/T047'):
    os.makedirs(path_results + '/T1/T047')
os.chdir(path_results + '/T1/T047')
sct.run('dcm2nii -o . -r N '+new_folder+'/T047/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 87,105,96,20:85,99,129,19:85,94,157,18:85,91,184,17:85,89,208,16:85,89,232,15:85,90,257,14:85,94,280,13:84,99,303,12:84,106,325,11:84,113,344,10:84,120,363,9:84,127,381,8:84,131,398,7:84,131,415,6:85,132,432,5:85,131,449,4:86,130,467,3:85,126,481,2:85,125,504,1:85,131,535,51:85,131,561,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 30 -end 577')
f_crop = open('crop.txt', 'w')
f_crop.write('30,577,100,365')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 87,101,0,1:87,101,3,1:87,100,6,1:87,100,9,1:87,100,12,1:87,99,15,1:87,99,18,1:87,98,21,1:87,96,24,1:87,96,27,1:87,96,30,1:87,96,33,1:87,95,36,1:87,95,39,1:87,94,42,1:87,93,45,1:87,93,48,1:87,92,51,1:87,92,54,1:87,91,57,1:87,90,60,1:86,90,63,1:86,90,66,1:86,90,69,1:86,90,72,1:86,90,75,1:86,90,78,1:86,90,81,1:85,89,84,1:85,89,87,1:85,89,90,1:86,89,93,1:86,88,96,1:85,88,99,1:85,87,102,1:85,87,105,1:85,87,108,1:85,87,111,1:85,87,114,1:85,86,117,1:85,86,120,1:85,86,123,1:85,86,126,1:85,85,129,1:85,85,132,1:85,85,135,1:85,85,138,1:85,84,141,1:85,84,144,1:85,84,147,1:85,84,150,1:85,84,153,1:85,84,156,1:85,84,159,1:85,84,162,1:85,83,165,1:85,83,168,1:85,83,171,1:85,83,174,1:85,83,177,1:85,83,180,1:85,83,183,1:85,83,186,1:85,83,189,1:85,83,192,1:85,83,195,1:85,83,198,1:85,83,201,1:85,83,204,1:85,83,207,1:85,83,210,1:85,83,213,1:85,84,216,1:85,84,219,1:85,84,222,1:85,85,225,1:85,85,228,1:85,85,231,1:85,86,234,1:85,86,237,1:85,86,240,1:85,86,243,1:85,88,246,1:85,88,249,1:85,88,252,1:84,89,255,1:84,89,258,1:85,90,261,1:85,90,264,1:85,91,267,1:85,92,270,1:84,92,273,1:85,94,276,1:85,94,279,1:85,95,282,1:85,96,285,1:85,97,288,1:85,98,291,1:84,99,294,1:84,100,297,1:85,101,300,1:85,102,303,1:84,103,306,1:84,104,309,1:84,105,312,1:84,106,315,1:84,107,318,1:84,108,321,1:84,109,324,1:84,109,327,1:84,110,330,1:84,111,333,1:84,112,336,1:84,112,339,1:85,113,342,1:85,114,345,1:85,115,348,1:85,116,351,1:85,116,354,1:85,117,357,1:85,118,360,1:85,119,363,1:85,120,366,1:85,121,369,1:85,121,372,1:85,121,375,1:86,122,378,1:86,122,381,1:86,122,384,1:86,122,387,1:86,123,390,1:85,123,393,1:86,123,396,1:86,123,399,1:86,123,402,1:86,123,405,1:86,123,408,1:86,123,411,1:86,123,414,1:86,123,417,1:86,123,420,1:86,122,423,1:86,122,426,1:87,122,429,1:86,122,432,1:86,122,435,1:86,122,438,1:86,122,441,1:86,121,444,1:86,121,447,1:86,121,450,1:86,121,453,1:86,121,456,1:86,120,459,1:86,120,462,1:86,120,465,1:85,120,468,1:85,120,471,1:85,120,474,1:85,121,477,1:85,121,480,1:85,122,483,1:85,121,486,1:85,121,489,1:85,120,492,1:86,120,495,1:86,120,498,1:86,120,501,1:85,121,504,1:85,120,507,1:85,120,510,1:85,120,513,1:85,120,516,1:85,120,519,1:85,120,522,1:85,121,525,1:85,121,528,1:85,121,531,1:85,121,534,1:85,122,537,1:85,124,540,1:85,128,543,1:85,131,546,1:85,133,547,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject VC
if not os.path.isdir(path_results + '/T1/VC'):
    os.makedirs(path_results + '/T1/VC')
os.chdir(path_results + '/T1/VC')
sct.run('dcm2nii -o . -r N '+new_folder+'/VC/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 83,81,107,20:83,73,137,19:83,67,166,18:83,65,193,17:84,62,217,16:84,60,240,15:85,59,262,14:85,62,285,13:85,71,306,12:85,80,326,11:86,89,344,10:85,101,362,9:86,112,379,8:86,116,396,7:86,119,412,6:86,119,427,5:86,119,442,4:85,118,457,3:86,110,470,2:86,107,489,1:85,107,519,51:85,110,544,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 55 -end 562')
f_crop = open('crop.txt', 'w')
f_crop.write('55,562,80,325')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 82,86,0,1:82,84,3,1:82,83,6,1:82,82,9,1:82,82,12,1:82,80,15,1:82,80,18,1:82,79,21,1:82,78,24,1:82,77,27,1:82,76,30,1:82,75,33,1:83,75,36,1:83,73,39,1:83,71,42,1:83,71,45,1:83,71,48,1:83,70,51,1:83,69,54,1:83,68,57,1:83,68,60,1:83,67,63,1:83,67,66,1:83,66,69,1:83,66,72,1:83,65,75,1:83,64,78,1:83,64,81,1:83,63,84,1:83,63,87,1:83,62,90,1:83,62,93,1:83,62,96,1:83,61,99,1:83,61,102,1:83,61,105,1:83,60,108,1:83,60,111,1:83,59,114,1:84,59,117,1:83,58,120,1:83,58,123,1:83,58,126,1:83,58,129,1:84,58,132,1:84,58,135,1:84,58,138,1:83,57,141,1:84,57,144,1:84,56,147,1:84,56,150,1:84,55,153,1:84,55,156,1:84,55,159,1:85,55,162,1:85,55,165,1:85,55,168,1:85,54,171,1:85,54,174,1:85,53,177,1:85,54,180,1:85,54,183,1:85,54,186,1:85,54,189,1:85,53,192,1:85,53,195,1:85,53,198,1:85,53,201,1:85,54,204,1:85,54,207,1:86,54,210,1:86,54,213,1:85,55,216,1:85,55,219,1:85,56,222,1:85,56,225,1:85,57,228,1:85,57,231,1:85,58,234,1:85,58,237,1:85,60,240,1:85,61,243,1:85,62,246,1:85,63,249,1:85,64,252,1:85,66,255,1:85,67,258,1:85,68,261,1:86,69,264,1:86,70,267,1:86,71,270,1:86,73,273,1:86,75,276,1:86,76,279,1:86,78,282,1:86,80,285,1:86,82,288,1:86,83,291,1:86,85,294,1:85,85,297,1:85,87,300,1:85,88,303,1:85,90,306,1:85,92,309,1:85,93,312,1:85,95,315,1:85,96,318,1:86,98,321,1:86,99,324,1:86,101,327,1:86,102,330,1:86,103,333,1:86,105,336,1:86,106,339,1:86,106,342,1:86,107,345,1:86,108,348,1:86,108,351,1:86,109,354,1:86,109,357,1:86,110,360,1:86,110,363,1:86,110,366,1:86,110,369,1:86,110,372,1:86,110,375,1:86,110,378,1:86,109,381,1:86,109,384,1:86,110,387,1:86,109,390,1:86,108,393,1:86,108,396,1:86,108,399,1:86,107,402,1:86,107,405,1:86,106,408,1:86,106,411,1:86,105,414,1:86,105,417,1:86,104,420,1:86,104,423,1:86,102,426,1:86,102,429,1:86,102,432,1:86,102,435,1:86,102,438,1:86,101,441,1:86,101,444,1:86,100,447,1:86,98,450,1:86,98,453,1:86,98,456,1:86,98,459,1:86,97,462,1:86,97,465,1:86,97,468,1:86,97,471,1:86,98,474,1:86,98,477,1:86,99,480,1:86,99,483,1:86,100,486,1:86,100,489,1:85,101,492,1:86,101,495,1:85,103,498,1:85,105,501,1:86,108,504,1:86,109,507,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject VG
if not os.path.isdir(path_results + '/T1/VG'):
    os.makedirs(path_results + '/T1/VG')
os.chdir(path_results + '/T1/VG')
sct.run('dcm2nii -o . -r N '+new_folder+'/VG/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 64,88,120,20:64,79,148,19:66,73,173,18:68,67,197,17:69,62,218,16:71,59,240,15:72,59,260,14:74,62,280,13:77,67,299,12:80,75,317,11:81,81,333,10:82,88,347,9:83,98,364,8:84,105,378,7:85,108,392,6:86,111,405,5:86,113,419,4:86,114,433,3:87,112,449,2:86,113,465,1:85,117,484,51:84,120,508,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 47 -end 525')
f_crop = open('crop.txt', 'w')
f_crop.write('47,525,120,410')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 66,93,0,1:66,92,3,1:66,91,6,1:66,91,9,1:65,90,12,1:65,90,15,1:65,89,18,1:65,89,21,1:65,89,24,1:64,88,27,1:64,88,30,1:64,87,33,1:64,86,36,1:63,85,39,1:63,84,42,1:63,83,45,1:63,82,48,1:64,82,51,1:64,82,54,1:64,81,57,1:63,81,60,1:63,80,63,1:64,79,66,1:64,79,69,1:64,79,72,1:64,78,75,1:63,78,78,1:64,76,81,1:64,76,84,1:64,75,87,1:64,74,90,1:64,73,93,1:65,72,96,1:65,72,99,1:65,71,102,1:65,70,105,1:66,69,108,1:65,69,111,1:66,68,114,1:66,67,117,1:66,67,120,1:66,66,123,1:66,65,126,1:67,64,129,1:67,64,132,1:67,63,135,1:67,63,138,1:67,61,141,1:67,61,144,1:68,60,147,1:68,59,150,1:68,59,153,1:68,59,156,1:68,58,159,1:68,58,162,1:69,57,165,1:68,56,168,1:69,56,171,1:69,55,174,1:69,55,177,1:70,54,180,1:69,54,183,1:70,54,186,1:70,53,189,1:70,53,192,1:71,53,195,1:71,53,198,1:71,53,201,1:72,53,204,1:72,53,207,1:72,53,210,1:73,54,213,1:73,54,216,1:73,54,219,1:73,54,222,1:73,55,225,1:74,55,228,1:74,56,231,1:75,56,234,1:75,57,237,1:76,58,240,1:76,58,243,1:77,60,246,1:77,60,249,1:77,61,252,1:78,62,255,1:78,64,258,1:79,64,261,1:79,66,264,1:79,67,267,1:80,68,270,1:80,70,273,1:81,71,276,1:81,72,279,1:81,73,282,1:80,74,285,1:80,75,288,1:81,77,291,1:81,78,294,1:82,79,297,1:82,80,300,1:82,82,303,1:83,84,306,1:83,85,309,1:83,86,312,1:83,88,315,1:83,89,318,1:83,91,321,1:84,93,324,1:84,94,327,1:84,96,330,1:84,97,333,1:85,98,336,1:85,99,339,1:85,100,342,1:85,101,345,1:85,102,348,1:85,103,351,1:85,104,354,1:86,104,357,1:86,105,360,1:86,105,363,1:86,105,366,1:86,106,369,1:86,106,372,1:86,107,375,1:86,107,378,1:86,107,381,1:86,107,384,1:87,107,387,1:87,107,390,1:87,107,393,1:87,107,396,1:87,107,399,1:87,107,402,1:86,107,405,1:86,107,408,1:86,107,411,1:86,107,414,1:86,107,417,1:86,108,420,1:86,108,423,1:86,106,426,1:86,106,429,1:86,106,432,1:86,106,435,1:86,107,438,1:85,106,441,1:85,107,444,1:85,107,447,1:85,108,450,1:85,108,453,1:84,107,456,1:84,107,459,1:84,107,462,1:83,108,465,1:83,109,468,1:83,112,471,1:83,116,474,1:83,118,477,1:83,119,478,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject VP
if not os.path.isdir(path_results + '/T1/VP'):
    os.makedirs(path_results + '/T1/VP')
os.chdir(path_results + '/T1/VP')
sct.run('dcm2nii -o . -r N '+new_folder+'/VP/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 105,91,68,20:105,83,100,19:105,75,132,18:105,71,161,17:105,69,187,16:105,69,214,15:103,70,240,14:103,74,262,13:103,79,285,12:102,84,306,11:100,92,326,10:99,102,346,9:98,114,365,8:97,121,383,7:95,125,400,6:93,125,417,5:91,126,436,4:89,124,455,3:87,115,471,2:87,113,493,1:87,111,516,51:87,110,542,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 63 -end 561')
f_crop = open('crop.txt', 'w')
f_crop.write('63,561,65,315')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 105,79,0,1:104,79,3,1:104,78,6,1:104,78,9,1:104,78,12,1:104,77,15,1:104,76,18,1:104,76,21,1:104,75,24,1:104,74,27,1:105,73,30,1:105,73,33,1:105,72,36,1:105,72,39,1:105,71,42,1:105,71,45,1:105,70,48,1:105,70,51,1:105,69,54,1:105,69,57,1:105,68,60,1:105,68,63,1:105,67,66,1:105,67,69,1:105,67,72,1:105,66,75,1:105,66,78,1:105,66,81,1:105,66,84,1:105,65,87,1:105,64,90,1:105,64,93,1:105,63,96,1:105,64,99,1:105,63,102,1:105,63,105,1:105,63,108,1:105,63,111,1:105,62,114,1:105,62,117,1:105,62,120,1:105,62,123,1:105,62,126,1:105,62,129,1:105,62,132,1:105,62,135,1:105,62,138,1:105,62,141,1:105,62,144,1:105,62,147,1:105,62,150,1:105,62,153,1:104,63,156,1:104,63,159,1:104,63,162,1:104,64,165,1:104,64,168,1:104,64,171,1:104,64,174,1:104,64,177,1:103,64,180,1:104,65,183,1:104,65,186,1:103,66,189,1:103,66,192,1:103,67,195,1:103,67,198,1:103,68,201,1:103,69,204,1:103,69,207,1:103,70,210,1:103,71,213,1:103,72,216,1:103,72,219,1:103,73,222,1:103,73,225,1:102,74,228,1:102,75,231,1:102,76,234,1:102,77,237,1:101,77,240,1:101,78,243,1:101,79,246,1:102,79,249,1:101,81,252,1:101,82,255,1:101,83,258,1:101,85,261,1:100,85,264,1:99,87,267,1:99,88,270,1:99,88,273,1:99,90,276,1:99,91,279,1:99,93,282,1:99,94,285,1:99,95,288,1:98,97,291,1:98,98,294,1:98,99,297,1:98,101,300,1:98,102,303,1:98,104,306,1:97,105,309,1:97,106,312,1:97,107,315,1:97,109,318,1:97,110,321,1:97,111,324,1:96,112,327,1:96,113,330,1:95,114,333,1:95,114,336,1:95,115,339,1:94,115,342,1:94,115,345,1:94,115,348,1:93,116,351,1:93,116,354,1:93,116,357,1:92,117,360,1:92,116,363,1:92,116,366,1:91,116,369,1:91,116,372,1:90,115,375,1:90,115,378,1:90,114,381,1:90,114,384,1:90,114,387,1:89,114,390,1:88,113,393,1:88,112,396,1:88,112,399,1:88,111,402,1:87,111,405,1:87,110,408,1:87,110,411,1:87,109,414,1:87,108,417,1:87,107,420,1:86,107,423,1:86,107,426,1:87,106,429,1:87,106,432,1:87,104,435,1:87,104,438,1:88,103,441,1:87,103,444,1:87,103,447,1:87,102,450,1:87,102,453,1:87,102,456,1:87,102,459,1:87,102,462,1:87,101,465,1:87,101,468,1:87,101,471,1:87,100,474,1:87,100,477,1:87,100,480,1:87,100,483,1:87,100,486,1:87,101,489,1:87,105,492,1:87,108,495,1:87,109,498,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject pain_pilot_1
if not os.path.isdir(path_results + '/T1/pain_pilot_1'):
    os.makedirs(path_results + '/T1/pain_pilot_1')
os.chdir(path_results + '/T1/pain_pilot_1')
sct.run('dcm2nii -o . -r N '+new_folder+'/pain_pilot_1/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 91,89,108,20:91,85,141,19:91,82,171,18:91,79,199,17:91,79,225,16:91,77,249,15:91,77,274,14:91,81,297,13:91,86,319,12:91,91,341,11:91,97,362,10:93,104,383,9:93,107,403,8:93,108,420,7:91,108,436,6:90,108,451,5:90,109,468,4:89,108,486,3:90,100,500,2:91,100,519,1:90,102,539,51:89,108,564,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 30 -end 578')
f_crop = open('crop.txt', 'w')
f_crop.write('30,578,100,480')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 87,83,0,1:87,83,3,1:87,83,6,1:87,83,9,1:88,83,12,1:88,83,15,1:88,83,18,1:88,83,21,1:88,82,24,1:88,82,27,1:88,82,30,1:89,82,33,1:89,82,36,1:89,81,39,1:89,80,42,1:90,80,45,1:90,79,48,1:90,79,51,1:90,79,54,1:90,79,57,1:91,79,60,1:91,79,63,1:91,79,66,1:91,78,69,1:91,78,72,1:91,78,75,1:91,78,78,1:91,78,81,1:91,77,84,1:91,77,87,1:91,76,90,1:91,76,93,1:91,75,96,1:91,75,99,1:91,75,102,1:91,75,105,1:91,75,108,1:91,75,111,1:91,74,114,1:91,74,117,1:90,74,120,1:90,74,123,1:90,74,126,1:90,74,129,1:91,74,132,1:91,73,135,1:91,73,138,1:91,73,141,1:91,73,144,1:91,73,147,1:91,72,150,1:91,72,153,1:91,72,156,1:91,72,159,1:91,72,162,1:91,72,165,1:91,71,168,1:91,71,171,1:91,71,174,1:91,71,177,1:91,71,180,1:91,71,183,1:91,71,186,1:91,71,189,1:91,71,192,1:91,71,195,1:91,71,198,1:91,71,201,1:91,71,204,1:91,70,207,1:91,70,210,1:91,70,213,1:91,70,216,1:91,70,219,1:91,70,222,1:91,70,225,1:91,71,228,1:91,71,231,1:91,71,234,1:91,71,237,1:90,71,240,1:90,72,243,1:90,72,246,1:90,72,249,1:90,73,252,1:91,74,255,1:91,74,258,1:91,74,261,1:91,74,264,1:90,75,267,1:90,75,270,1:90,76,273,1:90,76,276,1:90,77,279,1:90,78,282,1:91,78,285,1:91,79,288,1:91,79,291,1:91,80,294,1:91,81,297,1:91,81,300,1:92,83,303,1:92,83,306,1:91,84,309,1:92,84,312,1:92,85,315,1:92,86,318,1:92,87,321,1:92,88,324,1:92,88,327,1:92,88,330,1:93,89,333,1:93,90,336,1:93,90,339,1:93,91,342,1:93,92,345,1:93,93,348,1:93,94,351,1:93,94,354,1:93,95,357,1:93,95,360,1:93,96,363,1:93,97,366,1:93,97,369,1:93,98,372,1:93,99,375,1:92,99,378,1:92,99,381,1:92,99,384,1:92,100,387,1:92,100,390,1:92,100,393,1:91,100,396,1:91,100,399,1:91,100,402,1:91,100,405,1:91,100,408,1:90,100,411,1:90,100,414,1:90,100,417,1:90,99,420,1:90,100,423,1:90,100,426,1:90,100,429,1:90,100,432,1:90,99,435,1:89,99,438,1:89,99,441,1:89,99,444,1:89,99,447,1:89,99,450,1:89,98,453,1:89,97,456,1:89,97,459,1:90,97,462,1:90,96,465,1:90,96,468,1:90,94,471,1:90,94,474,1:91,94,477,1:91,94,480,1:92,93,483,1:92,94,486,1:92,94,489,1:92,93,492,1:92,91,495,1:91,92,498,1:91,92,501,1:91,93,504,1:90,93,507,1:90,93,510,1:90,93,513,1:90,94,516,1:90,94,519,1:90,95,522,1:90,95,525,1:89,95,528,1:89,95,531,1:89,95,534,1:89,96,537,1:89,97,540,1:89,99,543,1:89,104,546,1:88,109,548,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject pain_pilot_2
if not os.path.isdir(path_results + '/T1/pain_pilot_2'):
    os.makedirs(path_results + '/T1/pain_pilot_2')
os.chdir(path_results + '/T1/pain_pilot_2')
sct.run('dcm2nii -o . -r N '+new_folder+'/pain_pilot_2/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 89,82,55,20:88,79,88,19:87,78,116,18:87,77,143,17:86,77,167,16:86,77,192,15:86,77,217,14:86,79,241,13:86,82,264,12:86,86,287,11:86,93,307,10:87,101,327,9:88,108,348,8:90,111,367,7:90,115,386,6:90,113,404,5:88,113,423,4:86,114,443,3:85,107,457,2:84,107,479,1:86,110,502,51:89,116,526,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 2 -end 543')
f_crop = open('crop.txt', 'w')
f_crop.write('2,543,40,460')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 93,77,0,1:93,77,3,1:92,77,6,1:92,76,9,1:92,75,12,1:92,75,15,1:91,74,18,1:91,74,21,1:91,73,24,1:91,73,27,1:90,73,30,1:90,74,33,1:90,73,36,1:90,73,39,1:89,73,42,1:89,73,45,1:89,72,48,1:89,72,51,1:89,72,54,1:89,72,57,1:89,72,60,1:89,72,63,1:89,72,66,1:89,72,69,1:89,72,72,1:89,72,75,1:88,72,78,1:88,72,81,1:88,72,84,1:88,72,87,1:88,72,90,1:88,72,93,1:88,72,96,1:88,72,99,1:88,72,102,1:88,72,105,1:88,72,108,1:88,72,111,1:88,72,114,1:88,72,117,1:87,71,120,1:87,71,123,1:87,71,126,1:87,71,129,1:87,71,132,1:87,71,135,1:87,71,138,1:86,72,141,1:86,72,144,1:86,72,147,1:86,71,150,1:86,71,153,1:86,71,156,1:86,70,159,1:86,70,162,1:86,70,165,1:86,70,168,1:86,70,171,1:86,70,174,1:86,70,177,1:86,70,180,1:86,71,183,1:86,71,186,1:86,71,189,1:86,71,192,1:86,71,195,1:86,71,198,1:86,71,201,1:86,71,204,1:86,71,207,1:86,71,210,1:86,72,213,1:86,72,216,1:86,72,219,1:86,72,222,1:86,72,225,1:86,72,228,1:86,72,231,1:86,72,234,1:86,73,237,1:86,73,240,1:86,73,243,1:86,74,246,1:86,74,249,1:86,74,252,1:86,75,255,1:86,75,258,1:86,76,261,1:86,76,264,1:86,77,267,1:86,78,270,1:86,78,273,1:86,79,276,1:86,80,279,1:86,80,282,1:86,81,285,1:86,82,288,1:87,82,291,1:87,83,294,1:86,84,297,1:87,84,300,1:87,85,303,1:87,87,306,1:87,88,309,1:87,89,312,1:87,89,315,1:87,90,318,1:87,92,321,1:87,92,324,1:87,93,327,1:87,94,330,1:88,94,333,1:88,95,336,1:88,96,339,1:88,97,342,1:88,98,345,1:89,99,348,1:89,100,351,1:89,101,354,1:89,102,357,1:89,103,360,1:89,103,363,1:89,104,366,1:89,105,369,1:89,105,372,1:89,105,375,1:90,106,378,1:90,106,381,1:90,106,384,1:89,106,387,1:89,106,390,1:89,106,393,1:89,106,396,1:89,105,399,1:89,105,402,1:88,105,405,1:88,105,408,1:88,105,411,1:88,105,414,1:88,105,417,1:88,105,420,1:88,104,423,1:88,104,426,1:87,104,429,1:87,104,432,1:86,103,435,1:86,103,438,1:86,103,441,1:85,103,444,1:85,102,447,1:85,102,450,1:85,102,453,1:85,102,456,1:85,101,459,1:84,101,462,1:84,100,465,1:84,100,468,1:84,100,471,1:83,100,474,1:83,100,477,1:83,100,480,1:83,100,483,1:83,100,486,1:83,99,489,1:83,99,492,1:83,99,495,1:83,100,498,1:84,100,501,1:84,102,504,1:85,102,507,1:86,103,510,1:86,103,513,1:87,104,516,1:87,105,519,1:88,106,522,1:88,107,525,1:88,108,528,1:89,109,531,1:89,112,534,1:90,114,537,1:90,116,540,1:90,118,541,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject pain_pilot_4
if not os.path.isdir(path_results + '/T1/pain_pilot_4'):
    os.makedirs(path_results + '/T1/pain_pilot_4')
os.chdir(path_results + '/T1/pain_pilot_4')
sct.run('dcm2nii -o . -r N '+new_folder+'/pain_pilot_4/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 77,76,87,20:78,71,119,19:78,70,150,18:79,69,176,17:79,68,202,16:80,67,228,15:81,68,253,14:82,72,277,13:83,77,300,12:85,82,322,11:86,90,343,10:86,99,362,9:85,107,381,8:83,111,398,7:82,113,415,6:83,114,433,5:82,114,452,4:82,116,472,3:82,112,488,2:82,116,511,1:82,124,538,51:82,130,561,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 10 -end 579')
f_crop = open('crop.txt', 'w')
f_crop.write('10,579,75,500')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 73,75,0,1:74,74,3,1:74,73,6,1:74,73,9,1:74,72,12,1:74,72,15,1:74,71,18,1:74,71,21,1:74,70,24,1:75,70,27,1:75,70,30,1:75,69,33,1:75,67,36,1:75,66,39,1:75,66,42,1:75,66,45,1:76,65,48,1:76,64,51,1:76,63,54,1:76,63,57,1:76,64,60,1:76,65,63,1:76,65,66,1:76,65,69,1:77,65,72,1:77,65,75,1:77,65,78,1:77,65,81,1:77,64,84,1:77,64,87,1:77,64,90,1:77,64,93,1:78,64,96,1:78,64,99,1:78,64,102,1:78,64,105,1:78,64,108,1:78,64,111,1:79,64,114,1:79,64,117,1:79,64,120,1:78,64,123,1:78,64,126,1:78,64,129,1:78,64,132,1:79,64,135,1:79,64,138,1:79,64,141,1:79,64,144,1:79,64,147,1:79,63,150,1:80,63,153,1:80,63,156,1:80,63,159,1:80,63,162,1:80,63,165,1:80,63,168,1:80,63,171,1:80,62,174,1:80,62,177,1:80,62,180,1:80,62,183,1:80,62,186,1:80,62,189,1:80,62,192,1:80,62,195,1:80,62,198,1:80,62,201,1:80,62,204,1:81,62,207,1:81,62,210,1:81,62,213,1:81,62,216,1:81,62,219,1:81,62,222,1:81,62,225,1:81,62,228,1:81,63,231,1:81,63,234,1:81,63,237,1:81,63,240,1:81,64,243,1:82,64,246,1:82,64,249,1:82,64,252,1:82,65,255,1:82,65,258,1:82,65,261,1:82,66,264,1:82,66,267,1:83,67,270,1:83,68,273,1:83,68,276,1:83,69,279,1:83,70,282,1:83,70,285,1:84,71,288,1:84,72,291,1:84,73,294,1:85,73,297,1:85,75,300,1:85,76,303,1:85,77,306,1:85,77,309,1:85,78,312,1:86,79,315,1:86,80,318,1:86,81,321,1:86,82,324,1:86,83,327,1:86,84,330,1:86,85,333,1:86,86,336,1:86,87,339,1:86,88,342,1:86,89,345,1:86,90,348,1:86,91,351,1:87,91,354,1:86,92,357,1:86,93,360,1:86,95,363,1:85,96,366,1:85,97,369,1:85,98,372,1:85,99,375,1:85,99,378,1:85,100,381,1:85,101,384,1:84,101,387,1:84,102,390,1:84,102,393,1:84,103,396,1:83,104,399,1:83,104,402,1:83,105,405,1:83,105,408,1:83,105,411,1:83,105,414,1:84,106,417,1:83,106,420,1:83,106,423,1:83,106,426,1:83,106,429,1:83,107,432,1:83,107,435,1:83,107,438,1:83,107,441,1:83,107,444,1:83,107,447,1:82,107,450,1:82,107,453,1:82,107,456,1:82,107,459,1:82,107,462,1:82,107,465,1:82,107,468,1:82,107,471,1:82,108,474,1:82,108,477,1:82,108,480,1:82,108,483,1:82,108,486,1:82,108,489,1:82,108,492,1:82,109,495,1:82,109,498,1:82,110,501,1:82,111,504,1:82,111,507,1:82,112,510,1:82,112,513,1:82,112,516,1:82,112,519,1:81,113,522,1:82,114,525,1:82,114,528,1:82,114,531,1:82,115,534,1:82,116,537,1:82,116,540,1:82,117,543,1:82,118,546,1:82,118,549,1:82,118,552,1:82,119,555,1:82,120,558,1:82,121,561,1:82,125,564,1:82,126,567,1:82,128,569,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')

"""
# Preprocessing for subject TM - removed because of stitching issue
if not os.path.isdir(path_results + '/T1/TM'):
    os.makedirs(path_results + '/T1/TM')
os.chdir(path_results + '/T1/TM')
sct.run('dcm2nii -o . -r N '+new_folder+'/TM/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 100,100,48,20:99,92,79,19:99,83,111,18:98,79,141,17:97,76,168,16:97,75,195,15:97,75,221,14:97,80,246,13:96,87,271,12:97,94,294,11:95,105,314,10:95,119,332,9:94,130,348,8:92,134,372,7:92,135,390,6:92,135,408,5:92,133,426,4:92,131,447,3:89,111,510,2:89,112,537,1')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 1,2 -start 14,12 -end 252,556')
f_crop = open('crop.txt', 'w')
f_crop.write('12,556,0,max,14,252')
f_crop.close()
#sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x ')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
#os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')
"""

# Preprocessing for subject errsm_20
if not os.path.isdir(path_results + '/T1/errsm_20'):
    os.makedirs(path_results + '/T1/errsm_20')
os.chdir(path_results + '/T1/errsm_20')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_20/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 86,74,139,20:86,65,173,19:86,58,204,18:86,55,234,17:85,54,263,16:84,55,291,15:84,60,318,14:83,67,344,13:83,79,367,12:83,91,388,11:83,107,404,10:83,124,421,9:84,138,437,8:85,147,453,7:85,148,469,6:86,148,486,5:86,147,503,4:86,141,521,3:87,133,535,2:87,130,558,1:87,130,583,51:87,137,612,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 100 -end 630')
f_crop = open('crop.txt', 'w')
f_crop.write('100,630,45,390')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 86,73,0,1:86,72,3,1:86,71,6,1:87,70,9,1:87,70,12,1:86,69,15,1:86,68,18,1:86,67,21,1:87,67,24,1:87,66,27,1:87,66,30,1:87,66,33,1:87,64,36,1:87,63,39,1:87,63,42,1:87,62,45,1:86,62,48,1:86,60,51,1:86,60,54,1:86,60,57,1:87,59,60,1:87,59,63,1:86,58,66,1:86,57,69,1:86,57,72,1:86,57,75,1:86,56,78,1:86,55,81,1:86,55,84,1:86,55,87,1:86,53,90,1:86,53,93,1:86,53,96,1:86,53,99,1:86,52,102,1:86,52,105,1:86,52,108,1:86,51,111,1:86,50,114,1:86,50,117,1:85,50,120,1:85,50,123,1:86,49,126,1:85,49,129,1:86,48,132,1:86,49,135,1:86,49,138,1:86,48,141,1:86,48,144,1:86,48,147,1:86,48,150,1:86,48,153,1:86,47,156,1:85,47,159,1:85,47,162,1:85,47,165,1:85,47,168,1:85,47,171,1:85,47,174,1:85,47,177,1:84,48,180,1:85,48,183,1:85,48,186,1:84,49,189,1:84,49,192,1:84,49,195,1:84,49,198,1:84,50,201,1:84,50,204,1:84,51,207,1:84,52,210,1:84,52,213,1:84,53,216,1:84,53,219,1:84,54,222,1:84,55,225,1:83,55,228,1:83,57,231,1:83,58,234,1:83,59,237,1:83,60,240,1:83,61,243,1:83,62,246,1:83,64,249,1:83,65,252,1:83,67,255,1:82,68,258,1:82,69,261,1:83,70,264,1:83,72,267,1:83,75,270,1:83,76,273,1:83,77,276,1:84,79,279,1:83,80,282,1:83,82,285,1:84,84,288,1:84,86,291,1:84,89,294,1:84,91,297,1:83,93,300,1:83,96,303,1:83,99,306,1:83,101,309,1:83,105,312,1:83,108,315,1:83,111,318,1:83,113,321,1:83,116,324,1:83,117,327,1:83,120,330,1:83,122,333,1:83,125,336,1:84,127,339,1:84,129,342,1:84,131,345,1:84,132,348,1:84,134,351,1:84,135,354,1:84,136,357,1:84,137,360,1:85,137,363,1:85,138,366,1:85,138,369,1:85,139,372,1:85,139,375,1:85,139,378,1:85,139,381,1:86,139,384,1:86,138,387,1:86,138,390,1:86,138,393,1:86,137,396,1:86,136,399,1:87,135,402,1:87,135,405,1:86,134,408,1:86,133,411,1:87,133,414,1:87,132,417,1:87,132,420,1:87,130,423,1:87,130,426,1:87,129,429,1:87,128,432,1:87,127,435,1:87,127,438,1:87,126,441,1:88,125,444,1:88,125,447,1:88,124,450,1:88,124,453,1:88,124,456,1:87,124,459,1:87,123,462,1:87,122,465,1:87,122,468,1:88,120,471,1:88,120,474,1:88,119,477,1:88,120,480,1:88,121,483,1:88,121,486,1:88,121,489,1:88,122,492,1:88,122,495,1:88,122,498,1:88,123,501,1:88,123,504,1:88,124,507,1:88,124,510,1:88,125,513,1:88,126,516,1:88,127,519,1:87,129,522,1:88,134,525,1:87,137,528,1:86,138,530,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject pain_pilot_3
if not os.path.isdir(path_results + '/T1/pain_pilot_3'):
    os.makedirs(path_results + '/T1/pain_pilot_3')
os.chdir(path_results + '/T1/pain_pilot_3')
sct.run('dcm2nii -o . -r N '+new_folder+'/pain_pilot_3/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 78,60,116,20:78,59,148,19:80,61,178,18:82,62,206,17:82,63,231,16:84,64,257,15:85,66,282,14:87,70,306,13:87,76,328,12:89,82,350,11:89,91,370,10:89,103,386,9:89,111,405,8:88,118,421,7:88,121,438,6:88,127,454,5:87,131,470,4:88,132,487,3:88,124,502,2:89,125,524,1:90,128,546,51:93,132,573,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start  74 -end 592 ')
f_crop = open('crop.txt', 'w')
f_crop.write('74,592,65,450')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 76,50,0,1:76,49,3,1:76,48,6,1:76,48,9,1:76,48,12,1:76,47,15,1:75,47,18,1:77,46,21,1:77,48,24,1:77,49,27,1:78,49,30,1:78,49,33,1:78,49,36,1:78,49,39,1:78,49,42,1:78,49,45,1:78,49,48,1:78,48,51,1:78,48,54,1:78,48,57,1:78,48,60,1:78,48,63,1:78,48,66,1:78,49,69,1:78,49,72,1:78,49,75,1:78,49,78,1:79,50,81,1:79,50,84,1:79,50,87,1:79,50,90,1:79,51,93,1:80,51,96,1:80,51,99,1:80,51,102,1:80,51,105,1:80,51,108,1:81,52,111,1:81,52,114,1:81,53,117,1:81,53,120,1:81,53,123,1:81,53,126,1:81,53,129,1:82,53,132,1:82,53,135,1:82,53,138,1:82,54,141,1:82,54,144,1:83,54,147,1:83,54,150,1:83,54,153,1:83,55,156,1:83,55,159,1:83,55,162,1:83,55,165,1:83,55,168,1:84,55,171,1:84,55,174,1:84,55,177,1:84,56,180,1:84,56,183,1:84,56,186,1:84,57,189,1:84,57,192,1:85,57,195,1:85,58,198,1:85,58,201,1:86,59,204,1:86,59,207,1:86,59,210,1:86,59,213,1:86,60,216,1:86,61,219,1:86,61,222,1:86,61,225,1:87,62,228,1:87,63,231,1:87,64,234,1:87,65,237,1:87,65,240,1:87,66,243,1:88,67,246,1:88,68,249,1:88,68,252,1:88,69,255,1:88,70,258,1:88,71,261,1:88,72,264,1:88,72,267,1:88,74,270,1:89,74,273,1:89,75,276,1:89,77,279,1:89,78,282,1:89,79,285,1:89,80,288,1:89,81,291,1:89,83,294,1:88,83,297,1:89,86,300,1:90,86,303,1:90,88,306,1:90,90,309,1:90,92,312,1:89,93,315,1:89,95,318,1:89,96,321,1:89,98,324,1:89,100,327,1:89,101,330,1:89,103,333,1:89,104,336,1:89,106,339,1:89,107,342,1:90,108,345,1:90,109,348,1:89,111,351,1:89,112,354,1:89,113,357,1:89,114,360,1:89,114,363,1:89,116,366,1:89,116,369,1:89,117,372,1:89,118,375,1:89,118,378,1:89,119,381,1:89,120,384,1:89,120,387,1:89,121,390,1:88,121,393,1:88,121,396,1:88,121,399,1:88,121,402,1:88,121,405,1:88,121,408,1:88,121,411,1:88,121,414,1:89,121,417,1:89,121,420,1:88,119,423,1:88,119,426,1:88,118,429,1:88,118,432,1:88,118,435,1:88,118,438,1:88,118,441,1:88,118,444,1:89,119,447,1:89,119,450,1:90,119,453,1:91,119,456,1:91,117,459,1:91,117,462,1:91,117,465,1:91,117,468,1:91,117,471,1:91,117,474,1:92,118,477,1:92,118,480,1:93,118,483,1:93,118,486,1:93,119,489,1:93,120,492,1:94,120,495,1:94,120,498,1:95,121,501,1:95,122,504,1:94,123,507,1:95,125,510,1:95,128,513,1:95,129,516,1:95,131,518,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_34
if not os.path.isdir(path_results + '/T1/errsm_34'):
    os.makedirs(path_results + '/T1/errsm_34')
os.chdir(path_results + '/T1/errsm_34')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_34/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 81,79,120,20:82,76,153,19:85,73,183,18:86,70,211,17:87,67,236,16:89,65,261,15:89,66,286,14:90,68,308,13:90,73,332,12:90,79,354,11:91,86,375,10:91,98,394,9:91,108,413,8:90,114,430,7:89,117,448,6:87,120,466,5:86,126,484,4:85,131,504,3:84,127,521,2:84,130,543,1:83,134,569,51:83,138,595,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 77 -end 615')
f_crop = open('crop.txt', 'w')
f_crop.write('77,615,60,465')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 80,71,0,1:80,70,3,1:80,69,6,1:80,69,9,1:80,69,12,1:80,69,15,1:80,69,18,1:80,69,21,1:80,69,24,1:80,69,27,1:80,69,30,1:81,69,33,1:81,69,36,1:81,69,39,1:81,69,42,1:82,69,45,1:82,69,48,1:82,68,51,1:82,68,54,1:82,68,57,1:82,69,60,1:82,69,63,1:83,69,66,1:83,69,69,1:83,69,72,1:83,68,75,1:83,68,78,1:84,68,81,1:84,68,84,1:84,68,87,1:84,67,90,1:84,67,93,1:84,67,96,1:85,66,99,1:85,66,102,1:85,65,105,1:85,65,108,1:85,65,111,1:85,64,114,1:85,64,117,1:85,65,120,1:86,65,123,1:86,64,126,1:86,64,129,1:86,64,132,1:86,64,135,1:86,63,138,1:87,63,141,1:87,63,144,1:87,63,147,1:88,62,150,1:88,62,153,1:88,61,156,1:88,61,159,1:88,61,162,1:88,60,165,1:88,60,168,1:89,60,171,1:89,60,174,1:89,60,177,1:89,60,180,1:89,59,183,1:89,59,186,1:89,59,189,1:89,59,192,1:89,59,195,1:89,59,198,1:89,59,201,1:89,59,204,1:89,59,207,1:89,59,210,1:90,59,213,1:90,60,216,1:89,60,219,1:90,61,222,1:90,61,225,1:90,62,228,1:90,62,231,1:90,62,234,1:90,63,237,1:90,64,240,1:90,64,243,1:90,65,246,1:90,65,249,1:90,66,252,1:90,67,255,1:90,67,258,1:91,68,261,1:91,68,264,1:91,69,267,1:91,70,270,1:91,71,273,1:91,72,276,1:91,73,279,1:91,74,282,1:91,75,285,1:91,76,288,1:91,77,291,1:91,79,294,1:91,79,297,1:91,80,300,1:92,83,303,1:92,83,306,1:91,85,309,1:91,87,312,1:91,88,315,1:91,90,318,1:91,91,321,1:91,92,324,1:91,94,327,1:91,95,330,1:91,97,333,1:91,98,336,1:91,100,339,1:91,100,342,1:91,103,345,1:90,103,348,1:90,104,351,1:90,105,354,1:90,106,357,1:90,106,360,1:89,107,363,1:89,108,366,1:89,109,369,1:89,109,372,1:89,110,375,1:88,111,378,1:88,112,381,1:88,112,384,1:88,113,387,1:88,114,390,1:87,115,393,1:87,115,396,1:87,116,399,1:87,116,402,1:87,117,405,1:86,118,408,1:86,118,411,1:86,119,414,1:86,119,417,1:86,120,420,1:85,120,423,1:85,121,426,1:85,121,429,1:85,122,432,1:85,122,435,1:85,122,438,1:85,122,441,1:84,122,444,1:85,122,447,1:85,122,450,1:85,123,453,1:84,123,456,1:84,123,459,1:84,123,462,1:84,124,465,1:84,124,468,1:85,124,471,1:85,123,474,1:85,123,477,1:85,123,480,1:85,124,483,1:85,125,486,1:85,125,489,1:85,126,492,1:85,126,495,1:85,127,498,1:85,127,501,1:85,127,504,1:85,127,507,1:85,127,510,1:85,127,513,1:85,126,516,1:85,127,519,1:84,128,522,1:84,129,525,1:84,130,528,1:84,134,531,1:84,136,534,1:83,137,537,1:83,138,538,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_35
if not os.path.isdir(path_results + '/T1/errsm_35'):
    os.makedirs(path_results + '/T1/errsm_35')
os.chdir(path_results + '/T1/errsm_35')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_35/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 89,73,95,20:88,68,126,19:87,63,156,18:87,61,184,17:86,59,210,16:86,59,235,15:85,60,260,14:85,64,283,13:84,69,305,12:84,73,326,11:84,78,345,10:84,86,363,9:83,96,380,8:83,99,396,7:82,102,411,6:83,104,426,5:83,107,442,4:84,109,460,3:85,105,477,2:86,109,498,1:87,117,519,51:88,129,543,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 56 -end 565')
f_crop = open('crop.txt', 'w')
f_crop.write('56,565,55,435')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 91,63,0,1:91,63,3,1:91,62,6,1:91,61,9,1:91,61,12,1:91,61,15,1:91,61,18,1:90,61,21,1:90,61,24,1:90,61,27,1:90,60,30,1:89,59,33,1:89,59,36,1:89,58,39,1:89,58,42,1:89,58,45,1:89,58,48,1:88,58,51,1:88,58,54,1:88,58,57,1:88,57,60,1:88,57,63,1:88,57,66,1:88,57,69,1:88,57,72,1:88,56,75,1:88,56,78,1:88,56,81,1:88,56,84,1:88,56,87,1:88,56,90,1:87,56,93,1:87,55,96,1:87,55,99,1:87,55,102,1:87,55,105,1:87,55,108,1:87,54,111,1:87,54,114,1:87,54,117,1:87,53,120,1:87,53,123,1:87,53,126,1:87,53,129,1:87,53,132,1:86,52,135,1:86,52,138,1:86,52,141,1:86,52,144,1:86,53,147,1:86,53,150,1:86,53,153,1:86,53,156,1:86,53,159,1:85,53,162,1:85,53,165,1:85,53,168,1:85,53,171,1:85,53,174,1:85,53,177,1:85,53,180,1:85,53,183,1:85,54,186,1:85,54,189,1:85,54,192,1:85,54,195,1:85,54,198,1:85,55,201,1:85,55,204,1:85,55,207,1:85,55,210,1:85,56,213,1:84,56,216,1:84,57,219,1:84,57,222,1:84,57,225,1:84,58,228,1:84,58,231,1:84,59,234,1:84,59,237,1:84,59,240,1:84,60,243,1:84,61,246,1:84,62,249,1:84,62,252,1:84,63,255,1:84,63,258,1:84,65,261,1:84,66,264,1:84,66,267,1:84,66,270,1:84,67,273,1:84,68,276,1:84,68,279,1:84,69,282,1:84,71,285,1:84,72,288,1:84,72,291,1:84,73,294,1:84,74,297,1:83,75,300,1:83,76,303,1:83,77,306,1:83,78,309,1:83,79,312,1:83,81,315,1:83,81,318,1:83,82,321,1:83,84,324,1:83,85,327,1:83,86,330,1:83,88,333,1:83,89,336,1:82,90,339,1:82,91,342,1:82,92,345,1:82,93,348,1:82,93,351,1:82,94,354,1:82,95,357,1:82,95,360,1:82,95,363,1:82,96,366,1:83,96,369,1:83,96,372,1:83,96,375,1:83,97,378,1:83,98,381,1:83,98,384,1:83,98,387,1:83,98,390,1:83,99,393,1:83,99,396,1:84,99,399,1:84,99,402,1:84,99,405,1:84,99,408,1:84,99,411,1:84,99,414,1:85,99,417,1:85,99,420,1:85,99,423,1:86,99,426,1:86,99,429,1:86,99,432,1:86,101,435,1:86,101,438,1:86,102,441,1:86,103,444,1:87,104,447,1:87,105,450,1:87,104,453,1:88,104,456,1:88,105,459,1:88,106,462,1:88,107,465,1:88,108,468,1:89,109,471,1:89,110,474,1:89,111,477,1:88,113,480,1:88,114,483,1:88,115,486,1:88,116,489,1:88,118,492,1:89,121,495,1:90,124,498,1:89,127,501,1:89,128,504,1:89,129,507,1:89,129,509,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject pain_pilot_7
if not os.path.isdir(path_results + '/T1/pain_pilot_7'):
    os.makedirs(path_results + '/T1/pain_pilot_7')
os.chdir(path_results + '/T1/pain_pilot_7')
sct.run('dcm2nii -o . -r N '+new_folder+'/pain_pilot_7/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 94,84,96,20:92,77,128,19:91,71,156,18:88,64,183,17:86,60,209,16:84,56,234,15:83,56,259,14:82,59,284,13:81,64,308,12:80,71,331,11:80,80,351,10:79,90,372,9:78,102,392,8:78,112,411,7:81,117,429,6:82,122,448,5:83,128,466,4:85,132,486,3:85,124,502,2:86,125,523,1:85,124,549,51:85,131,571,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 57 -end 590')
f_crop = open('crop.txt', 'w')
f_crop.write('57,590,60,465')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 96,79,0,1:96,79,3,1:96,78,6,1:96,77,9,1:96,77,12,1:96,76,15,1:95,76,18,1:95,76,21,1:94,76,24,1:94,75,27,1:94,75,30,1:94,73,33,1:93,73,36,1:93,72,39,1:93,72,42,1:93,72,45,1:93,71,48,1:93,71,51,1:93,70,54,1:93,70,57,1:93,69,60,1:93,69,63,1:93,68,66,1:92,67,69,1:92,67,72,1:92,66,75,1:92,66,78,1:92,65,81,1:91,65,84,1:91,64,87,1:91,64,90,1:91,63,93,1:91,63,96,1:90,62,99,1:90,62,102,1:90,61,105,1:90,61,108,1:90,61,111,1:89,60,114,1:89,59,117,1:89,59,120,1:89,58,123,1:88,58,126,1:88,58,129,1:88,57,132,1:88,56,135,1:87,55,138,1:87,55,141,1:87,55,144,1:86,55,147,1:86,55,150,1:86,54,153,1:86,54,156,1:86,53,159,1:85,53,162,1:85,52,165,1:85,52,168,1:85,52,171,1:84,52,174,1:84,52,177,1:84,51,180,1:84,51,183,1:84,51,186,1:84,51,189,1:83,51,192,1:83,51,195,1:83,51,198,1:83,51,201,1:83,51,204,1:83,51,207,1:82,51,210,1:82,52,213,1:82,52,216,1:82,53,219,1:82,53,222,1:82,54,225,1:82,54,228,1:81,54,231,1:81,54,234,1:81,55,237,1:81,55,240,1:81,56,243,1:81,57,246,1:80,58,249,1:81,58,252,1:80,60,255,1:80,61,258,1:80,61,261,1:80,63,264,1:80,64,267,1:80,65,270,1:80,66,273,1:80,67,276,1:80,68,279,1:80,69,282,1:79,70,285,1:79,71,288,1:79,72,291,1:79,73,294,1:79,74,297,1:79,76,300,1:79,77,303,1:79,79,306,1:79,80,309,1:79,81,312,1:79,83,315,1:79,85,318,1:79,86,321,1:78,87,324,1:78,88,327,1:78,90,330,1:78,92,333,1:78,93,336,1:78,95,339,1:78,96,342,1:78,97,345,1:78,99,348,1:79,100,351,1:78,102,354,1:79,103,357,1:79,104,360,1:79,105,363,1:79,106,366,1:79,107,369,1:80,109,372,1:80,110,375,1:80,110,378,1:81,112,381,1:81,113,384,1:81,113,387,1:81,114,390,1:82,115,393,1:83,116,396,1:83,116,399,1:83,116,402,1:83,118,405,1:83,118,408,1:83,118,411,1:83,119,414,1:83,119,417,1:83,119,420,1:83,120,423,1:83,120,426,1:84,120,429,1:84,120,432,1:84,120,435,1:84,120,438,1:84,120,441,1:85,120,444,1:85,120,447,1:85,120,450,1:85,120,453,1:86,120,456,1:86,120,459,1:86,120,462,1:86,119,465,1:86,119,468,1:86,119,471,1:86,119,474,1:86,119,477,1:85,117,480,1:85,117,483,1:85,117,486,1:85,117,489,1:85,116,492,1:85,117,495,1:85,117,498,1:85,118,501,1:85,119,504,1:84,120,507,1:84,120,510,1:84,120,513,1:84,121,516,1:84,121,519,1:84,123,522,1:84,126,525,1:84,127,528,1:85,129,531,1:85,129,533,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_03
if not os.path.isdir(path_results + '/T1/errsm_03'):
    os.makedirs(path_results + '/T1/errsm_03')
os.chdir(path_results + '/T1/errsm_03')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_03/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 87,83,102,20:88,81,133,19:88,79,162,18:89,76,189,17:90,76,214,16:91,77,239,15:91,78,263,14:92,81,287,13:92,85,309,12:92,91,331,11:92,100,351,10:93,113,371,9:93,125,388,8:92,131,404,7:91,133,419,6:91,132,434,5:91,130,451,4:91,131,468,3:91,130,489,2:91,129,505,1:89,133,530,51:89,140,554,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 58 -end 574')
f_crop = open('crop.txt', 'w')
f_crop.write('58,574,70,445')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 87,72,0,1:87,72,3,1:87,71,6,1:87,71,9,1:87,71,12,1:87,71,15,1:87,71,18,1:87,71,21,1:87,70,24,1:87,70,27,1:87,70,30,1:88,71,33,1:88,72,36,1:88,72,39,1:88,72,42,1:88,72,45,1:88,72,48,1:88,72,51,1:88,72,54,1:88,72,57,1:88,72,60,1:88,73,63,1:88,73,66,1:88,72,69,1:88,72,72,1:89,72,75,1:89,72,78,1:89,72,81,1:89,72,84,1:89,72,87,1:89,72,90,1:89,72,93,1:89,71,96,1:89,71,99,1:89,71,102,1:89,71,105,1:89,71,108,1:89,70,111,1:89,70,114,1:89,70,117,1:89,69,120,1:89,69,123,1:89,69,126,1:89,69,129,1:90,69,132,1:90,69,135,1:90,69,138,1:90,69,141,1:90,69,144,1:90,69,147,1:90,69,150,1:90,69,153,1:90,69,156,1:91,69,159,1:91,69,162,1:91,69,165,1:91,69,168,1:91,69,171,1:91,69,174,1:91,69,177,1:91,69,180,1:91,69,183,1:91,70,186,1:91,70,189,1:91,70,192,1:91,71,195,1:91,71,198,1:91,71,201,1:91,72,204,1:91,72,207,1:91,72,210,1:91,72,213,1:92,73,216,1:92,73,219,1:92,74,222,1:92,74,225,1:92,75,228,1:92,75,231,1:92,76,234,1:92,76,237,1:92,77,240,1:92,78,243,1:92,78,246,1:93,79,249,1:93,79,252,1:92,80,255,1:92,81,258,1:93,82,261,1:93,83,264,1:93,84,267,1:93,85,270,1:93,85,273,1:93,87,276,1:93,88,279,1:93,89,282,1:93,90,285,1:93,91,288,1:93,92,291,1:93,94,294,1:93,95,297,1:93,97,300,1:93,98,303,1:92,101,306,1:92,103,309,1:92,105,312,1:93,106,315,1:93,107,318,1:93,109,321,1:93,111,324,1:93,112,327,1:93,114,330,1:92,115,333,1:92,116,336,1:92,118,339,1:92,119,342,1:92,120,345,1:92,121,348,1:92,122,351,1:92,122,354,1:92,123,357,1:92,123,360,1:92,123,363,1:92,123,366,1:92,124,369,1:92,124,372,1:92,124,375,1:92,123,378,1:92,123,381,1:92,123,384,1:92,123,387,1:92,123,390,1:92,123,393,1:92,123,396,1:92,123,399,1:92,123,402,1:92,123,405,1:92,123,408,1:92,123,411,1:92,123,414,1:92,123,417,1:92,122,420,1:91,122,423,1:91,122,426,1:91,122,429,1:91,122,432,1:91,122,435,1:91,122,438,1:91,122,441,1:91,122,444,1:91,123,447,1:91,123,450,1:91,123,453,1:90,123,456,1:90,123,459,1:90,123,462,1:91,123,465,1:91,124,468,1:91,124,471,1:91,124,474,1:91,124,477,1:91,125,480,1:91,125,483,1:90,126,486,1:90,127,489,1:90,127,492,1:90,128,495,1:90,129,498,1:90,129,501,1:90,131,504,1:90,133,507,1:90,136,510,1:90,138,513,1:90,139,516,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject FR
if not os.path.isdir(path_results + '/T1/FR'):
    os.makedirs(path_results + '/T1/FR')
os.chdir(path_results + '/T1/FR')
sct.run('dcm2nii -o . -r N '+new_folder+'/FR/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 91,102,306,20:91,100,343,19:91,94,376,18:91,89,407,17:90,85,434,16:89,81,464,15:88,80,492,14:87,80,518,13:87,82,543,12:87,87,567,11:87,94,590,10:87,104,611,9:85,114,630,8:84,120,650,7:82,124,669,6:82,125,688,5:82,125,708,4:83,125,729,3:84,117,746,2:84,115,769,1:85,117,797,51:86,120,823,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 263 -end 840')
f_crop = open('crop.txt', 'w')
f_crop.write('263,840,90,505')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 94,99,0,1:94,99,3,1:94,99,6,1:93,98,9,1:94,97,12,1:94,97,15,1:93,96,18,1:93,96,21,1:93,96,24,1:93,95,27,1:93,94,30,1:92,93,33,1:93,92,36,1:93,92,39,1:92,91,42,1:92,91,45,1:92,90,48,1:92,89,51,1:91,89,54,1:92,88,57,1:92,88,60,1:91,87,63,1:91,87,66,1:92,87,69,1:92,88,72,1:92,88,75,1:91,87,78,1:91,87,81,1:91,87,84,1:91,87,87,1:92,86,90,1:92,86,93,1:91,86,96,1:91,86,99,1:91,85,102,1:91,84,105,1:91,84,108,1:91,83,111,1:91,83,114,1:91,82,117,1:91,82,120,1:91,82,123,1:91,82,126,1:91,81,129,1:91,81,132,1:91,80,135,1:91,79,138,1:90,79,141,1:90,79,144,1:91,78,147,1:91,78,150,1:91,78,153,1:91,78,156,1:90,77,159,1:90,77,162,1:90,77,165,1:90,77,168,1:90,76,171,1:90,76,174,1:90,76,177,1:90,75,180,1:90,75,183,1:90,75,186,1:90,74,189,1:90,74,192,1:89,74,195,1:89,74,198,1:89,74,201,1:89,73,204,1:89,73,207,1:89,73,210,1:89,73,213,1:89,73,216,1:89,73,219,1:88,73,222,1:88,73,225,1:88,73,228,1:88,72,231,1:88,72,234,1:88,72,237,1:88,72,240,1:88,73,243,1:88,73,246,1:87,73,249,1:87,73,252,1:87,73,255,1:87,74,258,1:87,75,261,1:87,75,264,1:87,75,267,1:87,75,270,1:87,75,273,1:87,76,276,1:87,76,279,1:87,77,282,1:87,77,285,1:87,77,288,1:87,78,291,1:87,79,294,1:87,79,297,1:87,80,300,1:87,80,303,1:87,81,306,1:87,82,309,1:87,83,312,1:87,84,315,1:87,85,318,1:87,86,321,1:87,87,324,1:87,88,327,1:87,89,330,1:87,91,333,1:87,92,336,1:88,93,339,1:88,94,342,1:87,96,345,1:87,97,348,1:87,98,351,1:87,99,354,1:86,101,357,1:86,102,360,1:85,103,363,1:85,104,366,1:84,104,369,1:84,106,372,1:84,106,375,1:84,108,378,1:84,109,381,1:84,110,384,1:84,111,387,1:84,112,390,1:84,113,393,1:84,114,396,1:84,114,399,1:84,115,402,1:83,115,405,1:83,116,408,1:83,116,411,1:83,116,414,1:83,117,417,1:83,117,420,1:83,117,423,1:83,117,426,1:83,117,429,1:83,117,432,1:83,117,435,1:83,117,438,1:83,117,441,1:83,117,444,1:83,117,447,1:82,115,450,1:82,115,453,1:82,115,456,1:83,115,459,1:83,115,462,1:83,114,465,1:83,114,468,1:84,113,471,1:84,113,474,1:83,113,477,1:84,112,480,1:84,112,483,1:84,111,486,1:84,111,489,1:84,111,492,1:84,111,495,1:84,110,498,1:84,109,501,1:85,109,504,1:85,110,507,1:84,110,510,1:85,110,513,1:85,109,516,1:85,108,519,1:85,108,522,1:85,108,525,1:85,108,528,1:86,107,531,1:86,107,534,1:85,108,537,1:85,108,540,1:85,108,543,1:85,108,546,1:85,108,549,1:85,108,552,1:85,108,555,1:85,108,558,1:85,108,561,1:85,108,564,1:85,109,567,1:85,111,570,1:85,113,573,1:86,115,576,1:86,117,577,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject GB
if not os.path.isdir(path_results + '/T1/GB'):
    os.makedirs(path_results + '/T1/GB')
os.chdir(path_results + '/T1/GB')
sct.run('dcm2nii -o . -r N '+new_folder+'/GB/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 94,83,93,20:95,82,125,19:95,79,154,18:96,76,181,17:96,73,205,16:96,72,230,15:96,72,253,14:96,76,275,13:96,84,298,12:96,91,319,11:94,100,339,10:92,110,359,9:92,117,378,8:91,121,395,7:91,123,411,6:91,122,428,5:91,120,445,4:90,118,463,3:90,113,478,2:89,112,500,1:88,113,527,51:86,115,554,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 55 -end 572')
f_crop = open('crop.txt', 'w')
f_crop.write('55,572,70,335')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 95,73,0,1:94,72,3,1:94,71,6,1:94,71,9,1:94,71,12,1:94,71,15,1:94,71,18,1:95,70,21,1:95,70,24,1:95,70,27,1:95,69,30,1:95,69,33,1:95,69,36,1:94,69,39,1:95,69,42,1:95,69,45,1:95,69,48,1:95,70,51,1:94,70,54,1:94,70,57,1:94,70,60,1:95,70,63,1:95,70,66,1:95,70,69,1:95,70,72,1:95,69,75,1:95,69,78,1:95,69,81,1:95,69,84,1:95,69,87,1:95,69,90,1:95,69,93,1:95,69,96,1:95,69,99,1:95,69,102,1:96,69,105,1:96,69,108,1:96,69,111,1:96,68,114,1:96,68,117,1:96,68,120,1:96,68,123,1:96,68,126,1:96,67,129,1:96,67,132,1:96,67,135,1:96,67,138,1:96,66,141,1:96,66,144,1:96,66,147,1:96,66,150,1:96,66,153,1:96,66,156,1:96,66,159,1:96,66,162,1:96,66,165,1:96,65,168,1:96,65,171,1:96,65,174,1:96,66,177,1:96,66,180,1:96,66,183,1:96,66,186,1:96,66,189,1:96,66,192,1:96,67,195,1:96,67,198,1:96,67,201,1:96,68,204,1:96,68,207,1:96,68,210,1:96,69,213,1:96,69,216,1:96,70,219,1:96,71,222,1:96,71,225,1:96,72,228,1:96,73,231,1:96,74,234,1:96,74,237,1:96,75,240,1:96,76,243,1:96,77,246,1:95,78,249,1:95,79,252,1:95,80,255,1:95,81,258,1:95,82,261,1:95,83,264,1:95,85,267,1:94,86,270,1:94,88,273,1:94,89,276,1:94,90,279,1:93,92,282,1:92,92,285,1:93,93,288,1:93,94,291,1:92,95,294,1:92,96,297,1:92,96,300,1:92,97,303,1:92,99,306,1:92,101,309,1:92,102,312,1:92,103,315,1:92,105,318,1:92,106,321,1:92,107,324,1:92,108,327,1:92,109,330,1:92,111,333,1:92,111,336,1:92,112,339,1:91,112,342,1:91,113,345,1:91,114,348,1:91,114,351,1:91,114,354,1:92,114,357,1:92,114,360,1:92,114,363,1:92,114,366,1:92,114,369,1:92,114,372,1:92,114,375,1:92,113,378,1:92,113,381,1:92,113,384,1:91,112,387,1:91,112,390,1:91,112,393,1:91,111,396,1:91,111,399,1:91,110,402,1:91,110,405,1:91,109,408,1:91,109,411,1:91,109,414,1:91,109,417,1:91,108,420,1:90,108,423,1:90,107,426,1:90,107,429,1:90,106,432,1:90,106,435,1:90,106,438,1:90,105,441,1:90,106,444,1:90,106,447,1:90,106,450,1:90,106,453,1:88,105,456,1:88,105,459,1:88,105,462,1:88,105,465,1:88,105,468,1:87,105,471,1:87,105,474,1:87,105,477,1:87,105,480,1:87,105,483,1:87,104,486,1:87,104,489,1:86,103,492,1:86,103,495,1:86,103,498,1:86,103,501,1:85,104,504,1:85,106,507,1:85,108,510,1:85,110,513,1:85,111,516,1:84,112,517,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm 36
if not os.path.isdir(path_results + '/T1/errsm_36'):
    os.makedirs(path_results + '/T1/errsm_36')
os.chdir(path_results + '/T1/errsm_36')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_36/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 87,75,85,20:87,70,118,19:87,66,151,18:88,63,180,17:88,62,208,16:88,60,236,15:89,62,264,14:89,65,289,13:89,72,315,12:89,81,339,11:88,92,361,10:87,103,383,9:86,114,403,8:85,122,419,7:85,127,437,6:85,130,454,5:85,129,473,4:86,128,494,3:86,126,510,2:86,123,536,1:87,123,565,51:89,126,589,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 606')
f_crop = open('crop.txt', 'w')
f_crop.write('0,606,150,535')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 83,82,0,1:83,82,3,1:83,81,6,1:83,81,9,1:83,81,12,1:83,80,15,1:83,80,18,1:84,80,21,1:84,80,24,1:84,80,27,1:84,80,30,1:84,80,33,1:84,80,36,1:84,79,39,1:85,78,42,1:85,77,45,1:85,77,48,1:85,76,51,1:85,76,54,1:85,76,57,1:86,75,60,1:86,74,63,1:86,73,66,1:86,73,69,1:86,73,72,1:86,73,75,1:86,72,78,1:87,70,81,1:87,70,84,1:87,69,87,1:87,69,90,1:87,69,93,1:87,69,96,1:87,68,99,1:87,68,102,1:87,67,105,1:87,66,108,1:87,64,111,1:87,64,114,1:87,64,117,1:87,64,120,1:87,64,123,1:87,64,126,1:87,64,129,1:87,63,132,1:87,63,135,1:87,63,138,1:87,63,141,1:87,63,144,1:87,62,147,1:87,61,150,1:87,61,153,1:88,60,156,1:88,59,159,1:88,59,162,1:88,59,165,1:88,59,168,1:88,58,171,1:88,58,174,1:88,58,177,1:88,58,180,1:88,58,183,1:88,58,186,1:88,58,189,1:88,58,192,1:88,57,195,1:88,57,198,1:88,57,201,1:88,57,204,1:88,57,207,1:88,57,210,1:88,56,213,1:88,56,216,1:88,56,219,1:88,56,222,1:88,56,225,1:88,56,228,1:88,56,231,1:88,56,234,1:88,56,237,1:89,56,240,1:89,56,243,1:89,56,246,1:89,56,249,1:89,57,252,1:89,57,255,1:89,57,258,1:89,58,261,1:89,58,264,1:89,58,267,1:89,59,270,1:89,59,273,1:89,59,276,1:89,60,279,1:89,60,282,1:89,61,285,1:89,61,288,1:89,62,291,1:89,62,294,1:89,62,297,1:89,63,300,1:89,65,303,1:90,66,306,1:90,66,309,1:89,67,312,1:89,68,315,1:89,69,318,1:89,70,321,1:90,72,324,1:90,72,327,1:89,73,330,1:89,75,333,1:89,75,336,1:89,77,339,1:89,78,342,1:89,79,345,1:89,80,348,1:89,82,351,1:89,83,354,1:89,85,357,1:89,87,360,1:89,88,363,1:89,89,366,1:89,91,369,1:89,93,372,1:88,94,375,1:88,96,378,1:88,97,381,1:88,99,384,1:87,101,387,1:87,103,390,1:87,104,393,1:87,105,396,1:87,108,399,1:87,109,402,1:86,111,405,1:86,113,408,1:86,113,411,1:86,115,414,1:86,117,417,1:86,117,420,1:85,119,423,1:85,120,426,1:85,120,429,1:85,121,432,1:85,121,435,1:85,122,438,1:85,123,441,1:85,123,444,1:85,123,447,1:85,124,450,1:85,125,453,1:85,125,456,1:85,125,459,1:85,125,462,1:85,125,465,1:85,125,468,1:85,125,471,1:85,124,474,1:85,124,477,1:85,123,480,1:85,123,483,1:85,123,486,1:85,122,489,1:86,122,492,1:86,122,495,1:86,121,498,1:86,121,501,1:86,121,504,1:86,121,507,1:86,121,510,1:86,120,513,1:86,120,516,1:86,119,519,1:86,119,522,1:86,119,525,1:86,118,528,1:86,118,531,1:86,118,534,1:86,118,537,1:86,118,540,1:86,119,543,1:86,119,546,1:86,118,549,1:87,116,552,1:87,115,555,1:88,115,558,1:88,115,561,1:89,114,564,1:89,114,567,1:89,114,570,1:89,115,573,1:89,115,576,1:89,115,579,1:89,116,582,1:89,116,585,1:89,116,588,1:89,117,591,1:90,118,594,1:90,118,597,1:89,120,600,1:90,123,603,1:90,126,606,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_37
if not os.path.isdir(path_results + '/T1/errsm_37'):
    os.makedirs(path_results + '/T1/errsm_37')
os.chdir(path_results + '/T1/errsm_37')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_37/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 78,95,190,20:79,89,218,19:79,85,245,18:79,81,270,17:79,79,294,16:79,78,318,15:78,79,341,14:78,82,364,13:79,86,385,12:79,92,405,11:79,98,424,10:80,104,442,9:81,108,457,8:81,111,472,7:81,112,486,6:82,113,500,5:82,113,516,4:83,113,530,3:84,112,549,2:84,114,564,1:85,118,583,51:85,124,603,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 100 -end 618')
f_crop = open('crop.txt', 'w')
f_crop.write('100,618,80,460')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 75,106,0,1:75,105,3,1:75,105,6,1:75,105,9,1:76,104,12,1:76,103,15,1:76,103,18,1:75,103,21,1:75,102,24,1:75,101,27,1:75,101,30,1:75,101,33,1:75,100,36,1:75,100,39,1:75,99,42,1:75,98,45,1:75,98,48,1:75,97,51,1:75,96,54,1:75,95,57,1:76,93,60,1:76,93,63,1:76,93,66,1:76,93,69,1:76,92,72,1:76,92,75,1:76,91,78,1:77,91,81,1:77,90,84,1:77,90,87,1:78,89,90,1:78,89,93,1:78,88,96,1:78,88,99,1:78,87,102,1:78,87,105,1:78,86,108,1:78,86,111,1:78,85,114,1:78,85,117,1:78,84,120,1:79,84,123,1:79,83,126,1:79,83,129,1:79,83,132,1:79,83,135,1:79,82,138,1:79,81,141,1:79,80,144,1:79,80,147,1:79,80,150,1:79,79,153,1:79,79,156,1:79,79,159,1:79,78,162,1:79,78,165,1:79,78,168,1:79,77,171,1:79,77,174,1:79,77,177,1:79,76,180,1:79,76,183,1:79,76,186,1:79,76,189,1:79,75,192,1:79,75,195,1:79,75,198,1:79,74,201,1:80,74,204,1:80,74,207,1:79,74,210,1:79,74,213,1:79,74,216,1:79,74,219,1:79,74,222,1:79,75,225,1:79,75,228,1:79,75,231,1:79,75,234,1:79,75,237,1:79,76,240,1:79,76,243,1:79,76,246,1:79,76,249,1:79,77,252,1:79,77,255,1:79,77,258,1:79,78,261,1:78,78,264,1:78,78,267,1:78,79,270,1:78,80,273,1:78,81,276,1:79,81,279,1:78,82,282,1:79,82,285,1:78,83,288,1:78,84,291,1:79,85,294,1:79,85,297,1:79,87,300,1:79,87,303,1:79,88,306,1:79,89,309,1:79,90,312,1:79,91,315,1:79,92,318,1:79,93,321,1:79,94,324,1:79,95,327,1:79,96,330,1:80,96,333,1:80,97,336,1:80,99,339,1:80,100,342,1:80,101,345,1:80,102,348,1:80,103,351,1:80,103,354,1:80,103,357,1:81,104,360,1:81,105,363,1:81,106,366,1:81,106,369,1:81,107,372,1:81,107,375,1:81,107,378,1:81,107,381,1:81,108,384,1:82,108,387,1:82,108,390,1:82,108,393,1:82,108,396,1:82,108,399,1:82,109,402,1:82,109,405,1:82,109,408,1:82,109,411,1:82,109,414,1:82,109,417,1:83,108,420,1:83,109,423,1:83,109,426,1:83,109,429,1:83,109,432,1:83,109,435,1:84,108,438,1:84,108,441,1:84,107,444,1:84,107,447,1:84,107,450,1:84,107,453,1:84,107,456,1:84,107,459,1:84,107,462,1:84,108,465,1:84,107,468,1:84,107,471,1:84,107,474,1:85,108,477,1:85,109,480,1:85,109,483,1:85,110,486,1:85,111,489,1:85,112,492,1:85,113,495,1:85,114,498,1:85,115,501,1:85,116,504,1:86,117,507,1:86,118,510,1:86,120,513,1:86,124,516,1:86,127,518,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_44
if not os.path.isdir(path_results + '/T1/errsm_44'):
    os.makedirs(path_results + '/T1/errsm_44')
os.chdir(path_results + '/T1/errsm_44')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_44/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 76,59,83,20:77,56,115,19:76,55,144,18:75,52,172,17:75,51,197,16:76,49,222,15:77,49,247,14:79,53,270,13:82,59,291,12:84,69,312,11:85,81,330,10:86,94,349,9:87,109,368,8:86,118,382,7:86,127,397,6:86,128,411,5:85,128,429,4:84,127,447,3:83,123,469,2:83,122,488,1:82,127,518,51:83,128,540,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 559')
f_crop = open('crop.txt', 'w')
f_crop.write('0,559,100,440')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 78,63,0,1:78,63,3,1:78,63,6,1:77,62,9,1:77,61,12,1:77,60,15,1:77,60,18,1:77,59,21,1:77,60,24,1:77,59,27,1:77,59,30,1:77,58,33,1:77,57,36,1:77,57,39,1:77,57,42,1:77,56,45,1:77,56,48,1:77,55,51,1:77,55,54,1:77,54,57,1:77,53,60,1:76,53,63,1:76,53,66,1:77,53,69,1:77,53,72,1:77,53,75,1:77,53,78,1:77,53,81,1:77,53,84,1:77,52,87,1:77,51,90,1:77,51,93,1:77,51,96,1:77,51,99,1:77,51,102,1:77,51,105,1:77,51,108,1:77,51,111,1:77,51,114,1:77,51,117,1:77,50,120,1:77,50,123,1:77,50,126,1:77,50,129,1:77,50,132,1:77,50,135,1:77,50,138,1:76,50,141,1:76,50,144,1:76,50,147,1:76,49,150,1:76,49,153,1:76,49,156,1:76,49,159,1:76,49,162,1:76,48,165,1:76,48,168,1:76,48,171,1:76,48,174,1:76,48,177,1:76,47,180,1:75,47,183,1:75,47,186,1:75,47,189,1:75,46,192,1:75,46,195,1:75,46,198,1:75,46,201,1:75,46,204,1:75,46,207,1:75,46,210,1:75,46,213,1:76,45,216,1:76,45,219,1:75,45,222,1:75,45,225,1:75,44,228,1:76,44,231,1:76,45,234,1:76,45,237,1:77,45,240,1:77,45,243,1:78,46,246,1:77,46,249,1:78,46,252,1:78,46,255,1:78,47,258,1:79,47,261,1:79,48,264,1:80,49,267,1:80,49,270,1:80,50,273,1:80,50,276,1:81,52,279,1:81,52,282,1:81,53,285,1:81,54,288,1:82,55,291,1:82,56,294,1:82,58,297,1:82,59,300,1:83,60,303,1:83,61,306,1:83,62,309,1:84,64,312,1:84,66,315,1:84,68,318,1:84,69,321,1:84,72,324,1:85,73,327,1:85,76,330,1:85,77,333,1:85,80,336,1:85,82,339,1:85,84,342,1:85,86,345,1:85,87,348,1:85,90,351,1:86,92,354,1:86,95,357,1:86,98,360,1:86,99,363,1:86,102,366,1:86,104,369,1:86,107,372,1:86,108,375,1:87,110,378,1:87,112,381,1:87,114,384,1:87,116,387,1:87,117,390,1:87,119,393,1:86,120,396,1:86,120,399,1:87,122,402,1:86,122,405,1:86,123,408,1:86,123,411,1:86,123,414,1:86,123,417,1:85,123,420,1:85,123,423,1:85,123,426,1:85,123,429,1:85,123,432,1:85,123,435,1:85,122,438,1:85,122,441,1:84,122,444,1:84,121,447,1:84,120,450,1:84,120,453,1:84,120,456,1:84,119,459,1:84,119,462,1:84,119,465,1:84,118,468,1:84,117,471,1:83,117,474,1:83,117,477,1:83,116,480,1:83,116,483,1:83,116,486,1:83,116,489,1:83,116,492,1:83,116,495,1:83,116,498,1:83,116,501,1:83,115,504,1:83,115,507,1:83,115,510,1:83,116,513,1:83,117,516,1:83,117,519,1:83,118,522,1:83,118,525,1:83,119,528,1:83,120,531,1:83,120,534,1:83,120,537,1:83,119,540,1:83,121,543,1:83,121,546,1:83,122,549,1:83,123,552,1:83,127,555,1:83,130,558,1:83,132,559,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject AM
if not os.path.isdir(path_results + '/T1/AM'):
    os.makedirs(path_results + '/T1/AM')
os.chdir(path_results + '/T1/AM')
sct.run('dcm2nii -o . -r N '+new_folder+'/AM/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 78,87,42,20:75,84,76,19:74,83,107,18:73,82,137,17:73,81,164,16:73,81,191,15:74,82,217,14:76,85,243,13:79,91,268,12:81,97,290,11:83,106,313,10:84,113,334,9:85,118,355,8:85,121,372,7:86,123,388,6:85,123,403,5:85,122,420,4:86,120,440,3:87,118,462,2:90,116,481,1:90,118,508,51:88,119,532,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 550')
f_crop = open('crop.txt', 'w')
f_crop.write('0,550,70,480')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 81,87,0,1:81,87,3,1:80,87,6,1:80,86,9,1:80,85,12,1:80,85,15,1:80,84,18,1:80,84,21,1:80,84,24,1:80,83,27,1:80,83,30,1:79,83,33,1:79,83,36,1:78,82,39,1:78,82,42,1:78,82,45,1:78,81,48,1:78,81,51,1:78,81,54,1:77,81,57,1:77,80,60,1:77,80,63,1:77,80,66,1:76,79,69,1:76,79,72,1:76,78,75,1:76,78,78,1:76,78,81,1:75,79,84,1:75,79,87,1:75,79,90,1:75,79,93,1:75,78,96,1:75,78,99,1:75,78,102,1:75,78,105,1:75,78,108,1:74,78,111,1:74,78,114,1:74,78,117,1:74,78,120,1:74,77,123,1:74,77,126,1:73,77,129,1:73,77,132,1:73,77,135,1:73,77,138,1:73,76,141,1:73,76,144,1:73,76,147,1:73,76,150,1:73,76,153,1:73,76,156,1:73,76,159,1:73,76,162,1:73,76,165,1:73,77,168,1:73,76,171,1:73,76,174,1:73,76,177,1:73,76,180,1:73,76,183,1:73,76,186,1:73,76,189,1:73,76,192,1:73,76,195,1:73,76,198,1:73,77,201,1:73,77,204,1:73,77,207,1:74,77,210,1:74,77,213,1:75,77,216,1:75,78,219,1:75,78,222,1:75,78,225,1:75,79,228,1:76,79,231,1:76,80,234,1:76,80,237,1:76,80,240,1:76,81,243,1:76,81,246,1:77,82,249,1:77,82,252,1:78,83,255,1:78,84,258,1:78,85,261,1:78,85,264,1:79,86,267,1:79,87,270,1:79,87,273,1:80,88,276,1:80,89,279,1:80,90,282,1:80,91,285,1:81,92,288,1:81,93,291,1:81,94,294,1:81,95,297,1:82,96,300,1:82,97,303,1:82,99,306,1:83,99,309,1:83,100,312,1:83,102,315,1:83,103,318,1:84,104,321,1:84,105,324,1:84,106,327,1:84,107,330,1:84,108,333,1:84,109,336,1:84,109,339,1:84,110,342,1:84,111,345,1:84,112,348,1:84,112,351,1:84,113,354,1:84,114,357,1:85,114,360,1:85,115,363,1:85,116,366,1:85,116,369,1:85,117,372,1:85,117,375,1:85,118,378,1:85,119,381,1:85,119,384,1:86,120,387,1:86,119,390,1:86,119,393,1:86,119,396,1:86,119,399,1:86,119,402,1:86,118,405,1:86,118,408,1:85,117,411,1:85,117,414,1:85,117,417,1:85,117,420,1:85,117,423,1:85,116,426,1:85,116,429,1:85,116,432,1:85,116,435,1:85,115,438,1:86,115,441,1:86,115,444,1:86,114,447,1:87,114,450,1:86,114,453,1:87,113,456,1:87,113,459,1:87,113,462,1:88,112,465,1:88,112,468,1:89,111,471,1:89,111,474,1:89,111,477,1:89,110,480,1:90,110,483,1:90,110,486,1:91,110,489,1:91,108,492,1:91,106,495,1:91,107,498,1:90,107,501,1:90,107,504,1:90,108,507,1:90,108,510,1:90,108,513,1:90,109,516,1:90,109,519,1:90,110,522,1:90,110,525,1:90,110,528,1:89,111,531,1:89,111,534,1:89,111,537,1:89,111,540,1:89,112,543,1:88,113,546,1:88,116,549,1:88,119,550,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject HB
if not os.path.isdir(path_results + '/T1/HB'):
    os.makedirs(path_results + '/T1/HB')
os.chdir(path_results + '/T1/HB')
sct.run('dcm2nii -o . -r N '+new_folder+'/HB/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 90,88,25,20:89,84,62,19:88,79,96,18:88,78,127,17:88,78,156,16:87,79,185,15:87,81,214,14:85,86,241,13:84,93,268,12:82,101,292,11:80,110,314,10:79,118,336,9:77,124,358,8:76,128,376,7:76,127,393,6:76,128,411,5:76,127,430,4:77,126,450,3:77,124,468,2:78,121,490,1:77,120,517,51:77,123,542,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 556')
f_crop = open('crop.txt', 'w')
f_crop.write('0,556,70,485')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 91,91,0,1:91,90,3,1:91,89,6,1:91,89,9,1:91,89,12,1:90,88,15,1:90,87,18,1:90,86,21,1:90,85,24,1:90,84,27,1:90,83,30,1:90,82,33,1:90,82,36,1:90,82,39,1:90,82,42,1:89,81,45,1:89,81,48,1:89,81,51,1:90,80,54,1:90,80,57,1:90,80,60,1:89,79,63,1:89,79,66,1:89,79,69,1:89,78,72,1:89,78,75,1:89,77,78,1:89,77,81,1:89,77,84,1:89,76,87,1:89,76,90,1:88,75,93,1:88,75,96,1:88,75,99,1:88,75,102,1:88,75,105,1:88,74,108,1:88,74,111,1:88,74,114,1:88,74,117,1:88,74,120,1:88,74,123,1:88,74,126,1:88,74,129,1:88,74,132,1:88,74,135,1:88,74,138,1:88,74,141,1:88,74,144,1:88,74,147,1:88,74,150,1:88,74,153,1:88,74,156,1:88,74,159,1:88,74,162,1:88,74,165,1:88,74,168,1:88,74,171,1:88,74,174,1:88,74,177,1:88,74,180,1:88,74,183,1:88,74,186,1:88,74,189,1:88,74,192,1:87,75,195,1:87,75,198,1:87,76,201,1:87,76,204,1:87,76,207,1:87,77,210,1:87,77,213,1:87,77,216,1:86,78,219,1:86,79,222,1:86,79,225,1:86,79,228,1:86,79,231,1:86,80,234,1:86,80,237,1:85,81,240,1:85,82,243,1:85,82,246,1:85,83,249,1:85,84,252,1:85,85,255,1:84,86,258,1:84,87,261,1:84,87,264,1:83,88,267,1:83,89,270,1:83,90,273,1:83,91,276,1:82,92,279,1:82,93,282,1:82,95,285,1:82,96,288,1:81,96,291,1:81,98,294,1:81,99,297,1:81,100,300,1:81,101,303,1:80,102,306,1:80,104,309,1:80,104,312,1:80,106,315,1:80,107,318,1:80,109,321,1:80,110,324,1:80,111,327,1:79,112,330,1:79,113,333,1:79,114,336,1:79,115,339,1:78,116,342,1:78,116,345,1:78,117,348,1:78,118,351,1:78,119,354,1:78,120,357,1:77,120,360,1:77,121,363,1:77,121,366,1:77,122,369,1:77,123,372,1:77,123,375,1:77,123,378,1:77,123,381,1:76,123,384,1:76,123,387,1:76,124,390,1:76,124,393,1:76,124,396,1:76,124,399,1:76,124,402,1:76,124,405,1:76,124,408,1:76,124,411,1:76,124,414,1:76,124,417,1:76,124,420,1:76,124,423,1:76,124,426,1:76,124,429,1:76,123,432,1:76,123,435,1:76,123,438,1:76,123,441,1:76,123,444,1:78,122,447,1:77,122,450,1:77,121,453,1:77,121,456,1:77,121,459,1:77,120,462,1:78,120,465,1:78,119,468,1:78,118,471,1:79,118,474,1:79,117,477,1:79,116,480,1:79,116,483,1:79,115,486,1:78,115,489,1:78,115,492,1:78,115,495,1:78,115,498,1:78,114,501,1:79,113,504,1:79,113,507,1:79,113,510,1:79,113,513,1:79,113,516,1:79,113,519,1:78,113,522,1:78,113,525,1:78,113,528,1:78,113,531,1:79,112,534,1:79,112,537,1:79,112,540,1:79,113,543,1:79,112,546,1:79,114,549,1:78,116,552,1:78,119,555,1:78,121,556,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject PA
if not os.path.isdir(path_results + '/T1/PA'):
    os.makedirs(path_results + '/T1/PA')
os.chdir(path_results + '/T1/PA')
sct.run('dcm2nii -o . -r N '+new_folder+'/PA/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 81,76,89,20:80,68,121,19:79,63,147,18:80,59,175,17:79,58,200,16:78,57,224,15:79,60,248,14:79,64,272,13:80,71,294,12:80,79,315,11:80,87,334,10:79,98,355,9:80,107,370,8:80,115,385,7:80,119,398,6:81,122,412,5:82,122,428,4:83,120,446,3:83,118,460,2:84,114,479,1:84,111,512,51:83,110,533,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 550')
f_crop = open('crop.txt', 'w')
f_crop.write('0,550,85,480')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 86,92,0,1:86,92,3,1:85,92,6,1:85,92,9,1:85,91,12,1:85,90,15,1:84,89,18,1:84,89,21,1:84,88,24,1:84,87,27,1:84,87,30,1:83,86,33,1:83,86,36,1:83,85,39,1:83,84,42,1:83,82,45,1:82,82,48,1:82,80,51,1:82,79,54,1:82,78,57,1:82,77,60,1:82,76,63,1:82,75,66,1:82,74,69,1:81,73,72,1:81,73,75,1:81,73,78,1:81,73,81,1:81,72,84,1:81,71,87,1:81,71,90,1:81,70,93,1:81,70,96,1:81,69,99,1:81,69,102,1:81,67,105,1:81,67,108,1:80,66,111,1:80,65,114,1:80,65,117,1:80,64,120,1:80,63,123,1:80,63,126,1:80,62,129,1:80,61,132,1:80,61,135,1:80,61,138,1:79,60,141,1:79,60,144,1:79,59,147,1:79,59,150,1:79,59,153,1:79,58,156,1:80,57,159,1:80,57,162,1:80,56,165,1:80,56,168,1:80,56,171,1:79,55,174,1:79,55,177,1:80,55,180,1:80,55,183,1:79,55,186,1:79,54,189,1:79,54,192,1:79,54,195,1:79,54,198,1:79,54,201,1:79,54,204,1:79,54,207,1:79,54,210,1:79,54,213,1:79,54,216,1:79,54,219,1:79,54,222,1:79,54,225,1:79,55,228,1:79,55,231,1:79,55,234,1:79,55,237,1:79,55,240,1:79,56,243,1:79,56,246,1:79,56,249,1:79,57,252,1:79,57,255,1:78,58,258,1:78,58,261,1:78,59,264,1:79,60,267,1:79,60,270,1:79,61,273,1:79,62,276,1:79,62,279,1:79,63,282,1:79,64,285,1:79,65,288,1:79,66,291,1:79,66,294,1:79,67,297,1:79,68,300,1:80,70,303,1:80,71,306,1:80,72,309,1:80,73,312,1:80,74,315,1:80,75,318,1:80,77,321,1:80,78,324,1:80,80,327,1:80,82,330,1:80,82,333,1:80,84,336,1:80,86,339,1:80,87,342,1:80,88,345,1:80,90,348,1:80,91,351,1:80,94,354,1:79,96,357,1:79,97,360,1:79,99,363,1:79,101,366,1:80,103,369,1:80,104,372,1:79,106,375,1:79,107,378,1:79,109,381,1:79,110,384,1:79,111,387,1:79,112,390,1:79,113,393,1:79,114,396,1:79,115,399,1:79,116,402,1:80,116,405,1:80,117,408,1:80,117,411,1:80,118,414,1:81,118,417,1:81,118,420,1:81,118,423,1:81,118,426,1:81,118,429,1:82,118,432,1:82,117,435,1:82,117,438,1:83,117,441,1:83,116,444,1:83,116,447,1:83,115,450,1:83,115,453,1:83,114,456,1:83,113,459,1:84,112,462,1:84,112,465,1:84,110,468,1:84,110,471,1:84,110,474,1:85,109,477,1:85,109,480,1:85,108,483,1:85,108,486,1:85,107,489,1:85,106,492,1:84,105,495,1:84,105,498,1:84,105,501,1:84,105,504,1:84,104,507,1:83,103,510,1:83,103,513,1:83,103,516,1:83,103,519,1:83,103,522,1:83,103,525,1:83,103,528,1:83,102,531,1:82,101,534,1:82,101,537,1:82,102,540,1:82,103,543,1:82,106,546,1:83,111,549,1:83,111,550,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')


# Preprocessing for subject errsm_43
if not os.path.isdir(path_results + '/T1/errsm_43'):
    os.makedirs(path_results + '/T1/errsm_43')
os.chdir(path_results + '/T1/errsm_43')
sct.run('dcm2nii -o . -r N '+new_folder+'/errsm_43/T1/*.dcm')
sct.run('mv *.nii.gz data.nii.gz')
sct.run('sct_image -i data.nii.gz -setorient RPI')
sct.run('sct_label_utils -i data_RPI.nii.gz -o labels_vertebral.nii.gz -t create -x 76,75,75,20:76,73,109,19:76,69,140,18:76,65,167,17:76,63,194,16:76,62,219,15:76,61,245,14:76,63,269,13:78,68,292,12:79,74,314,11:80,82,336,10:82,90,356,9:83,100,375,8:84,107,392,7:87,111,407,6:88,114,423,5:89,116,441,4:90,116,458,3:90,116,472,2:91,118,494,1:88,124,520,51:87,129,542,50')
sct.run('sct_crop_image -i data_RPI.nii.gz -o data_RPI_crop.nii.gz -dim 2 -start 0 -end 558')
f_crop = open('crop.txt', 'w')
f_crop.write('0,558,80,490')
f_crop.close()
sct.run('sct_label_utils -i data_RPI_crop.nii.gz -o centerline_propseg_RPI.nii.gz -t create -x 79,77,0,1:79,77,3,1:79,76,6,1:79,75,9,1:79,75,12,1:79,75,15,1:79,75,18,1:78,75,21,1:78,75,24,1:78,75,27,1:78,75,30,1:78,74,33,1:78,74,36,1:78,73,39,1:78,73,42,1:77,73,45,1:77,73,48,1:77,73,51,1:77,72,54,1:77,72,57,1:77,72,60,1:77,72,63,1:77,72,66,1:77,72,69,1:77,71,72,1:77,71,75,1:77,71,78,1:77,70,81,1:77,70,84,1:77,70,87,1:77,70,90,1:77,70,93,1:77,69,96,1:77,69,99,1:77,69,102,1:76,68,105,1:76,68,108,1:76,67,111,1:76,67,114,1:76,67,117,1:76,67,120,1:76,66,123,1:76,66,126,1:76,66,129,1:76,66,132,1:76,65,135,1:76,65,138,1:76,64,141,1:76,64,144,1:76,63,147,1:76,63,150,1:76,63,153,1:76,62,156,1:76,62,159,1:76,62,162,1:76,62,165,1:76,61,168,1:76,61,171,1:76,61,174,1:76,60,177,1:76,60,180,1:76,59,183,1:76,59,186,1:76,59,189,1:76,59,192,1:76,59,195,1:76,59,198,1:76,59,201,1:76,58,204,1:76,58,207,1:76,58,210,1:76,58,213,1:76,57,216,1:76,57,219,1:76,57,222,1:76,57,225,1:76,57,228,1:76,57,231,1:76,58,234,1:76,58,237,1:76,58,240,1:76,58,243,1:76,58,246,1:76,58,249,1:76,59,252,1:76,59,255,1:76,59,258,1:76,59,261,1:76,59,264,1:76,59,267,1:77,60,270,1:77,60,273,1:77,61,276,1:77,61,279,1:77,62,282,1:77,63,285,1:77,63,288,1:78,64,291,1:77,65,294,1:78,66,297,1:78,66,300,1:78,67,303,1:78,68,306,1:78,69,309,1:79,70,312,1:79,71,315,1:79,72,318,1:80,73,321,1:80,74,324,1:80,75,327,1:80,76,330,1:80,77,333,1:80,78,336,1:80,79,339,1:81,80,342,1:81,82,345,1:81,83,348,1:82,84,351,1:82,86,354,1:82,87,357,1:82,88,360,1:82,89,363,1:82,91,366,1:83,92,369,1:83,93,372,1:83,96,375,1:83,97,378,1:83,98,381,1:84,99,384,1:84,101,387,1:84,102,390,1:84,103,393,1:85,104,396,1:85,104,399,1:86,105,402,1:85,106,405,1:86,107,408,1:87,108,411,1:87,109,414,1:87,109,417,1:87,109,420,1:88,110,423,1:88,110,426,1:88,110,429,1:88,110,432,1:88,111,435,1:89,111,438,1:89,111,441,1:89,111,444,1:89,111,447,1:89,111,450,1:89,111,453,1:90,111,456,1:90,111,459,1:90,111,462,1:90,111,465,1:90,111,468,1:90,111,471,1:90,111,474,1:91,111,477,1:91,111,480,1:91,110,483,1:91,110,486,1:91,110,489,1:91,111,492,1:91,112,495,1:90,113,498,1:90,113,501,1:90,112,504,1:90,110,507,1:90,112,510,1:90,113,513,1:89,114,516,1:89,114,519,1:89,115,522,1:89,116,525,1:89,116,528,1:88,117,531,1:88,119,534,1:88,120,537,1:87,120,540,1:87,121,543,1:87,122,546,1:87,122,549,1:87,124,552,1:86,128,555,1:86,130,558,1')
os.remove('data.nii.gz')
os.remove('data_RPI.nii.gz')
os.remove('data_RPI_crop.nii.gz')
os.chdir('../..')

